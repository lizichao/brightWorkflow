(function() {
    window.NEJ = window.NEJ || {};
    NEJ.O = {};
    NEJ.R = [];
    NEJ.F = function() {
        return ! 1
    };
    NEJ.P = function(zc) {
        if (!zc || !zc.length) return null;
        var bor = window;
        for (var a = zc.split("."), l = a.length, i = a[0] == "window" ? 1 : 0; i < l; bor = bor[a[i]] = bor[a[i]] || {},
        i++);
        return bor
    };
    NEJ.Q = function(La, zc) {
        La = La || NEJ.O;
        var dc = zc.split(".");
        for (var i = 0,
        l = dc.length; i < l; i++) {
            La = La[dc[i]];
            if (!La) break
        }
        return La
    };
    NEJ.C = function() {
        var bUr = function() {
            return NEJ.O.toString.call(arguments[0]) != "[object Function]"
        };
        var bVj = function(bG, dF) {
            for (var x in dF) if (bG == dF[x]) return x;
            return null
        };
        var bRJ = {
            hk: 0,
            bF: 1,
            bL: 2,
            bP: 3,
            bHO: 4,
            cw: 5,
            cG: 6,
            cm: 7
        },
        bzl = {
            hy: 0,
            bI: 1,
            bO: 2,
            bQ: 3,
            dnM: 4,
            Za: 5,
            TF: 6,
            Ng: 7
        };
        return function() {
            var eI = function() {
                this.bVl();
                return this.hk.apply(this, arguments)
            };
            eI.prototype.bVl = NEJ.F;
            eI.prototype.hk = NEJ.F;
            eI.bu = function(ry, bVq) {
                if (bUr(ry)) return;
                if (bVq == null || !!bVq) NEJ.X(this, ry, bUr);
                this.cKQ = ry;
                this.cE = ry.prototype;
                var dO = function() {};
                dO.prototype = ry.prototype;
                this.prototype = new dO;
                var yo = this.prototype;
                yo.constructor = this;
                var dh;
                for (var x in bRJ) {
                    dh = bVj(bRJ[x], bzl);
                    if (!dh || !this.cE[x]) continue;
                    yo[x] = function(cl) {
                        return function() {
                            this[cl].apply(this, arguments)
                        }
                    } (dh)
                }
                var buG = {};
                for (var x in bzl) {
                    dh = bVj(bzl[x], bRJ);
                    if (!dh || !this.cE[dh]) continue;
                    buG[dh] = ry;
                    yo[x] = function(cl) {
                        return function() {
                            var cL, dO = this.bSa[cl],
                            buE = dO.prototype[cl];
                            this.bSa[cl] = dO.cKQ || ry;
                            if ( !! buE) cL = buE.apply(this, arguments);
                            this.bSa[cl] = ry;
                            return cL
                        }
                    } (dh)
                }
                yo.bVl = function() {
                    this.bSa = NEJ.X({},
                    buG)
                };
                yo.dnA = yo.hy;
                return yo
            };
            return eI
        }
    } ();
    NEJ.X = function(jj, eH, hI) {
        if (!jj || !eH) return jj;
        hI = hI || NEJ.F;
        for (var x in eH) {
            if (eH.hasOwnProperty(x) && !hI(eH[x], x)) jj[x] = eH[x]
        }
        return jj
    };
    NEJ.EX = function(jj, eH) {
        if (!jj || !eH) return jj;
        for (var x in jj) {
            if (jj.hasOwnProperty(x) && eH[x] != null) jj[x] = eH[x]
        }
        return jj
    };
    var YB = Function.prototype;
    YB.fD = function(bwX, byF) {
        var f = NEJ.F,
        byF = byF || f,
        bwX = bwX || f,
        ec = this;
        return function() {
            var bj = {
                args: NEJ.R.slice.call(arguments, 0)
            };
            bwX(bj);
            if (!bj.stopped) {
                bj.value = ec.apply(this, bj.args);
                byF(bj)
            }
            return bj.value
        }
    };
    YB.Z = function() {
        var cs = arguments,
        jj = arguments[0],
        bhv = this;
        return function() {
            var xJ = NEJ.R.slice.call(cs, 1);
            NEJ.R.push.apply(xJ, arguments);
            return bhv.apply(jj || window, xJ)
        }
    };
    YB.Ja = function() {
        var cs = arguments,
        jj = NEJ.R.shift.call(cs),
        bhv = this;
        return function() {
            NEJ.R.push.apply(arguments, cs);
            return bhv.apply(jj || window, arguments)
        }
    };
    var YB = String.prototype;
    if (!YB.trim) {
        YB.trim = function() {
            var ep = /(?:^\s+)|(?:\s+$)/g;
            return function() {
                return this.replace(ep, "")
            }
        } ()
    }
    if (!window.MWF) window.MWF = NEJ;
    if (!window.mwf) window.mwf = NEJ.P("nej");
    if (!window.console) {
        NEJ.P("console").log = NEJ.F;
        NEJ.P("console").error = NEJ.F
    }
    var lt, gt, amp, nbsp, quot, apos, copy, reg
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bs = bq("nej.p"),
    buj = window.navigator.platform,
    xw = window.navigator.userAgent;
    var oq = {
        mac: buj,
        win: buj,
        linux: buj,
        ipad: xw,
        ipod: xw,
        iphone: buj,
        android: xw
    };
    bs.Ti = oq;
    for (var x in oq) oq[x] = (new RegExp(x, "i")).test(oq[x]);
    oq.ios = oq.ipad || oq.iphone || oq.ipod;
    oq.tablet = oq.ipad;
    oq.desktop = oq.mac || oq.win || oq.linux && !oq.android;
    var jo = {
        engine: "unknow",
        release: "unknow",
        browser: "unknow",
        version: "unknow",
        prefix: {
            css: "",
            pro: "",
            clz: ""
        }
    };
    bs.Dz = jo;
    if (/msie\s+(.*?);/i.test(xw) || /trident\/.+rv:([\d\.]+)/i.test(xw)) {
        jo.engine = "trident";
        jo.browser = "ie";
        jo.version = RegExp.$1;
        jo.prefix = {
            css: "ms",
            pro: "ms",
            clz: "MS",
            evt: "MS"
        };
        var gH = {
            6 : "2.0",
            7 : "3.0",
            8 : "4.0",
            9 : "5.0",
            10 : "6.0",
            11 : "7.0"
        };
        jo.release = gH[document.documentMode] || gH[parseInt(jo.version)]
    } else if (/webkit\/?([\d.]+?)(?=\s|$)/i.test(xw)) {
        jo.engine = "webkit";
        jo.release = RegExp.$1 || "";
        jo.prefix = {
            css: "webkit",
            pro: "webkit",
            clz: "WebKit"
        }
    } else if (/rv\:(.*?)\)\s+gecko\//i.test(xw)) {
        jo.engine = "gecko";
        jo.release = RegExp.$1 || "";
        jo.browser = "firefox";
        jo.prefix = {
            css: "Moz",
            pro: "moz",
            clz: "Moz"
        };
        if (/firefox\/(.*?)(?=\s|$)/i.test(xw)) jo.version = RegExp.$1 || ""
    } else if (/presto\/(.*?)\s/i.test(xw)) {
        jo.engine = "presto";
        jo.release = RegExp.$1 || "";
        jo.browser = "opera";
        jo.prefix = {
            css: "O",
            pro: "o",
            clz: "O"
        };
        if (/version\/(.*?)(?=\s|$)/i.test(xw)) jo.version = RegExp.$1 || ""
    }
    if (jo.browser == "unknow") {
        var gH = ["chrome", "maxthon", "safari"];
        for (var i = 0,
        l = gH.length,
        cl; i < l; i++) {
            cl = gH[i] == "safari" ? "version": gH[i];
            if ((new RegExp(cl + "/(.*?)(?=\\s|$)", "i")).test(xw)) {
                jo.browser = gH[i];
                jo.version = RegExp.$1.trim();
                break
            }
        }
    }
    bs.bVz = {};
    var btT = jo.engine != "trident";
    bs.Ek = {
        gecko: jo.engine != "gecko",
        webkit: jo.engine != "webkit",
        presto: jo.engine != "presto",
        trident0: btT || jo.release > "2.0",
        trident1: btT || jo.release < "6.0",
        trident2: btT || jo.release > "3.0",
        trident: btT || jo.release >= "6.0"
    }
})(); (function() {
    var fL = NEJ.P("nej.c"),
    cP = {};
    var bvW = function() {
        var ep = /^([\w]+?:\/\/.*?(?=\/|$))/i;
        return function(cJ) {
            cJ = cJ || "";
            if (ep.test(cJ)) return RegExp.$1;
            return location.protocol + "//" + location.host
        }
    } ();
    var bgI = function() {
        var bVT = function(bH, dF) {
            if (!bH || !bH.length) return;
            for (var i = 0,
            l = bH.length,
            WK; i < l; i++) {
                WK = bH[i];
                if (WK.indexOf("://") > 0) dF[bvW(WK)] = WK
            }
        };
        var lD = {
            portrait: {
                name: "portrait",
                dft: "portrait/"
            },
            "ajax.swf": {
                name: "ajax",
                dft: "nej_proxy_flash.swf"
            },
            "chart.swf": {
                name: "chart",
                dft: "nej_flex_chart.swf"
            },
            "audio.swf": {
                name: "audio",
                dft: "nej_player_audio.swf"
            },
            "video.swf": {
                name: "video",
                dft: "nej_player_video.swf"
            },
            "clipboard.swf": {
                name: "clipboard",
                dft: "nej_clipboard.swf"
            },
            "upload.image.swf": {
                name: "uploadimage",
                dft: "nej_upload_image.swf"
            }
        };
        return function(eH) {
            fL.Wp("root", eH.root || "/res/");
            var bLE, ja = fL.bM("root");
            for (var x in lD) {
                bLE = lD[x];
                fL.Wp(x, eH[bLE.name] || ja + bLE.dft)
            }
            var MJ = eH.p_csrf;
            if (MJ == !0) {
                MJ = {
                    cookie: "AntiCSRF",
                    param: "AntiCSRF"
                }
            }
            fL.Wp("csrf", NEJ.EX({
                cookie: "",
                param: ""
            },
            MJ));
            cP.frames = {};
            bVT(eH.p_frame, cP.frames);
            cP.flashs = {};
            bVT(eH.p_flash, cP.flashs)
        }
    } ();
    fL.Wp = function(bS, bG) {
        cP[bS] = bG
    };
    fL.bM = function(bS) {
        return cP[bS]
    };
    fL.deu = function(cJ) {
        var bWg = bvW(cJ);
        return cP.frames[bWg] || bWg + "/res/nej_proxy_frame.html"
    };
    fL.cEa = function(cJ) {
        return cP.flashs[bvW(cJ)]
    };
    bgI(window.NEJ_CONF || NEJ.O)
})(); (function() {
    var bq = NEJ.P,
    bs = bq("nej.p"),
    fL = bq("nej.c"),
    eH = window.NEJ_CONF || NEJ.O;
    if (bs.Ek.trident) return;
    fL.Wp("storage.swf", eH.storage || fL.bM("root") + "nej_storage.swf");
    if (bs.Dz.release < "4.0") {
        fL.Wp("blank.png", eH.blank || fL.bM("root") + "nej_blank.gif")
    }
    var bH = eH.xdr,
    ng = /^(https?:\/\/.*?)(?=\/|$)/i,
    wl = /[\/?=&]/i;
    var bZu = function(cJ) {
        return (ng.test(cJ) ? RegExp.$1: "").toLowerCase()
    };
    if ( !! bH && !!bH.length) for (var i = bH.length - 1,
    cJ, bS; i >= 0; i--) {
        cJ = bH[i];
        bS = bZu(cJ);
        if ( !! bS) fL.Wp(bS, cJ)
    }
    fL.dmK = function(cJ) {
        var bS = bZu(cJ);
        if (!bS) {
            if (wl.test(cJ)) {
                bS = location.protocol + "//" + location.host
            } else if (cJ.indexOf("://") < 0) {
                bS = location.protocol + "//" + cJ
            } else {
                bS = cJ
            }
        }
        return fL.bM(bS) || bS + "/res/nej_xdomain.html"
    }
})(); (function() {
    var bq = NEJ.P,
    fL = bq("nej.c"),
    bs = bq("nej.g"),
    jO = +(new Date);
    bs.dmI = 1e4 - jO;
    bs.bOC = 10001 - jO;
    bs.dmH = 10002 - jO;
    bs.bZP = 10003 - jO;
    bs.bZY = 10004 - jO;
    bs.deV = 10005 - jO;
    bs.bsJ = 10006 - jO;
    bs.dhH = 10007 - jO;
    bs.Rq = "Content-Type";
    bs.cpL = "text/plain";
    bs.baJ = "multipart/form-data";
    bs.cqu = "application/x-www-form-urlencoded";
    bs.cbI = fL.bM("blank.png") || "data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    lr = NEJ.R,
    dk = NEJ.F,
    bm = bq("nej.e"),
    co = bq("nej.h"),
    bE = bq("nej.u");
    var Ri = function(W, bz) {
        try {
            bz = bz.toLowerCase();
            if (W === null) return bz == "null";
            if (W === undefined) return bz == "undefined";
            return de.toString.call(W).toLowerCase() == "[object " + bz + "]"
        } catch(e) {
            return ! 1
        }
    };
    bE.mb = function(W) {
        return Ri(W, "function")
    };
    bE.nY = function(W) {
        return Ri(W, "string")
    };
    bE.bdZ = function(W) {
        return Ri(W, "number")
    };
    bE.ctF = function(W) {
        return Ri(W, "boolean")
    };
    bE.bhK = function(W) {
        return Ri(W, "date")
    };
    bE.jQ = function(W) {
        return Ri(W, "array")
    };
    bE.XF = function(W) {
        return Ri(W, "object")
    };
    bE.dms = function() {
        var ep = /[^\x00-\xfff]/g;
        return function(da) {
            return ("" + (da || "")).replace(ep, "**").length
        }
    } ();
    bE.oa = function(bH, bo) {
        var hI = bE.mb(bo) ? bo: function(bG) {
            return bG === bo
        },
        bd = bE.hW(bH, hI);
        return bd != null ? bd: -1
    };
    bE.dml = function() {
        var cdk;
        var bbn = function(bH, bKU, bLp) {
            if (bKU > bLp) return - 1;
            var PK = Math.ceil((bKU + bLp) / 2),
            cL = cdk(bH[PK], PK, bH);
            if (cL == 0) return PK;
            if (cL < 0) return bbn(bH, bKU, PK - 1);
            return bbn(bH, PK + 1, bLp)
        };
        return function(bH, brE) {
            cdk = brE || dk;
            return bbn(bH, 0, bH.length - 1)
        }
    } ();
    bE.od = function(bH, kr, CJ) {
        if (!bH || !bH.length || !bE.mb(kr)) return null;
        for (var i = bH.length - 1; i >= 0; i--) if ( !! kr.call(CJ, bH[i], i, bH)) return i;
        return null
    };
    bE.bA = function(bH, kr, CJ) {
        if (!bH || !bH.length || !bE.mb(kr)) return this;
        if ( !! bH.forEach) {
            bH.forEach(kr, CJ);
            return this
        }
        for (var i = 0,
        l = bH.length; i < l; i++) kr.call(CJ, bH[i], i, bH);
        return this
    };
    bE.hW = function(bH, kr, CJ) {
        if (!bH || !bE.mb(kr)) return null;
        if (bH.length != null) {
            if (bH.length > 0) for (var i = 0,
            l = bH.length; i < l; i++) if ( !! kr.call(CJ, bH[i], i, bH)) return i
        }
        if (bE.XF(bH)) {
            for (var x in bH) if (bH.hasOwnProperty(x) && !!kr.call(CJ, bH[x], x, bH)) return x
        }
        return null
    };
    bE.dlU = function(zn, czN, Y) {
        zn = zn || [];
        Y = Y || de;
        var bro = !!Y.union,
        qb = !!Y.begin,
        brl = Y.compare,
        cAg = bro && qb ? bE.od: bE.bA;
        cAg(czN,
        function(bo) {
            if ( !! brl) brl = brl.Ja(bo);
            var bd = bE.oa(zn, brl || bo);
            if (bd >= 0) zn.splice(bd, 1);
            if (bro) zn[qb ? "unshift": "push"](bo)
        });
        return zn
    };
    bE.bAE = function(dF, da) {
        if (!dF || !da || !da.replace) return da || "";
        return da.replace(dF.r,
        function($1) {
            var cL = dF[!dF.i ? $1.toLowerCase() : $1];
            return cL != null ? cL: $1
        })
    };
    bE.dV = function() {
        var ep = /<br\/?>$/,
        dF = {
            r: /\<|\>|\&|\r|\n|\s|\'|\"/g,
            "<": "&lt;",
            ">": "&gt;",
            "&": "&amp;",
            " ": "&nbsp;",
            '"': "&quot;",
            "'": "&#39;",
            "\n": "<br/>",
            "\r": ""
        };
        return function(da) {
            da = bE.bAE(dF, da);
            return da.replace(ep, "<br/><br/>")
        }
    } ();
    bE.bre = function() {
        var dF = {
            r: /\&(?:lt|gt|amp|nbsp|#39|quot)\;|\<br\/\>/gi,
            "&lt;": "<",
            "&gt;": ">",
            "&amp;": "&",
            "&nbsp;": " ",
            "&#39;": "'",
            "&quot;": '"',
            "<br/>": "\n"
        };
        return function(da) {
            return bE.bAE(dF, da)
        }
    } ();
    bE.vP = function() {
        var dF = {
            i: !0,
            r: /\byyyy|yy|MM|cM|eM|M|dd|d|HH|H|mm|ms|ss|m|s|w|ct|et\b/g
        },
        cFa = ["上午", "下午"],
        cFD = ["A.M.", "P.M."],
        cGQ = ["日", "一", "二", "三", "四", "五", "六"],
        cHp = ["一", "二", "三", "四", "五", "六", "七", "八", "九", "十", "十一", "十二"],
        cHG = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];
        var bgG = function(rl) {
            rl = parseInt(rl) || 0;
            return (rl < 10 ? "0": "") + rl
        };
        var cHM = function(jY) {
            return jY < 12 ? 0 : 1
        };
        return function(cV, cgj, cKh) {
            if (!cV || !cgj) return "";
            cV = bE.bQh(cV);
            dF.yyyy = cV.getFullYear();
            dF.yy = ("" + dF.yyyy).substr(2);
            dF.M = cV.getMonth() + 1;
            dF.MM = bgG(dF.M);
            dF.eM = cHG[dF.M - 1];
            dF.cM = cHp[dF.M - 1];
            dF.d = cV.getDate();
            dF.dd = bgG(dF.d);
            dF.H = cV.getHours();
            dF.HH = bgG(dF.H);
            dF.m = cV.getMinutes();
            dF.mm = bgG(dF.m);
            dF.s = cV.getSeconds();
            dF.ss = bgG(dF.s);
            dF.ms = cV.getMilliseconds();
            dF.w = cGQ[cV.getDay()];
            var cgH = cHM(dF.H);
            dF.ct = cFa[cgH];
            dF.et = cFD[cgH];
            if ( !! cKh) {
                dF.H = dF.H % 12
            }
            return bE.bAE(dF, cgj)
        }
    } ();
    bE.bQh = function(cV) {
        var ft = cV;
        if (bE.nY(cV)) {
            cV = cV.replace(/-/g, "/");
            ft = new Date(Date.parse(cV))
        }
        if (!bE.bhK(ft)) ft = new Date(cV);
        return ft
    };
    bE.bRV = function(cKJ, cOe) {
        return (new Number(cKJ)).toFixed(cOe)
    };
    bE.bTj = function() {
        var ng = /([^\/:])\/.*$/,
        wl = /\/[^\/]+$/,
        Ir = /[#\?]/,
        bwc = location.href.split(/[?#]/)[0],
        OP = document.createElement("a");
        var bwO = function(pD) {
            return (pD || "").indexOf("://") > 0
        };
        var chK = function(pD) {
            return (pD || "").split(Ir)[0].replace(wl, "/")
        };
        var cPb = function(pD, ja) {
            if (pD.indexOf("/") == 0) return ja.replace(ng, "$1") + pD;
            return chK(ja) + pD
        };
        bwc = chK(bwc);
        return function(pD, ja) {
            pD = (pD || "").trim();
            if (!bwO(ja)) ja = bwc;
            if (!pD) return ja;
            if (bwO(pD)) return pD;
            pD = cPb(pD, ja);
            OP.href = pD;
            pD = OP.href;
            return bwO(pD) ? pD: OP.getAttribute("href", 4)
        }
    } ();
    bE.cPg = function() {
        var ep = /^([\w]+?:\/\/.*?(?=\/|$))/i;
        return function(cJ) {
            if (ep.test(cJ || "")) return RegExp.$1.toLowerCase();
            return ""
        }
    } ();
    bE.chO = function(nL, cI) {
        if (!nL) return cI;
        var cl = nL.tagName.toLowerCase(),
        bH = bm.cS(nL);
        if (!bH || !bH.length) {
            cI[cl] = nL.textContent || nL.text || "";
            return cI
        }
        var dh = {};
        cI[cl] = dh;
        bE.bA(bH,
        function(bB) {
            bE.chO(bB, dh)
        });
        return cI
    };
    bE.dkX = function(Me) {
        try {
            return bE.chO(bm.cjH(Me), {})
        } catch(ex) {
            return null
        }
    };
    bE.Wa = function(Jr, baA) {
        var cI = {};
        bE.bA((Jr || "").split(baA),
        function(cl) {
            var bqe = cl.split("=");
            if (!bqe || !bqe.length) return;
            var bS = bqe.shift();
            if (!bS) return;
            cI[decodeURIComponent(bS)] = decodeURIComponent(bqe.join("="))
        });
        return cI
    };
    bE.bqd = function(jj, baA, cVo) {
        if (!jj) return "";
        var dc = [];
        bE.hW(jj,
        function(bG, bS) {
            if (bE.mb(bG)) {
                return
            }
            if (bE.bhK(bG)) {
                bG = bG.getTime()
            } else if (bE.jQ(bG)) {
                bG = bG.join(",")
            } else if (bE.XF(bG)) {
                bG = JSON.stringify(bG)
            }
            if ( !! cVo) {
                bG = encodeURIComponent(bG)
            }
            dc.push(encodeURIComponent(bS) + "=" + bG)
        });
        return dc.join(baA || ",")
    };
    bE.ckr = function(Au) {
        return bE.Wa(Au, "&")
    };
    bE.At = function(jj) {
        return bE.bqd(jj, "&", !0)
    };
    bE.dkH = function(jj) {
        return co.ZA(jj)
    };
    bE.bdg = function(bH, hI) {
        var cL = {};
        bE.bA(bH,
        function(bo) {
            var bS = bo;
            if ( !! hI) {
                bS = hI(bo)
            }
            cL[bS] = bo
        });
        return cL
    };
    bE.dkG = function(rl, Ao) {
        var bQM = ("" + rl).length,
        cWM = Math.max(1, parseInt(Ao) || 0),
        gu = cWM - bQM;
        if (gu > 0) {
            rl = (new Array(gu + 1)).join("0") + rl
        }
        return "" + rl
    };
    bE.bpD = function(jj, cl) {
        if (!bE.jQ(cl)) {
            try {
                delete jj[cl]
            } catch(e) {
                jj[cl] = undefined
            }
            return this
        }
        bE.bA(cl, bE.bpD.Z(bE, jj));
        return this
    };
    bE.mz = function() {
        var pO = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
        return function(eL) {
            eL = eL || 10;
            var cL = [];
            for (var i = 0,
            ckS; i < eL; ++i) {
                ckS = Math.floor(Math.random() * pO.length);
                cL.push(pO.charAt(ckS))
            }
            return cL.join("")
        }
    } ();
    bE.cYd = function(kY, iB) {
        return Math.floor(Math.random() * (iB - kY) + kY)
    };
    bE.eW = function(eL) {
        eL = Math.max(0, Math.min(eL || 8, 30));
        var kY = Math.pow(10, eL - 1),
        iB = kY * 10;
        return bE.cYd(kY, iB).toString()
    };
    bE.bev = function() {
        var jO = +(new Date);
        return function() {
            return "" + jO++
        }
    } ()
})(); (function() {
    var bq = NEJ.P,
    lr = NEJ.R,
    bs = bq("nej.p"),
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    co = bq("nej.h");
    var jf = bs.Dz.prefix,
    ckT = bs.bVz,
    cYz = {
        scale: "scale({x|1},{y|1})",
        rotate: "rotate({a})",
        translate: "translate({x},{y})"
    },
    cYK = {
        scale: "scale3d({x|1},{y|1},{z|1})",
        rotate: "rotate3d({x},{y},{z},{a})",
        translate: "translate3d({x},{y},{z})"
    },
    bfT = {
        transition: !0,
        transform: !0,
        animation: !0,
        keyframes: !0,
        box: !0,
        "box-pack": !0,
        "box-flex": !0,
        marquee: !0,
        "border-radius": !0,
        "user-select": !0
    };
    var bgI = function() {
        var yO = co.cli();
        ckT.css3d = !!yO && yO.m41 != null;
        var ep = /-([a-z])/g;
        for (var x in bfT) {
            bfT[clk(x)] = bfT[x]
        }
    };
    var clk = function() {
        var ep = /-([a-z])/g;
        return function(cl) {
            cl = cl || "";
            return cl.replace(ep,
            function($1, $2) {
                return $2.toUpperCase()
            })
        }
    } ();
    var clo = function(cl) {
        return (!ckT.css3d ? cYz: cYK)[cl]
    };
    var clw = function() {
        var ep = /\s+/;
        return function(eI) {
            eI = (eI || "").trim();
            return !! eI ? eI.split(ep) : null
        }
    } ();
    var bpk = function(bC, bz, eI) {
        bC = bm.bM(bC);
        if (!bC) return;
        bE.bA(clw(eI),
        function(ek) {
            bC.classList[bz](ek)
        })
    };
    co.ZA = function(bH) {
        return lr.slice.call(bH, 0)
    };
    co.bBu = function(bC) {
        return co.ZA(bC.children)
    };
    co.bBB = function(bC, eI) {
        return co.ZA(bC.getElementsByClassName(eI))
    };
    co.bBM = function(bC) {
        return bC.nextElementSibling
    };
    co.bBO = function(bC) {
        return bC.previousElementSibling
    };
    co.bCw = function(bC, Lu) {
        bpk(bC, "add", Lu)
    };
    co.bDo = function(bC, VU) {
        bpk(bC, "remove", VU)
    };
    co.bhu = function(bC, VU, Lu) {
        bpk(bC, "remove", VU);
        bpk(bC, "add", Lu)
    };
    co.bEk = function(bC, eI) {
        bC = bm.bM(bC);
        if (!bC) return ! 1;
        var bH = bC.classList;
        if (!bH || !bH.length) return ! 1;
        return bE.oa(clw(eI),
        function(ek) {
            return bH.contains(ek)
        }) >= 0
    };
    co.bEO = function(bC, ek) {};
    co.bGC = function(bC) {};
    co.bGJ = function(gW, gK) {
        gW.selectionEnd = gK.end || 0;
        gW.selectionStart = gK.start || 0;
        gW.focus()
    };
    co.bIN = function(gW) {
        return {
            end: gW.selectionEnd,
            start: gW.selectionStart
        }
    };
    co.bJd = function() {
        var bJU = function(ek, bj) {
            var bC = ch.eP(bj);
            if (!bC.value) bm.bZ(bC, ek)
        };
        var cZr = function(ek, bj) {
            bm.bJ(ch.eP(bj), ek)
        };
        return function(bC, gn, ek) {
            if (gn == 1) {
                ch.bf(bC, "blur", bJU.Z(null, ek))
            }
            if (gn == 1 || gn == -1) {
                ch.bf(bC, "focus", cZr.Z(null, ek))
            }
        }
    } ();
    co.bOj = function(nL) {
        return (new XMLSerializer).serializeToString(nL) || ""
    };
    co.bOn = function(Me) {
        var ja = (new DOMParser).parseFromString(Me, "text/xml").documentElement;
        return ja.nodeName == "parsererror" ? null: ja
    };
    co.bOA = function(bC) {};
    co.Cl = function(bC) {
        return null
    };
    co.bOU = function(bC) {
        return null
    };
    co.bPm = function(jM) {};
    co.cZU = function() {
        var cs = co.ZA(arguments);
        cs[0] = bm.bM(cs[0]);
        if (!cs[0]) return null;
        cs[1] = (cs[1] || "").toLowerCase();
        if (!cs[1]) return null;
        return cs
    };
    co.US = function() {
        var Fj = {
            touchstart: "mousedown",
            touchmove: "mousemove",
            touchend: "mouseup"
        },
        lv = {
            transitionend: "TransitionEnd",
            animationend: "AnimationEnd",
            animationstart: "AnimationStart",
            animationiteration: "AnimationIteration"
        };
        var cZW = function(bz) {
            return (jf.evt || jf.pro) + bz
        };
        return function() {
            var cs = co.cZU.apply(co, arguments);
            if (!cs) return;
            var bz = co.GN(cs[0], cs[1]);
            if ( !! bz) {
                cs[4] = cs[1];
                cs[1] = bz;
                if ( !! cs[2]) {
                    cs[5] = cs[2];
                    cs[2] = co.PP(cs[1], cs[2], cs[0])
                }
                return cs
            }
            var cmi = lv[cs[1]],
            cmy = Fj[cs[1]];
            if ( !! cmi) {
                cs[4] = cs[1];
                cs[1] = cZW(cmi)
            } else if ( !! cmy) {
                var cl = "on" + cs[1];
                if (! (cl in cs[0])) {
                    cs[4] = cs[1];
                    cs[1] = cmy
                }
            }
            return cs
        }
    } ();
    co.bnV = function(dF, bj) {
        var bG, cs = bj.args,
        bz = cs[1],
        bC = cs[0];
        if (! ("on" + bz in bC)) {
            bG = dF[bz] || ""
        }
        if ( !! bG && !dF[bG] && !("on" + bG in bC)) {
            bG = null
        }
        if ( !! bG) {
            bj.stopped = !0;
            bj.value = bG
        }
    };
    co.GN = function() {
        var lv = {
            enter: "keypress"
        };
        return function(bC, bz) {
            return lv[bz] || null
        }
    } ();
    co.PP = function(bz, ec, bC) {
        var kr = ec;
        switch (bz) {
        case "keypress":
            kr = function(bj) {
                var CJ = ch.eP(bj) || this;
                if (bj.keyCode == 13) {
                    ec.call(CJ, bj)
                }
            };
            break
        }
        return kr
    };
    co.bbq = function() {
        var cs = arguments,
        bnK = "on" + cs[1] in cs[0];
        if (!bnK) {
            console.log("not support event[" + cs[1] + "] for " + cs[0])
        }
        cs[0].addEventListener(cs[1], cs[2], !!cs[3])
    };
    co.Yo = function() {
        var cs = arguments;
        cs[0].removeEventListener(cs[1], cs[2], !!cs[3])
    };
    co.bvQ = function(bC, bz, Y) {
        var bj = document.createEvent("Event");
        bj.initEvent(bz, !0, !0);
        NEJ.X(bj, Y);
        bC.dispatchEvent(bj)
    };
    co.cli = function() {
        var ng = /\((.*?)\)/,
        wl = /\s*,\s*/,
        bH = ["m11", "m12", "m21", "m22", "m41", "m42"];
        var dbW = function(yO) {
            var cI = {};
            if (ng.test(yO || "")) {
                bE.bA(RegExp.$1.split(wl),
                function(bG, bd) {
                    cI[bH[bd]] = bG || ""
                })
            }
            return cI
        };
        return function(yO) {
            if ( !! window.CSSMatrix) return new CSSMatrix(yO);
            var cl = jf.clz + "CSSMatrix";
            if ( !! window[cl]) return new window[cl](yO || "");
            return dbW(yO)
        }
    } ();
    co.cmD = function() {
        var ep = /\{(.*?)\}/g;
        return function(cl, dF) {
            dF = dF || o;
            var du = clo(cl);
            return ! du ? "": du.replace(ep,
            function($1, $2) {
                var dc = $2.split("|");
                return dF[dc[0]] || dc[1] || "0"
            })
        }
    } ();
    co.bwr = function(bC, cl) {
        var bcA = window.getComputedStyle(bC, null);
        return bcA[co.bwV(cl)] || ""
    };
    co.bwV = function() {
        var ep = /^[a-z]/,
        bcM = jf.css;
        var dcc = function(cl) {
            return cl.replace(ep,
            function($1) {
                return bcM + $1.toUpperCase()
            })
        };
        return function(cl) {
            cl = clk(cl);
            var dcf = co.dch(cl, bfT);
            return dcf ? dcc(cl) : cl
        }
    } ();
    co.bxC = function(bC, cl, bG) {
        bC.style[co.bwV(cl)] = bG
    };
    co.dch = function() {
        var ep = /^([a-z]+?)[A-Z]/;
        return function(cl, dF) {
            if (!dF[cl]) {
                if (ep.test(cl)) cl = RegExp.$1
            }
            return !! dF[cl]
        }
    } ();
    co.dcj = function() {
        var ep = /\$<(.*?)>/gi,
        bcM = "-" + jf.css.toLowerCase() + "-";
        return function(sU) {
            return sU.replace(ep,
            function($1, $2) {
                var qU = $2,
                dc = qU.split("|"),
                du = clo(dc[0]);
                if ( !! du) {
                    return co.cmD(dc[0], bE.ckr(dc[1]))
                }
                return ! co.dcm(qU, bfT) ? qU: bcM + qU
            })
        }
    } ();
    co.dcm = function(cl, dF) {
        return !! dF[cl]
    };
    co.bzd = function(kl, sU) {
        kl.textContent = sU
    };
    co.bzy = function(kl, sU) {
        var Hn = kl.sheet,
        eL = Hn.cssRules.length;
        Hn.insertRule(sU, eL);
        return Hn.cssRules[eL]
    };
    co.djS = function(bC, Y) {};
    co.bnd = function(bna) {
        return (bna || "").toLowerCase() != "transparent"
    };
    co.dcx = function(bC) {};
    co.bAD = function(bC, cl) {
        if ( !! bC.getAttribute) return bC.getAttribute(cl);
        return ""
    };
    co.UJ = function(ij) {
        bm.sE(ij)
    };
    bgI()
})(); (function() {
    var bq = NEJ.P,
    bs = bq("nej.p"),
    bm = bq("nej.e"),
    co = bq("nej.h");
    if (bs.Ek.trident1) return;
    co.GN = function() {
        var lv = {
            touchcancel: "MSPointerCancel",
            touchstart: "MSPointerDown",
            touchmove: "MSPointerMove",
            touchend: "MSPointerUp"
        };
        return co.GN.fD(co.bnV.Z(co, lv))
    } ();
    co.bnd = function(bna) {
        return ! 0
    };
    co.UJ = co.UJ.fD(function(bj) {
        bj.stopped = !0;
        var ij = bj.args[0];
        bm.ev(ij, "display", "none");
        try {
            ij.contentWindow.document.body.innerHTML = "&nbsp;"
        } catch(ex) {}
    })
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bs = bq("nej.p"),
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    co = bq("nej.h"),
    bBz = {};
    if (bs.Ek.trident) return;
    co.ZA = co.ZA.fD(function(bj) {
        bj.stopped = !0;
        var bH = bj.args[0];
        if (!bH) {
            bj.value = null;
            return
        }
        var bd = 0,
        cL = [];
        while ( !! bH[bd]) {
            cL.push(bH[bd++])
        }
        bj.value = cL
    });
    co.bBu = co.bBu.fD(function(bj) {
        bj.stopped = !0;
        var dc = [];
        bE.bA(bj.args[0].childNodes,
        function(bB) {
            if (bB.nodeType == 1) dc.push(bB)
        });
        bj.value = dc
    });
    co.bBM = co.bBM.fD(function(bj) {
        var bC = bj.args[0];
        if (! ("nextElementSibling" in bC)) {
            bj.stopped = !0;
            while (bC = bC.nextSibling) {
                if (bC.nodeType == 1) {
                    bj.value = bC;
                    break
                }
            }
        }
    });
    co.bBO = co.bBO.fD(function(bj) {
        var bC = bj.args[0];
        if (! ("previousElementSibling" in bC)) {
            bj.stopped = !0;
            while (bC = bC.previousSibling) {
                if (bC.nodeType == 1) {
                    bj.value = bC;
                    break
                }
            }
        }
    });
    co.bBB = co.bBB.fD(function(bj) {
        var bC = bj.args[0];
        if ( !! bC.getElementsByClassName) return;
        bj.stopped = !0;
        var cL = [],
        dcM = new RegExp("(\\s|^)(?:" + bj.args[1].replace(/\s+/g, "|") + ")(?=\\s|$)");
        bE.bA(bC.getElementsByTagName("*"),
        function(bB) {
            if (dcM.test(bB.className)) cL.push(bB)
        });
        bj.value = cL
    });
    co.bGJ = co.bGJ.fD(function(bj) {
        var gW = bj.args[0],
        gK = bj.args[1];
        if (gW.selectionStart == null) {
            bj.stopped = !0;
            var sB = gW.createTextRange();
            sB.collapse(!0);
            sB.moveStart("character", gK.start);
            sB.moveEnd("character", gK.end - gK.start);
            sB.select();
            gW.focus()
        }
    });
    co.bIN = co.bIN.fD(function(bj) {
        var gW = bj.args[0];
        gW.focus();
        if (gW.selectionStart == null) {
            bj.stopped = !0;
            var cmW = document.selection.createRange();
            var cmX = gW.createTextRange();
            cmX.moveToBookmark(cmW.getBookmark());
            var bCZ = gW.createTextRange();
            bCZ.collapse(!0);
            bCZ.setEndPoint("EndToStart", cmX);
            var md = bCZ.text.length;
            bj.value = {
                start: md,
                end: md + cmW.text.length
            }
        }
    });
    co.bOj = co.bOj.fD(function(bj) {
        if ( !! window.XMLSerializer) return;
        bj.stopped = !0;
        var bC = bj.args[0];
        bj.value = bC.xml != null ? bC.xml: bC.outHTML
    });
    co.bOn = function() {
        var beC = ["Msxml2.DOMDocument.6.0", "Msxml2.DOMDocument.3.0"];
        var dcQ = function() {
            try {
                for (var i = 0,
                l = beC.length; i < l; i++) return new ActiveXObject(beC[i])
            } catch(ex) {
                return null
            }
        };
        return co.bOn.fD(function(bj) {
            if ( !! window.DOMParser) return;
            bj.stopped = !0;
            var bmM = dcQ();
            if ( !! bmM && bmM.loadXML(bj.args[0]) && !bmM.parseError.errorCode) bj.value = bmM.documentElement
        })
    } ();
    co.US = co.US.fD(null,
    function(bj) {
        var cs = bj.value;
        if (!cs || !cs[0] || !bE.mb(cs[2])) return;
        if (!bE.mb(cs[5])) cs[5] = cs[2];
        cs[2] = cs[2].Z(cs[0])
    });
    co.GN = function() {
        var lv = {
            input: "propertychange",
            load: "readystatechange"
        };
        for (var x in lv) bBz[lv[x]] = !0;
        return co.GN.fD(co.bnV.Z(co, lv))
    } ();
    co.PP = function() {
        var bEc = {};
        return co.PP.fD(function(qm) {
            var cs = qm.args,
            ec = cs[1];
            switch (cs[0]) {
            case "readystatechange":
                qm.stopped = !0;
                qm.value = function(bj) {
                    var bC = ch.eP(bj) || this;
                    if (bC.readyState == "loaded" || bC.readyState == "complete") {
                        bj.target = bC;
                        ec.call(bC, bj)
                    }
                };
                break;
            case "propertychange":
                qm.stopped = !0;
                qm.value = function(bj) {
                    var bC = ch.eP(bj) || this;
                    if ("value" in bC && bj.propertyName == "value") {
                        var ca = bm.mt(bC);
                        if ( !! bEc[ca]) {
                            return
                        }
                        bEc[ca] = !0;
                        bj.target = bC;
                        ec.call(bC, bj);
                        delete bEc[ca]
                    }
                };
                break
            }
        })
    } ();
    co.bbq = co.bbq.fD(function(bj) {
        var cs = bj.args;
        if ( !! bBz[cs[1]] || !document.addEventListener) {
            bj.stopped = !0;
            cs[0].attachEvent("on" + cs[1], cs[2])
        }
    });
    co.Yo = co.Yo.fD(function(bj) {
        var cs = bj.args;
        if ( !! bBz[cs[1]] || !document.removeEventListener) {
            bj.stopped = !0;
            cs[0].detachEvent("on" + cs[1], cs[2])
        }
    });
    if (bs.Dz.release == "5.0") {
        co.bbq = function() {
            var zw = {},
            ddj = {
                8 : 1,
                46 : 1
            },
            ddZ = {
                88 : "ctrlKey"
            };
            var bmE = function(bj) {
                var nz = bj.keyCode,
                bS = ddZ[nz],
                deB = !!bS && bj[bS];
                if (!ddj[nz] && !deB) return;
                var bB = ch.eP(bj),
                ca = bm.mt(bB),
                bS = ca + "-last",
                bG = bB.value;
                if (zw[bS] != bG) {
                    zw[bS] = bG;
                    bfO(ca, bj)
                }
            };
            var bmC = function(bj) {
                var bB = ch.eP(bj),
                bS = bm.mt(bB) + "-focused";
                zw[bS] = bj.type == "focus"
            };
            var cnF = function(bj) {
                var bB = ch.eP(bj),
                ca = bm.mt(bB),
                bS = ca + "-focused";
                if ( !! zw[bS] || bj.propertyName != "value") {
                    return
                }
                bfO(ca, bj)
            };
            var bfO = function(ca, bj) {
                bE.bA(zw[ca],
                function(ec) {
                    ec.call(null, bj)
                })
            };
            co.Yo = co.Yo.fD(null,
            function(bj) {
                var cs = bj.args;
                if (cs[1] == "input") {
                    var ca = bm.mt(cs[0]),
                    Ls = cs[2];
                    bE.od(zw[ca],
                    function(ec, bd, bH) {
                        if (Ls == ec) {
                            bH.splice(bd, 1);
                            return ! 0
                        }
                    });
                    var bH = zw[ca];
                    if (!bH || !bH.length) {
                        delete zw[ca];
                        delete zw[ca + "-last"];
                        ch.vw(ca, "keyup", bmE);
                        ch.vw(ca, "keydown", bmE);
                        ch.vw(ca, "focus", bmC);
                        ch.vw(ca, "blur", bmC);
                        ch.vw(ca, "propertychange", cnF)
                    }
                }
            });
            return co.bbq.fD(null,
            function(bj) {
                var cs = bj.args;
                if (cs[1] == "input") {
                    var ca = bm.mt(cs[0]);
                    if (!zw[ca]) {
                        zw[ca] = []
                    }
                    zw[ca].push(cs[2]);
                    ch.bf(ca, "keyup", bmE);
                    ch.bf(ca, "keydown", bmE);
                    ch.bf(ca, "focus", bmC);
                    ch.bf(ca, "blur", bmC);
                    ch.bf(ca, "propertychange", cnF)
                }
            })
        } ()
    }
    co.bvQ = co.bvQ.fD(function(bj) {
        if (!document.createEvent) {
            bj.stopped = !0;
            var cs = bj.args,
            cnQ = document.createEventObject();
            NEJ.X(cnQ, cs[2]);
            try {
                cs[0].fireEvent("on" + cs[1], cnQ)
            } catch(ex) {
                console.error(ex.message);
                console.error(ex.stack)
            }
        }
    });
    co.bwr = function() {
        var ng = /opacity\s*=\s*([\d]+)/i;
        return co.bwr.fD(function(bj) {
            if ( !! window.getComputedStyle) return;
            bj.stopped = !0;
            var cL = "",
            cs = bj.args,
            cl = cs[1],
            bcA = cs[0].currentStyle || de;
            if (cl == "opacity" && !(cl in bcA)) {
                cL = 0;
                var bG = bcA.filter || "";
                if (ng.test(bG)) {
                    cL = parseFloat(RegExp.$1) / 100
                }
            } else {
                cL = bcA[co.bwV(cl)] || ""
            }
            bj.value = cL
        })
    } ();
    co.bxC = co.bxC.fD(function(bj) {
        var cs = bj.args,
        cl = cs[1].toLowerCase();
        if (cl == "opacity" && !(cl in document.body.style)) {
            cs[1] = "filter";
            cs[2] = "alpha(opacity=" + cs[2] * 100 + ")"
        }
    });
    co.bzd = function() {
        var iB = 30;
        return co.bzd.fD(function(bj) {
            var bC = bj.args[0];
            if (!bC.styleSheet) return;
            bj.stopped = !0;
            var sU = bj.args[1];
            var bH = document.styleSheets;
            if (bH.length > iB) {
                bC = bH[iB];
                sU = bC.cssText + sU
            } else {
                bC = bC.styleSheet
            }
            bC.cssText = sU
        })
    } ();
    co.bzy = co.bzy.fD(function(bj) {
        var cs = bj.args,
        Hn = cs[0].sheet;
        if ( !! Hn) return;
        bj.stopped = !0;
        var Hn = cs[0].styleSheet,
        eL = Hn.rules.length,
        dc = cs[1].split(/[\{\}]/);
        Hn.addRule(dc[0], dc[1], eL);
        bj.value = Hn.rules[eL]
    });
    co.bJd = function() {
        var bJU = function(ek, bj) {
            bm.bZ(ch.eP(bj), ek)
        };
        return co.bJd.fD(function(bj) {
            if (bs.Dz.release >= "4.0") return;
            var cs = bj.args;
            if (cs[1] != 1) {
                ch.bf(cs[0], "blur", bJU.Z(null, cs[2]));
                cs[1] = -1
            }
        })
    } ();
    co.bnd = function(bna) {
        return ! 0
    };
    co.bAD = co.bAD.fD(function(bj) {
        var cs = bj.args,
        bB = (cs[0].attributes || de)[cs[1]];
        if ( !! bB) {
            bj.stopped = !0;
            bj.value = bB.value
        }
    },
    function(bj) {
        var cs = bj.args;
        if (cs[1] == "maxlength" && bj.value == 2147483647) bj.value = ""
    });
    if (bs.Dz.release < 5) {
        co.bPm = function() {
            var yv, ij, Sw = [],
            bLf = "cb-" + +(new Date),
            da = '<script>parent.nej.h["' + bLf + '"] = !0;parent.location.hash = decodeURIComponent("#<HASH>");</scr' + "ipt>";
            var cnS = function() {
                yv = window.clearTimeout(yv);
                if (!Sw.length) return;
                var jM = Sw.shift();
                try {
                    var yY = ij.contentWindow.document;
                    yY.open();
                    yY.write("<head><title>");
                    yY.write(document.title);
                    yY.write("</title>");
                    yY.write(da.replace("#<HASH>", encodeURIComponent(jM)));
                    yY.write("</head><body></body>");
                    if (location.hostname != document.domain) yY.domain = document.domain;
                    yY.close();
                    co[bLf] = !1
                } catch(ex) {
                    console.log(ex.message || ex);
                    Sw.unshift(jM)
                }
                yv = window.setTimeout(cnS, 50)
            };
            return co.bPm.fD(function(bj) {
                bj.stopped = !0;
                var jM = bj.args[0];
                if ( !! co[bLf] || !ij && !jM) return;
                Sw.push(jM);
                if (!ij) ij = bm.bgV();
                cnS()
            })
        } ()
    }
    try {
        document.execCommand("BackgroundImageCache", !1, !0)
    } catch(e) {}
})(); (function() {
    var bq = NEJ.P,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bs = bq("nej.p"),
    co = bq("nej.h");
    if (bs.Ek.trident0) return;
    var jO = +(new Date);
    cP = {};
    co.bEO = co.bEO.fD(function(bj) {
        bj.stopped = !0;
        var cs = bj.args,
        ca = bm.mt(cs[0]),
        bS = "hover-" + ca;
        if (!ca || !!cP[bS]) return;
        cP[bS] = !0;
        ch.bf(ca, "mouseenter", bm.bJ.Z(bm, ca, cs[1]));
        ch.bf(ca, "mouseleave", bm.bZ.Z(bm, ca, cs[1]))
    });
    co.bGC = function() {
        var djC = function() {};
        return co.bGC.fD(function(bj) {
            bj.stopped = !0;
            var bC = bj.args[0],
            ca = "fixed-" + bm.mt(bC);
            if ( !! cP[ca]) return;
            var lD = {};
            cP[ca] = lD
        })
    } ();
    co.bOA = co.bOA.fD(function(bj) {
        bj.stopped = !0;
        var bC = bj.args[0],
        kl = bC.style,
        coa = bm.wR();
        kl.width = coa.scrollWidth + "px";
        kl.height = coa.scrollHeight + "px"
    });
    co.Cl = co.Cl.fD(function(bj) {
        bj.stopped = !0;
        var bC = bj.args[0],
        mU = cP[bC.msk];
        if (!mU) {
            bC.msk = jO++;
            mU = bm.rF("iframe");
            mU.style.position = "absolute";
            cP[bC.msk] = mU
        }
        bj.value = mU;
        var kl = mU.style;
        kl.top = (parseInt(bm.tv(bC, "top")) || 0) + "px";
        kl.left = (parseInt(bm.tv(bC, "left")) || 0) + "px";
        kl.width = bC.offsetWidth + "px";
        kl.height = bC.offsetHeight + "px";
        bC.insertAdjacentElement("beforeBegin", mU)
    });
    co.bOU = co.bOU.fD(function(bj) {
        bj.stopped = !0;
        var mU = cP[bj.args[0].msk];
        if ( !! mU) bm.dr(mU)
    })
})(); (function() {
    var bq = NEJ.P,
    ch = bq("nej.v"),
    bm = bq("nej.e"),
    co = bq("nej.h"),
    bs = bq("nej.p"),
    cof = bs.bVz;
    if (bs.Ek.gecko) return;
    var bgI = function() {
        cof.css3d = cof.css3d || "MozPerspective" in document.body.style;
        if (!document.body.insertAdjacentElement) HTMLElement.prototype.insertAdjacentElement = function(coC, bC) {
            if (!coC || !bC) return;
            switch (coC) {
            case "beforeEnd":
                this.appendChild(bC);
                return;
            case "beforeBegin":
                this.parentNode.insertBefore(bC, this);
                return;
            case "afterBegin":
                !this.firstChild ? this.appendChild(bC) : this.insertBefore(bC, this.firstChild);
                return;
            case "afterEnd":
                !this.nextSibling ? this.parentNode.appendChild(bC) : this.parentNode.insertBefore(bC, this.nextSibling);
                return
            }
        };
        if (! ("innerText" in document.body)) {
            HTMLElement.prototype["__defineGetter__"]("innerText",
            function() {
                return this.textContent
            });
            HTMLElement.prototype["__defineSetter__"]("innerText",
            function(da) {
                this.textContent = da
            })
        }
    };
    co.US = function() {
        var ng = /^(?:transitionend|animationend|animationstart|animationiteration)$/i;
        return co.US.fD(function(bj) {
            var cs = bj.args;
            if (ng.test(cs[1] || "")) {
                bj.stopped = !0;
                bj.value = cs
            }
        })
    } ();
    co.GN = function() {
        var lv = {
            mousewheel: "MozMousePixelScroll",
            MozMousePixelScroll: !0
        };
        return co.GN.fD(co.bnV.Z(co, lv))
    } ();
    co.PP = function() {
        var dhv = function(ca, ec, bj) {
            var bC = bm.bM(ca);
            if ( !! bC) {
                var gu = bj.detail;
                bj.wheelDelta = -gu;
                bj.wheelDeltaY = -gu;
                bj.wheelDeltaX = 0;
                ec.call(bC, bj)
            }
        };
        return co.PP.fD(function(bj) {
            var cs = bj.args,
            bz = cs[0],
            ec = cs[1],
            ca = bm.mt(cs[2]);
            if (bz == "MozMousePixelScroll") {
                bj.stopped = !0;
                bj.value = dhv.Z(null, ca, ec)
            }
        })
    } ();
    co.dcx = function() {
        var dhI = function(bj) {
            ch.dK(bj);
            ch.eP(bj).control.click()
        };
        return function(bC) {
            ch.bf(bC, "click", dhI)
        }
    } ();
    bgI()
})(); (function() {
    var bq = NEJ.P,
    bm = bq("nej.e"),
    co = bq("nej.h");
    var blY = function() {
        var gH = !!document.body.classList;
        return function() {
            return gH
        }
    } ();
    var coM = function() {
        var ep = /\s+/g;
        return function(eI) {
            eI = (eI || "").trim();
            return ! eI ? null: new RegExp("(\\s|^)(?:" + eI.replace(ep, "|") + ")(?=\\s|$)", "g")
        }
    } ();
    co.bhu = co.bhu.fD(function(bj) {
        if (blY()) return;
        bj.stopped = !0;
        var cs = bj.args,
        bC = bm.bM(cs[0]);
        if (!bC || !cs[1] && !cs[2]) return;
        var eI = bC.className || "";
        var Lu = " " + (cs[2] || ""),
        VU = coM((cs[1] || "") + Lu); !! VU && (eI = eI.replace(VU, "$1"));
        bC.className = (eI + Lu).replace(/\s+/g, " ").trim()
    });
    co.bCw = co.bCw.fD(function(bj) {
        if (blY()) return;
        bj.stopped = !0;
        var cs = bj.args;
        co.bhu(cs[0], "", cs[1])
    });
    co.bDo = co.bDo.fD(function(bj) {
        if (blY()) return;
        bj.stopped = !0;
        var cs = bj.args;
        co.bhu(cs[0], cs[1], "")
    });
    co.bEk = co.bEk.fD(function(bj) {
        if (blY()) return;
        bj.stopped = !0;
        var cs = bj.args,
        bC = bm.bM(cs[0]);
        if (!bC) {
            bj.value = !1;
            return
        }
        var ep = coM(cs[1]);
        bj.value = !ep ? !1 : ep.test(bC.className || "")
    })
})(); (function() {
    var bq = NEJ.P,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bs = bq("nej.p"),
    co = bq("nej.h");
    if (bs.Ek.webkit) return;
    co.GN = function() {
        var lv = {
            mouseenter: "mouseover",
            mouseleave: "mouseout"
        };
        return co.GN.fD(co.bnV.Z(co, lv))
    } ();
    co.PP = function() {
        var cP = {};
        var diW = function(ca, bC) {
            return ca == bC.id
        };
        var cpd = function(ca, jb, bj) {
            var bS = ca + "-timer";
            cP[bS] = window.clearTimeout(cP[bS]);
            var bC = ch.eP(bj, diW.Z(null, ca));
            if (!bC) return;
            ch.nS(bj);
            if (cP[ca] != jb) {
                cP[ca] = jb;
                return bC
            }
        };
        var djk = function(ca, ec, bj) {
            var bC = cpd(ca, "over", bj);
            if ( !! bC) {
                ec.call(bC, bj)
            }
        };
        var djj = function(ca, ec, bj) {
            var bC = cpd(ca, "out", bj);
            if ( !! bC) {
                cP[ca + "-timer"] = window.setTimeout(dji.Z(null, ca, ec, NEJ.X({},
                bj)), 50)
            }
        };
        var dji = function(ca, ec, bj) {
            delete cP[ca + "-timer"];
            if (cP[ca] == "out") {
                var bC = bm.bM(ca);
                ec.call(bC, bj)
            }
        };
        return co.PP.fD(function(bj) {
            var cs = bj.args,
            bz = cs[0],
            ec = cs[1],
            ca = bm.mt(cs[2]);
            switch (bz) {
            case "mouseover":
                bj.stopped = !0;
                bj.value = djk.Z(null, ca, ec);
                break;
            case "mouseout":
                bj.stopped = !0;
                bj.value = djj.Z(null, ca, ec);
                break
            }
        })
    } ();
    co.bnd = function(bna) {
        return ! 0
    };
    co.UJ = co.UJ.fD(function(bj) {
        bj.stopped = !0
    })
})(); (function() {
    var o = !0,
    w = null; (function(B) {
        function v(a) {
            if ("bug-string-char-index" == a) return "a" != "a" [0];
            var f, c = "json" == a;
            if (c || "json-stringify" == a || "json-parse" == a) {
                if ("json-stringify" == a || c) {
                    var d = k.stringify,
                    b = "function" == typeof d && l;
                    if (b) { (f = function() {
                            return 1
                        }).toJSON = f;
                        try {
                            b = "0" === d(0) && "0" === d(new Number) && '""' == d(new String) && d(m) === r && d(r) === r && d() === r && "1" === d(f) && "[1]" == d([f]) && "[null]" == d([r]) && "null" == d(w) && "[null,null,null]" == d([r, m, w]) && '{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}' == d({
                                a: [f, o, !1, w, "\0\b\n\f\r\t"]
                            }) && "1" === d(w, f) && "[\n 1,\n 2\n]" == d([1, 2], w, 1) && '"-271821-04-20T00:00:00.000Z"' == d(new Date( - 864e13)) && '"+275760-09-13T00:00:00.000Z"' == d(new Date(864e13)) && '"-000001-01-01T00:00:00.000Z"' == d(new Date( - 621987552e5)) && '"1969-12-31T23:59:59.999Z"' == d(new Date( - 1))
                        } catch(n) {
                            b = !1
                        }
                    }
                    if (!c) return b
                }
                if ("json-parse" == a || c) {
                    a = k.parse;
                    if ("function" == typeof a) try {
                        if (0 === a("0") && !a(!1)) {
                            f = a('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');
                            var e = 5 == f.a.length && 1 === f.a[0];
                            if (e) {
                                try {
                                    e = !a('"\t"')
                                } catch(g) {}
                                if (e) try {
                                    e = 1 !== a("01")
                                } catch(i) {}
                            }
                        }
                    } catch(O) {
                        e = !1
                    }
                    if (!c) return e
                }
                return b && e
            }
        }
        var m = {}.toString,
        p, C, r, D = typeof define === "function" && define.amd,
        k = "object" == typeof exports && exports;
        k || D ? "object" == typeof JSON && JSON ? k ? (k.stringify = JSON.stringify, k.parse = JSON.parse) : k = JSON: D && (k = B.JSON = {}) : k = B.JSON || (B.JSON = {});
        var l = new Date( - 0xc782b5b800cec);
        try {
            l = -109252 == l.getUTCFullYear() && 0 === l.getUTCMonth() && 1 === l.getUTCDate() && 10 == l.getUTCHours() && 37 == l.getUTCMinutes() && 6 == l.getUTCSeconds() && 708 == l.getUTCMilliseconds()
        } catch(P) {}
        if (!v("json")) {
            var s = v("bug-string-char-index");
            if (!l) var t = Math.floor,
            J = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334],
            z = function(a, f) {
                return J[f] + 365 * (a - 1970) + t((a - 1969 + (f = +(f > 1))) / 4) - t((a - 1901 + f) / 100) + t((a - 1601 + f) / 400)
            };
            if (! (p = {}.hasOwnProperty)) p = function(a) {
                var f = {},
                c;
                if ((f.__proto__ = w, f.__proto__ = {
                    toString: 1
                },
                f).toString != m) p = function(a) {
                    var f = this.__proto__,
                    a = a in (this.__proto__ = w, this);
                    this.__proto__ = f;
                    return a
                };
                else {
                    c = f.constructor;
                    p = function(a) {
                        var f = (this.constructor || c).prototype;
                        return a in this && !(a in f && this[a] === f[a])
                    }
                }
                f = w;
                return p.call(this, a)
            };
            var K = {
                "boolean": 1,
                number: 1,
                string: 1,
                "undefined": 1
            };
            C = function(a, f) {
                var c = 0,
                b, h, n; (b = function() {
                    this.valueOf = 0
                }).prototype.valueOf = 0;
                h = new b;
                for (n in h) p.call(h, n) && c++;
                b = h = w;
                if (c) c = c == 2 ?
                function(a, f) {
                    var c = {},
                    b = m.call(a) == "[object Function]",
                    d;
                    for (d in a) ! (b && d == "prototype") && !p.call(c, d) && (c[d] = 1) && p.call(a, d) && f(d)
                }: function(a, f) {
                    var c = m.call(a) == "[object Function]",
                    b,
                    d;
                    for (b in a) ! (c && b == "prototype") && p.call(a, b) && !(d = b === "constructor") && f(b); (d || p.call(a, b = "constructor")) && f(b)
                };
                else {
                    h = ["valueOf", "toString", "toLocaleString", "propertyIsEnumerable", "isPrototypeOf", "hasOwnProperty", "constructor"];
                    c = function(a, f) {
                        var c = m.call(a) == "[object Function]",
                        b,
                        d;
                        if (d = !c) if (d = typeof a.constructor != "function") {
                            d = typeof a.hasOwnProperty;
                            d = d == "object" ? !!a.hasOwnProperty: !K[d]
                        }
                        d = d ? a.hasOwnProperty: p;
                        for (b in a) ! (c && b == "prototype") && d.call(a, b) && f(b);
                        for (c = h.length; b = h[--c]; d.call(a, b) && f(b));
                    }
                }
                c(a, f)
            };
            if (!v("json-stringify")) {
                var L = {
                    92 : "\\\\",
                    34 : '\\"',
                    8 : "\\b",
                    12 : "\\f",
                    10 : "\\n",
                    13 : "\\r",
                    9 : "\\t"
                },
                u = function(a, f) {
                    return ("000000" + (f || 0)).slice( - a)
                },
                G = function(a) {
                    var f = '"',
                    b = 0,
                    d = a.length,
                    h = d > 10 && s,
                    n;
                    for (h && (n = a.split("")); b < d; b++) {
                        var e = a.charCodeAt(b);
                        switch (e) {
                        case 8:
                        case 9:
                        case 10:
                        case 12:
                        case 13:
                        case 34:
                        case 92:
                            f = f + L[e];
                            break;
                        default:
                            if (e < 32) {
                                f = f + ("\\u00" + u(2, e.toString(16)));
                                break
                            }
                            f = f + (h ? n[b] : s ? a.charAt(b) : a[b])
                        }
                    }
                    return f + '"'
                },
                E = function(a, b, c, d, h, n, e) {
                    var g = b[a],
                    i,
                    j,
                    k,
                    l,
                    q,
                    s,
                    v,
                    x,
                    y;
                    try {
                        g = b[a]
                    } catch(A) {}
                    if (typeof g == "object" && g) {
                        i = m.call(g);
                        if (i == "[object Date]" && !p.call(g, "toJSON")) if (g > -1 / 0 && g < 1 / 0) {
                            if (z) {
                                k = t(g / 864e5);
                                for (i = t(k / 365.2425) + 1970 - 1; z(i + 1, 0) <= k; i++);
                                for (j = t((k - z(i, 0)) / 30.42); z(i, j + 1) <= k; j++);
                                k = 1 + k - z(i, j);
                                l = (g % 864e5 + 864e5) % 864e5;
                                q = t(l / 36e5) % 24;
                                s = t(l / 6e4) % 60;
                                v = t(l / 1e3) % 60;
                                l = l % 1e3
                            } else {
                                i = g.getUTCFullYear();
                                j = g.getUTCMonth();
                                k = g.getUTCDate();
                                q = g.getUTCHours();
                                s = g.getUTCMinutes();
                                v = g.getUTCSeconds();
                                l = g.getUTCMilliseconds()
                            }
                            g = (i <= 0 || i >= 1e4 ? (i < 0 ? "-": "+") + u(6, i < 0 ? -i: i) : u(4, i)) + "-" + u(2, j + 1) + "-" + u(2, k) + "T" + u(2, q) + ":" + u(2, s) + ":" + u(2, v) + "." + u(3, l) + "Z"
                        } else g = w;
                        else if (typeof g.toJSON == "function" && (i != "[object Number]" && i != "[object String]" && i != "[object Array]" || p.call(g, "toJSON"))) g = g.toJSON(a)
                    }
                    c && (g = c.call(b, a, g));
                    if (g === w) return "null";
                    i = m.call(g);
                    if (i == "[object Boolean]") return "" + g;
                    if (i == "[object Number]") return g > -1 / 0 && g < 1 / 0 ? "" + g: "null";
                    if (i == "[object String]") return G("" + g);
                    if (typeof g == "object") {
                        for (a = e.length; a--;) if (e[a] === g) throw TypeError();
                        e.push(g);
                        x = [];
                        b = n;
                        n = n + h;
                        if (i == "[object Array]") {
                            j = 0;
                            for (a = g.length; j < a; y || (y = o), j++) {
                                i = E(j, g, c, d, h, n, e);
                                x.push(i === r ? "null": i)
                            }
                            a = y ? h ? "[\n" + n + x.join(",\n" + n) + "\n" + b + "]": "[" + x.join(",") + "]": "[]"
                        } else {
                            C(d || g,
                            function(a) {
                                var b = E(a, g, c, d, h, n, e);
                                b !== r && x.push(G(a) + ":" + (h ? " ": "") + b);
                                y || (y = o)
                            });
                            a = y ? h ? "{\n" + n + x.join(",\n" + n) + "\n" + b + "}": "{" + x.join(",") + "}": "{}"
                        }
                        e.pop();
                        return a
                    }
                };
                k.stringify = function(a, b, c) {
                    var d, h, j;
                    if (typeof b == "function" || typeof b == "object" && b) if (m.call(b) == "[object Function]") h = b;
                    else if (m.call(b) == "[object Array]") {
                        j = {};
                        for (var e = 0,
                        g = b.length,
                        i; e < g; i = b[e++], (m.call(i) == "[object String]" || m.call(i) == "[object Number]") && (j[i] = 1));
                    }
                    if (c) if (m.call(c) == "[object Number]") {
                        if ((c = c - c % 1) > 0) {
                            d = "";
                            for (c > 10 && (c = 10); d.length < c; d = d + " ");
                        }
                    } else m.call(c) == "[object String]" && (d = c.length <= 10 ? c: c.slice(0, 10));
                    return E("", (i = {},
                    i[""] = a, i), h, j, d, "", [])
                }
            }
            if (!v("json-parse")) {
                var M = String.fromCharCode,
                N = {
                    92 : "\\",
                    34 : '"',
                    47 : "/",
                    98 : "\b",
                    116 : "\t",
                    110 : "\n",
                    102 : "\f",
                    114 : "\r"
                },
                b,
                A,
                j = function() {
                    b = A = w;
                    throw SyntaxError()
                },
                q = function() {
                    for (var a = A,
                    f = a.length,
                    c, d, h, k, e; b < f;) {
                        e = a.charCodeAt(b);
                        switch (e) {
                        case 9:
                        case 10:
                        case 13:
                        case 32:
                            b++;
                            break;
                        case 123:
                        case 125:
                        case 91:
                        case 93:
                        case 58:
                        case 44:
                            c = s ? a.charAt(b) : a[b];
                            b++;
                            return c;
                        case 34:
                            c = "@";
                            for (b++; b < f;) {
                                e = a.charCodeAt(b);
                                if (e < 32) j();
                                else if (e == 92) {
                                    e = a.charCodeAt(++b);
                                    switch (e) {
                                    case 92:
                                    case 34:
                                    case 47:
                                    case 98:
                                    case 116:
                                    case 110:
                                    case 102:
                                    case 114:
                                        c = c + N[e];
                                        b++;
                                        break;
                                    case 117:
                                        d = ++b;
                                        for (h = b + 4; b < h; b++) {
                                            e = a.charCodeAt(b);
                                            e >= 48 && e <= 57 || e >= 97 && e <= 102 || e >= 65 && e <= 70 || j()
                                        }
                                        c = c + M("0x" + a.slice(d, b));
                                        break;
                                    default:
                                        j()
                                    }
                                } else {
                                    if (e == 34) break;
                                    e = a.charCodeAt(b);
                                    for (d = b; e >= 32 && e != 92 && e != 34;) e = a.charCodeAt(++b);
                                    c = c + a.slice(d, b)
                                }
                            }
                            if (a.charCodeAt(b) == 34) {
                                b++;
                                return c
                            }
                            j();
                        default:
                            d = b;
                            if (e == 45) {
                                k = o;
                                e = a.charCodeAt(++b)
                            }
                            if (e >= 48 && e <= 57) {
                                for (e == 48 && (e = a.charCodeAt(b + 1), e >= 48 && e <= 57) && j(); b < f && (e = a.charCodeAt(b), e >= 48 && e <= 57); b++);
                                if (a.charCodeAt(b) == 46) {
                                    for (h = ++b; h < f && (e = a.charCodeAt(h), e >= 48 && e <= 57); h++);
                                    h == b && j();
                                    b = h
                                }
                                e = a.charCodeAt(b);
                                if (e == 101 || e == 69) {
                                    e = a.charCodeAt(++b); (e == 43 || e == 45) && b++;
                                    for (h = b; h < f && (e = a.charCodeAt(h), e >= 48 && e <= 57); h++);
                                    h == b && j();
                                    b = h
                                }
                                return + a.slice(d, b)
                            }
                            k && j();
                            if (a.slice(b, b + 4) == "true") {
                                b = b + 4;
                                return o
                            }
                            if (a.slice(b, b + 5) == "false") {
                                b = b + 5;
                                return false
                            }
                            if (a.slice(b, b + 4) == "null") {
                                b = b + 4;
                                return w
                            }
                            j()
                        }
                    }
                    return "$"
                },
                F = function(a) {
                    var b, c;
                    a == "$" && j();
                    if (typeof a == "string") {
                        if ((s ? a.charAt(0) : a[0]) == "@") return a.slice(1);
                        if (a == "[") {
                            for (b = [];; c || (c = o)) {
                                a = q();
                                if (a == "]") break;
                                if (c) if (a == ",") {
                                    a = q();
                                    a == "]" && j()
                                } else j();
                                a == "," && j();
                                b.push(F(a))
                            }
                            return b
                        }
                        if (a == "{") {
                            for (b = {};; c || (c = o)) {
                                a = q();
                                if (a == "}") break;
                                if (c) if (a == ",") {
                                    a = q();
                                    a == "}" && j()
                                } else j(); (a == "," || typeof a != "string" || (s ? a.charAt(0) : a[0]) != "@" || q() != ":") && j();
                                b[a.slice(1)] = F(q())
                            }
                            return b
                        }
                        j()
                    }
                    return a
                },
                I = function(a, b, c) {
                    c = H(a, b, c);
                    c === r ? delete a[b] : a[b] = c
                },
                H = function(a, b, c) {
                    var d = a[b],
                    h;
                    if (typeof d == "object" && d) if (m.call(d) == "[object Array]") for (h = d.length; h--;) I(d, h, c);
                    else C(d,
                    function(a) {
                        I(d, a, c)
                    });
                    return c.call(a, b, d)
                };
                k.parse = function(a, f) {
                    var c, d;
                    b = 0;
                    A = "" + a;
                    c = F(q());
                    q() != "$" && j();
                    b = A = w;
                    return f && m.call(f) == "[object Function]" ? H((d = {},
                    d[""] = c, d), "", f) : c
                }
            }
        }
        D && define(function() {
            return k
        })
    })(this)
})(); (function() {
    var bq = NEJ.P,
    bs = bq("nej.p");
    if (bs.Ek.trident0) return;
    JSON.parse = function() {
        var djo = function(da) {
            return ! /[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(da.replace(/"(\\.|[^"\\])*"/g, ""))
        };
        return JSON.parse.fD(function(bj) {
            var cQ = bj.args[0] || "";
            if (cQ.length >= 5e5) {
                bj.stopped = !0;
                bj.value = eval("(" + cQ + ")")
            }
        })
    } ()
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    dx = bq("nej.g"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    ch = bq("nej.v"),
    co = bq("nej.h"),
    ej = bq("nej.x"),
    WW,
    blM = {};
    bm.mt = ej.mt = function(bC) {
        bC = bm.bM(bC);
        if (!bC) return;
        var ca = !!bC.id ? bC.id: "auto-id-" + bE.mz(16);
        bC.id = ca;
        if (bm.bM(ca) != bC) blM[ca] = bC;
        return ca
    };
    bm.bM = ej.bM = function(bC) {
        var bB = blM["" + bC];
        if ( !! bB) return bB;
        if (!bE.nY(bC) && !bE.bdZ(bC)) return bC;
        return document.getElementById(bC)
    };
    bm.cS = ej.cS = function(bC, ek) {
        bC = bm.bM(bC);
        if (!bC) return null;
        var bH = co.bBu(bC);
        if ( !! ek) bE.od(bH,
        function(bB, bd) {
            if (!bm.hJ(bB, ek)) bH.splice(bd, 1)
        });
        return bH
    };
    bm.bc = ej.bc = function(bC, eI) {
        bC = bm.bM(bC);
        return ! bC ? null: co.bBB(bC, eI.trim())
    };
    bm.djg = ej.djg = function() {
        var LD = function() {
            return ! 0
        };
        return function(bC, hI) {
            bC = bm.bM(bC);
            if (!bC) return;
            var lD = {
                backward: !1,
                filter: LD
            };
            if (bE.mb(hI)) {
                lD.filter = hI
            } else {
                lD = NEJ.X(lD, hI)
            }
            var bhX = lD.backward ? co.bBO: co.bBM;
            while (bC = bhX(bC)) {
                if (lD.filter(bC)) {
                    break
                }
            }
            return bC
        }
    } ();
    bm.cpg = ej.cpg = function(bC) {
        bC = bm.bM(bC);
        if ( !! bC) {
            bC = bC.parentNode;
            while ( !! bC) {
                if (bC.scrollHeight > bC.clientHeight) break;
                bC = bC.parentNode
            }
            if ( !! bC) return bC
        }
        var rv = document.body.scrollHeight,
        MN = document.documentElement.scrollHeight;
        return MN >= rv ? document.documentElement: document.body
    };
    bm.wR = function() {
        var cpf = function(bH) {
            var cL = 0;
            bE.bA(bH,
            function(wI) {
                if (!wI) return;
                if (!cL) {
                    cL = wI
                } else {
                    cL = Math.min(cL, wI)
                }
            });
            return cL
        };
        return function(yY) {
            var cpe = yY || document,
            Lh = cpe.body,
            NL = cpe.documentElement,
            cL = {
                scrollTop: Math.max(Lh.scrollTop, NL.scrollTop),
                scrollLeft: Math.max(Lh.scrollLeft, NL.scrollLeft),
                clientWidth: cpf([Lh.clientWidth, Lh.offsetWidth, NL.clientWidth, NL.offsetWidth]),
                clientHeight: cpf([Lh.clientHeight, Lh.offsetHeight, NL.clientHeight, NL.offsetHeight])
            };
            cL.scrollWidth = Math.max(cL.clientWidth, Lh.scrollWidth, NL.scrollWidth);
            cL.scrollHeight = Math.max(cL.clientHeight, Lh.scrollHeight, NL.scrollHeight);
            return cL
        }
    } ();
    bm.dlE = function(iB, sG) {
        var cL = NEJ.X({},
        sG),
        cpc = iB.width / iB.height,
        blm = sG.width / sG.height;
        if (cpc > blm && sG.height > iB.height) {
            cL.height = iB.height;
            cL.width = cL.height * blm
        }
        if (cpc < blm && sG.width > iB.width) {
            cL.width = iB.width;
            cL.height = cL.width / blm
        }
        return cL
    };
    bm.djp = function() {
        var ep = /\s+/;
        var GU = {
            left: function() {
                return 0
            },
            center: function(jD, sG) {
                return (jD.width - sG.width) / 2
            },
            right: function(jD, sG) {
                return jD.width - sG.width
            },
            top: function() {
                return 0
            },
            middle: function(jD, sG) {
                return (jD.height - sG.height) / 2
            },
            bottom: function(jD, sG) {
                return jD.height - sG.height
            }
        };
        return function(jD, sG, qX) {
            var cL = {},
            dc = (qX || "").split(ep),
            ml = GU[dc[1]] || GU.middle,
            sS = GU[dc[0]] || GU.center;
            cL.top = ml(jD, sG);
            cL.left = sS(jD, sG);
            return cL
        }
    } ();
    bm.diV = ej.diV = function(bC, ek) {
        co.bEO(bC, ek || bm.df(bC, "hover") || "js-hover");
        return this
    };
    bm.bRV = ej.bRV = function(bC) {
        bC = bm.bM(bC);
        if (!bC) return;
        co.bGC(bC)
    };
    bm.diT = ej.diT = function() {
        var cP = {},
        cpa = 2;
        var diM = function(ca, ek, bj) {
            cP[ca] = [ch.TU(bj), ch.TT(bj)];
            bm.bJ(ca, ek)
        };
        var diL = function(ca, ek, bj) {
            var pk = cP[ca];
            if (!bE.jQ(pk)) return;
            var diI = Math.abs(ch.TU(bj) - pk[0]),
            diH = Math.abs(ch.TT(bj) - pk[1]);
            if (diI > cpa || diH > cpa) bAP(ca, ek)
        };
        var bAP = function(ca, ek) {
            if (bE.jQ(cP[ca])) {
                cP[ca] = -1;
                bm.bZ(ca, ek)
            }
        };
        return function(bC, ek) {
            var ca = bm.mt(bC);
            if (!ca || cP[ca] != null) return;
            cP[ca] = -1;
            ek = ek || bm.df(ca, "highlight") || "js-highlight";
            ch.bf(ca, "touchstart", diM.Z(null, ca, ek));
            ch.bf(document, "touchmove", diL.Z(null, ca, ek));
            ch.bf(document, "touchend", bAP.Z(null, ca, ek));
            ch.bf(document, "touchcancel", bAP.Z(null, ca, ek))
        }
    } ();
    bm.diF = ej.diF = function() {
        var diE = function(ca, ek, diD) {
            var bC = bm.bM(ca),
            bj = {
                clazz: ek,
                target: bC
            };
            if (bm.hJ(bC, ek)) {
                bj.toggled = !1;
                bm.bZ(bC, ek)
            } else {
                bj.toggled = !0;
                bm.bJ(bC, ek)
            }
            diD.call(null, bj)
        };
        return function(bC, Y) {
            bC = bm.bM(bC);
            if ( !! bC) {
                var cI = {
                    ontoggle: dk,
                    clazz: "js-toggle",
                    element: bC.parentNode
                };
                if (bE.nY(Y)) {
                    var bB = bm.bM(Y); !! bB ? cI.element = bB: cI.clazz = Y
                } else {
                    NEJ.EX(cI, Y);
                    cI.element = bm.bM(cI.element)
                }
                var ca = bm.mt(cI.element);
                ch.bf(bC, "click", diE.Z(null, ca, cI.clazz, cI.ontoggle || dk))
            }
            return this
        }
    } ();
    bm.blc = ej.blc = function(bC, Y) {
        bC = bm.bM(bC);
        if (!bC) return;
        var gn = 0,
        ek = "js-focus";
        if (bE.bdZ(Y)) {
            gn = Y
        } else if (bE.nY(Y)) {
            ek = Y
        } else if (bE.XF(Y)) {
            gn = Y.mode || gn;
            ek = Y.clazz || ek
        }
        var bG = parseInt(bm.df(bC, "mode"));
        if (!isNaN(bG)) gn = bG;
        bG = bm.df(bC, "focus");
        if ( !! bG) ek = bG;
        co.bJd(bC, gn, ek);
        return this
    };
    bm.rF = function() {
        var dF = {
            a: {
                href: "#",
                hideFocus: !0
            },
            style: {
                type: "text/css"
            },
            link: {
                type: "text/css",
                rel: "stylesheet"
            },
            iframe: {
                frameBorder: 0
            },
            script: {
                defer: !0,
                type: "text/javascript"
            }
        };
        return function(Af, eI, dO) {
            var bC = document.createElement(Af);
            NEJ.X(bC, dF[Af.toLowerCase()]);
            if ( !! eI) bC.className = eI;
            dO = bm.bM(dO);
            if ( !! dO) dO.appendChild(bC);
            return bC
        }
    } ();
    bm.bgV = function() {
        var diC = function() {
            if (location.hostname == document.domain) return "about:blank";
            return 'javascript:(function(){document.open();document.domain="' + document.domain + '";document.close();})();'
        };
        var diB = function(cl) {
            cl = cl.trim();
            if (!cl) return bm.rF("iframe");
            var ij;
            try {
                ij = document.createElement('<iframe name="' + cl + '"></iframe>');
                ij.frameBorder = 0
            } catch(e) {
                ij = bm.rF("iframe");
                ij.name = cl
            }
            return ij
        };
        return function(Y) {
            Y = Y || de;
            var ij = diB(Y.name || "");
            if (!Y.visible) ij.style.display = "none";
            if (bE.mb(Y.onload)) ch.bf(ij, "load",
            function(bj) {
                if (!ij.src) return;
                ch.dY(ij, "load");
                Y.onload(bj)
            });
            var dO = Y.parent;
            if (bE.mb(dO)) {
                try {
                    dO(ij)
                } catch(e) {}
            } else { (bm.bM(dO) || document.body).appendChild(ij)
            }
            var kh = Y.src || diC();
            window.setTimeout(function() {
                ij.src = kh
            },
            0);
            return ij
        }
    } ();
    bm.sE = ej.sE = function() {
        var coW = function(diy) {
            diy.src = dx.cbI
        };
        var coV = function(vv) {
            vv.src = "about:blank"
        };
        return function(bC, dit) {
            bC = bm.bM(bC);
            if (!bC) return this;
            if (!dit) ch.dY(bC);
            delete blM[bC.id];
            var Af = bC.tagName;
            if (Af == "IFRAME") {
                coV(bC)
            } else if (Af == "IMG") {
                coW(bC)
            } else if ( !! bC.getElementsByTagName) {
                bE.bA(bC.getElementsByTagName("img"), coW);
                bE.bA(bC.getElementsByTagName("iframe"), coV)
            }
            if ( !! bC.parentNode) {
                bC.parentNode.removeChild(bC)
            }
            return this
        }
    } ();
    bm.dr = ej.dr = function() {
        var cP = document.createDocumentFragment();
        bq("dbg").dumpFRG = function() {
            return cP
        };
        return function(bC) {
            bC = bm.bM(bC);
            if ( !! bC) cP.appendChild(bC);
            return this
        }
    } ();
    bm.dis = ej.dis = function(bC) {
        bC = bm.bM(bC);
        if (!bC) return;
        bE.od(bC.childNodes,
        function(bB) {
            bm.sE(bB)
        })
    };
    bm.coU = ej.coU = function() {
        var ek, ng = /\s+/;
        var dii = function() {
            if ( !! ek) return;
            ek = bm.dD(".#<uispace>{position:relative;zoom:1;}.#<uispace>-show{position:absolute;top:0;left:100%;cursor:text;white-space:nowrap;overflow:hidden;}");
            bm.bEu()
        };
        return function(bC, Y) {
            bC = bm.bM(bC);
            if (!bC) return;
            dii();
            Y = Y || de;
            var dO = bC.parentNode;
            if (!bm.hJ(dO, ek)) {
                dO = bm.rF("span", ek);
                bC.insertAdjacentElement("beforeBegin", dO);
                dO.appendChild(bC)
            }
            var coQ = Y.nid || "",
            bB = bm.bc(dO, coQ || ek + "-show")[0];
            if (!bB) {
                var Ap = ((Y.clazz || "") + " " + coQ).trim();
                Ap = ek + "-show" + (!Ap ? "": " ") + Ap;
                bB = bm.rF(Y.tag || "span", Ap);
                dO.appendChild(bB)
            }
            var Ap = Y.clazz;
            if ( !! Ap) {
                Ap = (Ap || "").trim().split(ng)[0] + "-parent";
                bm.bJ(dO, Ap)
            }
            return bB
        }
    } ();
    bm.df = ej.df = function() {
        var bGh = {},
        Af = "data-",
        ep = /\-(.{1})/gi;
        var kg = function(bC) {
            var ca = bm.mt(bC);
            if ( !! bGh[ca]) return;
            var dF = {};
            bE.bA(bC.attributes,
            function(bB) {
                var bS = bB.nodeName;
                if (bS.indexOf(Af) != 0) return;
                bS = bS.replace(Af, "").replace(ep,
                function($1, $2) {
                    return $2.toUpperCase()
                });
                dF[bS] = bB.nodeValue || ""
            });
            bGh[ca] = dF
        };
        return function(bC, bS, bG) {
            bC = bm.bM(bC);
            if (!bC) return null;
            var blj = bC.dataset;
            if (!blj) {
                kg(bC);
                blj = bGh[bC.id]
            }
            if (bG !== undefined) blj[bS] = bG;
            return blj[bS]
        }
    } ();
    bm.hT = ej.hT = function(bC, cl, bG) {
        bC = bm.bM(bC);
        if (!bC) return "";
        if (bG !== undefined && !!bC.setAttribute) bC.setAttribute(cl, bG);
        return co.bAD(bC, cl)
    };
    bm.iN = function(dE) {
        var yA = document.createElement("div");
        yA.innerHTML = dE;
        var bH = bm.cS(yA);
        return bH.length > 1 ? yA: bH[0]
    };
    bm.dic = ej.dic = function(bC) {
        bC = bm.bM(bC);
        return ! bC ? "": co.bOj(bC)
    };
    bm.cjH = function(Me) {
        Me = (Me || "").trim();
        return ! Me ? null: co.bOn(Me)
    };
    bm.dib = function(hK, bz) {
        hK = hK || "";
        switch (bz) {
        case "xml":
            hK = bm.cjH(hK);
            break;
        case "json":
            try {
                hK = JSON.parse(hK)
            } catch(ex) {
                hK = null
            }
            break
        }
        return hK
    };
    bm.rx = ej.rx = function() {
        var dia = function(bC) {
            return bC == document.body || bC == document.documentElement
        };
        return function(eV, ia) {
            eV = bm.bM(eV);
            if (!eV) return null;
            ia = bm.bM(ia) || null;
            var cL = {
                x: 0,
                y: 0
            },
            bKp,
            gu,
            bll;
            while ( !! eV && eV != ia) {
                bKp = dia(eV);
                gu = bKp ? 0 : eV.scrollLeft;
                bll = parseInt(bm.tv(eV, "borderLeftWidth")) || 0;
                cL.x += eV.offsetLeft + bll - gu;
                gu = bKp ? 0 : eV.scrollTop;
                bll = parseInt(bm.tv(eV, "borderTopWidth")) || 0;
                cL.y += eV.offsetTop + bll - gu;
                eV = eV.offsetParent
            }
            return cL
        }
    } ();
    bm.sD = ej.sD = function(bC) {
        var gG = bm.rx(bC);
        window.scrollTo(gG.x, gG.y);
        return this
    };
    bm.djq = function(yO) {
        yO = (yO || "").trim();
        return co.cli(yO)
    };
    bm.dhY = ej.dhY = function(bC, cl, dF) {
        bC = bm.bM(bC);
        if (!bC) return this;
        var bG = co.cmD(cl, dF);
        if (!bG) return this;
        bm.ev(bC, "transform", bG);
        return this
    };
    bm.YS = ej.YS = function(bC, dF) {
        bC = bm.bM(bC);
        if ( !! bC) bE.hW(dF,
        function(bG, cl) {
            bm.ev(bC, cl, bG)
        });
        return this
    };
    bm.dhX = ej.dhX = function(gW, Y) {
        gW = bm.bM(gW);
        if (!gW) return {
            start: 0,
            end: 0
        };
        if (bE.bdZ(Y)) Y = {
            start: Y,
            end: Y
        };
        if (Y != null) {
            if (Y.end == null) Y.end = Y.start || 0;
            co.bGJ(gW, Y)
        } else {
            Y = co.bIN(gW)
        }
        return Y
    };
    bm.ev = ej.ev = function(bC, cl, bG) {
        bC = bm.bM(bC);
        if ( !! bC) co.bxC(bC, cl, bG);
        return this
    };
    bm.tv = ej.tv = function(bC, cl) {
        bC = bm.bM(bC);
        if (!bC) return "";
        return co.bwr(bC, cl)
    };
    bm.bLI = function() {
        var ep = /[\s\r\n]+/gi;
        return function(kl) {
            kl = (kl || "").trim().replace(ep, " ");
            if (!kl) return;
            var bB = bm.rF("style");
            document.head.appendChild(bB);
            co.bzd(bB, co.dcj(kl));
            return bB
        }
    } ();
    bm.coN = function(Tz) {
        try {
            Tz = Tz.trim();
            if ( !! Tz) return (new Function(Tz))()
        } catch(ex) {
            console.error(ex.message);
            console.error(ex.stack)
        }
    };
    bm.dD = function() {
        var ep = /#<.*?>/g,
        jO = +(new Date);
        return function(sU) {
            if (!WW) WW = [];
            var eI = "auto-" + jO++;
            WW.push(sU.replace(ep, eI));
            return eI
        }
    } ();
    bm.bEu = function() {
        if ( !! WW) {
            bm.bLI(WW.join(""));
            WW = null
        }
        return this
    };
    bm.djr = function(kl, sU) {
        kl = bm.bM(kl);
        return ! kl ? null: co.bzy(kl, sU)
    };
    bm.bJ = ej.bJ = function() {
        co.bCw.apply(co, arguments);
        return this
    };
    bm.bZ = ej.bZ = function() {
        co.bDo.apply(co, arguments);
        return this
    };
    bm.FT = ej.FT = function() {
        co.bhu.apply(co, arguments);
        return this
    };
    bm.hJ = ej.hJ = function() {
        return co.bEk.apply(co, arguments)
    };
    if (!document.head) document.head = document.getElementsByTagName("head")[0] || document.body;
    bq("dbg").dumpEL = function() {
        return blM
    };
    ej.isChange = !0
})(); (function() {
    var bq = NEJ.P,
    lr = NEJ.R,
    co = bq("nej.h"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    ch = bq("nej.v"),
    ej = bq("nej.x"),
    ep = /\s+/,
    cP = {};
    var coL = function(bro) {
        var dc = (arguments[2] || "").split(ep);
        if (dc.length > 1) {
            var cs = lr.slice.call(arguments, 1);
            bE.bA(dc,
            function(bG) {
                cs[1] = bG; ! bro ? ch.vw.apply(ch, cs) : ch.bf.apply(ch, cs)
            });
            return ! 0
        }
    };
    var coK = function(bC) {
        bC = bm.bM(bC);
        if (!bC || !cP[bC.id]) return;
        var coJ = !0,
        ca = bC.id;
        bE.hW(cP[ca],
        function() {
            coJ = !1;
            return ! 0
        });
        if (coJ) delete cP[ca]
    };
    ch.bf = ej.bf = function() {
        var dhN = function() {
            var cs = co.US.apply(co, arguments);
            if (!cs || !cs[2]) return;
            var zQ = bm.mt(cs[0]),
            rv = cP[zQ] || {};
            cP[zQ] = rv;
            zQ = cs[4] || cs[1];
            var MN = rv[zQ] || [];
            rv[zQ] = MN;
            MN.push({
                type: cs[1],
                func: cs[2],
                capt: !!cs[3],
                sfun: cs[5] || cs[2]
            });
            return cs.slice(0, 4)
        };
        return function() {
            var cs = lr.slice.call(arguments, 0);
            cs.unshift(!0);
            if (coL.apply(null, cs)) {
                return
            }
            var cs = dhN.apply(null, arguments);
            if ( !! cs) co.bbq.apply(co, cs);
            return this
        }
    } ();
    ch.vw = ej.vw = function() {
        var dhM = function() {
            var xJ = arguments,
            zQ = bm.mt(xJ[0]),
            rv = cP[zQ],
            bz = (xJ[1] || "").toLowerCase(),
            bj = xJ[2];
            if (!rv || !bz || !bj) return;
            rv = rv[bz];
            if (!rv) return;
            var dhL = !!xJ[3],
            bd = bE.oa(rv,
            function(lv) {
                return bj == lv.sfun && dhL == lv.capt
            });
            if (bd < 0) return;
            var lv = rv.splice(bd, 1)[0];
            if (!rv.length) {
                delete cP[zQ][bz]
            }
            return ! lv ? null: [bm.bM(zQ), lv.type, lv.func, lv.capt]
        };
        return function() {
            var cs = lr.slice.call(arguments, 0);
            cs.unshift(!1);
            if (coL.apply(null, cs)) {
                return
            }
            var cs = dhM.apply(null, arguments);
            if ( !! cs) {
                co.Yo.apply(co, cs);
                coK(cs[0])
            }
            return this
        }
    } ();
    ch.dY = ej.dY = function() {
        var coI = function() {
            var xJ = arguments,
            zQ = bm.mt(xJ[0]),
            rv = cP[zQ],
            MN = (xJ[1] || "").toLowerCase();
            if (!rv || !MN) return;
            var bC = bm.bM(zQ);
            bE.od(rv[MN],
            function(lv, bd, bH) {
                co.Yo(bC, lv.type, lv.func, lv.capt);
                bH.splice(bd, 1)
            });
            delete rv[MN]
        };
        var dhJ = function(bC) {
            bC = bm.bM(bC);
            if (!bC) return;
            var ca = bC.id;
            bE.hW(cP[ca],
            function(bH, bz) {
                coI(ca, bz)
            });
            delete cP[ca]
        };
        return function(bC, bz) { ! bz ? dhJ(bC) : coI(bC, bz);
            coK(bC);
            return this
        }
    } ();
    ch.eP = function() {
        var bPn;
        var LD = function(cl, bC) {
            var dc = cl.split(":");
            if (dc.length > 1) {
                if (!bPn) bPn = {
                    c: bm.hJ,
                    d: bm.df,
                    a: bm.hT
                };
                var brE = bPn[dc[0]];
                if ( !! brE) return !! brE(bC, dc[1]);
                cl = dc[1]
            }
            return !! bm.hT(bC, cl) || !!bm.df(bC, cl) || bm.hJ(bC, cl)
        };
        return function(bj) {
            if (!bj) return null;
            var bC = bj.target || bj.srcElement,
            hI = arguments[1];
            if (!hI) return bC;
            if (bE.nY(hI)) hI = LD.Z(null, hI);
            if (bE.mb(hI)) {
                while (bC) {
                    if ( !! hI(bC)) return bC;
                    bC = bC.parentNode
                }
                return null
            }
            return bC
        }
    } ();
    ch.dK = function(bj) {
        ch.nS(bj);
        ch.YI(bj);
        return this
    };
    ch.nS = function(bj) {
        if ( !! bj) { !! bj.stopPropagation ? bj.stopPropagation() : bj.cancelBubble = !0
        }
        return this
    };
    ch.YI = function(bj) {
        if ( !! bj) { !! bj.preventDefault ? bj.preventDefault() : bj.returnValue = !1
        }
        return this
    };
    ch.djs = function() {
        var coH = !1;
        var dhF = function() {
            if (coH) return;
            coH = !0;
            ch.bf(document, "click", dhE, !0)
        };
        var dhE = function(bj) {
            var bC = ch.eP(bj),
            dhD = bm.df(bC, "stopped");
            if (dhD == "true") {
                ch.dK(bj);
                bm.df(bC, "stopped", "false")
            }
        };
        return function(bj) {
            if (!bj) return;
            if (bj.type == "click") {
                ch.dK(bj);
                return
            }
            dhF();
            bm.df(ch.eP(bj), "stopped", "true")
        }
    } ();
    ch.coG = function(bj) {
        return {
            x: ch.TU(bj),
            y: ch.TT(bj)
        }
    };
    ch.TU = function(bj) {
        return bj.pageX != null ? bj.pageX: bj.clientX + bm.wR().scrollLeft
    };
    ch.TT = function(bj) {
        return bj.pageY != null ? bj.pageY: bj.clientY + bm.wR().scrollTop
    };
    ch.bn = ej.bn = function(bC, bz, Y) {
        var cs = co.US(bC, bz);
        if ( !! cs) co.bvQ(cs[0], cs[1], Y);
        return this
    };
    bq("dbg").dumpEV = function() {
        return cP
    };
    ej.isChange = !0
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    lr = NEJ.R,
    dk = NEJ.F,
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.hS) return;
    bs.hS = NEJ.C();
    bN = bs.hS.prototype;
    bs.hS.bh = function(Y) {
        Y = Y || {};
        var dz = !!this.jp && this.jp.shift();
        if (!dz) {
            dz = new this(Y);
            this.dhA = (this.dhA || 0) + 1
        }
        dz.bF(Y);
        return dz
    };
    bs.hS.bg = function() {
        var ES = function(bo, bd, bH) {
            bo.bg();
            bH.splice(bd, 1)
        };
        return function(dz) {
            if (!dz) return null;
            if (!bE.jQ(dz)) {
                if (! (dz instanceof this)) {
                    var eI = dz.constructor;
                    if ( !! eI.bg) eI.bg(dz);
                    return null
                }
                if (dz == this.blr) delete this.blr;
                if (dz == this.NS) delete this.NS;
                dz.bL();
                if (!this.jp) this.jp = [];
                if (bE.oa(this.jp, dz) < 0) {
                    this.jp.push(dz)
                }
                return null
            }
            bE.od(dz, ES, this)
        }
    } ();
    bs.hS.fd = function(Y) {
        Y = Y || {};
        if (!this.blr) this.blr = this.bh(Y);
        return this.blr
    };
    bs.hS.AN = function(Y, bRZ) {
        Y = Y || {};
        if ( !! bRZ && !!this.NS) {
            this.NS.bg();
            delete this.NS
        }
        if (!this.NS) {
            this.NS = this.bh(Y)
        } else {
            this.NS.bF(Y)
        }
        return this.NS
    };
    bN.hk = function() {
        this.AQ = {};
        this.coF = {};
        this.id = bE.bev()
    };
    bN.bF = function(Y) {
        this.bSo(Y)
    };
    bN.bL = function() {
        this.dY();
        this.coE()
    };
    bN.hd = function() {
        var dhx = function(cs) {
            if (!cs || cs.length < 3) return;
            this.coF["de-" + bE.bev()] = cs;
            ch.bf.apply(ch, cs)
        };
        return function(bH) {
            bE.bA(bH, dhx, this)
        }
    } ();
    bN.coE = function() {
        var dhw = function(cs, bS, dF) {
            delete dF[bS];
            ch.vw.apply(ch, cs)
        };
        return function() {
            bE.hW(this.coF, dhw)
        }
    } ();
    bN.kC = function(hI) {
        hI = hI || dk;
        bE.hW(this,
        function(AS, bS, dF) {
            if ( !! AS && !!AS.bg && !hI(AS)) {
                delete dF[bS];
                AS.bg()
            }
        })
    };
    bN.bg = function() {
        this.constructor.bg(this)
    };
    bN.djt = function(bz) {
        var bz = (bz || "").toLowerCase(),
        bj = this.AQ[bz];
        return !! bj && bj !== dk
    };
    bN.bf = function(bz, bj) {
        this.Yj.apply(this, arguments);
        return this
    };
    bN.vw = function(bz, bj) {
        var bz = (bz || "").toLowerCase(),
        pU = this.AQ[bz];
        if (!bE.jQ(pU)) {
            if (pU == bj) {
                delete this.AQ[bz]
            }
            return
        }
        bE.od(pU,
        function(Ls, bd, bH) {
            if (Ls == bj) {
                bH.splice(bd, 1)
            }
        })
    };
    bN.Yj = function(bz, bj) {
        if ( !! bz && bE.mb(bj)) {
            this.AQ[bz.toLowerCase()] = bj
        }
    };
    bN.bSo = function() {
        var dhu = function(bj, bz) {
            this.Yj(bz, bj)
        };
        return function(pU) {
            bE.hW(pU, dhu, this)
        }
    } ();
    bN.dY = function() {
        var bwu = function(bj, bz) {
            this.dY(bz)
        };
        return function(bz) {
            var bz = (bz || "").toLowerCase();
            if ( !! bz) {
                delete this.AQ[bz]
            } else {
                bE.hW(this.AQ, bwu, this)
            }
        }
    } ();
    bN.dht = function(bz, bj) {
        if (!bz || !bE.mb(bj)) {
            return
        }
        bz = bz.toLowerCase();
        var pU = this.AQ[bz];
        if (!pU) {
            this.AQ[bz] = bj;
            return
        }
        if (!bE.jQ(pU)) {
            this.AQ[bz] = [pU]
        }
        this.AQ[bz].push(bj)
    };
    bN.bn = function(bz) {
        var bz = (bz || "").toLowerCase(),
        bj = this.AQ[bz];
        if (!bj) return;
        var cs = lr.slice.call(arguments, 1);
        if (!bE.jQ(bj)) {
            return bj.apply(this, cs)
        }
        bE.bA(bj,
        function(ec) {
            try {
                ec.apply(this, cs)
            } catch(ex) {
                console.error(ex.message);
                console.error(ex.stack)
            }
        },
        this);
        return this
    };
    bs.blB = function() {
        var cP = {};
        return function(ca, eI, Y) {
            var hh = eI.dhs;
            if (!hh) {
                hh = bE.mz(10);
                eI.dhs = hh
            }
            var bS = ca + "-" + hh,
            dz = cP[bS];
            if ( !! Y && !dz) {
                dz = eI.bh(Y);
                dz.bg = dz.bg.fD(function(bj) {
                    delete cP[bS];
                    delete dz.bg
                });
                cP[bS] = dz
            }
            return dz
        }
    } ()
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.dq) return;
    bs.dq = NEJ.C();
    bN = bs.dq.bu(bs.hS);
    bN.hk = function() {
        this.coD = {};
        this.hy();
        this.bHO()
    };
    bN.bF = function(Y) {
        this.bI(Y);
        this.oL = Y.umi || "";
        this.XW = Y.dispatcher;
        this.dju = Y.composite || de;
        this.bSo({
            onshow: this.cw.Z(this),
            onhide: this.cG.Z(this),
            onrefresh: this.cm.Z(this),
            onmessage: this.Th.Z(this),
            onbeforehide: this.dhm.Z(this)
        })
    };
    bN.bL = function() {
        delete this.oL;
        this.coD = {};
        this.bO()
    };
    bN.djv = function(bj) {
        if ( !! bj) bj.stopped = !0
    };
    bN.bHO = dk;
    bN.cw = dk;
    bN.cG = dk;
    bN.cm = dk;
    bN.Th = dk;
    bN.dhm = dk;
    bN.djw = function() {
        var bym = function(dhi) {
            return !! bs.fv && dhi instanceof bs.fv
        };
        return function() {
            this.kC(bym)
        }
    } ();
    bN.djx = function(ia, fG, gn) {
        this.XW.Ds({
            to: ia,
            mode: gn || 0,
            data: fG,
            from: this.oL
        })
    };
    bN.djy = function(bz, W) {
        this.XW.dhe(bz, {
            from: this.oL,
            data: W
        })
    };
    bN.djz = function() {
        this.XW.dgZ.apply(this.XW, arguments)
    };
    bN.dgY = function() {
        return this.coD
    };
    bm.cR = function() {
        var XC;
        bm.dgX = function() {
            if (!XC) return;
            bE.hW(XC,
            function(gR, cD) {
                dispatcher.dm(cD, gR)
            });
            XC = null
        };
        return function(cD, gR) {
            if ( !! window.dispatcher) {
                dispatcher.dm.apply(dispatcher, arguments)
            } else {
                if (!XC) {
                    XC = {}
                }
                XC[cD] = gR
            }
        }
    } ()
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    ut = NEJ.P("nej.ut"),
    eu = NEJ.P("edu.u"),
    DS;
    p.dq = NEJ.C();
    DS = p.dq.bu(ut.dq, true);
    DS.bHO = function(Y) {
        this.fB = this.en();
        this.bb = e.iN(this.eb());
        this.cz()
    };
    DS.eb = f;
    DS.cz = f;
    DS.en = f;
    DS.cw = function(Y) {
        this.wG(Y);
        this.dgW();
        if (eu.nf()) {
            g.docTitle = document.title
        }
    };
    DS.cm = function(Y) {
        this.wG(Y);
        if (eu.nf()) {
            g.docTitle = document.title
        }
    };
    DS.wG = f;
    DS.dgW = function() {
        if ( !! this.fB && this.bb.parentNode != this.fB) {
            this.fB.appendChild(this.bb)
        }
    };
    DS.cG = function() {
        u.hW(g.modelList,
        function(AS, bS, dF) {
            if ( !! AS && !!AS.bg) {
                delete dF[bS];
                AS.bg()
            }
        });
        e.dr(this.bb)
    }
})(); (function() {
    if (typeof TrimPath === "undefined") {
        TrimPath = {};
        if (typeof exports !== "undefined") TrimPath = exports
    }
    var bhR = {},
    blH = [],
    cox = /\s+/g,
    jO = +(new Date),
    Xq,
    eH,
    EA;
    var SK = function() {
        var ng = /^\s*[\[\{'"].*?[\]\}'"]\s*$/,
        wl = /[\&\|\<\>\+\-\*\/\%\,\(\)\[\]\?\:\!\=\;]/,
        Ir = /^(?:defined|null|undefined|true|false|instanceof|new|this|typeof|\$v|[\d]+)$/i,
        dgT = /^new\s+/,
        dgS = /['"]/;
        var dgR = function(bG) {
            if (ng.test(bG)) return;
            bG = bG.split(".")[0].trim();
            if (!bG || dgS.test(bG)) return;
            bG = bG.replace(dgT, "");
            try {
                if (Ir.test(bG)) return;
                EA[bG] = 1
            } catch(e) {}
        };
        return function(da) {
            da = da || "";
            if (!da || ng.test(da)) return;
            var dc = da.split(wl);
            for (var i = 0,
            l = dc.length; i < l; i++) dgR(dc[i])
        }
    } ();
    var dgQ = function(er) {
        if (er[2] != "in") throw "bad for loop statement: " + er.join(" ");
        blH.push(er[1]);
        SK(er[3]);
        return "var __HASH__" + er[1] + " = " + er[3] + "," + er[1] + "," + er[1] + "_count=0;" + "if (!!__HASH__" + er[1] + ")" + "for(var " + er[1] + "_key in __HASH__" + er[1] + "){" + er[1] + " = __HASH__" + er[1] + "[" + er[1] + "_key];" + "if (typeof(" + er[1] + ')=="function") continue;' + er[1] + "_count++;"
    };
    var dgP = function() {
        var er = blH[blH.length - 1];
        return "}; if(!__HASH__" + er + "||!" + er + "_count){"
    };
    var dgL = function() {
        blH.pop();
        return "};"
    };
    var dgK = function(er) {
        if (er[2] != "as") throw "bad for list loop statement: " + er.join(" ");
        var bgU = er[1].split("..");
        if (bgU.length > 1) {
            SK(bgU[0]);
            SK(bgU[1]);
            return "for(var " + er[3] + "," + er[3] + "_index=0," + er[3] + "_beg=" + bgU[0] + "," + er[3] + "_end=" + bgU[1] + "," + er[3] + "_length=parseInt(" + er[3] + "_end-" + er[3] + "_beg+1);" + er[3] + "_index<" + er[3] + "_length;" + er[3] + "_index++){" + er[3] + " = " + er[3] + "_beg+" + er[3] + "_index;"
        } else {
            SK(er[1]);
            return "for(var __LIST__" + er[3] + " = " + er[1] + "," + er[3] + "," + er[3] + "_index=0," + er[3] + "_length=__LIST__" + er[3] + ".length;" + er[3] + "_index<" + er[3] + "_length;" + er[3] + "_index++){" + er[3] + " = __LIST__" + er[3] + "[" + er[3] + "_index];"
        }
    };
    var dgI = function(er) {
        if (!er || !er.length) return;
        er.shift();
        var cl = er[0].split("(")[0];
        return "var " + cl + " = function" + er.join("").replace(cl, "") + "{var __OUT=[];"
    };
    var dgH = function(er) {
        if (!er[1]) throw "bad include statement: " + er.join(" ");
        return 'if (typeof inline == "function"){__OUT.push(inline('
    };
    var bFT = function(jf, er) {
        SK(er.slice(1).join(" "));
        return jf
    };
    var dgG = function(er) {
        return bFT("if(", er)
    };
    var dgF = function(er) {
        return bFT("}else if(", er)
    };
    var dgE = function(er) {
        return bFT("var ", er)
    };
    eH = {
        blk: /^\{(cdata|minify|eval)/i,
        tag: "forelse|for|list|if|elseif|else|var|macro|break|notrim|trim|include",
        def: {
            "if": {
                pfix: dgG,
                sfix: "){",
                pmin: 1
            },
            "else": {
                pfix: "}else{"
            },
            elseif: {
                pfix: dgF,
                sfix: "){",
                pdft: "true"
            },
            "/if": {
                pfix: "}"
            },
            "for": {
                pfix: dgQ,
                pmin: 3
            },
            forelse: {
                pfix: dgP
            },
            "/for": {
                pfix: dgL
            },
            list: {
                pfix: dgK,
                pmin: 3
            },
            "/list": {
                pfix: "};"
            },
            "break": {
                pfix: "break;"
            },
            "var": {
                pfix: dgE,
                sfix: ";"
            },
            macro: {
                pfix: dgI
            },
            "/macro": {
                pfix: 'return __OUT.join("");};'
            },
            trim: {
                pfix: function() {
                    Xq = !0
                }
            },
            "/trim": {
                pfix: function() {
                    Xq = null
                }
            },
            inline: {
                pfix: dgH,
                pmin: 1,
                sfix: "));}"
            }
        },
        ext: {
            seed: function(jf) {
                return (jf || "") + "" + jO
            },
            "default": function(bG, bgE) {
                return bG || bgE
            }
        }
    };
    var dgr = function() {
        var dgq = /\\([\{\}])/g;
        return function(da, mR) {
            da = da.replace(dgq, "$1");
            var er = da.slice(1, -1).split(cox),
            lD = eH.def[er[0]];
            if (!lD) {
                bmm(da, mR);
                return
            }
            if ( !! lD.pmin && lD.pmin >= er.length) throw "Statement needs more parameters:" + da;
            mR.push( !! lD.pfix && typeof lD.pfix != "string" ? lD.pfix(er) : lD.pfix || "");
            if ( !! lD.sfix) {
                if (er.length <= 1) {
                    if ( !! lD.pdft) mR.push(lD.pdft)
                } else {
                    for (var i = 1,
                    l = er.length; i < l; i++) {
                        if (i > 1) mR.push(" ");
                        mR.push(er[i])
                    }
                }
                mR.push(lD.sfix)
            }
        }
    } ();
    var cop = function(Wz, mR) {
        if (!Wz || !Wz.length) return;
        if (Wz.length == 1) {
            var bIe = Wz.pop();
            SK(bIe);
            mR.push(bIe == "" ? '""': bIe);
            return
        }
        var bIG = Wz.pop().split(":");
        mR.push("__MDF['" + bIG.shift() + "'](");
        cop(Wz, mR);
        if (bIG.length > 0) {
            var cs = bIG.join(":");
            SK(cs);
            mR.push("," + cs)
        }
        mR.push(")")
    };
    var bmm = function(da, mR) {
        if (!da) return;
        var bmn = da.split("\n");
        if (!bmn || !bmn.length) return;
        for (var i = 0,
        l = bmn.length,
        Sp; i < l; i++) {
            Sp = bmn[i];
            if ( !! Xq) {
                Sp = Sp.trim();
                if (!Sp) continue
            }
            dgm(Sp, mR);
            if ( !! Xq && i < l - 1) mR.push("__OUT.push('\\n');")
        }
    };
    var dgm = function() {
        var dgi = /\|\|/g,
        dgh = /#@@#/g;
        return function(da, mR) {
            var bgc = "}",
            bgb = -1,
            eL = da.length,
            qb, lJ, Wg, bmu, bfY;
            while (bgb + bgc.length < eL) {
                qb = "${";
                lJ = "}";
                Wg = da.indexOf(qb, bgb + bgc.length);
                if (Wg < 0) break;
                if (da.charAt(Wg + 2) == "%") {
                    qb = "${%";
                    lJ = "%}"
                }
                bmu = da.indexOf(lJ, Wg + qb.length);
                if (bmu < 0) break;
                bmv(da.substring(bgb + bgc.length, Wg), mR);
                bfY = da.substring(Wg + qb.length, bmu).replace(dgi, "#@@#").split("|");
                for (var i = 0,
                l = bfY.length; i < l; bfY[i] = bfY[i].replace(dgh, "||"), i++);
                mR.push("__OUT.push(");
                cop(bfY, mR);
                mR.push(");");
                bgc = lJ;
                bgb = bmu
            }
            bmv(da.substring(bgb + bgc.length), mR)
        }
    } ();
    var bmv = function() {
        var dF = {
            r: /\n|\\|\'/g,
            "\n": "\\n",
            "\\": "\\\\",
            "'": "\\'"
        };
        var dgg = function(da) {
            return (da || "").replace(dF.r,
            function($1) {
                return dF[$1] || $1
            })
        };
        return function(da, mR) {
            if (!da) return;
            mR.push("__OUT.push('" + dgg(da) + "');")
        }
    } ();
    var dgf = function() {
        var dgd = /\t/g,
        dgc = /\n/g,
        dfX = /\r\n?/g;
        var cog = function(da, qb) {
            var bd = da.indexOf("}", qb + 1);
            while (da.charAt(bd - 1) == "\\") {
                bd = da.indexOf("}", bd + 1)
            }
            return bd
        };
        var dfT = function() {
            var dc = [],
            dfS = arguments[0];
            for (var x in dfS) {
                x = (x || "").trim();
                if (!x) continue;
                dc.push(x + "=$v('" + x + "')")
            }
            return dc.length > 0 ? "var " + dc.join(",") + ";": ""
        };
        return function(da) {
            EA = {};
            da = da.replace(dfX, "\n").replace(dgd, "    ");
            var yd = ["if(!__CTX) return '';", ""];
            yd.push("function $v(__NAME){var v = __CTX[__NAME];return v==null?window[__NAME]:v;};");
            yd.push("var defined=function(__NAME){return __CTX[__NAME]!=null;},");
            yd.push("__OUT=[];");
            var Sa = -1,
            eL = da.length;
            var qu, VR, bfw, bfu, NW, bfs, bPk, bfm;
            while (Sa + 1 < eL) {
                qu = Sa;
                qu = da.indexOf("{", qu + 1);
                while (qu >= 0) {
                    VR = cog(da, qu);
                    bfw = da.substring(qu, VR);
                    bfu = bfw.match(eH.blk);
                    if ( !! bfu) {
                        NW = bfu[1].length + 1;
                        bfs = da.indexOf("}", qu + NW);
                        if (bfs >= 0) {
                            bPk = bfs - qu - NW <= 0 ? "{/" + bfu[1] + "}": bfw.substr(NW + 1);
                            NW = da.indexOf(bPk, bfs + 1);
                            if (NW >= 0) {
                                bmm(da.substring(Sa + 1, qu), yd);
                                bfm = da.substring(bfs + 1, NW);
                                switch (bfu[1]) {
                                case "cdata":
                                    bmv(bfm, yd);
                                    break;
                                case "minify":
                                    bmv(bfm.replace(dgc, " ").replace(cox, " "), yd);
                                    break;
                                case "eval":
                                    if ( !! bfm) yd.push("__OUT.push((function(){" + bfm + "})());");
                                    break
                                }
                                qu = Sa = NW + bPk.length - 1
                            }
                        }
                    } else if (da.charAt(qu - 1) != "$" && da.charAt(qu - 1) != "\\" && bfw.substr(bfw.charAt(1) == "/" ? 2 : 1).search(eH.tag) == 0) {
                        break
                    }
                    qu = da.indexOf("{", qu + 1)
                }
                if (qu < 0) break;
                VR = cog(da, qu);
                if (VR < 0) break;
                bmm(da.substring(Sa + 1, qu), yd);
                dgr(da.substring(qu, VR + 1), yd);
                Sa = VR
            }
            bmm(da.substring(Sa + 1), yd);
            yd.push(';return __OUT.join("");');
            yd[1] = dfT(EA);
            EA = null;
            return new Function("__CTX", "__MDF", yd.join(""))
        }
    } ();
    TrimPath.seed = function() {
        return jO
    };
    TrimPath.merge = function() {
        var bfl = {};
        TrimPath.dump = function() {
            return {
                func: bfl,
                text: bhR
            }
        };
        return function(hh, W, uI) {
            try {
                W = W || {};
                if (!bfl[hh] && !bhR[hh]) return "";
                if (!bfl[hh]) {
                    bfl[hh] = dgf(bhR[hh]);
                    delete bhR[hh]
                }
                if ( !! uI) {
                    for (var x in eH.ext) if (!uI[x]) uI[x] = eH.ext[x]
                }
                return bfl[hh](W, uI || eH.ext)
            } catch(ex) {
                return ex.message || ""
            }
        }
    } ();
    TrimPath.parse = function() {
        var dfR = +(new Date);
        return function(da, hh) {
            if (!da) return "";
            hh = hh || "ck_" + dfR++;
            bhR[hh] = da;
            return hh
        }
    } ()
})(); (function() {
    var bq = NEJ.P,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    cod = {};
    bm.dfN = TrimPath.seed;
    bm.bX = function() {
        var cob = function(ca) {
            return ! bm.bmI ? "": bm.bmI(ca)
        };
        return function(hh, W, uI) {
            W = W || {};
            W.inline = cob;
            uI = NEJ.X(NEJ.X({},
            cod), uI);
            uI.rand = bE.eW;
            uI.format = bE.vP;
            uI.escape = bE.dV;
            uI.inline = cob;
            return TrimPath.merge(hh, W, uI)
        }
    } ();
    bm.ee = function(da, dfL) {
        if (!da) return "";
        var hh, bC = bm.bM(da);
        if ( !! bC) {
            hh = bC.id;
            da = bC.value || bC.innerText;
            if (!dfL) bm.sE(bC)
        }
        return TrimPath.parse(da, hh)
    };
    bm.dfK = function(dO, hh, W, uI) {
        dO = bm.bM(dO);
        if ( !! dO) dO.innerHTML = bm.bX(hh, W, uI);
        return this
    };
    bm.djB = function(dF) {
        NEJ.X(cod, dF)
    };
    bq("dbg").dumpJST = function() {
        return TrimPath.dump()
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.beQ) return;
    bs.beQ = NEJ.C();
    bN = bs.beQ.bu(bs.hS);
    bN.hk = function() {
        this.cg = {};
        this.hy()
    };
    bN.bF = function(Y) {
        this.bI(Y);
        this.beH = bm.bM(Y.element) || window;
        this.cnZ(Y.event);
        this.dfG();
        this.bn("oninit")
    };
    bN.bL = function() {
        var RH = function(bG, bS, dF) {
            if (!bE.jQ(bG)) {
                bE.bpD(this.beH, bS)
            }
            delete dF[bS]
        };
        return function() {
            this.bO();
            bE.hW(this.cg, RH, this);
            delete this.beH
        }
    } ();
    bN.bmR = function(bC, bz) {
        bC = bm.bM(bC);
        return bC === this.beH && (!bz || !!this.cg["on" + bz])
    };
    bN.cnZ = function(bj) {
        if (bE.nY(bj)) {
            var cl = "on" + bj;
            if (!this.cg[cl]) {
                this.cg[cl] = this.dfE.Z(this, bj)
            }
            this.cnX(bj);
            return
        }
        if (bE.jQ(bj)) {
            bE.bA(bj, this.cnZ, this)
        }
    };
    bN.cnX = function(bz) {
        var bj = "on" + bz,
        ec = this.beH[bj],
        cnW = this.cg[bj];
        if (ec != cnW) {
            this.bmU(bz);
            if ( !! ec && ec != dk) this.cnU(bz, ec);
            this.beH[bj] = cnW
        }
    };
    bN.cnU = function(bz, ec, dfw) {
        var bH = this.cg[bz];
        if (!bH) {
            bH = [];
            this.cg[bz] = bH
        }
        if (bE.mb(ec)) { ! dfw ? bH.push(ec) : bH.unshift(ec)
        }
    };
    bN.bmU = function(bz, ec) {
        var bH = this.cg[bz];
        if (!bH || !bH.length) return;
        if (!ec) {
            delete this.cg[bz];
            return
        }
        bE.od(bH,
        function(bG, bd, Hw) {
            if (ec === bG) {
                Hw.splice(bd, 1);
                return ! 0
            }
        })
    };
    bN.dfE = function(bz, bj) {
        bj = bj || {
            noargs: !0
        };
        if (bj == de) bj = {};
        bj.type = bz;
        this.bn("ondispatch", bj);
        if ( !! bj.stopped) return;
        bE.bA(this.cg[bz],
        function(ec) {
            try {
                ec(bj)
            } catch(ex) {
                console.error(ex.message);
                console.error(ex.stack)
            }
        })
    };
    bN.dfG = function() {
        var dfp = function(bj) {
            var cs = bj.args,
            bz = cs[1].toLowerCase();
            if (this.bmR(cs[0], bz)) {
                bj.stopped = !0;
                this.cnX(bz);
                this.cnU(bz, cs[2], cs[3]);
                this.bn("oneventadd", {
                    type: bz,
                    listener: cs[2]
                })
            }
        };
        var dfk = function(bj) {
            var cs = bj.args,
            bz = cs[1].toLowerCase();
            if (this.bmR(cs[0], bz)) {
                bj.stopped = !0;
                this.bmU(bz, cs[2])
            }
        };
        var bwu = function(bj) {
            var cs = bj.args,
            bz = (cs[1] || "").toLowerCase();
            if (this.bmR(cs[0])) {
                if ( !! bz) {
                    this.bmU(bz);
                    return
                }
                bE.hW(this.cg,
                function(bG, bS) {
                    if (bE.jQ(bG)) {
                        this.bmU(bS)
                    }
                },
                this)
            }
        };
        var dfj = function(bj) {
            var cs = bj.args,
            bz = cs[1].toLowerCase();
            if (this.bmR(cs[0], bz)) {
                bj.stopped = !0;
                cs[0]["on" + bz].apply(cs[0], cs.slice(2))
            }
        };
        return function() {
            if ( !! this.dfi) return;
            this.dfi = true;
            ch.bf = ch.bf.fD(dfp.Z(this));
            ch.vw = ch.vw.fD(dfk.Z(this));
            ch.dY = ch.dY.fD(bwu.Z(this));
            ch.bn = ch.bn.fD(dfj.Z(this))
        }
    } ()
})(); (function() {
    var bq = NEJ.P,
    dk = NEJ.F,
    dx = bq("nej.g"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ut.j"),
    bN,
    dff = 6e4;
    if ( !! bs.bea) return;
    bs.bea = NEJ.C();
    bN = bs.bea.bu(eO.hS);
    bN.hk = function() {
        this.hy();
        this.bdX = {
            onerror: this.dfe.Z(this),
            onloaded: this.dfd.Z(this)
        };
        if (!this.constructor.cg) this.constructor.cg = {
            loaded: {}
        }
    };
    bN.bF = function(Y) {
        this.bI(Y);
        this.bTA = Y.version;
        this.bTQ = Y.timeout;
        this.bdX.version = this.bTA;
        this.bdX.timeout = this.bTQ
    };
    bN.cnO = function(bS) {
        delete this.constructor.cg[bS]
    };
    bN.Ln = function(bS) {
        return this.constructor.cg[bS]
    };
    bN.cnN = function(bS, W) {
        this.constructor.cg[bS] = W
    };
    bN.bmV = dk;
    bN.cnM = function(hH) {
        ch.dY(hH)
    };
    bN.bdN = function(hH) {
        hH.src = this.lN;
        document.head.appendChild(hH)
    };
    bN.deZ = function() {
        var cP = this.Ln(this.lN);
        if (!cP) return;
        window.clearTimeout(cP.timer);
        this.cnM(cP.request);
        delete cP.bind;
        delete cP.timer;
        delete cP.request;
        this.cnO(this.lN);
        this.Ln("loaded")[this.lN] = !0
    };
    bN.bnb = function(cl) {
        var cP = this.Ln(this.lN);
        if (!cP) return;
        var bH = cP.bind;
        this.deZ();
        if ( !! bH && bH.length > 0) {
            var dz;
            while (bH.length) {
                dz = bH.shift();
                try {
                    dz.bn(cl, arguments[1])
                } catch(ex) {
                    console.error(ex.message);
                    console.error(ex.stack)
                }
                dz.bg()
            }
        }
    };
    bN.Rp = function(jT) {
        this.bnb("onerror", jT)
    };
    bN.cnL = function() {
        this.bnb("onloaded")
    };
    bN.deX = function(cJ) {
        this.constructor.bh(this.bdX).UA(cJ)
    };
    bN.cnK = function(jT) {
        var cP = this.Ln(this.vT);
        if (!cP) return;
        if ( !! jT) cP.error++;
        cP.loaded++;
        if (cP.loaded < cP.total) return;
        this.cnO(this.vT);
        this.bn(cP.error > 0 ? "onerror": "onloaded")
    };
    bN.dfe = function(jT) {
        this.cnK(!0)
    };
    bN.dfd = function() {
        this.cnK()
    };
    bN.UA = function(cJ) {
        cJ = bE.bTj(cJ);
        if (!cJ) {
            this.bn("onerror", {
                code: dx.bOC,
                message: "请指定要载入的资源地址！"
            });
            return this
        }
        this.lN = cJ;
        if ( !! this.bTA) this.lN += (this.lN.indexOf("?") < 0 ? "?": "&") + this.bTA;
        if (this.Ln("loaded")[this.lN]) {
            try {
                this.bn("onloaded")
            } catch(ex) {
                console.error(ex.message);
                console.error(ex.stack)
            }
            this.bg();
            return this
        }
        var cP = this.Ln(this.lN),
        hH;
        if ( !! cP) {
            cP.bind.unshift(this);
            cP.timer = window.clearTimeout(cP.timer)
        } else {
            hH = this.bmV();
            cP = {
                request: hH,
                bind: [this]
            };
            this.cnN(this.lN, cP);
            ch.bf(hH, "load", this.cnL.Z(this));
            ch.bf(hH, "error", this.Rp.Z(this, {
                code: dx.bsJ,
                message: "无法加载指定资源文件[" + this.lN + "]！"
            }))
        }
        if (this.bTQ != 0) cP.timer = window.setTimeout(this.Rp.Z(this, {
            code: dx.bZP,
            message: "指定资源文件[" + this.lN + "]载入超时！"
        }), this.bTQ || dff);
        if ( !! hH) this.bdN(hH);
        this.bn("onloading");
        return this
    };
    bN.cnJ = function(bH) {
        if (!bH || !bH.length) {
            this.bn("onerror", {
                code: dx.bOC,
                message: "请指定要载入的资源队列！"
            });
            return this
        }
        this.vT = bE.eW();
        var cP = {
            error: 0,
            loaded: 0,
            total: bH.length
        };
        this.cnN(this.vT, cP);
        for (var i = 0,
        l = bH.length; i < l; i++) {
            if (!bH[i]) {
                cP.total--;
                continue
            }
            this.deX(bH[i])
        }
        this.bn("onloading");
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = bq("nej.e"),
    co = bq("nej.h"),
    bs = bq("nej.ut.j"),
    bdp;
    if ( !! bs.bxE) return;
    bs.bxE = NEJ.C();
    bdp = bs.bxE.bu(bs.bea);
    bdp.bmV = function() {
        var ij = bm.rF("iframe");
        ij.width = 0;
        ij.height = 0;
        ij.style.display = "none";
        return ij
    };
    bdp.bdN = function(hH) {
        hH.src = this.lN;
        document.body.appendChild(hH)
    };
    bdp.Rp = function(jT) {
        var ij = (this.Ln(this.lN) || de).request;
        this.bnb("onerror", jT);
        co.UJ(ij)
    };
    bdp.cnL = function() {
        var rM = null,
        ij = (this.Ln(this.lN) || de).request;
        try {
            rM = ij.contentWindow.document.body
        } catch(ex) {}
        this.bnb("onloaded", rM);
        co.UJ(ij)
    }
})(); (function() {
    var bq = NEJ.P,
    bm = bq("nej.e"),
    bs = bq("nej.ut.j"),
    bxT;
    if ( !! bs.bnj) return;
    bs.bnj = NEJ.C();
    bxT = bs.bnj.bu(bs.bea);
    bxT.bmV = function() {
        return bm.rF("link")
    };
    bxT.bdN = function(hH) {
        hH.href = this.lN;
        document.head.appendChild(hH)
    }
})(); (function() {
    var bq = NEJ.P,
    bm = bq("nej.e"),
    bs = bq("nej.ut.j"),
    bnk;
    if ( !! bs.bnl) return;
    bs.bnl = NEJ.C();
    bnk = bs.bnl.bu(bs.bea);
    bnk.bF = function(Y) {
        this.bI(Y);
        this.cnG = Y.async;
        this.byw = Y.charset;
        this.bdX.async = !1;
        this.bdX.charset = this.byw
    };
    bnk.bmV = function() {
        var hH = bm.rF("script");
        if (this.cnG != null) hH.async = !!this.cnG;
        if (this.byw != null) hH.charset = this.byw;
        return hH
    };
    bnk.cnM = function(hH) {
        bm.sE(hH)
    }
})(); (function() {
    var bq = NEJ.P,
    fY = bq("nej.j"),
    bs = bq("nej.ut.j");
    fY.deJ = function(cJ, Y) {
        bs.bnl.bh(Y).UA(cJ);
        return this
    };
    fY.deI = function(bH, Y) {
        bs.bnl.bh(Y).cnJ(bH);
        return this
    };
    fY.djG = function(cJ, Y) {
        bs.bnj.bh(Y).UA(cJ);
        return this
    };
    fY.deF = function(bH, Y) {
        bs.bnj.bh(Y).cnJ(bH);
        return this
    };
    fY.cnE = function(cJ, Y) {
        bs.bxE.bh(Y).UA(cJ);
        return this
    }
})(); (function() {
    var o = NEJ.O,
    u = NEJ.P("nej.u"),
    j = NEJ.P("nej.j");
    j.ox = function() {
        var ft = new Date,
        dey = +ft,
        Nd = 864e5;
        var dex = function(cl) {
            var xf = document.cookie,
            rS = "\\b" + cl + "=",
            bnq = xf.search(rS);
            if (bnq < 0) return "";
            bnq += rS.length - 2;
            var bAn = xf.indexOf(";", bnq);
            if (bAn < 0) bAn = xf.length;
            return xf.substring(bnq, bAn) || ""
        };
        return function(cl, W) {
            if (W === undefined) return dex(cl);
            if (u.nY(W)) {
                if ( !! W) {
                    document.cookie = cl + "=" + W + ";";
                    return W
                }
                W = {
                    expires: -100
                }
            }
            W = W || o;
            var xf = cl + "=" + (W.value || "") + ";";
            delete W.value;
            if (W.expires !== undefined) {
                ft.setTime(dey + W.expires * Nd);
                W.expires = ft.toGMTString()
            }
            xf += u.bqd(W, ";");
            document.cookie = xf
        }
    } ()
})(); (function() {
    var bq = NEJ.P,
    dk = NEJ.F,
    fL = bq("nej.c"),
    dx = bq("nej.g"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    fY = bq("nej.j"),
    eO = bq("nej.ut"),
    bs = bq("nej.ut.j"),
    bN;
    if ( !! bs.Ua) return;
    bs.Ua = NEJ.C();
    bN = bs.Ua.bu(eO.hS);
    bN.bF = function(Y) {
        this.bI(Y);
        this.Fh = {
            url: "",
            sync: !1,
            cookie: !1,
            type: "text",
            method: "GET",
            timeout: 6e4
        };
        NEJ.EX(this.Fh, Y);
        var MJ = fL.bM("csrf");
        if ( !! MJ.cookie && !!MJ.param) {
            var Au = encodeURIComponent(MJ.param) + "=" + encodeURIComponent(fY.ox(MJ.cookie) || ""),
            baA = this.Fh.url.indexOf("?") < 0 ? "?": "&";
            this.Fh.url += baA + Au
        }
        this.bnx = Y.headers || {};
        var da = this.bnx[dx.Rq];
        if (da == null) this.bnx[dx.Rq] = dx.cqu
    };
    bN.bL = function() {
        this.bO();
        delete this.Nr;
        delete this.Fh;
        delete this.bnx
    };
    bN.CP = function(bj) {
        var fJ = bj.status;
        if (fJ == -1) {
            this.bn("onerror", {
                code: dx.bZP,
                message: "请求[" + this.Fh.url + "]超时！"
            });
            return
        }
        if (("" + fJ).indexOf("2") != 0) {
            this.bn("onerror", {
                data: fJ,
                code: dx.bsJ,
                message: "服务器返回异常状态[" + fJ + "]!"
            });
            return
        }
        this.bn("onload", bm.dib(bj.result, this.Fh.type))
    };
    bN.GK = dk;
    bN.dew = function(W) {
        var cJ = this.Fh.url;
        if (!cJ) {
            this.bn("onerror", {
                code: dx.bOC,
                message: "没有输入请求地址！"
            });
            return this
        }
        try {
            this.Fh.data = W == null ? null: W;
            var bj = {
                request: this.Fh,
                headers: this.bnx
            };
            try {
                this.bn("onbeforerequest", bj)
            } catch(ex) {
                console.error(ex.message);
                console.error(ex.stack)
            }
            this.GK(bj)
        } catch(e) {
            this.bn("onerror", {
                code: dx.bsJ,
                message: "请求[" + cJ + "]失败:" + e.message + "！"
            })
        }
        return this
    };
    bN.rt = dk;
    bN.cnC = dk;
    bN.cnA = function(bS) {
        if (!bE.jQ(bS)) {
            return this.cnC(bS) || ""
        }
        var cL = {};
        bE.bA(bS,
        function(bG) {
            cL[bG] = this.cnA(bG)
        },
        this);
        return cL
    }
})(); (function() {
    var bq = NEJ.P,
    dk = NEJ.F,
    co = bq("nej.h"),
    dx = bq("nej.g"),
    bE = bq("nej.u"),
    bs = bq("nej.ut.j"),
    bN;
    if ( !! bs.bnB) return;
    bs.bnB = NEJ.C();
    bN = bs.bnB.bu(bs.Ua);
    bN.bL = function() {
        this.bO();
        window.clearTimeout(this.gp);
        delete this.gp;
        try {
            this.uB.onreadystatechange = dk;
            this.uB.abort()
        } catch(e) {}
        delete this.uB
    };
    bN.GK = function() {
        var deq = function(bG, bS) {
            this.uB.setRequestHeader(bS, bG)
        };
        return function(Y) {
            var hH = Y.request,
            Fz = Y.headers;
            this.uB = co.bCs();
            if (Fz[dx.Rq] === dx.baJ) {
                delete Fz[dx.Rq];
                this.uB.upload.onprogress = this.bCu.Z(this, 1);
                if (hH.data.tagName === "FORM") hH.data = new FormData(hH.data)
            }
            this.uB.onreadystatechange = this.bCu.Z(this, 2);
            if (hH.timeout != 0) {
                this.gp = window.setTimeout(this.bCu.Z(this, 3), hH.timeout)
            }
            this.uB.open(hH.method, hH.url, !hH.sync);
            bE.hW(Fz, deq, this);
            if ( !! this.Fh.cookie && "withCredentials" in this.uB) this.uB.withCredentials = !0;
            this.uB.send(hH.data)
        }
    } ();
    bN.bCu = function(bz) {
        switch (bz) {
        case 1:
            this.bn("onuploading", arguments[1]);
            break;
        case 2:
            if (this.uB.readyState == 4) this.CP({
                status: this.uB.status,
                result: this.uB.responseText || ""
            });
            break;
        case 3:
            this.CP({
                status:
                -1
            });
            break
        }
    };
    bN.cnC = function(bS) {
        return ! this.uB ? "": this.uB.getResponseHeader(bS)
    };
    bN.rt = function() {
        this.CP({
            status: 0
        });
        return this
    }
})(); (function() {
    var zt = NEJ.P("nej.p"),
    bs = window,
    oq = zt.Ti,
    cnz = oq.ipad || oq.iphone;
    if (!cnz && !!bs.requestAnimationFrame && !!bs.cancelRequestAnimationFrame) return;
    var jf = zt.Dz.prefix.pro;
    if (!cnz && !!bs[jf + "RequestAnimationFrame"] && !!bs[jf + "CancelRequestAnimationFrame"]) {
        bs.requestAnimationFrame = bs[jf + "RequestAnimationFrame"];
        bs.cancelRequestAnimationFrame = bs[jf + "CancelRequestAnimationFrame"];
        return
    }
    var den = oq.desktop ? 80 : oq.ios ? 50 : 30;
    bs.requestAnimationFrame = function(kr) {
        return window.setTimeout(function() {
            try {
                kr( + (new Date))
            } catch(ex) {}
        },
        1e3 / den)
    };
    bs.cancelRequestAnimationFrame = function(ca) {
        window.clearTimeout(ca);
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    dk = NEJ.F,
    bE = bq("nej.u"),
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    co = bq("nej.h"),
    ej = bq("nej.x"),
    dj;
    if ( !! bm.Gp) return;
    bm.Gp = ej.Gp = function() {
        var cP = {},
        ng = /^(?:mouse.*|(?:dbl)?click)$/i;
        window.onflashevent = function(bj) {
            var ca = decodeURIComponent(bj.target),
            bz = bj.type.toLowerCase();
            var dI = cP[ca + "-tgt"];
            if ( !! dI && ng.test(bz)) {
                dem(dI, bj)
            }
            var ec = cP[ca + "-on" + bz];
            if ( !! ec) {
                var cL = "";
                try {
                    cL = ec(bj)
                } catch(e) {}
                return cL
            }
        };
        var dei = function(Y) {
            var dO = bm.bM(Y.parent) || document.body,
            dE = bm.bX(dj, Y);
            dO.insertAdjacentHTML(!Y.hidden ? "beforeEnd": "afterBegin", dE)
        };
        var dem = function(ca, bj) {
            var bz = bj.type.toLowerCase();
            requestAnimationFrame(function() {
                ch.bn(ca, bz)
            })
        };
        var deh = function(lR) {
            return !! lR && !!lR.inited && !!lR.inited()
        };
        var cnw = function(ca) {
            var dc = [document.embeds[ca], bm.bM(ca), document[ca], window[ca]],
            bd = bE.hW(dc, deh),
            lR = dc[bd],
            bDU = ca + "-count";
            cP[bDU]++;
            if ( !! lR || cP[bDU] > 100) {
                cP[ca](lR);
                delete cP[ca];
                delete cP[bDU];
                return
            }
            window.setTimeout(cnw.Z(null, ca), 300)
        };
        var ddX = function(Y) {
            var ca = Y.id,
            lU = Y.params;
            if (!lU) {
                lU = {};
                Y.params = lU
            }
            var EA = lU.flashvars || "";
            EA += (!EA ? "": "&") + ("id=" + ca);
            if (!Y.hidden && ( !! Y.target || co.bnd(lU.wmode))) {
                var mH = bm.mt(Y.target) || bm.mt(Y.parent);
                cP[ca + "-tgt"] = mH
            }
            lU.flashvars = EA;
            bE.hW(Y,
            function(bG, bS) {
                if (bE.mb(bG) && bS != "onready") {
                    cP[ca + "-" + bS] = bG
                }
            })
        };
        return function(Y) {
            Y = NEJ.X({},
            Y);
            if (!Y.src) return;
            var ca = "_" + bE.bev();
            Y.id = ca;
            ddX(Y);
            dei(Y);
            if (!Y.onready) return;
            cP[ca] = Y.onready;
            cP[ca + "-count"] = 0;
            cnw(ca)
        }
    } ();
    dj = bm.ee('{var hide  = defined("hidden")&&!!hidden}{var param = defined("params")&&params||NEJ.O}{var width = !hide?width:"1px",height = !hide?height:"1px"}{if hide}<div style="position:absolute;top:0;left:0;width:1px;height:1px;z-index:10000;overflow:hidden;">{/if}<object classid = "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"codebase = "http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"width = "${width|default:"100px"}"height = "${height|default:"100px"}" id="${id}"><param value="${src}" name="movie">{for x in param}<param value="${x}" name="${x_key}"/>{/for}<embed src="${src}" name="${id}"width="${width|default:"100px"}"height="${height|default:"100px"}"pluginspage="http://www.adobe.com/go/getflashplayer"type="application/x-shockwave-flash"{for x in param}${x_key}="${x}" {/for}></embed></object>{if hide}</div>{/if}');
    ej.isChange = !0
})(); (function() {
    var bq = NEJ.P,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    bs = bq("nej.ut.j"),
    QA = bq("nej.ut.j.cb"),
    cP = {},
    jO = +(new Date),
    bEl;
    if ( !! bs.bEo) return;
    QA["ld" + jO] = function(bS, hK) {
        var mG = cP[bS];
        if (!mG) return;
        delete cP[bS];
        mG.CP({
            status: 200,
            result: hK
        })
    };
    QA["er" + jO] = function(bS, fJ) {
        var mG = cP[bS];
        if (!mG) return;
        delete cP[bS];
        mG.CP({
            status: fJ || 0
        })
    };
    bs.bEo = NEJ.C();
    bEl = bs.bEo.bu(bs.Ua);
    bEl.GK = function(Y) {
        var lR = cP.flash;
        if (bE.jQ(lR)) {
            lR.push(this.GK.Z(this, Y));
            return
        }
        if (!lR) {
            cP.flash = [this.GK.Z(this, Y)];
            bm.Gp({
                hidden: !0,
                src: fL.bM("ajax.swf"),
                onready: function(lR) {
                    if (!lR) return;
                    var bH = cP.flash;
                    cP.flash = lR;
                    bE.od(bH,
                    function(ec) {
                        try {
                            ec()
                        } catch(e) {}
                    })
                }
            });
            return
        }
        this.Nr = "swf-" + bE.eW();
        cP[this.Nr] = this;
        var W = NEJ.EX({
            url: "",
            data: null,
            method: "GET"
        },
        Y.request);
        W.key = this.Nr;
        W.headers = Y.headers;
        W.onerror = "nej.ut.j.cb.er" + jO;
        W.onloaded = "nej.ut.j.cb.ld" + jO;
        var cnm = fL.cEa(W.url);
        if ( !! cnm) W.policyURL = cnm;
        lR.request(W)
    };
    bEl.rt = function() {
        delete cP[this.Nr];
        this.CP({
            status: 0
        });
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    co = bq("nej.h");
    co.cnk = function() {
        var ep = /^([\w]+?:\/\/.*?(?=\/|$))/i;
        return function(FZ) {
            FZ = FZ || "";
            if (ep.test(FZ)) return RegExp.$1;
            return "*"
        }
    } ();
    co.bFe = function(W) {
        return W
    };
    co.bFi = function(cni, Y) {
        if (!cni.postMessage) return;
        Y = Y || de;
        cni.postMessage(co.bFe(Y.data), co.cnk(Y.origin))
    }
})(); (function() {
    var bq = NEJ.P,
    bs = bq("nej.p"),
    co = bq("nej.h"),
    bE = bq("nej.u"),
    ch = bq("nej.v"),
    eO = bq("nej.ut");
    if (bs.Ek.trident) return;
    if ( !! window.postMessage) {
        co.bFe = co.bFe.fD(function(bj) {
            bj.stopped = !0;
            bj.value = JSON.stringify(bj.args[0])
        });
        return
    }
    var bS = "MSG|",
    Sw = [];
    var ddH = function() {
        var cl = unescape(window.name || "").trim();
        if (!cl || cl.indexOf(bS) != 0) return;
        window.name = "";
        var cL = bE.Wa(cl.replace(bS, ""), "|"),
        FZ = (cL.origin || "").toLowerCase();
        if ( !! FZ && FZ != "*" && location.href.toLowerCase().indexOf(FZ) != 0) return;
        ch.bn(window, "message", {
            data: JSON.parse(cL.data || "null"),
            source: window.frames[cL.self] || cL.self,
            origin: co.cnk(cL.ref || document.referrer)
        })
    };
    var ddF = function() {
        var bnP;
        var ddA = function(dF, bd, bH) {
            if (bE.oa(bnP, dF.w) < 0) {
                bnP.push(dF.w);
                bH.splice(bd, 1);
                dF.w.name = dF.d
            }
        };
        return function() {
            bnP = [];
            bE.od(Sw, ddA);
            bnP = null
        }
    } ();
    co.bFi = function() {
        var ddy = function(W) {
            var cL = {};
            W = W || de;
            cL.origin = W.origin || "";
            cL.ref = location.href;
            cL.self = W.source;
            cL.data = JSON.stringify(W.data);
            return bS + bE.bqd(cL, "|", !0)
        };
        return co.bFi.fD(function(bj) {
            bj.stopped = !0;
            var cs = bj.args;
            Sw.unshift({
                w: cs[0],
                d: escape(ddy(cs[1]))
            })
        })
    } ();
    eO.beQ.bh({
        element: window,
        event: "message"
    });
    window.setInterval(ddF, 100);
    window.setInterval(ddH, 20)
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    co = bq("nej.h"),
    bm = bq("nej.e"),
    fY = bq("nej.j");
    fY.ddx = function() {
        var cng = window.name || "_parent",
        ddv = {
            ml: window.top,
            cng: window,
            dO: window.parent
        };
        return function(dI, Y) {
            if (typeof dI == "string") {
                dI = ddv[dI] || window.frames[dI] || (bm.bM(dI) || de).contentWindow;
                if (!dI) return this
            }
            var W = NEJ.X({
                origin: "*",
                source: cng
            },
            Y);
            co.bFi(dI, W);
            return this
        }
    } ()
})(); (function() {
    var bq = NEJ.P,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    fY = bq("nej.j"),
    bs = bq("nej.ut.j"),
    cP = {},
    bnT;
    if ( !! bs.bGW) return;
    bs.bGW = NEJ.C();
    bnT = bs.bGW.bu(bs.Ua);
    bnT.hk = function() {
        var cN = "NEJ-AJAX-DATA:",
        kg = !1;
        var bHi = function(bj) {
            var W = bj.data;
            if (W.indexOf(cN) != 0) return;
            W = JSON.parse(W.replace(cN, ""));
            var mG = cP[W.key];
            if (!mG) return;
            delete cP[W.key];
            W.result = decodeURIComponent(W.result || "");
            mG.CP(W)
        };
        var bHo = function() {
            if (!kg) {
                kg = !0;
                ch.bf(window, "message", bHi)
            }
        };
        return function() {
            this.hy();
            bHo()
        }
    } ();
    bnT.GK = function(Y) {
        var hH = Y.request,
        mG = fL.deu(hH.url),
        vv = cP[mG];
        if (bE.jQ(vv)) {
            vv.push(this.GK.Z(this, Y));
            return
        }
        if (!vv) {
            cP[mG] = [this.GK.Z(this, Y)];
            bm.bgV({
                src: mG,
                visible: !1,
                onload: function(bj) {
                    var bH = cP[mG];
                    cP[mG] = ch.eP(bj).contentWindow;
                    bE.od(bH,
                    function(ec) {
                        try {
                            ec()
                        } catch(e) {}
                    })
                }
            });
            return
        }
        this.Nr = "frm-" + bE.eW();
        cP[this.Nr] = this;
        var W = NEJ.EX({
            url: "",
            data: null,
            timeout: 0,
            method: "GET"
        },
        hH);
        W.key = this.Nr;
        W.headers = Y.headers;
        fY.ddx(cP[mG], {
            data: W
        })
    };
    bnT.rt = function() {
        delete cP[this.Nr];
        this.CP({
            status: 0
        });
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dx = bq("nej.g"),
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    fY = bq("nej.j"),
    bs = bq("nej.ut.j"),
    cP = {},
    cN = "NEJ-UPLOAD-RESULT:",
    bN;
    if ( !! bs.bHq) return;
    bs.bHq = NEJ.C();
    bN = bs.bHq.bu(bs.Ua);
    bN.hk = function() {
        var kg = !1;
        var bHi = function(bj) {
            var W = bj.data;
            if (W.indexOf(cN) != 0) return;
            W = JSON.parse(W.replace(cN, ""));
            var mG = cP[W.key];
            if (!mG) return;
            delete cP[W.key];
            mG.CP(decodeURIComponent(W.result))
        };
        var bHo = function() {
            if (!kg) {
                kg = !0;
                ch.bf(window, "message", bHi)
            }
        };
        return function() {
            this.hy();
            bHo()
        }
    } ();
    bN.bL = function() {
        this.bO();
        bm.sE(this.bHr);
        delete this.bHr;
        window.clearTimeout(this.gp);
        delete this.gp
    };
    bN.CP = function(hK) {
        var cne;
        try {
            cne = JSON.parse(hK);
            this.bn("onload", cne)
        } catch(e) {
            this.bn("onerror", {
                code: dx.bZY,
                message: hK
            })
        }
    };
    bN.GK = function() {
        var ddm = function() {
            var rM, hK;
            try {
                var rM = this.bHr.contentWindow.document.body,
                hK = (rM.innerText || rM.textContent || "").trim();
                if (hK.indexOf(cN) >= 0 || rM.innerHTML.indexOf(cN) >= 0) {
                    return
                }
            } catch(e) {
                return
            }
            this.CP(hK)
        };
        var bHJ = function(cJ, gn, xf) {
            fY.Lw(cJ, {
                type: "json",
                method: "POST",
                cookie: xf,
                mode: parseInt(gn) || 0,
                onload: function(W) {
                    if (!this.gp) return;
                    this.bn("onuploading", W);
                    this.gp = window.setTimeout(bHJ.Z(this, cJ, gn, xf), 1e3)
                }.Z(this),
                onerror: function(jT) {
                    if (!this.gp) return;
                    this.gp = window.setTimeout(bHJ.Z(this, cJ, gn, xf), 1e3)
                }.Z(this)
            })
        };
        return function(Y) {
            var hH = Y.request,
            Fz = Y.headers,
            qV = hH.data,
            cl = "fom-" + bE.eW();
            cP[cl] = this;
            qV.target = cl;
            qV.method = "POST";
            qV.enctype = dx.baJ;
            qV.encoding = dx.baJ;
            var cJ = qV.action || "",
            Xb = cJ.indexOf("?") <= 0 ? "?": "&";
            qV.action = cJ + Xb + "_proxy_=form";
            this.bHr = bm.bgV({
                name: cl,
                onload: function(bj) {
                    var vv = ch.eP(bj);
                    ch.bf(vv, "load", ddm.Z(this));
                    qV.submit();
                    var cnb = (qV.nej_query || de).value;
                    if (!cnb) return;
                    var gn = (qV.nej_mode || de).value,
                    xf = (qV.nej_cookie || de).value == "true";
                    this.gp = window.setTimeout(bHJ.Z(this, cnb, gn, xf), 100)
                }.Z(this)
            })
        }
    } ();
    bN.rt = function() {
        this.bn("onerror", {
            code: dx.dhH,
            message: "客户端终止文件上传"
        });
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    co = bq("nej.h"),
    bs = bq("nej.ut.j");
    co.bCs = function() {
        return new XMLHttpRequest
    };
    co.bIr = function(gn, bnY, Y) {
        var dF = !!bnY ? {
            2 : bs.bHq
        }: {
            2 : bs.bGW,
            3 : bs.bEo
        };
        return (dF[gn] || bs.bnB).bh(Y)
    }
})(); (function() {
    var bq = NEJ.P,
    bs = bq("nej.p"),
    co = bq("nej.h");
    if (bs.Ek.trident) return;
    co.bCs = function() {
        var beC = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.3.0", "Msxml2.XMLHTTP.4.0", "Msxml2.XMLHTTP.5.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"];
        var ddk = function() {
            for (var i = 0,
            l = beC.length; i < l; i++) {
                try {
                    return new ActiveXObject(beC[i])
                } catch(e) {}
            }
            return null
        };
        return co.bCs.fD(function(bj) {
            if ( !! window.XMLHttpRequest) return;
            bj.stopped = !0;
            bj.value = ddk()
        })
    } ();
    co.bIr = function() {
        var buG = {
            0 : 2,
            1 : 3
        };
        return co.bIr.fD(function(bj) {
            var cs = bj.args,
            gn = cs[0] || 0;
            cs[0] = !!cs[1] ? 2 : buG[gn] || gn
        })
    } ()
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    co = bq("nej.h"),
    dx = bq("nej.g"),
    bE = bq("nej.u"),
    fY = bq("nej.j"),
    bs = bq("nej.ut.j"),
    baw = {},
    LD = dk;
    fY.rt = function(hh) {
        var cP = baw[hh];
        if (!cP) return this;
        cP.req.rt();
        return this
    };
    fY.djM = function(hI) {
        LD = hI || dk;
        return this
    };
    fY.Lw = function() {
        var mS = (location.protocol + "//" + location.host).toLowerCase();
        var ddi = function(cJ) {
            var FZ = bE.cPg(cJ);
            return !! FZ && FZ != mS
        };
        var ddh = function(Fz) {
            return (Fz || de)[dx.Rq] == dx.baJ
        };
        var ddg = function(Y) {
            var bnY = ddh(Y.headers);
            if (!ddi(Y.url) && !bnY) return bs.bnB.bh(Y);
            return co.bIr(Y.mode, bnY, Y)
        };
        var ddf = function(cP, cL) {
            var W = {
                data: cL
            };
            var bon = cP.result.headers;
            if ( !! bon) {
                W.headers = cP.req.cnA(bon)
            }
            return W
        };
        var RH = function(hh) {
            var cP = baw[hh];
            if (!cP) return;
            if ( !! cP.req) cP.req.bg();
            delete baw[hh]
        };
        var bfO = function(hh, bz) {
            var cP = baw[hh];
            if (!cP) return;
            var W = arguments[2];
            if (bz == "onload" && !!cP.result) {
                W = ddf(cP, W)
            }
            RH(hh);
            try {
                var bj = {
                    type: bz,
                    result: W
                };
                LD(bj);
                if (!bj.stopped) { (cP[bz] || dk)(bj.result)
                }
            } catch(ex) {
                console.error(ex.message);
                console.error(ex)
            }
        };
        var ddd = function(hh, W) {
            bfO(hh, "onload", W)
        };
        var ddc = function(hh, jT) {
            bfO(hh, "onerror", jT)
        };
        return function(cJ, Y) {
            Y = Y || {};
            var hh = bE.bev(),
            cP = {
                result: Y.result,
                onload: Y.onload || dk,
                onerror: Y.onerror || dk
            };
            baw[hh] = cP;
            Y.onload = ddd.Z(null, hh);
            Y.onerror = ddc.Z(null, hh);
            if ( !! Y.query) {
                var Xb = cJ.indexOf("?") < 0 ? "?": "&",
                Au = Y.query;
                if (bE.XF(Au)) Au = bE.At(Au);
                if ( !! Au) cJ += Xb + Au
            }
            Y.url = cJ;
            cP.req = ddg(Y);
            cP.req.dew(Y.data);
            return hh
        }
    } ();
    fY.cmZ = function(qV, Y) {
        var lx = {
            mode: 0,
            type: "json",
            query: null,
            cookie: !1,
            headers: {},
            onload: null,
            onerror: null,
            onuploading: null,
            onbeforerequest: null
        };
        NEJ.EX(lx, Y);
        lx.data = qV;
        lx.method = "POST";
        lx.timeout = 0;
        lx.headers[dx.Rq] = dx.baJ;
        return fY.Lw(qV.action, lx)
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    fY = bq("nej.j"),
    eO = bq("nej.ut"),
    cP = {},
    cmY = +(new Date) + "-";
    bm.ZZ = function() {
        var dR = 0;
        var ZU = function() {
            if (dR > 0) return;
            dR = 0;
            ch.bn(document, "templateready");
            ch.dY(document, "templateready")
        };
        var boq = function(gW, Y) {
            var kh = bm.df(gW, "src");
            if (!kh) return;
            Y = Y || de;
            var ja = Y.root;
            if (!ja) {
                ja = gW.ownerDocument.location.href
            } else {
                ja = bE.bTj(ja)
            }
            kh = kh.split(",");
            bE.bA(kh,
            function(bG, bd, bH) {
                bH[bd] = bE.bTj(bG, ja)
            });
            return kh
        };
        var dcY = function(gW, Y) {
            if (!gW) return;
            var kh = boq(gW, Y);
            if ( !! kh) fY.deF(kh, {
                version: bm.df(gW, "version")
            });
            bm.bLI(gW.value)
        };
        var dcX = function(bG) {
            dR--;
            bm.coN(bG);
            ZU()
        };
        var dcW = function(gW, Y) {
            if (!gW) return;
            var kh = boq(gW, Y),
            qU = gW.value;
            if ( !! kh) {
                dR++;
                var Y = {
                    version: bm.df(gW, "version"),
                    onloaded: dcX.Z(null, qU)
                };
                window.setTimeout(fY.deI.Z(fY, kh, Y), 0);
                return
            }
            bm.coN(qU)
        };
        var dcV = function(rM) {
            dR--;
            bm.ZZ(rM);
            ZU()
        };
        var dcU = function(gW, Y) {
            if (!gW) return;
            var kh = boq(gW, Y)[0];
            if ( !! kh) {
                dR++;
                var Y = {
                    version: bm.df(gW, "version"),
                    onloaded: dcV
                };
                window.setTimeout(fY.cnE.Z(fY, kh, Y), 0)
            }
        };
        var dcT = function(ca, hK) {
            dR--;
            bm.bkR(ca, hK || "");
            ZU()
        };
        var dcS = function(gW, Y) {
            if (!gW || !gW.id) return;
            var ca = gW.id,
            kh = boq(gW, Y)[0];
            if ( !! kh) {
                dR++;
                var cJ = kh + (kh.indexOf("?") < 0 ? "?": "&") + (bm.df(gW, "version") || ""),
                Y = {
                    type: "text",
                    method: "GET",
                    onload: dcT.Z(null, ca)
                };
                window.setTimeout(fY.Lw.Z(fY, cJ, Y), 0)
            }
        };
        var dcR = function(bB, Y) {
            var bz = bB.name.toLowerCase();
            switch (bz) {
            case "jst":
                bm.ee(bB, !0);
                return;
            case "txt":
                bm.bkR(bB.id, bB.value || "");
                return;
            case "ntp":
                bm.bY(bB.value || "", bB.id);
                return;
            case "js":
                dcW(bB, Y);
                return;
            case "css":
                dcY(bB, Y);
                return;
            case "html":
                dcU(bB, Y);
                return;
            case "res":
                dcS(bB, Y);
                return
            }
        };
        eO.beQ.bh({
            element: document,
            event: "templateready",
            oneventadd: ZU
        });
        return function(bC, Y) {
            bC = bm.bM(bC);
            if ( !! bC) {
                var bH = bC.tagName == "TEXTAREA" ? [bC] : bC.getElementsByTagName("textarea");
                bE.bA(bH,
                function(bB) {
                    dcR(bB, Y)
                });
                bm.sE(bC, !0)
            }
            ZU();
            return this
        }
    } ();
    bm.bkR = function(bS, bG) {
        cP[bS] = bG || "";
        return this
    };
    bm.bmI = function(bS) {
        return cP[bS] || ""
    };
    bm.bY = function(bC, bS) {
        bS = bS || bE.eW();
        bC = bm.bM(bC) || bC;
        bm.bkR(cmY + bS, bC);
        bm.dr(bC);
        return bS
    };
    bm.bow = function(bS) {
        if (!bS) return null;
        bS = cmY + bS;
        var bG = bm.bmI(bS);
        if (!bG) return null;
        if (bE.nY(bG)) {
            bG = bm.iN(bG);
            bm.bkR(bS, bG)
        }
        return bG.cloneNode(!0)
    };
    bm.djN = function() {
        var LD = function(bG, bS) {
            return bS == "offset" || bS == "limit"
        };
        return function(bH, bo, Y) {
            var dc = [];
            if (!bH || !bH.length || !bo) return dc;
            Y = Y || de;
            var eG = bH.length,
            GL = parseInt(Y.offset) || 0,
            lJ = Math.min(eG, GL + (parseInt(Y.limit) || eG)),
            wB = {
                total: bH.length,
                range: [GL, lJ]
            };
            NEJ.X(wB, Y, LD);
            for (var i = GL,
            dz; i < lJ; i++) {
                wB.index = i;
                wB.data = bH[i];
                dz = bo.bh(wB);
                var ca = dz.djO();
                cP[ca] = dz;
                dz.bg = dz.bg.fD(function(ca, dz) {
                    delete cP[ca];
                    delete dz.bg
                }.Z(null, ca, dz));
                dc.push(dz)
            }
            return dc
        }
    } ();
    bm.djP = function(ca) {
        return cP[ca]
    };
    bm.djQ = function(Ap, Y) {
        Y = Y || de;
        bm.ZZ(Y.tid || "template-box");
        ch.bf(document, "templateready",
        function() {
            Ap.bh().bn("onshow", Y)
        })
    };
    bq("dbg").dumpTC = function() {
        return cP
    }
})(); (function() {
    var p = NEJ.P("nej.u");
    var qq = 8;
    var boE = function(rl, dR) {
        return rl << dR | rl >>> 32 - dR
    };
    var ld = function(x, y) {
        var cmV = (x & 65535) + (y & 65535),
        dcK = (x >> 16) + (y >> 16) + (cmV >> 16);
        return dcK << 16 | cmV & 65535
    };
    var dcJ = function(t, b, c, d) {
        if (t < 20) return b & c | ~b & d;
        if (t < 40) return b ^ c ^ d;
        if (t < 60) return b & c | b & d | c & d;
        return b ^ c ^ d
    };
    var dcH = function(t) {
        if (t < 20) return 1518500249;
        if (t < 40) return 1859775393;
        if (t < 60) return - 1894007588;
        return - 899497514
    };
    var Cx = function() {
        var PC = function(i) {
            return i % 32
        },
        Pz = function(i) {
            return 32 - qq - i % 32
        };
        return function(cQ, Py) {
            var bjm = [],
            mU = (1 << qq) - 1,
            EG = Py ? PC: Pz;
            for (var i = 0,
            l = cQ.length * qq; i < l; i += qq) bjm[i >> 5] |= (cQ.charCodeAt(i / qq) & mU) << EG(i);
            return bjm
        }
    } ();
    var bjk = function() {
        var cmU = "0123456789abcdef",
        PC = function(i) {
            return i % 4
        },
        Pz = function(i) {
            return 3 - i % 4
        };
        return function(lb, Py) {
            var dc = [],
            EG = Py ? PC: Pz;
            for (var i = 0,
            l = lb.length * 4; i < l; i++) {
                dc.push(cmU.charAt(lb[i >> 2] >> EG(i) * 8 + 4 & 15) + cmU.charAt(lb[i >> 2] >> EG(i) * 8 & 15))
            }
            return dc.join("")
        }
    } ();
    var boH = function() {
        var PC = function(i) {
            return i % 32
        },
        Pz = function(i) {
            return 32 - qq - i % 32
        };
        return function(bjm, Py) {
            var dc = [],
            mU = (1 << qq) - 1,
            EG = Py ? PC: Pz;
            for (var i = 0,
            l = bjm.length * 32; i < l; i += qq) dc.push(String.fromCharCode(bjm[i >> 5] >>> EG(i) & mU));
            return dc.join("")
        }
    } ();
    var Ui = function() {
        var dcF = "=",
        dcE = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
        PC = function(i) {
            return i % 4
        },
        Pz = function(i) {
            return 3 - i % 4
        };
        return function(lb, Py) {
            var dc = [],
            EG = Py ? PC: Pz;
            for (var i = 0,
            cmT; i < lb.length * 4; i += 3) {
                cmT = (lb[i >> 2] >> 8 * EG(i) & 255) << 16 | (lb[i + 1 >> 2] >> 8 * EG(i + 1) & 255) << 8 | lb[i + 2 >> 2] >> 8 * EG(i + 2) & 255;
                for (var j = 0; j < 4; j++) dc.push(i * 8 + j * 6 > lb.length * 32 ? dcF: dcE.charAt(cmT >> 6 * (3 - j) & 63))
            }
            return dc.join("")
        }
    } ();
    var boJ = function(q, a, b, x, s, t) {
        return ld(boE(ld(ld(a, q), ld(x, t)), s), b)
    };
    var sA = function(a, b, c, d, x, s, t) {
        return boJ(b & c | ~b & d, a, b, x, s, t)
    };
    var sv = function(a, b, c, d, x, s, t) {
        return boJ(b & d | c & ~d, a, b, x, s, t)
    };
    var rK = function(a, b, c, d, x, s, t) {
        return boJ(b ^ c ^ d, a, b, x, s, t)
    };
    var sq = function(a, b, c, d, x, s, t) {
        return boJ(c ^ (b | ~d), a, b, x, s, t)
    };
    var Ud = function(x, y) {
        x[y >> 5] |= 128 << y % 32;
        x[(y + 64 >>> 9 << 4) + 14] = y;
        var a = 1732584193,
        b = -271733879,
        c = -1732584194,
        d = 271733878;
        for (var i = 0,
        l = x.length,
        cmS, cmM, cmL, cmK; i < l; i += 16) {
            cmS = a;
            cmM = b;
            cmL = c;
            cmK = d;
            a = sA(a, b, c, d, x[i + 0], 7, -680876936);
            d = sA(d, a, b, c, x[i + 1], 12, -389564586);
            c = sA(c, d, a, b, x[i + 2], 17, 606105819);
            b = sA(b, c, d, a, x[i + 3], 22, -1044525330);
            a = sA(a, b, c, d, x[i + 4], 7, -176418897);
            d = sA(d, a, b, c, x[i + 5], 12, 1200080426);
            c = sA(c, d, a, b, x[i + 6], 17, -1473231341);
            b = sA(b, c, d, a, x[i + 7], 22, -45705983);
            a = sA(a, b, c, d, x[i + 8], 7, 1770035416);
            d = sA(d, a, b, c, x[i + 9], 12, -1958414417);
            c = sA(c, d, a, b, x[i + 10], 17, -42063);
            b = sA(b, c, d, a, x[i + 11], 22, -1990404162);
            a = sA(a, b, c, d, x[i + 12], 7, 1804603682);
            d = sA(d, a, b, c, x[i + 13], 12, -40341101);
            c = sA(c, d, a, b, x[i + 14], 17, -1502002290);
            b = sA(b, c, d, a, x[i + 15], 22, 1236535329);
            a = sv(a, b, c, d, x[i + 1], 5, -165796510);
            d = sv(d, a, b, c, x[i + 6], 9, -1069501632);
            c = sv(c, d, a, b, x[i + 11], 14, 643717713);
            b = sv(b, c, d, a, x[i + 0], 20, -373897302);
            a = sv(a, b, c, d, x[i + 5], 5, -701558691);
            d = sv(d, a, b, c, x[i + 10], 9, 38016083);
            c = sv(c, d, a, b, x[i + 15], 14, -660478335);
            b = sv(b, c, d, a, x[i + 4], 20, -405537848);
            a = sv(a, b, c, d, x[i + 9], 5, 568446438);
            d = sv(d, a, b, c, x[i + 14], 9, -1019803690);
            c = sv(c, d, a, b, x[i + 3], 14, -187363961);
            b = sv(b, c, d, a, x[i + 8], 20, 1163531501);
            a = sv(a, b, c, d, x[i + 13], 5, -1444681467);
            d = sv(d, a, b, c, x[i + 2], 9, -51403784);
            c = sv(c, d, a, b, x[i + 7], 14, 1735328473);
            b = sv(b, c, d, a, x[i + 12], 20, -1926607734);
            a = rK(a, b, c, d, x[i + 5], 4, -378558);
            d = rK(d, a, b, c, x[i + 8], 11, -2022574463);
            c = rK(c, d, a, b, x[i + 11], 16, 1839030562);
            b = rK(b, c, d, a, x[i + 14], 23, -35309556);
            a = rK(a, b, c, d, x[i + 1], 4, -1530992060);
            d = rK(d, a, b, c, x[i + 4], 11, 1272893353);
            c = rK(c, d, a, b, x[i + 7], 16, -155497632);
            b = rK(b, c, d, a, x[i + 10], 23, -1094730640);
            a = rK(a, b, c, d, x[i + 13], 4, 681279174);
            d = rK(d, a, b, c, x[i + 0], 11, -358537222);
            c = rK(c, d, a, b, x[i + 3], 16, -722521979);
            b = rK(b, c, d, a, x[i + 6], 23, 76029189);
            a = rK(a, b, c, d, x[i + 9], 4, -640364487);
            d = rK(d, a, b, c, x[i + 12], 11, -421815835);
            c = rK(c, d, a, b, x[i + 15], 16, 530742520);
            b = rK(b, c, d, a, x[i + 2], 23, -995338651);
            a = sq(a, b, c, d, x[i + 0], 6, -198630844);
            d = sq(d, a, b, c, x[i + 7], 10, 1126891415);
            c = sq(c, d, a, b, x[i + 14], 15, -1416354905);
            b = sq(b, c, d, a, x[i + 5], 21, -57434055);
            a = sq(a, b, c, d, x[i + 12], 6, 1700485571);
            d = sq(d, a, b, c, x[i + 3], 10, -1894986606);
            c = sq(c, d, a, b, x[i + 10], 15, -1051523);
            b = sq(b, c, d, a, x[i + 1], 21, -2054922799);
            a = sq(a, b, c, d, x[i + 8], 6, 1873313359);
            d = sq(d, a, b, c, x[i + 15], 10, -30611744);
            c = sq(c, d, a, b, x[i + 6], 15, -1560198380);
            b = sq(b, c, d, a, x[i + 13], 21, 1309151649);
            a = sq(a, b, c, d, x[i + 4], 6, -145523070);
            d = sq(d, a, b, c, x[i + 11], 10, -1120210379);
            c = sq(c, d, a, b, x[i + 2], 15, 718787259);
            b = sq(b, c, d, a, x[i + 9], 21, -343485551);
            a = ld(a, cmS);
            b = ld(b, cmM);
            c = ld(c, cmL);
            d = ld(d, cmK)
        }
        return [a, b, c, d]
    };
    var bRT = function(bS, W) {
        var Cq = Cx(bS, !0);
        if (Cq.length > 16) Cq = Ud(Cq, bS.length * qq);
        var biD = Array(16),
        biz = Array(16);
        for (var i = 0; i < 16; i++) {
            biD[i] = Cq[i] ^ 909522486;
            biz[i] = Cq[i] ^ 1549556828
        }
        var jM = Ud(biD.concat(Cx(W, !0)), 512 + W.length * qq);
        return Ud(biz.concat(jM), 512 + 128)
    };
    var YX = function(x, eL) {
        x[eL >> 5] |= 128 << 24 - eL % 32;
        x[(eL + 64 >> 9 << 4) + 15] = eL;
        var w = Array(80),
        a = 1732584193,
        b = -271733879,
        c = -1732584194,
        d = 271733878,
        e = -1009589776;
        for (var i = 0,
        l = x.length,
        cmJ, cmI, boU, cmH, cmG; i < l; i += 16) {
            cmJ = a;
            cmI = b;
            boU = c;
            cmH = d;
            cmG = e;
            for (var j = 0; j < 80; j++) {
                w[j] = j < 16 ? x[i + j] : boE(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);
                var t = ld(ld(boE(a, 5), dcJ(j, b, c, d)), ld(ld(e, w[j]), dcH(j)));
                e = d;
                d = c;
                c = boE(b, 30);
                b = a;
                a = t
            }
            a = ld(a, cmJ);
            b = ld(b, cmI);
            c = ld(c, boU);
            d = ld(d, cmH);
            e = ld(e, cmG)
        }
        return [a, b, c, d, e]
    };
    var bSO = function(bS, W) {
        var Cq = Cx(bS);
        if (Cq.length > 16) Cq = YX(Cq, bS.length * qq);
        var biD = Array(16),
        biz = Array(16);
        for (var i = 0; i < 16; i++) {
            biD[i] = Cq[i] ^ 909522486;
            biz[i] = Cq[i] ^ 1549556828
        }
        var jM = YX(biD.concat(Cx(W)), 512 + W.length * qq);
        return YX(biz.concat(jM), 512 + 160)
    };
    p.djT = function(bS, W) {
        return bjk(bSO(bS, W))
    };
    p.djU = function(bS, W) {
        return Ui(bSO(bS, W))
    };
    p.djV = function(bS, W) {
        return boH(bSO(bS, W))
    };
    p.djW = function(bS, W) {
        return bjk(bRT(bS, W), !0)
    };
    p.djY = function(bS, W) {
        return Ui(bRT(bS, W), !0)
    };
    p.djZ = function(bS, W) {
        return boH(bRT(bS, W), !0)
    };
    p.dka = function(W) {
        return bjk(YX(Cx(W), W.length * qq))
    };
    p.dkb = function(W) {
        return Ui(YX(Cx(W), W.length * qq))
    };
    p.dkc = function(W) {
        return boH(YX(Cx(W), W.length * qq))
    };
    p.dbY = function(W) {
        return bjk(Ud(Cx(W, !0), W.length * qq), !0)
    };
    p.dkd = function(W) {
        return Ui(Ud(Cx(W, !0), W.length * qq), !0)
    };
    p.dke = function(W) {
        return boH(Ud(Cx(W, !0), W.length * qq), !0)
    };
    p.cmC = function(W) {
        return bjk(Cx(W, !0), !0)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    eu = NEJ.P("edu.u");
    g.CFG_UMI = {
        commonutil: "/",
        index: "/index",
        home: "/home",
        error: "/error",
        login: "/login",
        personCenter: "/c",
        universityCenter: "/c",
        teacherCenter: "/c",
        personInfoSetting: "/setting",
        teacherInfoEdit: "/tEdit",
        teacherCenterEdit: "/tCenterEdit",
        accountSetting: "/actSetting",
        courseList: "/c",
        searchList: "/search",
        courseInfo: "/info",
        courseLearn: "/learn",
        learnAnnounce: "/learn/announce",
        learnScore: "/learn/score",
        learnContent: "/learn/content",
        learnTestList: "/learn/testlist",
        learnQuiz: "/learn/quiz",
        learnQuizScore: "/learn/quizscore",
        learnHomework: "/learn/hw",
        learnOJHomework: "/learn/ojhw",
        learnExamList: "/learn/examlist",
        learnExamObjective: "/learn/examObject",
        learnExamObjectScore: "/learn/examObjectScore",
        learnExamSubjective: "/learn/examSubjective",
        learnExamOJ: "/learn/examOj",
        learnForumIndex: "/learn/forumindex",
        learnForumPanel: "/learn/forumpanel",
        learnForumSearch: "/learn/forumsearch",
        learnForumPersonal: "/learn/forumpersonal",
        learnForumDetail: "/learn/forumdetail",
        learnForumTopic: "/learn/forumtopic",
        forumNoticeDetail: "/learn/forumnotice",
        forumUserRanking: "/learn/forumrank",
        learnCustom: "/learn/custom",
        adminOuterSuperManager: "/aosm",
        adminOuterEditorManager: "/aoem",
        adminOuterEditorManagerC: "/aoem/course",
        adminOuterEditorManagerT: "/aoem/teacher",
        adminOuterEditorManagerTEdit: "/aoem/tEdit",
        adminOuterEditorManagerTCenterEdit: "/aoem/tCenterEdit",
        adminOuterEditorManagerS: "/aoem/school",
        adminOuterEditorManagerSInfo: "/aoem/sinfo",
        adminOuterEditorManagerOrdinary: "/aoem/ordinary",
        adminOuterEditorManagerScoreReview: "/aoem/sreview",
        adminOuterEditorManagerCerts: "/aoem/certs",
        adminGxList: "/agl",
        adminGxManager: "/agm",
        adminGxManagerCollegeInfo: "/agm/sinfo",
        adminGxManagerCourseList: "/agm/course",
        adminGxManagerTeacherList: "/agm/teacher",
        adminGxManagerStudent: "/agm/stu",
        adminGxManagerSpocCenter: "/agm/spoc",
        adminGxManagerTeacherInfoEdit: "/agm/tinfo",
        adminGxManagerTeacherCenterEdit: "/agm/tCenter",
        adminGxTeacher: "/agt",
        termPublish: "/tp",
        termPublishStepGuide: "/tp/sg",
        termPublishCourseInfo: "/tp/courseInfo",
        termPublishCourseCreate: "/tp/courseCreate",
        termPublishSettingLearn: "/tp/setlearn",
        termPublishLessonUnit: "/tp/lessonunit",
        termPublishChapterQuiz: "/tp/quiz",
        termPublishHomework: "/tp/homework",
        termPublishMsgNotice: "/tp/notice",
        termPublishToolVideos: "/tp/toolVideos",
        termPublishExamObjective: "/tp/exam/obj",
        termPublishExamSubjective: "/tp/exam/sub",
        termPublishExamBaseInfo: "/tp/exam/base",
        termPublishExam: "/tp/exam",
        termPublishSettingTeam: "/tp/setteam",
        termPublishSettingScore: "/tp/setscore",
        termPublishSettingForum: "/tp/setforum",
        termPublishForumNotice: "/tp/fnotice",
        termPublishForumClose: "/tp/setfclose",
        termPublishTestTrain: "/tp/testTrain",
        termPublishSettingSwitch: "/tp/setswitch",
        termPublishMsgMail: "/tp/mail",
        termPublishCourseData: "/tp/cdata",
        termPublishManageStudent: "/tp/manageStudent",
        termPublishFreeCertificate: "/tp/setfcert",
        termPublishChargeCertificate: "/tp/setCcert",
        termPublishDataReport: "/tp/dataReport",
        termPublishStudentReport: "/tp/studentReport",
        termPublishEnrollManage: "/tp/enrollManage",
        termPublishSpocMoocScore: "/tp/spocMoocScore",
        reviewQuiz: "/rq",
        reviewHw: "/rhw",
        reviewTrain: "/rt",
        helpFront: "/hf",
        helpBack: "/hb",
        helpBackIndex: "/hbi",
        aboutus: "/about",
        contactus: "/contactus",
        certDesign: "/cd",
        chargeCertDesign: "/chargeCd",
        verify: "/verify",
        verifyResult: "/verifyResult",
        mycert: "/mycert",
        apply: "/apply",
        signature: "/signature",
        payOrder: "/order",
        donateCourse: "/donateC",
        addMember: "/addMember",
        spocIndex: "/spocIndex",
        spocUniversityCenter: "/c",
        spocTeacherCenter: "/c"
    };
    eu.umi = function() {
        var zc = g.CFG_UMI || o;
        return function(bS) {
            return zc[bS] || ""
        }
    } ()
})(); (function() {
    var g = window,
    o = NEJ.O,
    eu = NEJ.P("edu.u");
    eu.CONST = {
        ROLE_LEARNER: "learner",
        ROLE_PLATFORM_ADMIN: "platformAdmin",
        ROLE_SCHOOLSUPER_ADMIN: "schoolSuperAdmin",
        ROLE_ASSISTANT: "assistant",
        ROLE_LECTOR: "lector",
        ROLE_OUT_SUPER_ADMIN: "outSuperAdmin",
        ROLE_OUT_BUSINESS_EDITOR: "outBusinessEditor",
        ROLE_OUT_COURSE_EDITOR: "outCourseEditor",
        ROLE_OUT_ORDINARY_EDITOR: "ordinaryEditor",
        ROLE_OUT_COURSE_REVIEWER: "outCourseReviewer",
        ROLE_SCHOOLNORMAL_ADMIN: "schoolNormalAdmin",
        ROLE_FORUM_MANAGER: "forumManager",
        KTYPE_All: 30,
        KTYPE_FINISHED: 0,
        KTYPE_BEGINING: 10,
        KTYPE_UNSTART: 20,
        MODE_MOOC: 0,
        MODE_SPOC_SYNC: 10,
        MODE_SPOC_ASYNC: 15,
        MODE_SPOC_ONLY: 20,
        LEARN_TAB: {
            ANNOUNCE: 1,
            SCORE: 2,
            CONTENT: 3,
            QUIZ_HOMEWORK: 4,
            EXAM: 6,
            FORUM: 7,
            CUSTOM: 20,
            CONTENT_TYPE: {
                LIST: "list",
                DETAIL: "detail"
            }
        },
        CHAPTER_TYPE_NORMAL: 1,
        CHAPTER_QUIZ: 2,
        CHAPTER_HOMEWORK: 3,
        CHAPTER_TYPE_EXAM: 4,
        TERM_TRAIN: 5,
        UNIT_TEST: 6,
        LESSON_TYPE_NORMAL: 1,
        LESSON_TYPE_QUIZ: 2,
        LESSON_TYPE_HOMEWORK: 3,
        LESSONUNIT_VIDEO: 1,
        LESSONUNIT_VIDEO_SRT: 2,
        LESSONUNIT_PDF: 3,
        LESSONUNIT_TEXT: 4,
        LESSONUNIT_QUESTION: 5,
        LESSONUNIT_DISCUSS: 6,
        CHAPTERSTATUS_CREATE: 0,
        CHAPTERSTATUS_PUBLISHED: 1,
        CHAPTERSTATUS_MODIFIED: 2,
        CHAPTERSTATUS_DELETED: -1,
        TERMSTATUS_DRAFT: 0,
        TERMSTATUS_OFFLINE: 1,
        TERMSTATUS_PUBLISHED: 2,
        TERMSTATUS_UNDECIDED: 10,
        TERMSTATUS_AUDIT_FAIL: 11,
        SCHOOLSTATUS_DRAFT: 0,
        SCHOOLSTATUS_PUBLISHED: 1,
        TEACHERSTATUS_DRAFT: 0,
        TEACHERSTATUS_PUBLISHED: 1,
        REL_TYPE_TERM_CHIEF_LECTOR: 0,
        REL_TYPE_TERM_LECTOR: 1,
        REL_TYPE_TERM_ASSIST: 2,
        CLOSE_VISABLE_CLOSE: 2,
        CLOSE_VISABLE_HALFOPEN: 1,
        CLOSE_VISABLE_OPEN: 0,
        COPYRIGHT_ALLOW_READ_YES: 1,
        COPYRIGHT_ALLOW_READ_NO: 0,
        COPYRIGHT_ALLOW_COPY_YES: 1,
        COPYRIGHT_ALLOW_COPY_NO: 0,
        STATUS_FINISHED: 1,
        STATUS_LEARNING: 0,
        STATUS_UNLEARN: -1,
        UPLOAD_SIZE_MAX: 800 * 1024 * 1024,
        UPLOAD_SIZE_MAX_PDF: 5 * 1024 * 1024,
        UPLOAD_SIZE_MAX_SIMPLE: 50 * 1024 * 1024,
        UPLOAD_ERROR_LIMITED: 20,
        UPLOAD_ERROR_AUTHFAILED: 30,
        UPLOAD_TOKEN_TYPE_VIDEO: "VIDEO",
        UPLOAD_TOKEN_TYPE_PDF: "PDF",
        UPLOAD_TOKEN_TYPE_DEFAULT: "default",
        TYPE_OBJECTIVE_SINGLE: 1,
        TYPE_OBJECTIVE_MULTI: 2,
        TYPE_OBJECTIVE_FILLBLANK: 3,
        TYPE_OBJECTIVE_JUDGE: 4,
        TYPE_SUBJECTIVE_NORMAL: 10,
        TYPE_SUBJECTIVE_OJ: 7,
        ANALYSE_AFTER_DEADLINE: 1,
        ANALYSE_AFTER_SCORE_RELEASE: 2,
        JUDGE_TYPE_EVALUATE: 1,
        JUDGE_TYPE_LECTOR: 2,
        EVALUATE_JUDGE_TYPE_SELF: 3,
        EVALUATE_JUDGE_TYPE_TEACHER: 1,
        EVALUATE_JUDGE_TYPE_LEARNER: 2,
        EVALUATE_JUDGE_TYPE_SELF: 3,
        NEED_TRAIN_TRUE: 1,
        NEED_TRAIN_FALSE: 2,
        HW_PHASE_SUBMIT: 1,
        HW_PHASE_EVALUATION: 2,
        HW_PHASE_SCORE: 3,
        HW_PHASE_TEACHER: 4,
        QUIZ_SCORE_TYPE_LAST: 1,
        QUIZ_SCORE_TYPE_BEST: 2,
        QUIZ_SCORE_TYPE_AVG: 3,
        QUIZ_SUBMIT_VALID: 0,
        QUIZ_SUBMIT_EFFECT: 10,
        HW_STATUS_DRAFT: 1,
        HW_STATUS_SUBMITTED: 2,
        EVA_STATUS_STARTED: 1,
        EVA_STATUS_COMPLETED: 2,
        SCORE_PUB_STATUS_NOT_REVIEWED: 0,
        SCORE_PUB_STATUS_REVIEWED: 1,
        SCORE_PUB_STATUS_CONFIRMED: 2,
        TASK_STATUS_NOT_START: "not_start",
        TASK_STATUS_STARTED: "start",
        TASK_STATUS_END: "end",
        TASK_STATUS_EVALUATE_START: "evaluate_start",
        TASK_STATUS_EVALUATE_END: "evaluate_end",
        TASK_STATUS_EVALUATE_NOT_ACTIVATION: "evaluate_not_activation",
        TASK_STATUS_PUBLISHED: "published",
        GLOBAL_MOOC_PROTOCAL: "glmp",
        MOOC_TEST_PROTOCAL: "mtp",
        MOOC_EXAM_OBJECT_PROTOCAL: "meop",
        MOOC_EXAM_SUBJECT_PROTOCAL: "mesp",
        OJ_EXAM_PROTOCAL: "ojexam",
        OJ_GLOBAL_PROTOCAL: "ojglobal",
        FORUM_TYPE_NORMAL: 1,
        FORUM_TYPE_QA: 2,
        FORUM_TYPE_STAFF: 3,
        FORUM_TYPE_TEST: 4,
        FORUM_TYPE_OTHER: 5,
        FORUM_TYPE_ELITE: 10,
        TYPE_NORMAL: 1,
        TYPE_QA: 2,
        TYPE_LESSONUNIT: 3,
        ALLOW_LEARNER_TRUE: 1,
        ALLOW_LEARNER_FALSE: 0,
        TALK_VOTE_DIGG: 1,
        TALK_VOTE_CAI: 0,
        TALK_VOTE_POST: 1,
        TALK_VOTE_REPLY: 2,
        TALK_VOTE_COMMENT: 3,
        DRAFT_STATUS_CREATE: 0,
        DRAFT_STATUS_PUBLISHED: 1,
        DRAFT_STATUS_MODIFIED: 2,
        DRAFT_STATUS_DELETED: -1,
        UNDETERMINDED_STARTTIME: 32503651201e3,
        UNDETERMINDED_ENDTIME: 32535187201e3,
        EMAIL_ACTIVE_INIT: 1,
        EMAIL_ACTIVE_SENDED: 2,
        EMAIL_ACTIVED: 3,
        LOGIN_TYPE_URS: -1,
        LOGIN_TYPE_WEIBO: 2,
        LOGIN_TYPE_RENREN: 3,
        LOGIN_TYPE_QQ: 4,
        LOGIN_TYPE_ICOURSE: 11,
        ACHIEVEMENT_STATUS_NOT_REVIEWED: 0,
        ACHIEVEMENT_STATUS_REVIEWING: 5,
        ACHIEVEMENT_STATUS_REVIEW_FAILED: 8,
        ACHIEVEMENT_STATUS_REVIEW_PASS: 10,
        ACHIEVEMENT_STATUS_CONFIRMED: 1,
        PHASE_SENDING: 1,
        PHASE_FINISH: 2,
        PHASE_FAIL: -1,
        FILL_BLANK_SPLITCHAR: "##%_YZPRLFH_%##",
        FILL_BLANK_SPLITCHARREG: /(##%_YZPRLFH_%##)/g,
        NOTICE_TYPE_TERM: 1,
        NOTICE_TYPE_FORUMTEACHER: 2,
        NOTICE_TYPE_FORUMADMIN: 3,
        ETL_TARGET_TYPE_TERM: 1,
        ETL_TARGET_TYPE_FORUM: 1e3,
        CERT_TYPE_FREE_NORMAL: 1,
        CERT_TYPE_FREE_OUTSTANDING: 2,
        CERT_TYPE_CHARGE_NORMAL: 5,
        CERT_TYPE_CHARGE_OUTSTANDING: 6,
        FORUM_FORBID_USERFORBID: 1,
        FORUM_FORBID_CLOSED: 2,
        FORUM_FORBID_ELITE: 3,
        FORUM_FORBID_NORMAL: -1,
        FORUM_CLOSED_CHECKED_ALL: 1,
        FORUM_CLOSED_CHECKED_NONE: 0,
        MERGED_CLOSED_STATUS_CLOSED: 1,
        MERGED_CLOSED_STATUS_OPEN: 0,
        SUPER_OPT_USER_NAME: "yzlfh",
        COURSE_TYPE_MOOC: 2,
        COURSE_TYPE_YOOC: 3,
        STATUS_SUBMITTING: 20,
        STATUS_SUCCESS: 30,
        STATUS_FAIL: 40,
        ID_TYPE_SHENFENZHENG: 1,
        ID_TYPE_HUKOUBEN: 2,
        ID_TYPE_HUZHAO: 3,
        ID_TYPE_OTHER: 10,
        SRT_TYPE_CH: "0",
        SRT_TYPE_EN: "1",
        APPLYMOOCSTATUS_NO_APPLY: 0,
        APPLYMOOCSTATUS_WAIT_AUDIT: 1,
        APPLYMOOCSTATUS_PASS: 2,
        APPLYMOOCSTATUS_FAIL: -1
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    b = NEJ.P("nej.p"),
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.u");
    p.dkf = function(dbS) {
        var yA = e.rF("div");
        yA.innerHTML = dbS;
        return p.bhi(yA.innerText)
    };
    p.bhi = function(hK) {
        return (hK || "").replace(/[\t\r\n]+/gi, " ").replace(/[ ]+/gi, " ")
    };
    p.bt = function(bB) {
        bB.style.display = "none"
    };
    p.zy = function(bB) {
        return bB.style.display != "none"
    };
    p.bw = function(bB) {
        bB.style.display = ""
    };
    p.cZ = function(bB, cU) {
        if (cU) {
            p.bw(bB)
        } else {
            p.bt(bB)
        }
    };
    p.VX = function(rS) {
        var cmA = {};
        var lU = rS.trim();
        if ( !! lU) {
            lU = decodeURIComponent(lU.slice(1));
            var bH = lU.split("&");
            for (var i = bH.length; i;) {
                var jr = bH[--i].split("=");
                cmA[jr[0]] = jr[1]
            }
        }
        return cmA
    };
    p.dbQ = function(bha, cJ, dbP) {
        var cJ = cJ || g.location.href;
        var bwW = "";
        var jM = "";
        var rS = "";
        var dbO = bha.substring(0, bha.indexOf("="));
        var dbM = bha.substring(bha.indexOf("=") + 1);
        var bxp = cJ.indexOf("#");
        if (bxp >= 0) {
            jM = cJ.substring(bxp);
            cJ = cJ.substring(0, bxp);
            if ( !! dbP) {
                jM += (jM.indexOf("?") > 0 ? "&": "?") + (new Date).getMilliseconds()
            }
        }
        var bxr = cJ.indexOf("?");
        if (bxr >= 0) {
            rS = cJ.substring(bxr);
            bwW = cJ.substring(0, bxr)
        } else {
            bwW = cJ
        }
        var bxs = p.VX(rS);
        var bxu = [];
        var bpi = true;
        for (var bs in bxs) {
            if (bs == dbO) {
                bxs[bs] = dbM;
                bpi = false
            }
            bxu.push(bs + "=" + bxs[bs])
        }
        if (bpi) {
            bxu.push(bha)
        }
        cJ = bwW + "?" + bxu.join("&") + jM;
        return cJ
    };
    p.tc = function(jM, cmz) {
        if (!jM || !cmz) {
            return false
        }
        var cD = g.decodeURIComponent(jM);
        var bpj = cD.indexOf("?");
        bpj = bpj >= 0 ? bpj: cD.length;
        cD = cD.substring(cD.indexOf("#") + 1, bpj);
        return u.oa(cmz, cD) >= 0
    };
    p.nu = function(dc, bG) {
        if ( !! dc) {
            for (var i = 0; i < dc.length; i++) {
                if (dc[i] == bG) {
                    return true
                }
            }
        }
        return false
    };
    p.tj = function(str) {
        return (str || "").replace(/(^\s*)|(\s*$)/g, "")
    };
    p.dbK = function(str) {
        return ! str ? "": str.replace(/[\n\r]/g, "")
    };
    p.dkg = function(bB) {
        if ( !! bB) {
            bB.getAttribute("style");
            bB.removeAttribute("style")
        }
    };
    p.nf = function() {
        return b.Dz.engine == "trident"
    };
    p.bxJ = function() {
        var xw = window.navigator.userAgent;
        var dbH = (new RegExp("Windows Phone", "i")).test(xw);
        return b.Ti["ios"] || b.Ti["android"] || b.Ti["tablet"] || dbH
    };
    p.fO = function() {
        var cmw = !p.nf() || b.Dz.release != "2.0";
        if (!cmw) {
            location.replace(g.urlPrefix.notSupportedPrefix)
        }
        return cmw
    };
    p.EL = function(cU, bB, ek) {
        if (cU) {
            e.bJ(bB, ek)
        } else {
            e.bZ(bB, ek)
        }
    };
    p.dbB = function() {
        try {
            if (p.nf() && !!g.docTitle) {
                document.title = g.docTitle
            }
        } catch(_exception) {}
    };
    if (p.nf() && !p.changeHashTimer) {
        p.changeHashTimer = g.setInterval(p.dbB, 100)
    }
    p.gl = function(dbA, bpn) {
        if (!bpn) {
            bpn = location.pathname + location.search
        }
        bpn += !!dbA ? location.hash: "";
        if ( !! g[g.gaqStr]) {
            g[g.gaqStr].push([g.gaTrackPageview, bpn])
        }
    };
    p.eE = function(cmv, eR, cmu) {
        if ( !! cmv && !!eR) {
            var dc = [g.gaTrackEvent, cmv, eR];
            if ( !! cmu) {
                dc.push(cmu)
            }
            if ( !! g[g.gaqStr]) {
                g[g.gaqStr].push(dc)
            }
        }
    };
    p.np = function(cI) {
        return "###" + u.cmC(JSON.stringify(cI || {}))
    };
    p.cmt = function(cJ, hE, iL, dbv) {
        var bzq = dbv || "1x95";
        var cms = "http://imgsize.ph.126.net/?enlarge=true&imgurl=";
        if ( !! cJ) {
            var ON = cJ.substring(cJ.lastIndexOf("."));
            if (ON == ".gif") {
                return cJ
            }
            cms += cJ + "_" + hE + "x" + iL + "x" + bzq + ON
        }
        return cms
    };
    p.Bg = function(UH) {
        if (UH == null) return null;
        if (typeof UH !== "object") {
            return UH
        }
        var bzE = {};
        if (UH.constructor == Array) {
            bzE = []
        }
        for (var i in UH) {
            bzE[i] = arguments.callee(UH[i])
        }
        return bzE
    };
    p.dbt = function(bH) {
        var dF = {};
        u.bA(bH,
        function(bo, bd) {
            dF[bo.id] = bo
        });
        return dF
    };
    p.bpo = function(cI) {
        for (var name in cI) {
            return false
        }
        return true
    };
    p.bpp = function(Jr) {
        return Jr.replace(/{##([^{#}]+)##}/g,
        function() {
            return '<span class="f-fcorange">' + arguments[1] + "</span>"
        })
    };
    p.OG = function(dbr) {
        var eG = 1;
        if (b.Dz.engine == "webkit") {
            eG = 2
        }
        if (history.length > eG) {
            history.back()
        } else {
            g.dispatcher.cB(dbr)
        }
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    j = NEJ.P("nej.j"),
    eu = NEJ.P("edu.u");
    eu.hj = function() {
        var Un = g.webUser || {};
        return function() {
            return Un
        }
    } ();
    eu.OE = function() {
        return j.ox("STUDY_INFO") || j.ox("STUDY_SESS") || j.ox("NTES_SESS")
    };
    eu.bAz = function(DE, cmq) {
        return !! DE && DE == eu.hj().id || !!cmq && cmq == eu.hj().loginId
    };
    eu.dX = function(dbp) {
        return eu.nu(eu.hj().roles, dbp || "")
    };
    eu.bfo = function(bAN) {
        var cN = false;
        if (!u.jQ(bAN)) {
            return eu.dX(bAN)
        }
        u.bA(bAN,
        function(bo) {
            if (eu.dX(bo)) {
                cN = true
            }
        }.Z(this));
        return cN
    };
    eu.dbo = function() {
        var cJ = "";
        if ( !! g.webUser) {
            cJ = g.webUser.personalUrlPrefix + g.webUser.personalUrlSuffix
        }
        return cJ
    };
    eu.dbl = function() {
        var xi = {
            name: "",
            pwdUrl: ""
        };
        if ( !! g.webUser && !!g.webUser.loginType) {
            var Ou = parseInt(g.webUser.loginType);
            switch (Ou) {
            case eu.CONST.LOGIN_TYPE_URS:
                xi.name = "网易邮箱";
                xi.pwdUrl = "http://reg.163.com/setinfo/ChangePasswd_1.jsp?username=" + g.webUser.loginId;
                break;
            case eu.CONST.LOGIN_TYPE_ICOURSE:
                xi.name = "爱课程网";
                xi.pwdUrl = "http://sns.icourses.cn/forget.jsp";
                break;
            case eu.CONST.LOGIN_TYPE_WEIBO:
                xi.name = "新浪微博";
                xi.pwdUrl = "http://account.weibo.com/settings/password";
                break;
            case eu.CONST.LOGIN_TYPE_RENREN:
                xi.name = "人人网";
                xi.pwdUrl = "https://safe.renren.com/security/account#nogo";
                break;
            case eu.CONST.LOGIN_TYPE_QQ:
                xi.name = "QQ";
                xi.pwdUrl = "https://aq.qq.com/cn2/change_psw/pc/pc_change_pwd_way";
                break
            }
        }
        return xi
    };
    eu.dbk = function() {
        var AT = "";
        var Un = eu.hj();
        if (Un) {
            switch (Number(Un.loginType)) {
            case eu.CONST.LOGIN_TYPE_URS:
                AT = Un.loginId || "";
                break;
            case eu.CONST.LOGIN_TYPE_ICOURSE:
            case eu.CONST.LOGIN_TYPE_WEIBO:
            case eu.CONST.LOGIN_TYPE_RENREN:
            case eu.CONST.LOGIN_TYPE_QQ:
                AT = Un.email || "";
                break
            }
        }
        return AT
    };
    eu.dkh = function() {
        return !! g.bannedState && (g.bannedState.site > 0 || g.bannedState.term > 0)
    };
    eu.Fq = function(bpy) {
        var gh = "";
        if ( !! bpy) {
            var wY = bpy.member || {};
            var bpz = bpy.mocSchool || {};
            var cmo = bpy.verifiedStudent || {};
            gh = u.dV(wY.nickName || "") + ( !! bpz.shortName ? "_" + (bpz.shortName || "") : "") + ( !! wY.realName ? "_" + (wY.realName || "") : "") + ( !! cmo.number ? "_" + (cmo.number || "") : "")
        }
        return gh
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ut.p"),
    ud;
    if ( !! bs.Om) return;
    bs.Om = NEJ.C();
    ud = bs.Om.bu(eO.hS);
    ud.hk = function() {
        this.hy();
        this.MY = []
    };
    ud.bF = function(Y) {
        this.bI(Y);
        this.bpB(Y.parent);
        this.gj = Y.name || "/";
        this.bv = Y.data || {}
    };
    ud.bL = function() {
        var ES = function(bB, bd, bH) {
            bH.splice(bd, 1);
            bB.bg()
        };
        return function() {
            this.bO();
            delete this.bv;
            bE.od(this.MY, ES);
            this.bpB(null)
        }
    } ();
    ud.bDh = function(bB) {
        return bB instanceof bs.Om
    };
    ud.dbf = function(kT) {
        return bE.oa(this.MY, kT) >= 0
    };
    ud.bee = function() {
        return this.gj
    };
    ud.fZ = function() {
        return this.bv
    };
    ud.Aw = function() {
        var dO = this.Nn(),
        cl = this.bee();
        if (!dO) return cl;
        var YQ = dO.bee();
        if (YQ != "/" && cl != "/") cl = "/" + cl;
        return dO.Aw() + cl
    };
    ud.Nn = function() {
        return this.fB
    };
    ud.cS = function() {
        return this.MY
    };
    ud.bDG = function(cl) {
        var bd = bE.oa(this.MY,
        function(bB) {
            return cl == bB.bee()
        });
        return this.MY[bd] || null
    };
    ud.bpB = function(dO) {
        dO = this.bDh(dO) ? dO: null;
        if (dO == this.fB) return; !! dO ? dO.bDH(this) : this.fB.dbe(this);
        this.fB = dO;
        return this
    };
    ud.bDH = function(kT) {
        kT = this.bDh(kT) ? kT: null;
        if (!kT || this.dbf(kT)) return;
        this.MY.push(kT);
        kT.bpB(this);
        return this
    };
    ud.dbe = function(kT) {
        kT = this.bDh(kT) ? kT: null;
        var bd = bE.oa(this.MY, kT);
        if (bd >= 0) {
            this.MY.splice(bd, 1);
            kT.bpB(null)
        }
        return kT
    }
})(); (function() {
    var bq = NEJ.P,
    dk = NEJ.F,
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ut.p");
    var bdK = function(ja, cD, bDV) {
        var bB = ja,
        bDV = bDV || dk;
        if (cD != "/") {
            bE.bA(cD.split("/"),
            function(cl) {
                var cL = bDV(bB, cl);
                if (!cL) return ! 0;
                bB = cL
            })
        }
        return bB
    };
    bs.Og = function() {
        var bbn = function(dO, cl) {
            var cl = cl || "/",
            YQ = dO.bee();
            if (YQ == "/" && cl == "/") return dO;
            return dO.bDG(cl)
        };
        return function(ja, cD) {
            return bdK(ja, cD, bbn)
        }
    } ();
    bs.dbb = function() {
        var daZ = function(dO, cl) {
            var YQ = dO.bee();
            if (!cl && YQ == "/") return dO;
            var bB = null;
            if (YQ != "/") {
                bB = dO.bDG("/");
                if (!bB) {
                    bB = bs.Om.bh();
                    dO.bDH(bB)
                }
            }
            if ( !! cl) {
                bB = dO.bDG(cl);
                if (!bB) {
                    bB = bs.Om.bh({
                        name: cl
                    });
                    dO.bDH(bB)
                }
            }
            return bB
        };
        return function(ja, cD) {
            return bdK(ja, cD, daZ)
        }
    } ();
    bs.daY = function(ja, rX, dI) {
        if (!rX || !dI) return ja;
        var rX = rX.Aw().split("/"),
        dI = dI.Aw().split("/"),
        daX = bE.hW(rX,
        function(bG, bd) {
            if (bG != dI[bd]) return ! 0
        }) || 1,
        cD = rX.splice(0, daX).join("/") || "/";
        return bs.Og(ja, cD)
    };
    bs.daV = function(ja, ec) {
        var dc = [ja],
        bB = dc.shift(),
        ec = ec || dk;
        while ( !! bB) {
            dc.push.apply(dc, bB.cS());
            ec(bB);
            bB = dc.shift()
        }
        return this
    };
    bs.bde = function(bB) {
        return bB instanceof bs.Om
    };
    bs.XR = function(gR) {
        return gR instanceof eO.dq
    };
    bs.bEv = function() {
        var ep = /^\/?\?(?=\/|$)/;
        return function(cD) {
            return ep.test(cD || "")
        }
    } ();
    bs.daU = function() {
        var ep = /[\?#]/;
        return function(cJ) {
            var dc = (cJ || "").trim().split(ep),
            daT = dc[0] == "/" && (dc[1] || "").indexOf("/") == 0;
            return dc[0] + (daT ? "?" + dc[1] : "")
        }
    } ()
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dx = bq("nej.g"),
    bm = bq("nej.e"),
    fY = bq("nej.j"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ut.p"),
    rg;
    if ( !! bs.bpM) return;
    bs.bpM = NEJ.C();
    rg = bs.bpM.bu(eO.hS);
    rg.bF = function(Y) {
        this.bI(Y);
        this.vY = Y.root;
        this.XW = Y.dispatcher;
        this.bpO = {}
    };
    rg.bL = function() {
        this.bO();
        delete this.vY;
        delete this.bpO
    };
    rg.bFo = function(bB) {
        if (!bs.bde(bB)) return ! 1;
        return !! bB.fZ().stopped || this.bFo(bB.Nn())
    };
    rg.bFE = function(bB) {
        if (!bs.bde(bB)) return;
        delete bB.fZ().stopped;
        this.bFE(bB.Nn())
    };
    rg.cmm = function(eV, ia) {
        this.bpQ("onhide", eV, ia)
    };
    rg.bFP = function(eV, ia) {
        this.bpQ("onshow", eV, ia);
        this.bcL(eV)
    };
    rg.cml = function(bB) {
        this.bpQ("onrefresh", bB);
        this.bcL(bB)
    };
    rg.bpQ = function(bz, eV, ia) {
        if (eV == ia || !bs.bde(eV)) return;
        if (bz == "onhide") this.bGc(eV, bz);
        this.bpQ(bz, eV.Nn(), ia);
        if (bz != "onhide") this.bGc(eV, bz)
    };
    rg.bcL = function(bB) {
        if (!bs.bde(bB)) return ! 0;
        var W = bB.fZ(),
        eR = W.action,
        gR = W.module;
        if (!this.bcL(bB.Nn()) || !!eR && bE.nY(gR)) return ! 1;
        if ( !! gR && !!gR.bh && !!eR && eR != "onhide") {
            if (this.bFo(bB)) return;
            var Y = {
                umi: bB.Aw(),
                composite: W.composite,
                dispatcher: this.XW
            };
            gR = gR.bh(Y);
            if (bs.XR(gR)) {
                W.module = gR;
                this.bGc(bB, "onshow")
            } else {
                delete W.module
            }
        }
        delete W.action;
        return ! 0
    };
    rg.bGc = function() {
        var daP = function(bB) {
            var gR;
            bB = bB.Nn();
            while ( !! bB) {
                gR = bB.fZ().module;
                if (bs.XR(gR)) {
                    return gR.dgY()
                }
                bB = bB.Nn()
            }
            return null
        };
        return function(bB, cl) {
            if (!bs.bde(bB)) return;
            var W = bB.fZ(),
            gR = W.module,
            bGj = cl != "onhide";
            if (bs.XR(gR)) {
                if (bGj && this.bFo(bB)) return;
                var bj = !this.Fi ? W.event: this.Fi.fZ().event;
                if ( !! bj) {
                    bj.umi = bB.Aw();
                    bj.data = daP(bB)
                }
                var cmj = W.xname || "onhide";
                if (cl == "onshow" && cmj != "onhide") cl = "onrefresh";
                if (cl == "onrefresh" && cmj == "onhide") cl = "onshow";
                W.xname = cl;
                gR.bn(cl, bj || {});
                if (bGj && !!bj && !!bj.pos && bj.umi == bj.target) {
                    bm.sD(bj.pos)
                }
                if (bGj && !!bj) {
                    W.stopped = bj.stopped;
                    delete bj.stopped
                }
            } else if ( !! gR) {
                W.action = cl;
                if (cl == "onshow" && bE.nY(gR)) {
                    var bC = bm.bM("umi://" + gR);
                    if ( !! bC) {
                        bm.ZZ(bC)
                    } else {
                        var eH = location.config || de;
                        fY.cnE((eH.root || "") + gR, {
                            version: (eH.ver || de)[gR],
                            onloaded: bm.ZZ
                        })
                    }
                }
            }
        }
    } ();
    rg.Yn = function(cD) {
        return !! this.bpO[cD]
    };
    rg.daM = function(cD) {
        this.bpO[cD] = !0;
        return this
    };
    rg.dki = function(cD) {
        delete this.bpO[cD];
        return this
    };
    rg.cmh = function(cD) {
        if (this.Yn(cD)) this.bcL(bs.Og(this.vY, cD));
        return this
    };
    rg.bGM = function(cD) {
        if (this.Yn(cD)) {
            var bB = bs.Og(this.vY, cD);
            this.bFE(bB);
            this.bFP(bB)
        }
        return this
    };
    rg.cmg = function(cD) {
        if (this.Yn(cD)) {
            this.cmm(bs.Og(this.vY, cD))
        }
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bm = bq("nej.e"),
    bs = bq("nej.ut.p"),
    ND;
    if ( !! bs.bHc) return;
    bs.bHc = NEJ.C();
    ND = bs.bHc.bu(bs.bpM);
    ND.bF = function(Y) {
        this.bI(Y);
        this.cmf = !!Y.classed
    };
    ND.bL = function() {
        this.bO();
        delete this.Oe;
        delete this.Fi
    };
    ND.daH = function(bj) {
        if (!this.Fi) return ! 0;
        var gR = this.Fi.fZ().module;
        if (bs.XR(gR)) gR.bn("onbeforehide", bj);
        return ! bj.stopped
    };
    ND.VP = function() {
        if (!this.Fi) return;
        window.setTimeout(this.bGM.Z(this, this.Fi.Aw()), 0)
    };
    ND.bGM = function(cD) {
        if (!this.Yn(cD)) return this;
        var dI = bs.Og(this.vY, cD),
        W = dI.fZ();
        if (!W.module) return this;
        var rX = this.Fi,
        bj = W.event,
        bHs = de;
        this.Fi = dI;
        this.bFE(dI);
        if ( !! rX) {
            bHs = rX.fZ().event;
            bj.referer = bHs.href || ""
        }
        if (rX == dI) {
            this.cml(this.Fi);
            return this
        }
        this.Oe = bs.daY(this.vY, rX, dI);
        if (rX != null) {
            if (rX != this.Oe) {
                if (this.cmf) bm.bZ(document.body, bHs.clazz);
                this.cmm(rX, this.Oe)
            }
            this.cml(this.Oe)
        } else {
            this.bFP(this.Oe)
        }
        if (dI != this.Oe) {
            if (this.cmf) bm.bJ(document.body, bj.clazz);
            this.bFP(dI, this.Oe)
        }
        return this
    };
    ND.cmh = function(cD) {
        if (this.Yn(cD)) this.bcL(this.Fi);
        return this
    };
    ND.cmg = dk
})(); (function() {
    var bq = NEJ.P,
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    zt = bq("nej.p"),
    co = bq("nej.h"),
    eO = bq("nej.ut"),
    wl = /^[#?]+/,
    Ir = /#(.*?)$/,
    JL = window,
    bHy = !history.pushState || zt.Ti.android || !history.auto;
    var bpV = function(cJ, bHI) {
        JL.history[!bHI ? "pushState": "replaceState"](null, document.title, cJ)
    };
    var bpW = function() {
        return location.parse(JL.location.href)
    };
    bpV = bpV.fD(function(bj) {
        if (!bHy) return;
        var cs = bj.args;
        bj.stopped = !0;
        cJ = cs[0].replace(wl, ""); ! cs[1] ? JL.location.hash = cJ: JL.location.replace("#" + cJ)
    });
    bpW = bpW.fD(function(bj) {
        if (!bHy) return;
        bj.stopped = !0;
        var jM = Ir.test(JL.location.href) ? RegExp.$1: "";
        bj.value = location.parse(jM.replace(wl, ""))
    });
    location.redirect = function(cJ, bHI) {
        bpV(cJ, bHI);
        return this
    };
    location.active = function() {
        var yv, cJ, mS, bHL, cme;
        var bHW = function(sg) {
            if ( !! bHL) {
                bHL = !1;
                return
            }
            var bj = {
                oldValue: mS,
                newValue: bpW()
            };
            if ( !! location.ignored) {
                location.ignored = !1
            } else {
                ch.bn(location, "beforeurlchange", bj);
                if (bj.stopped) {
                    if ( !! mS) {
                        bHL = !0;
                        bpV(mS.href, !0)
                    }
                    return
                }
            }
            cJ = JL.location.href;
            mS = bj.newValue;
            ch.bn(location, "urlchange", mS);
            co.bPm(mS.href)
        };
        var cmc = function() {
            if (cJ != JL.location.href) bHW();
            yv = requestAnimationFrame(cmc)
        };
        return function(La) {
            if ( !! cme) return this;
            cme = !0;
            JL = La || window;
            if (bHy && "onhashchange" in window && zt.Ek.trident2) {
                ch.bf(JL, "hashchange", bHW);
                bHW()
            } else if (!yv) {
                yv = requestAnimationFrame(cmc)
            }
            return this
        }
    } ();
    location.parse = function() {
        var ng = /^https?:\/\/.*?\//i,
        wl = /[?#]/;
        return function(cJ) {
            var cL = {
                href: cJ
            };
            cJ = (cJ || "").replace(ng, "/").split(wl);
            var dR = 1;
            if (cJ[0] == "/" && (cJ[1] || "").indexOf("/") == 0) dR = 2;
            cL.path = cJ.splice(0, dR).join("?");
            cL.query = bE.ckr(cJ.join("&"));
            return cL
        }
    } ();
    location.same = function(cJ) {
        return bpW().href == cJ
    };
    eO.beQ.bh({
        element: location,
        event: ["beforeurlchange", "urlchange"]
    })
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    bs = bq("nej.ut"),
    cC = bq("nej.ut.p"),
    bN;
    if ( !! bs.fv) return;
    bs.fv = NEJ.C();
    bN = bs.fv.bu(bs.hS);
    bN.hk = function() {
        this.hy();
        var jO = +(new Date);
        this.WT = "pb-" + jO;
        this.bIt = "pv-" + jO
    };
    bN.bF = function(Y) {
        this.bIy = {};
        this.bIz = !!Y.rest;
        this.vY = cC.Om.bh();
        this.mZ = {
            m: {},
            mg: {},
            r: [],
            rr: {},
            al: {},
            am: {}
        };
        this.As = {};
        this.cmb(this.WT);
        this.As[this.bIt] = cC.bpM.bh({
            root: this.vY,
            dispatcher: this
        });
        this.hd([[location, "urlchange", this.bIV.Z(this)]]);
        this.bI(Y);
        this.eZ(Y.rules);
        this.cR(Y.modules)
    };
    bN.bL = function() {
        var ES = function(yC, bS, dF) {
            delete dF[bS];
            yC.bg()
        };
        return function() {
            delete this.mZ;
            this.vY = this.vY.bg();
            bE.hW(this.As, ES);
            this.bO()
        }
    } ();
    bN.bJz = function(cD, bS, bG) {
        var Oj = this.mZ.m[cD];
        if (!Oj) {
            Oj = {};
            this.mZ.m[cD] = Oj
        }
        Oj[bS] = bG
    };
    bN.cma = function(cD, bS) {
        var Oj = this.mZ.m[cD];
        return ! Oj ? "": Oj[bS]
    };
    bN.cmb = function(gf) {
        if (!gf) return;
        var yC = this.As[gf];
        if (!yC) {
            yC = cC.bHc.bh({
                root: this.vY,
                dispatcher: this,
                classed: gf == this.WT
            });
            this.As[gf] = yC
        }
        return yC
    };
    bN.daC = function(cD, gf) {
        var yC = this.cmb(gf);
        if (!yC) {
            gf = cC.bEv(cD) ? this.bIt: this.WT;
            yC = this.As[gf]
        }
        yC.daM(cD);
        this.mZ.mg[cD] = gf
    };
    bN.clZ = function() {
        var ep = /\$\d/;
        return function(cD, sg) {
            var cL;
            bE.hW(this.mZ.r,
            function(eH) {
                bE.hW(eH,
                function(bG, bS) {
                    if ( !! bG.test && (bG.test(cD) || bG.test(sg))) {
                        cL = ep.test(bS) ? cD.replace(bG, bS) : bS;
                        return ! 0
                    }
                    if (bG === cD || bG === sg) {
                        cL = bS;
                        return ! 0
                    }
                });
                return !! cL
            });
            return cL || cD
        }
    } ();
    bN.bIV = function() {
        var Xq = /(?:^\/+)|(?:\/+$)/gi,
        ng = /#(\$.*?)$/;
        var daA = function(cD, bB) {
            var WK = bB.Aw(),
            cD = cD.replace(WK, "").replace(Xq, "");
            return cD.split("/")
        };
        var clY = function(cD, dF) {
            var bG, dc = cD.split("/");
            while (dc.length > 0) {
                if (!dc[dc.length - 1]) {
                    dc.pop()
                } else {
                    dc[dc.length - 1] = ""
                }
                bG = dF[dc.join("/")];
                if ( !! bG) return bG
            }
            return ""
        };
        return function(mS) {
            if (mS.path.indexOf("$") == 0) return;
            var nK = this.bIy[mS.path];
            delete this.bIy[mS.path];
            this.bn("onbeforechange", mS);
            var cD = this.clZ(mS.path, mS.href),
            gf = this.mZ.mg[cD];
            if (!gf && this.bIz) gf = clY(cD, this.mZ.mg);
            if (!gf && !cC.bEv(cD)) {
                cD = this.mZ.rr["404"];
                gf = this.mZ.mg[cD]
            }
            if (!gf && this.bIz) gf = clY(cD, this.mZ.mg);
            if (!gf) return;
            var bB = cC.Og(this.vY, cD),
            clU = null;
            if (this.bIz) clU = daA(cD, bB);
            var rX = cD;
            cD = bB.Aw();
            bB.fZ().event = {
                target: cD,
                source: rX,
                href: mS.href,
                param: mS.query,
                input: nK,
                prest: clU,
                clazz: this.cma(cD, "clazz"),
                pos: ng.test(mS.href) ? RegExp.$1: ""
            };
            var oS = this.cma(rX, "title");
            if ( !! oS) document.title = oS;
            this.As[gf].bGM(cD)
        }
    } ();
    bN.dao = function() {
        var clS = function(cJ, sg) {
            if (!cJ) return;
            var eK = location.parse(cJ);
            this.bn("onbeforechange", eK);
            var cD = this.clZ(eK.path, sg || eK.href);
            return this.As[this.WT].Yn(cD)
        };
        var bdK = function(bB) {
            var cD = bm.df(bB, "href");
            if ( !! cD) return cD;
            var sg = bm.hT(bB, "href");
            if ( !! sg && !bm.df(bB, "notUmi")) {
                var dc = sg.split("#");
                dc.shift();
                var cD = dc.join("#");
                if (clS.call(this, cD, sg)) {
                    return cD
                }
                if (clS.call(this, sg)) {
                    var eK = location.parse(sg);
                    return eK.path + "?" + bE.At(eK.query)
                }
            }
        };
        var dam = function(bB) {
            return !! bdK.call(this, bB)
        };
        return function(bj) {
            var bC = ch.eP(bj, dam.Z(this));
            if ( !! bC) {
                ch.YI(bj);
                this.cB(bdK.call(this, bC))
            }
        }
    } ();
    bN.daj = function(bj) {
        var baH = this.mZ.am,
        lD = baH[bj.type];
        if (!lD) return;
        var bC = ch.eP(bj, "d:resAction");
        if (!bC) return;
        var eR = bm.df(bC, "resAction"),
        ec = lD[eR];
        if (!ec) return;
        var Y = {
            action: eR,
            target: bC,
            id: bm.df(bC, "resId"),
            type: bm.df(bC, "resType"),
            extra: bm.df(bC, "resExtra")
        };
        this.bn("onbeforeaction", {
            event: bj,
            target: bC,
            result: Y
        });
        ec.call(this, Y)
    };
    bN.eZ = function() {
        var dah = ["404"];
        var dag = function(eH, bS) {
            this.eZ(bS, eH)
        };
        var daf = function(oS, cD) {
            this.bJz(cD, "title", oS)
        };
        var dae = function(cD, dac) {
            this.mZ.al[dac] = cD
        };
        var clQ = function(eH) {
            if (!eH) return;
            this.mZ.r.push(eH);
            bE.bA(dah,
            function(bS) {
                if (!eH[bS]) return;
                this.mZ.rr[bS] = eH[bS];
                delete eH[bS]
            },
            this)
        };
        var daa = function(eR, cl) {
            var baH = this.mZ.am;
            var bj = "click",
            ec = eR,
            cl = (cl || "").toLowerCase();
            if (bE.XF(eR)) {
                bj = eR.event || bj;
                ec = eR.value
            }
            if (bE.nY(ec)) {
                ec = function(cD, Y) {
                    this.cB(cD, {
                        force: !0,
                        input: Y
                    })
                }.Z(this, ec)
            } else if (bE.mb(ec)) {
                ec = ec.fD(null,
                function(bj) {
                    var cL = bj.value;
                    if (bE.nY(cL)) {
                        this.cB(cL, {
                            force: !0,
                            input: bj.args[0]
                        })
                    }
                }.Z(this))
            }
            if (bE.mb(ec)) {
                if (!baH[bj]) {
                    this.hd([[document, bj, this.daj.Z(this)]]);
                    baH[bj] = {}
                }
                baH[bj][cl] = ec
            }
        };
        var GU = {
            title: function(eH) {
                bE.hW(eH, daf, this)
            },
            rewrite: function(eH) {
                if (!bE.jQ(eH)) {
                    clQ.call(this, eH)
                } else {
                    bE.bA(eH, clQ, this)
                }
            },
            alias: function(eH) {
                bE.hW(eH, dae, this)
            },
            action: function(eH) {
                bE.hW(eH, daa, this)
            }
        };
        return function(bS, eH) {
            if (bE.jQ(bS)) {
                eH = bS;
                bS = "rewrite"
            } else if (!bE.nY(bS)) {
                bE.hW(bS, dag, this);
                return this
            } (GU[bS] || dk).call(this, eH);
            return this
        }
    } ();
    bN.cR = function() {
        var cZZ = function(eH, cD) {
            this.cR(cD, eH)
        };
        var clP = function(gR) {
            return !! gR && !!gR.bu
        };
        return function(cD, eH) {
            if (!bE.nY(cD)) {
                bE.hW(cD, cZZ, this);
                return this
            }
            var W = cC.dbb(this.vY, cD).fZ(),
            gR = W.module;
            if (cC.XR(gR) || clP(gR)) return this;
            var gf = this.mZ.mg[cD],
            gR;
            if (bE.nY(eH) || clP(eH)) {
                gR = eH
            } else {
                eH = eH || de;
                gf = eH.gid;
                gR = eH.module;
                if ( !! eH.title) this.bJz(cD, "title", eH.title);
                if ( !! eH.clazz) this.bJz(cD, "clazz", eH.clazz);
                if ( !! eH.composite) W.composite = eH.composite
            }
            this.daC(cD, gf);
            W.module = gR;
            return this
        }
    } ();
    bN.Ds = function() {
        var bNc = function(bB, fG) {
            var gR = bB.fZ().module;
            if (cC.XR(gR)) gR.bn("onmessage", fG)
        };
        var GU = [bNc,
        function(dI, fG) {
            var eV = fG.from;
            while ( !! dI) {
                if (dI.Aw() != eV) bNc(dI, fG);
                dI = dI.Nn()
            }
        },
        function(dI, fG) {
            var eV = fG.from;
            cC.daV(dI,
            function(bB) {
                if (bB.Aw() != eV) bNc(bB, fG)
            })
        }];
        return function(fG) {
            var bj = NEJ.X({},
            fG),
            dI = cC.Og(this.vY, bj.to);
            bj.path = dI.Aw(); (GU[bj.mode] || GU[0]).call(this, dI, bj)
        }
    } ();
    bN.dhe = function(bz, fG) {
        var fG = NEJ.X({},
        fG);
        fG.type = bz || "";
        this.bn((fG.from || "") + ":" + fG.type, fG)
    };
    bN.dgZ = function(cD, bz, kr) {
        cD = this.mZ.al[cD] || cD;
        this.dht((cD || "") + ":" + (bz || ""), kr)
    };
    bN.dkk = function(cD, bz, kr) {
        cD = this.mZ.al[cD] || cD;
        this.vw((cD || "") + ":" + (bz || ""), kr)
    };
    bN.dkl = function(cJ) {
        return this.cB(cJ)
    };
    bN.fs = function(cD) {
        var gf = this.mZ.mg[cD];
        if (gf == this.bIt) {
            this.As[gf].cmg(cD)
        }
        return this
    };
    bN.cB = function(cJ, Y) {
        Y = Y || de;
        var cD = cC.daU(cJ),
        mS = location.parse(cJ);
        this.bIy[mS.path] = Y.input;
        if (cC.bEv(cD)) {
            this.bIV(mS)
        } else {
            var yC = this.As[this.WT],
            bj = {
                target: mS,
                umi: cD
            };
            if ( !! yC.daH(bj)) {
                if (location.same(cJ) && !!Y.force) {
                    this.bIV(mS)
                } else {
                    location.ignored = !!Y.ignored;
                    location.redirect(cJ, !!Y.replace)
                }
            }
        }
        return this
    };
    bN.VP = function(cJ) {
        if ( !! cJ) {
            this.cB(cJ, {
                replace: !0,
                force: !0
            })
        } else {
            this.As[this.WT].VP()
        }
    };
    bN.dkm = function() {
        this.hd([[document, "click", this.dao.Z(this)]]);
        return this
    };
    bN.fu = function() {
        location.active();
        return this
    };
    bN.dm = function(cD, gR) {
        cD = this.mZ.al[cD] || cD;
        if (!bE.jQ(cD)) {
            this.cR(cD, gR);
            this.As[this.mZ.mg[cD]].cmh(cD)
        } else {
            bE.bA(cD,
            function(bS) {
                this.dm(bS, gR)
            },
            this)
        }
        return this
    };
    bm.dkn = function(Y) {
        window.dispatcher = bs.fv.fd(Y);
        bm.dgX();
        bm.ZZ((Y || de).tid || "template-box", location.config);
        ch.bf(document, "templateready",
        function() {
            window.setTimeout(dispatcher.fu.Z(dispatcher), 0)
        });
        return window.dispatcher
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    bR = bq("edu.u"),
    uK;
    if ( !! bR.cq) return;
    bR.cq = NEJ.C();
    uK = bR.cq.bu(eO.hS);
    uK.hk = function(Y) {
        this.hy();
        bm.bEu();
        this.bU(Y);
        this.bP(Y)
    };
    uK.bF = function(Y) {
        this.bI(Y);
        this.bOp(Y.clazz);
        this.bqi(Y.parent)
    };
    uK.bL = function() {
        this.bO();
        this.baa();
        delete this.fB;
        bm.dr(this.bb);
        bm.bZ(this.bb, this.Oo);
        delete this.Oo
    };
    uK.bU = dk;
    uK.bP = function() {
        if (!this.bW) this.ZS();
        this.bb = bm.bow(this.bW);
        if (!this.bb) this.bb = bm.rF("div", this.dv);
        bm.bJ(this.bb, this.dv)
    };
    uK.ZS = dk;
    uK.bOp = function(ek) {
        this.Oo = ek || "";
        bm.bJ(this.bb, this.Oo)
    };
    uK.bOV = function() {
        if (!this.dv) return;
        bm.bJ(this.fB, this.dv + "-parent")
    };
    uK.baa = function() {
        if (!this.dv) return;
        bm.bZ(this.fB, this.dv + "-parent")
    };
    uK.kf = function() {
        return this.bb
    };
    uK.bqi = function(dO) {
        if (!this.bb) return this;
        this.baa();
        if (bE.mb(dO)) {
            this.fB = dO(this.bb)
        } else {
            this.fB = bm.bM(dO);
            if ( !! this.fB) this.fB.appendChild(this.bb)
        }
        this.bOV();
        return this
    };
    uK.gI = function() {
        if (!this.fB || !this.bb || this.bb.parentNode == this.fB) return this;
        this.fB.appendChild(this.bb);
        return this
    };
    uK.fs = function() {
        bm.dr(this.bb);
        return this
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    ut = NEJ.P("nej.ut"),
    eu = NEJ.P("edu.u"),
    MH;
    p.iv = NEJ.C();
    MH = p.iv.bu(ut.hS, true);
    MH.hk = function(Y) {
        this.hy(Y)
    };
    eu.ir = MH.ir = function(pO) {
        pO = pO || "";
        pO = pO.replace(/^\n+|\n+$/g, "");
        var cZR = pO.length,
        clM = 0;
        var bPG = pO.match(/[^\x00-\x80]/g);
        if ( !! bPG && bPG.length > 0) clM = bPG.length || 0;
        return cZR + clM
    };
    eu.My = MH.My = function(pO, bqm) {
        pO = pO || "";
        var gh = "",
        eL = pO.length,
        pO = pO.split(""),
        bPO = 0;
        for (var i = 0; i < eL; i++) {
            var clL = pO[i];
            var dc = clL.match(/[^\x00-\x80]/g);
            if ( !! dc && dc.length > 0) {
                bPO += 2
            } else {
                bPO += 1
            }
            if (bPO > bqm) {
                break
            }
            gh += clL
        }
        return gh
    };
    eu.bqo = MH.bqo = function(pO, bqm) {
        var cQ = pO;
        if (this.ir(cQ) > bqm) {
            cQ = this.My(cQ, bqm) + "..."
        }
        return cQ
    };
    MH.cZN = function(ep, cQ) {
        var cZL = new RegExp(ep);
        return cZL.test(cQ)
    };
    MH.clJ = function(cQ) {
        var ep = new RegExp("(;|；|,|，|\\s{1,})");
        var dc = cQ.split(ep),
        clI = [];
        for (var i = 0; i < dc.length; i++) {
            if ( !! dc[i] && dc[i].trim() != "" && dc[i].trim() != ";" && dc[i].trim() != "；" && dc[i].trim() != "," && dc[i].trim() != "，") {
                clI.push(dc[i])
            }
        }
        return clI
    };
    MH.bF = function(Y) {
        this.bI(Y)
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    ko;
    var eg = e.bY('<div class="u-baseinputui"><textarea name="inputtxt" class="j-textarea inputtxt"></textarea><label class="j-hint inputhint" for="inputtxt"></label></div>'),
    cZH = e.bY('<div class="u-baseinputui"><input type="text" name="inputtxt" class="j-textarea inputtxt"></input><label class="j-hint inputhint" for="inputtxt"></label></div>');
    eu.cH = NEJ.C();
    ko = eu.cH.bu(eu.cq, true);
    ko.bU = function() {
        this.bW = eg
    };
    ko.bP = function() {
        this.bQ();
        this.fT = new p.iv
    };
    ko.bF = function(Y) {
        this.bb = e.bow(eg);
        if (Y.type == "input") {
            this.bb = e.bow(cZH)
        }
        this.ts = e.bc(this.bb, "j-hint")[0];
        this.hM = e.bc(this.bb, "j-textarea")[0];
        this.bI(Y);
        this.ts = e.bc(this.bb, "j-hint")[0];
        this.hM = e.bc(this.bb, "j-textarea")[0];
        if ( !! Y.inputArea) {
            this.clH = e.bM(Y.inputArea);
            this.hM = e.bc(this.clH, "j-input")[0];
            this.ts = e.bc(this.clH, "j-label")[0];
            if ( !! Y.width) {
                this.bb.style.width = Y.width + "px";
                this.hM.style.width = Y.width + "px"
            }
            if ( !! Y.height) {
                this.bb.style.height = Y.height + "px";
                this.hM.style.height = Y.height + "px"
            }
        }
        this.hd([[this.ts, "click", this.Xs.Z(this)], [this.hM, "click", this.cZF.Z(this)], [this.hM, "focus", this.bQW.Z(this)], [this.hM, "blur", this.OA.Z(this)], [this.hM, "keydown", this.bRj.Z(this)], [this.hM, "keyup", this.bjM.Z(this)]]);
        if ( !! Y.labelText) {
            this.ts.innerHTML = Y.labelText || ""
        }
        this.cX(Y.content || "");
        if ( !! Y.width) {
            this.bb.style.width = Y.width + "px";
            this.hM.style.width = Y.width - 10 + "px"
        }
        if ( !! Y.height) {
            this.bb.style.height = Y.height + "px";
            this.hM.style.height = Y.height - 10 + "px"
        }
        this.jX();
        this.dko = Y.notBubble || false;
        this.cZC = Y.filterEnter || false;
        this.clF = Y.reg || ""
    };
    ko.bRj = function(bj) {
        if ( !! bj) {
            this.bn("onInputKeyDown", bj)
        }
    };
    ko.bQW = function(bj) {
        eu.bt(this.ts);
        if ( !! bj) {
            this.bn("onInputFocus")
        }
    };
    ko.cZF = function(bj) {
        if ( !! bj) {
            this.bn("onInputClick")
        }
    };
    ko.OA = function(bj) {
        var hK = this.hM.value;
        if (!hK) {
            eu.bw(this.ts)
        } else {
            eu.bt(this.ts)
        }
        if ( !! bj) {
            this.bn("onInputBlur", hK)
        }
    };
    ko.bjM = function(bj) {
        if ( !! bj) {
            if (this.cZC && bj.keyCode == 13) {
                var fc = this.hM.value.replace(/[\r\n]/g, "");
                this.cX(fc)
            }
            if (this.clF && bj.keyCode != 32) {
                var fc = this.hM.value.replace(this.clF, "");
                this.cX(fc)
            }
            this.bn("onInputChange", bj)
        }
    };
    ko.Xs = function() {
        this.hM.focus()
    };
    ko.clE = function() {
        this.hM.blur()
    };
    ko.cX = function(bG) {
        bG += "";
        bG = eu.tj(bG || "");
        this.Ut = bG;
        this.hM.value = bG;
        this.OA(null)
    };
    ko.clC = function() {
        var LT = this.cc();
        return this.Ut != LT && LT != ""
    };
    ko.cc = function() {
        return eu.tj(this.hM.value || "").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g, "")
    };
    ko.clB = function() {
        return (this.hM.value || "").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g, "")
    };
    ko.clA = function(bG) {
        bG += "";
        bG = bG || "";
        this.hM.value = bG;
        this.OA(null)
    };
    ko.ho = function(bG) {
        bG += "";
        bG = eu.tj(bG || "");
        this.hM.value = bG;
        this.OA(null)
    };
    ko.gD = function() {
        return this.fT.ir(this.cc())
    };
    ko.bqy = function(cZs) {
        return this.fT.cZN(cZs, this.cc())
    };
    ko.mh = function() {
        this.hM.value = "";
        this.hM.setAttribute("disabled", "disabled");
        e.bJ(this.bb, "u-baseinputui-disable")
    };
    ko.iU = function() {
        this.hM.setAttribute("disabled", "disabled");
        e.bJ(this.bb, "u-baseinputui-disable")
    };
    ko.jX = function() {
        this.hM.removeAttribute("disabled");
        e.bZ(this.bb, "u-baseinputui-disable")
    };
    ko.biI = function() {
        e.bJ(this.bb, "u-baseinputui-error")
    };
    ko.biH = function() {
        e.bZ(this.bb, "u-baseinputui-error")
    };
    ko.dkp = function(hE) {
        this.bb.style.width = hE - 10 + "px";
        this.hM.style.width = hE - 10 + "px"
    };
    ko.bqB = function(hE) {
        this.bb.style.height = hE - 10 + "px";
        this.hM.style.height = hE - 10 + "px"
    };
    ko.cZq = function() {
        return this.hM
    };
    ko.Vx = function(da) {
        this.ts.innerText = da
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    Bu;
    var cF = e.dD(".#<uispace> {padding:5px 0 5px 15px;font-size:12px;line-height:16px;}.#<uispace> .warningbox{color:#cc3333;}.#<uispace> .warningbox .warning{float:left;line-height:22px;}.#<uispace> .warningbox .wrong{float:left;background: url(" + g.imageUrlMap.ui_sprite + ") no-repeat -40px -156px;height:20px;width:20px;}.#<uispace> .warningbox .warn{float:left;background: url(" + g.imageUrlMap.ui_sprite + ") no-repeat 0 -156px;height:20px;width:20px;}.#<uispace> .warningbox .right{float:left;background: url(" + g.imageUrlMap.ui_sprite + ") no-repeat -20px -156px;height:20px;width:20px;}.#<uispace> .warningbox .normal{float:left;background: url(" + g.imageUrlMap.ui_sprite + ") no-repeat -62px -156px;height:20px;width:20px;}.#<uispace> .warningbox .righttxt{color:#666;}.#<uispace> .loadingbox{color:#999;}.#<uispace> .loadingbox .loading{float:left;line-height:22px;}.#<uispace> .loadingbox .icon{float:left;background: url(" + g.imageUrlMap.loading_circle_gif + ") no-repeat 0 0;height:16px;width:20px;}");
    var eg = e.bY('<div class="m-feedbackinfo"><div class="warningbox j-warningbox f-cb"><span class="right j-warningicon"></span><span class="warning j-warning"></span></div><div class="loadingbox j-loadingbox f-cb"><span class="icon"></span><span class="loading j-loading"></span></div></div>');
    eu.cv = NEJ.C();
    Bu = eu.cv.bu(eu.cq, true);
    Bu.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    Bu.bP = function() {
        this.bQ();
        this.bTG = e.bc(this.bb, "j-warning")[0];
        this.clx = e.bc(this.bb, "j-warningicon")[0];
        this.clt = e.bc(this.bb, "j-warningbox")[0];
        this.cZh = e.bc(this.bb, "j-loading")[0];
        this.clq = e.bc(this.bb, "j-loadingbox")[0]
    };
    Bu.ce = function() {
        eu.bt(this.bb)
    };
    Bu.EY = function(ff, type) {
        eu.bw(this.bb);
        eu.bw(this.clt);
        eu.bt(this.clq);
        e.bZ(this.clx, "right wrong warn normal");
        e.bJ(this.clx, type);
        e.bZ(this.bTG, "righttxt wrongtxt warntxt normaltxt");
        e.bJ(this.bTG, type + "txt");
        this.bTG.innerHTML = ff || ""
    };
    Bu.bF = function(Y) {
        this.bI(Y);
        this.clp = Y.offsetHeight || 200
    };
    Bu.Fl = function(Ip) {
        this.EY(Ip, "right")
    };
    Bu.ey = function(Ip, bwl) {
        this.EY(Ip, "wrong");
        if (!bwl) {
            g.scrollTo(0, e.rx(this.bb).y - this.clp)
        }
    };
    Bu.cu = function(Ip, bwl) {
        this.EY(Ip, "warn");
        if (!bwl) {
            g.scrollTo(0, e.rx(this.bb).y - this.clp)
        }
    };
    Bu.dkr = function(Ip) {
        this.EY(Ip, "normal")
    };
    Bu.xp = function(Ip) {
        eu.bw(this.bb);
        eu.bw(this.clq);
        eu.bt(this.clt);
        this.cZh.innerText = Ip || ""
    }
})(); (function() {
    var bq = NEJ.P,
    lr = NEJ.R,
    dk = NEJ.F,
    bE = bq("nej.u"),
    fY = bq("nej.j"),
    bs = bq("nej.ut"),
    Lq = "dat-" + +(new Date),
    rh;
    if ( !! bs.bqF) return;
    bs.bqF = NEJ.C();
    rh = bs.bqF.bu(bs.hS);
    rh.hk = function() {
        this.hy();
        this.cg = this.constructor[Lq];
        if (!this.cg) {
            this.cg = {};
            this.cg[Lq + "-l"] = {};
            this.constructor[Lq] = this.cg
        }
    };
    rh.cln = function(bS) {
        return this.cg[bS]
    };
    rh.bwE = function(bS, bG) {
        this.cg[bS] = bG
    };
    rh.dks = function(bS, bgE) {
        var W = this.cln(bS);
        if (W == null) {
            W = bgE;
            this.bwE(bS, W)
        }
        return W
    };
    rh.cYX = function(bS) {
        if (bS != null) {
            delete this.cg[bS];
            return
        }
        bE.hW(this.cg,
        function(bo, bS) {
            if (bS == Lq + "-l") return;
            this.cYX(bS)
        },
        this)
    };
    rh.dku = function(bS) {
        if ( !! fY.bwM) return fY.bwM(bS)
    };
    rh.cYS = function(bS) {
        if ( !! fY.cYQ) return fY.cYQ(bS)
    };
    rh.cYP = function(bS, bG) {
        if ( !! fY.cYO) fY.cYO(bS, bG)
    };
    rh.dkv = function(bS, bgE) {
        var W = this.cYC(bS);
        if (W == null) {
            W = bgE;
            this.cYB(bS, W)
        }
        return W
    };
    rh.cYC = function(bS) {
        var W = this.cln(bS);
        if (W != null) return W;
        W = this.cYS(bS);
        if (W != null) this.bwE(bS, W);
        return W
    };
    rh.cYB = function(bS, bG) {
        this.cYP(bS, bG);
        this.bwE(bS, bG)
    };
    rh.cld = function(bS) {
        if (bS != null) {
            delete this.cg[bS];
            if ( !! fY.bwM) fY.bwM(bS);
            return
        }
        bE.hW(this.cg,
        function(bo, bS) {
            if (bS == Lq + "-l") return;
            this.cld(bS)
        },
        this)
    };
    rh.dkw = function() {
        this.cld();
        return this
    };
    rh.bxk = function(bS) {
        var W = this.cg[Lq + "-l"],
        cs = lr.slice.call(arguments, 1);
        bE.bA(W[bS],
        function(kr) {
            try {
                kr.apply(null, cs)
            } catch(ex) {
                console.error(ex.message);
                console.error(ex.stack)
            }
        });
        delete W[bS]
    };
    rh.bxm = function(bS, kr) {
        kr = kr || dk;
        var bH = this.cg[Lq + "-l"][bS];
        if (!bH) {
            bH = [kr];
            this.cg[Lq + "-l"][bS] = bH;
            return ! 1
        }
        bH.push(kr);
        return ! 0
    };
    rh.cYy = function(bH, gG, Ao) {
        if (!bH) return ! 1;
        gG = parseInt(gG) || 0;
        Ao = parseInt(Ao) || 0;
        if (!Ao) {
            if (!bH.loaded) return ! 1;
            Ao = bH.length
        }
        if ( !! bH.loaded) Ao = Math.min(Ao, bH.length - gG);
        for (var i = 0; i < Ao; i++) if (!bH[gG + i]) return ! 1;
        return ! 0
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.u");
    p.bqR = function(clc) {
        var yB = g.returnUrl;
        if (!yB) {
            yB = location.href
        }
        if ( !! yB && yB.indexOf(g.urlPrefix.indexPrefix) > 0) {
            yB = yB.split("#")[0]
        }
        yB = g.encodeURI(g.decodeURI(yB || ""));
        if ( !! yB) {
            if ( !! clc) {
                u.bA(clc,
                function(bo) {
                    if ( !! bo.key) {
                        yB = p.dbQ(bo.key + ( !! bo.value ? "=" + bo.value: ""), yB, true)
                    }
                },
                this)
            }
        }
        return yB
    };
    p.cYs = function() {
        return "http://reg.163.com/reg/reg.jsp?product=imooc&domains=icourse163.org&url=" + g.encodeURIComponent(p.bqR([{
            key: "forcelogin",
            value: "true"
        }]))
    }
})(); (function() {
    var p = NEJ.P("nej.u");
    var ckZ = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
    bgt = {},
    Pf = {};
    for (var i = 0,
    l = ckZ.length,
    c; i < l; i++) {
        c = ckZ.charAt(i);
        bgt[i] = c;
        Pf[c] = i
    }
    var cYp = function(lb) {
        var bd = 0,
        c, cL = [];
        while (bd < lb.length) {
            c = lb[bd];
            if (c < 128) {
                cL.push(String.fromCharCode(c));
                bd++
            } else if (c > 191 && c < 224) {
                cL.push(String.fromCharCode((c & 31) << 6 | lb[bd + 1] & 63));
                bd += 2
            } else {
                cL.push(String.fromCharCode((c & 15) << 12 | (lb[bd + 1] & 63) << 6 | lb[bd + 2] & 63));
                bd += 3
            }
        }
        return cL.join("")
    };
    var cYo = function() {
        var Sp = /\r\n/g;
        return function(W) {
            W = W.replace(Sp, "\n");
            var cL = [],
            gH = String.fromCharCode(237);
            if (gH.charCodeAt(0) < 0) for (var i = 0,
            l = W.length,
            c; i < l; i++) {
                c = W.charCodeAt(i);
                c > 0 ? cL.push(c) : cL.push(256 + c >> 6 | 192, 256 + c & 63 | 128)
            } else for (var i = 0,
            l = W.length,
            c; i < l; i++) {
                c = W.charCodeAt(i);
                if (c < 128) cL.push(c);
                else if (c > 127 && c < 2048) cL.push(c >> 6 | 192, c & 63 | 128);
                else cL.push(c >> 12 | 224, c >> 6 & 63 | 128, c & 63 | 128)
            }
            return cL
        }
    } ();
    var Ui = function(lb) {
        var bd = 0,
        cL = [],
        gn = lb.length % 3;
        if (gn == 1) lb.push(0, 0);
        if (gn == 2) lb.push(0);
        while (bd < lb.length) {
            cL.push(bgt[lb[bd] >> 2], bgt[(lb[bd] & 3) << 4 | lb[bd + 1] >> 4], bgt[(lb[bd + 1] & 15) << 2 | lb[bd + 2] >> 6], bgt[lb[bd + 2] & 63]);
            bd += 3
        }
        if (gn == 1) cL[cL.length - 1] = cL[cL.length - 2] = "=";
        if (gn == 2) cL[cL.length - 1] = "=";
        return cL.join("")
    };
    var cYn = function() {
        var bRZ = /\n|\r|=/g;
        return function(W) {
            var bd = 0,
            cL = [];
            W = W.replace(bRZ, "");
            for (var i = 0,
            l = W.length; i < l; i += 4) cL.push(Pf[W.charAt(i)] << 2 | Pf[W.charAt(i + 1)] >> 4, (Pf[W.charAt(i + 1)] & 15) << 4 | Pf[W.charAt(i + 2)] >> 2, (Pf[W.charAt(i + 2)] & 3) << 6 | Pf[W.charAt(i + 3)]);
            var eL = cL.length,
            gn = W.length % 4;
            if (gn == 2) cL = cL.slice(0, eL - 2);
            if (gn == 3) cL = cL.slice(0, eL - 1);
            return cL
        }
    } ();
    p.dkx = function(W) {
        return cYp(cYn(W))
    };
    p.bgi = function(W) {
        try {
            return window.btoa(W)
        } catch(ex) {
            return Ui(cYo(W))
        }
    }
})(); (function() {
    var bq = NEJ.P,
    o = NEJ.O,
    f = NEJ.F,
    g = bq("nej.g"),
    j = bq("nej.j"),
    u = bq("nej.u"),
    w = bq("dwr.engine"),
    bxK,
    ckW = f,
    ckV = {},
    cg = {},
    XG = "JSESSIONID",
    jV = null;
    j.dky = function(hI) {
        ckW = u.mb(hI) ? hI: f;
        return this
    };
    j.dkz = function(cl) {
        XG = cl || XG
    };
    j.dkA = function(bS, mG) {
        ckV[bS] = mG;
        return this
    };
    j.dkB = function(ca) {
        bxK = ca || "";
        return this
    };
    j.cYb = function() {
        if ( !! jV) return this;
        jV = {
            h: {},
            p: 0,
            m: {
                callCount: 0,
                scriptSessionId: "${scriptSessionId}190",
                httpSessionId: j.ox(XG)
            },
            r: {
                script: !1,
                sync: !1,
                method: "POST",
                timeout: null,
                proxy: !0,
                cookie: !1,
                onbeforerequest: null
            }
        };
        return this
    };
    j.cYa = function(cJ, Y) {
        var eK = (cJ || "").split(".");
        if (!eK || eK.length != 2) return this;
        var ckR = !1;
        Y = Y || o;
        if (!jV) {
            ckR = !0;
            j.cYb();
            if ( !! Y.session) {
                jV.m.httpSessionId = j.ox(Y.session)
            }
        }
        jV.u = (Y.path || "/dwr/call/plaincall/") + (Y.query && "?" + Y.query || "");
        NEJ.EX(jV.r, Y);
        var Fz = jV.r.headers || {};
        if ( !! Y.headers) for (var x in Y.headers) Fz[x] = Y.headers[x];
        Fz[g.Rq] = g.cpL;
        jV.r.headers = Fz;
        var jf = "c" + jV.m.callCount;
        jV.m[jf + "-scriptName"] = eK[0];
        jV.m[jf + "-methodName"] = eK[1];
        jV.m[jf + "-id"] = jV.m.callCount;
        jV.h[jV.m.callCount] = {
            c: Y.onload || f,
            e: Y.onerror || f
        };
        var lU = Y.param;
        if ( !! lU && lU.length > 0) for (var i = 0,
        l = lU.length,
        bG; i < l; i++) {
            bG = byx(lU[i], jf); !! bG && (jV.m[jf + "-param" + i] = bG)
        }
        jV.m.callCount++;
        if (ckR) j.cXY();
        return this
    };
    j.cXY = function() {
        if (!jV || !jV.u) {
            jV = null;
            return this
        }
        var lC = bxK || u.eW(6);
        bxK = 0;
        jV.m.batchId = lC;
        cg[lC] = jV;
        jV = null;
        bdN(lC);
        return this
    };
    var ckQ = function(lC) {
        var jt = cg[lC];
        if (!jt) return;
        delete jt.h;
        delete jt.m;
        delete cg[lC]
    };
    var byx = function(W, jf) {
        if (W == null) return "null:null";
        if (u.ctF(W)) return "boolean:" + !!W;
        if (u.bdZ(W)) return "number:" + W;
        if (u.nY(W)) return "string:" + encodeURIComponent(W);
        if (u.bhK(W)) return "Date:" + W.getTime();
        if (u.jQ(W)) return cXW(W, jf);
        if (u.XF(W)) return cXV(W, jf);
        if (u.mb(W, "function")) return "";
        return "default:" + W
    };
    var cXW = function(bH, jf) {
        var dc = [];
        for (var i = 0,
        l = bH.length,
        Hz, bG; i < l; i++) {
            jV.p++;
            Hz = jf + "-e" + jV.p;
            bG = byx(bH[i], jf);
            if (!bG) continue;
            jV.m[Hz] = bG;
            dc.push("reference:" + Hz)
        }
        return "Array:[" + dc.join(",") + "]"
    };
    var cXV = function(jj, jf) {
        var dc = [],
        Hz,
        bG;
        for (var p in jj) {
            jV.p++;
            Hz = jf + "-e" + jV.p;
            bG = byx(jj[p], jf);
            if (!bG) continue;
            jV.m[Hz] = bG;
            dc.push(encodeURIComponent(p) + ":reference:" + Hz)
        }
        return "Object_Object:{" + dc.join(",") + "}"
    };
    var bze = function(W, Xb) {
        if (!W) return null;
        var dc = [],
        cXS = Xb == "&";
        for (var p in W) dc.push(!cXS ? p + "=" + W[p] : encodeURIComponent(p) + "=" + encodeURIComponent(W[p]));
        return dc.join(Xb || "\n")
    };
    var bdN = function(lC) {
        var jt = cg[lC];
        if (!jt) return;
        jt.u = jt.u.replace(/(\?|$)/, (jt.m.callCount > 1 ? "Multiple." + jt.m.callCount: jt.m["c0-scriptName"] + "." + jt.m["c0-methodName"]) + ".dwr$1");
        var lx = jt.r,
        mG = ckV[lx.proxy];
        if ( !! mG) {
            mG.dkC({
                url: jt.u,
                param: bze(jt.m, "&amp;")
            });
            delete jt.r;
            return
        }
        var Tz = !!lx.script,
        ckP = lx.method == "POST";
        delete jt.r;
        delete lx.script;
        lx.method = lx.method.toUpperCase();
        lx.onerror = cXO.Z(null, lC);
        if (Tz || !ckP) {
            jt.u += (jt.u.indexOf("?") >= 0 ? "&": "?") + bze(jt.m, "&")
        }
        if (Tz) {
            j.deJ(jt.u, lx)
        } else {
            lx.onload = cXM.Z(null, lC);
            lx.data = ckP ? bze(jt.m) : null;
            j.Lw(jt.u, lx)
        }
    };
    var Rp = function(lC, nx, jT) {
        var jt = cg[lC];
        if (!jt || ckW(jT)) return;
        var ec = jt.h[nx];
        if (!ec) return;
        try { (ec.e || f)(jT)
        } catch(ex) {
            console.error(ex.message);
            console.error(ex)
        }
    };
    var brd = function(lC, jT) {
        var jt = cg[lC];
        if (!jt) return;
        var ec = jt.h;
        for (var x in ec) Rp(lC, x, jT)
    };
    var cXK = function(lC, nx, W) {
        var jt = cg[lC];
        if (!jt) return;
        try { (jt.h[nx].c || f)(W)
        } catch(ex) {
            Rp(lC, nx, {
                code: g.deV,
                message: "DWR回调执行异常：" + ex.message || ex
            })
        }
    };
    var cXM = function(lC, hK) {
        try { !! hK && hK.search("//#DWR") >= 0 ? (new Function(hK))() : brd(lC, {
                code: g.bsJ,
                message: "DWR请求返回数据不合法!"
            })
        } catch(ex) {
            brd(lC, {
                code: g.bZY,
                message: "DWR返回脚本执行异常：" + (ex.message || ex)
            })
        } finally {
            ckQ(lC)
        }
    };
    var cXO = function(lC, jT) {
        brd(lC, jT);
        ckQ(lC)
    };
    w["_remoteHandleCallback"] = cXK;
    w["_remoteHandleException"] = Rp;
    w["_remoteHandleBatchException"] = brd;
    bq("dwr")["_"] = [{
        handleCallback: w["_remoteHandleCallback"],
        handleException: w["_remoteHandleException"],
        handleBatchException: w["_remoteHandleBatchException"]
    }]
})(); (function() {
    var r = [],
    g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    c = NEJ.P("mb.c"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    ut = NEJ.P("nej.ut"),
    bdS,
    cXJ;
    p.hA = NEJ.C();
    bdS = p.hA.bu(ut.bqF);
    cXJ = p.hA.cE;
    bdS.cXI = function(Y) {
        var ckM = c.dkD || o,
        Y = Y || {};
        Y.method = Y.method || "POST";
        if ( !! ckM.xauthKey) {
            Y.headers = {
                "Auth-Key": ckM.xauthKey
            }
        }
        return Y
    };
    bdS.bK = function(Y) {
        if (!Y.notShowLoading && !!eu.showLoading && !Y.onlyHideLoading) {
            eu.showLoading(Y.notShowMask)
        }
        var lx = this.cXI(Y);
        lx.sync = Y.sync || false;
        lx.param = Y.param;
        lx.onload = this.cXF.Z(this, Y.onload, Y.notShowLoading, Y.onlyHideLoading);
        lx.onerror = this.cXE.Z(this, Y.onpreError, Y.onerror, Y.notShowLoading, Y.onlyHideLoading);
        lx.session = "NTESMOOCSI";
        j.cYa(Y.url, lx)
    };
    bdS.cXF = function(bAm, bri, bAp, W) {
        if (!bri && !!eu.hideLoading || !!bAp && !!eu.hideLoading) {
            eu.hideLoading()
        }
        bAm(W)
    };
    bdS.cXE = function(ckK, Zh, bri, bAp, jT) {
        if (!bri && !!eu.hideLoading || !!bAp && !!eu.hideLoading) {
            eu.hideLoading()
        }
        if ( !! ckK) {
            ckK(jT)
        }
        if ( !! Zh) {
            Zh(jT)
        } else {
            var ckJ = (jT.message || "").split("_vG_Gv_");
            var NO = ckJ[0];
            var ckG = ckJ[1];
            var ckE = [];
            if ( !! ckG) {
                var bH = ckG.split("&");
                for (var i = bH.length; i;) {
                    var jr = bH[--i].split("=");
                    ckE.push({
                        key: jr[0],
                        value: jr[1]
                    })
                }
            }
            if (!bri) {
                switch (NO) {
                case "not_auth":
                    eu.rs.zO({
                        from:
                        "otherauth",
                        aftParams: ckE
                    });
                    break;
                case "not_access":
                    eu.cp.bT({
                        type:
                        1,
                        message: "没有权限查看！"
                    });
                    break;
                case "not_publish":
                    eu.cp.bT({
                        type:
                        1,
                        message: "课程未发布，不能操作此功能！"
                    });
                    break;
                case "course_edit":
                    eu.cp.bT({
                        type:
                        1,
                        message: "该课程制作者正在重新编辑内容，暂时不可学习，给你带来的不便深表歉意。"
                    });
                    break;
                case "course_delete":
                    eu.cp.bT({
                        type:
                        1,
                        message: "该课程已删除，给你带来不便深表歉意。你可以选择其他课程学习。"
                    });
                    break;
                case "keyword":
                    eu.cp.bT({
                        type:
                        1,
                        message: "输入的内容包含敏感词，不能发布！"
                    });
                    break;
                default:
                    NO = !!NO && NO != "Error" && NO.indexOf("超时") < 0 ? NO: "哎呀，您的网速不太给力，请刷新或稍后再试。";
                    if (NO.indexOf("服务器返回异常状态") < 0) {
                        eu.cp.bT({
                            type: 1,
                            message: NO
                        })
                    }
                    break
                }
            }
        }
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    pr,
    ix = "ck-termSettingsCache";
    p.NE = NEJ.C();
    pr = p.NE.bu(p.hA);
    pr.cXs = function(bcI) {
        this.bK({
            key: ix + bD,
            url: "MemberBean.getSchools",
            param: [bcI],
            onload: this.cXo.Z(this)
        })
    };
    pr.cXo = function(W) {
        this.bn("onGetSchools", W)
    };
    pr.cXn = function(bcI, cXm) {
        this.bK({
            key: ix + bD,
            url: "MemberBean.getDepartment",
            param: [bcI, cXm],
            onload: this.cXl.Z(this)
        })
    };
    pr.cXl = function(W) {
        this.bn("onGetDepartment", W)
    };
    pr.ckC = function(cXi) {
        this.bK({
            key: ix + bD,
            url: "MemberBean.updateMocMember",
            param: [cXi],
            onload: this.cXh.Z(this)
        })
    };
    pr.cXh = function(W) {
        this.bn("onUpdateMocMember", W)
    };
    pr.bBE = function(ca) {
        this.bK({
            key: ix + bD,
            url: "MemberBean.getMocMember",
            param: [ca],
            onload: this.cXg.Z(this)
        })
    };
    pr.cXg = function(W) {
        this.bn("onGetMocMember", W)
    };
    pr.ckB = function(ma) {
        this.bK({
            key: ix + bD,
            url: "MemberBean.isNickNameValid",
            param: [ma],
            notShowLoading: !0,
            onload: this.bBV.Z(this)
        })
    };
    pr.bBV = function(W) {
        this.bn("onisNickNameValid", W)
    };
    pr.ckA = function(ma, kx) {
        this.bK({
            key: ix + bD,
            url: "MemberBean.isOtherNickNameValid",
            notShowLoading: !0,
            param: [ma, kx],
            onload: this.bCn.Z(this)
        })
    };
    pr.bCn = function(W) {
        this.bn("onisOtherNickNameValid", W)
    };
    pr.cXd = function() {
        this.bK({
            key: ix + bD,
            url: "MemberBean.checkEmailStatus",
            sync: true,
            param: [],
            onload: this.bCq.Z(this)
        })
    };
    pr.bCq = function(W) {
        this.bn("onCheckEmailStatus", W)
    };
    pr.cXc = function(mX) {
        this.bK({
            key: ix + bD,
            url: "MemberBean.saveEmail",
            param: [mX],
            onload: this.bCv.Z(this, mX)
        })
    };
    pr.bCv = function(mX, W) {
        this.bn("onsaveEmail", mX, W)
    };
    pr.cXb = function(PG) {
        this.bK({
            key: ix + bD,
            url: "MemberBean.sendActiveEmail",
            param: [],
            onload: this.cXa.Z(this, PG)
        })
    };
    pr.cXa = function(PG, W) {
        this.bn("onsendActiveEmail", W, PG)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    ut = NEJ.P("nej.ut"),
    tu;
    eu.dG = function() {
        return (new Date).getTime() - g.serverTimeDiff
    };
    eu.gA = function(CI) {
        if (CI == eu.CONST.UNDETERMINDED_STARTTIME || CI == eu.CONST.UNDETERMINDED_ENDTIME) {
            return "待定"
        }
        var gh = "未填写时间";
        if (CI != null && CI != undefined) {
            var cV = new Date;
            cV.setTime(CI);
            gh = cV.getFullYear() + "年" + (cV.getMonth() + 1) + "月" + cV.getDate() + "日 " + cV.getHours() + ":" + (cV.getMinutes() < 10 ? "0": "") + cV.getMinutes()
        }
        return gh
    };
    eu.CK = function(CI) {
        var cV = new Date;
        cV.setTime(CI || 0);
        return cV.getFullYear() + "年" + (cV.getMonth() + 1 < 10 ? "0" + (cV.getMonth() + 1) : cV.getMonth() + 1) + "月" + (cV.getDate() < 10 ? "0" + cV.getDate() : cV.getDate()) + "日"
    };
    eu.brC = function(CI) {
        var ka = new Date;
        ka.setTime(CI || 0);
        var lY = new Date;
        if (lY.getTime() < ka.getTime()) {
            return "1秒前"
        } else if (lY.getFullYear() != ka.getFullYear()) {
            return ka.getFullYear() + "-" + (ka.getMonth() + 1) + "-" + ka.getDate()
        } else if (lY.getMonth() != ka.getMonth() || lY.getDate() != ka.getDate()) {
            return ka.getMonth() + 1 + "月" + ka.getDate() + "日"
        } else if (lY.getHours() != ka.getHours()) {
            var PL = ka.getMinutes();
            PL = PL < 10 ? "0" + PL: PL;
            return ka.getHours() + ":" + PL
        } else if (lY.getMinutes() != ka.getMinutes()) {
            return lY.getMinutes() - ka.getMinutes() + "分钟前"
        } else if (lY.getSeconds() != ka.getSeconds()) {
            return lY.getSeconds() - ka.getSeconds() + "秒前"
        } else {
            return "1秒前"
        }
    };
    eu.bDz = function(rC) {
        rC = rC || 0;
        var kj = parseInt(rC / 60);
        var CR = parseInt(rC % 60);
        return (kj < 10 ? "0" + kj: kj) + ":" + (CR < 10 ? "0" + CR: CR)
    };
    eu.ckz = function(rC) {
        rC = rC || 0;
        var jY = Math.floor(rC / 3600),
        kj = Math.floor(rC / 60) - jY * 60,
        CR = Math.floor(rC % 60);
        return (jY < 10 ? "0" + jY: jY) + ":" + (kj < 10 ? "0" + kj: kj) + ":" + (CR < 10 ? "0" + CR: CR)
    };
    eu.ME = function(rC) {
        var ki = new Date;
        ki.setTime(rC);
        var jC = ki.getMonth() + 1;
        var yi = ki.getDate();
        return ki.getFullYear() + "-" + (jC < 10 ? "0" + jC: jC) + "-" + (yi < 10 ? "0" + yi: yi)
    };
    p.cWX = NEJ.C();
    tu = p.cWX.bu(ut.hS, true);
    tu.hk = function(Y) {
        this.Ws = Y.totalTime;
        this.cky = Y.intervalTime;
        this.WG(this.Ws);
        this.hy(Y)
    };
    tu.WG = function(cV) {
        this.ckx = Math.floor(cV / 3600);
        this.cWQ = Math.floor(cV / 60) - this.ckx * 60;
        this.cWP = Math.floor(cV % 60)
    };
    tu.bEp = function() {
        return this.Ws || 0
    };
    tu.cWN = function() {
        return this.ckx || 0
    };
    tu.dkF = function() {
        var jY = this.cWN();
        return jY < 10 ? "0" + jY: jY + ""
    };
    tu.cWL = function() {
        return this.cWQ || 0
    };
    tu.dkI = function() {
        var kY = this.cWL();
        return kY < 10 ? "0" + kY: kY + ""
    };
    tu.cWC = function() {
        return this.cWP || 0
    };
    tu.dkJ = function() {
        var lX = this.cWC();
        return lX < 10 ? "0" + lX: lX + ""
    };
    tu.bEN = function() {
        if (!this.brV) {
            this.brV = g.setInterval(this.cWA.Z(this), this.cky * 1e3)
        }
    };
    tu.cWA = function() {
        var ckq = "timer";
        this.Ws -= this.cky;
        if (this.Ws <= 0) {
            this.Ws = 0;
            this.ckp();
            ckq = "timerComplete"
        }
        this.WG(this.Ws);
        this.bn(ckq)
    };
    tu.ckp = function() {
        if (this.brV) {
            this.brV = g.clearInterval(this.brV)
        }
    };
    tu.dK = function() {
        this.ckp()
    };
    tu.bF = function(Y) {
        this.bI(Y)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    eu = NEJ.P("edu.u"),
    cko = e.ee('{if defined("xlist")&&!!xlist.length}{list xlist as x}{if x_index != 0}<span class="f-fc6">、<span>{/if}<a class="f-fc6" href="${prefix.memberPrefix}${x.subfixUrl|escape}" target="_blank">${x.realName|escape}</a>{/list}{/if}');
    var ckl = function(cWm, bz) {
        var bFy = [];
        u.bA(cWm,
        function(ckk, bd) {
            if (ckk.lectorType === bz) {
                bFy[bFy.length] = ckk
            }
        });
        return bFy
    };
    var cWk = function(xW) {
        xW.isOver = eu.dG() - xW.endTime > 0;
        xW.offsetStartDay = Math.ceil((xW.startTime - eu.dG()) / (1e3 * 3600 * 24));
        xW.isStart = eu.dG() - xW.startTime > 0;
        var bjc = xW.endTime - xW.startTime,
        bjb = eu.dG() - xW.startTime;
        xW.termLength = Math.ceil(bjc / (1e3 * 3600 * 24 * 7));
        xW.onProgress = Math.ceil(bjb / (1e3 * 3600 * 24 * 7));
        xW.onProgressPercent = Math.ceil(100 * bjb / bjc);
        return xW
    };
    var cWj = function(cI) {
        var Lc = cI.termPanel,
        cWi = cI.mode == eu.CONST.MODE_MOOC ? g.urlPrefix.courseInfoPrefix: g.urlPrefix.spocCourseInfoPrefix,
        bGg = cI.mode == eu.CONST.MODE_MOOC ? g.urlPrefix.courseLearnPrefix: g.urlPrefix.spocCourseLearnPrefix;
        cI.infoUrl = cWi + encodeURIComponent(cI.schoolPanel.shortName) + "-" + encodeURIComponent(cI.id);
        cI.learnUrl = bGg + encodeURIComponent(cI.schoolPanel.shortName) + "-" + encodeURIComponent(cI.id);
        cI.scoreUrl = bGg + encodeURIComponent(cI.schoolPanel.shortName) + "-" + encodeURIComponent(cI.id) + "#" + eu.umi("learnScore");
        if ( !! Lc) {
            cI.certUrl = "cert/downCert.htm?termId=" + Lc.id;
            cI.certChargeUrl = "cert/downChargeCert.htm?termId=" + Lc.id;
            cI.scoreUrl = bGg + encodeURIComponent(cI.schoolPanel.shortName) + "-" + encodeURIComponent(cI.id) + "?tid=" + Lc.id + "#" + eu.umi("learnScore")
        }
        if ( !! Lc && cI.currentTermId != Lc.id) {
            cI.infoUrl = cI.infoUrl + "?tid=" + Lc.id;
            cI.learnUrl = cI.learnUrl + "?tid=" + Lc.id
        }
        return cI
    };
    var cWh = function(XQ) {
        var cI = {},
        cki = [],
        bGq = [];
        u.hW(XQ,
        function(bG, bzq) {
            cI[bzq] = bG
        });
        if ( !! cI.termPanel) {
            if (!cI.termPanel.bigPhotoUrl) {
                cI.imgUrl = g.imageUrlMap.img_default_course
            } else {
                cI.imgUrl = eu.cmt(cI.termPanel.bigPhotoUrl, 223, 125)
            }
            cI.termPanel = cWk(cI.termPanel);
            cI.recmendContent = u.Wa(cI.termPanel.jsonContent || "").spContent;
            if ( !! XQ.termPanel.lectorPanels) {
                cki = ckl(XQ.termPanel.lectorPanels, eu.CONST.REL_TYPE_TERM_CHIEF_LECTOR);
                bGq = ckl(XQ.termPanel.lectorPanels, eu.CONST.REL_TYPE_TERM_LECTOR)
            }
            cI.mainTeacher = e.bX(cko, {
                xlist: cki,
                prefix: g.urlPrefix
            }) || "";
            cI.teacherList = e.bX(cko, {
                xlist: bGq,
                prefix: g.urlPrefix
            });
            if ( !! cI.teacherList) {
                cI.teacherList = '<span class="f-fc6">、<span>' + cI.teacherList
            }
            cI.teacherList = cI.mainTeacher + cI.teacherList;
            if (bGq.length > 0) {
                cI.mainTeacher += '<span class="f-fc6">等</span>'
            }
        }
        if ( !! cI.schoolPanel) {
            cI = cWj(cI)
        }
        return cI
    };
    eu.bGz = function(W) {
        var ckh = [];
        if ( !! W && u.jQ(W)) {
            u.bA(W,
            function(XQ, bd) {
                ckh[bd] = cWh(XQ)
            })
        }
        return ckh
    };
    eu.cWc = function(bGE) {
        var bGI = null;
        if ( !! bGE && !!bGE.length) {
            bGI = [];
            u.bA(bGE,
            function(OP, bd) {
                OP.time = parseInt(OP.anchor);
                bGI.push(OP)
            })
        }
        return bGI
    };
    eu.FM = function(cWb, kx) {
        var gh = null;
        u.bA(cWb,
        function(ku, bd) {
            if ( !! ku && ku.memberId == kx) {
                gh = ku
            }
        });
        return gh
    };
    eu.bhl = function(KB) {
        var gh = false;
        u.bA(KB,
        function(Kz, bd) {
            if (eu.hj().id == Kz.id) {
                gh = true
            }
        });
        return gh
    };
    eu.dM = function(kd) {
        return true
    };
    eu.Gs = function() {
        if (g.forumType == eu.CONST.FORUM_TYPE_ELITE) {
            return eu.CONST.FORUM_FORBID_ELITE
        }
        if (g.mergedClosedStatus == eu.CONST.MERGED_CLOSED_STATUS_CLOSED) {
            return eu.CONST.FORUM_FORBID_CLOSED
        }
        if ( !! g.bannedState && (g.bannedState.site > 0 || g.bannedState.term > 0)) {
            return eu.CONST.FORUM_FORBID_USERFORBID
        }
        return eu.CONST.FORUM_FORBID_NORMAL
    };
    eu.CZ = function() {
        return !! g.moocTermDto
    };
    eu.pG = function() {
        return !! g.termDto && g.termDto.mode > 0
    };
    eu.ckg = function(fm) {
        return !! fm ? fm.mode == eu.CONST.MODE_MOOC && (fm.fromCourseMode == eu.CONST.MODE_SPOC_ONLY || fm.fromTermMode == eu.CONST.MODE_SPOC_ONLY) : false
    };
    eu.bHu = function(yq) {
        return !! yq ? "成绩": "证书"
    };
    eu.hZ = function() {
        var rS = location.search,
        jM = location.hash.split("?");
        var cVW = !!rS ? rS: jM[1] ? "?" + jM[1] : "";
        var lU = eu.VX(cVW);
        if (lU.optname == eu.CONST.SUPER_OPT_USER_NAME && eu.dX(eu.CONST.ROLE_PLATFORM_ADMIN)) {
            return true
        }
        return false
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    gN,
    ip = "ck-adminSchoolCache";
    p.oE = NEJ.C();
    gN = p.oE.bu(p.hA);
    gN.cVV = function(ga) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.getSchool",
            param: [ga],
            onload: this.cVU.Z(this)
        })
    };
    gN.cVU = function(W) {
        this.bn("onGetSchool", W)
    };
    gN.ckb = function(bpz) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.editSchool",
            param: [bpz],
            onload: this.cVI.Z(this)
        })
    };
    gN.cVI = function(W) {
        this.bn("onEditSchool", W)
    };
    gN.cVE = function(bIn) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.publishSchool",
            param: [bIn],
            onload: this.cVD.Z(this)
        })
    };
    gN.cVD = function(W) {
        this.bn("onPublishSchool", W)
    };
    gN.cVC = function() {
        this.bK({
            key: ip + bD,
            url: "CourseBean.getCategorys",
            param: [],
            onload: this.cVB.Z(this)
        })
    };
    gN.cVB = function(W) {
        this.bn("onGetCourseCategorys", W)
    };
    gN.bfy = function(cJ, gf) {
        this.bK({
            key: ip + bD,
            url: "AdminCommonBean.photoDelete",
            param: [cJ, gf],
            onload: this.cVA.Z(this)
        })
    };
    gN.cVA = function(W) {
        this.bn("onSaveGid", W)
    };
    gN.Zc = function(bII, pJ) {
        this.bK({
            key: ip + bD,
            url: "AdminCommonBean.photosDelete",
            param: [bII, pJ],
            onload: this.cVz.Z(this)
        })
    };
    gN.cVz = function(W) {
        this.bn("onSaveGidsAndPhotoUrls", W)
    };
    gN.cjW = function(ga, na, rj, gn, bJi, bJo) {
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.createCourse",
            param: [ga, na, rj, gn, bJi, bJo],
            onload: this.cVw.Z(this)
        })
    };
    gN.cVw = function(W) {
        this.bn("AdminCreateCourse", W)
    };
    gN.cjV = function(fh, ga, na, rj, gn, bJi, bJo) {
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.editCourse",
            param: [fh, ga, na, rj, gn, bJi, bJo],
            onload: this.cVp.Z(this)
        })
    };
    gN.cVp = function(W) {
        this.bn("AdminUpdateCourse", W)
    };
    gN.cjU = function(ga, cVh) {
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.getCoursesBySchool",
            param: [ga, cVh],
            onload: this.cVg.Z(this)
        })
    };
    gN.cVg = function(W) {
        this.bn("AdminGetCourseList", W)
    };
    gN.cVf = function(ga) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.getSchoolSessionPriviledge",
            param: [ga],
            onload: this.cVe.Z(this)
        })
    };
    gN.cVe = function(W) {
        this.bn("onGetSchoolSessionPriviledge", W)
    };
    gN.cjR = function(courseId, chiefTeacherId, startTime, kd, bKB) {
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.createTerm",
            param: [courseId, chiefTeacherId, startTime, kd, bKB],
            onload: this.cVb.Z(this)
        })
    };
    gN.cVb = function(W) {
        this.bn("AdminCreateTerm", W)
    };
    gN.cjP = function(courseId, termId, chiefTeacherId, startTime, kd, bKB) {
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.editTerm",
            param: [courseId, termId, chiefTeacherId, startTime, kd, bKB],
            onload: this.cUY.Z(this)
        })
    };
    gN.cUY = function(W) {
        this.bn("AdminUpdateTerm", W)
    };
    gN.cUX = function(termDto, categoryIds, bLa) {
        if (!eu.dM()) return;
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.updateCourseDraft",
            param: [termDto, categoryIds, bLa],
            onload: this.cUV.Z(this)
        })
    };
    gN.cUV = function(W) {
        this.bn("onUpdateCourseDraft", W)
    };
    gN.cUR = function(termId, categoryIds, bLa) {
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.publishTermDetail",
            param: [termId, categoryIds, bLa],
            onload: this.cUP.Z(this)
        })
    };
    gN.cUP = function(W) {
        this.bn("onPublishTermDetail", W)
    };
    gN.cUN = function(cd) {
        if (!eu.dM()) return;
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.validateTermDetailStaff",
            param: [cd],
            onload: this.cUM.Z(this)
        })
    };
    gN.cUM = function(W) {
        this.bn("onValidateTermDetailStaff", W)
    };
    gN.cUK = function(cUJ) {
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.getTermsByTeacher",
            param: [cUJ],
            onload: this.cUI.Z(this)
        })
    };
    gN.cUI = function(W) {
        this.bn("onGetTermsByTeacher", W)
    };
    gN.bLY = function(fh, cd, nd) {
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.getCourseDto",
            param: [fh, cd, nd],
            onload: this.cUH.Z(this)
        })
    };
    gN.cUH = function(W) {
        this.bn("onGetCourseDto", W)
    };
    gN.cUG = function(cd) {
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.deleteTermById",
            param: [cd],
            onload: this.cUF.Z(this)
        })
    };
    gN.cUF = function(W) {
        this.bn("onDeleteTermById", W)
    };
    gN.cUE = function(fh) {
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.deleteCourseById",
            param: [fh],
            onload: this.cUD.Z(this)
        })
    };
    gN.cUD = function(W) {
        this.bn("onDeleteCourseById", W)
    };
    gN.cUC = function(gn, fh) {
        this.bK({
            key: ip + bD,
            url: "PublishCourseBean.validateSpocFromCourse",
            param: [gn, fh],
            onload: this.cUz.Z(this)
        })
    };
    gN.cUz = function(W) {
        this.bn("onValidateSpocFromCourse", W)
    };
    gN.cUy = function(cUx, bMW, ga) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.setAuthStatusAndBgPhoto",
            param: [cUx, bMW, ga],
            onload: this.cUv.Z(this)
        })
    };
    gN.cUv = function(W) {
        this.bn("onSetAuthStatusAndBgPhoto", W)
    };
    gN.cUu = function(ga) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.getAuthStatusAndBgPhoto",
            param: [ga],
            onload: this.cUt.Z(this)
        })
    };
    gN.cUt = function(W) {
        this.bn("onGetAuthStatusAndBgPhoto", W)
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    pQ,
    cUs;
    var cF = e.dD(".#<uispace>.u-tipinput-error{border-color:red;}.#<uispace> {position:relative;z-index:102;}.#<uispace> .u-cmtedtip{position:absolute;}.#<uispace> .u-cmtedtip.right{top:-23px;right:0;}.#<uispace> .u-cmtedtip.left{bottom:-25px;left:0;}.#<uispace> .s-fc9{color:red;}.#<uispace> .tip{position:absolute;left:100%;top:0;padding-left:14px;width:200px;}.#<uispace> .tip .ct{background:#ffffcc;font-size:12px;line-height:16px;color:#333;padding:5px 6px;border:1px solid #c2b06b;}");
    var eg = e.bY('<div class="u-tipinput"><div class="u-cmtedtip"><div class="f-fs0 f-fc9 j-ic f-fl">还可以输入<b class="f-fs0 f-fc0">100</b>字</div></div><div class="f-cb j-editArea" style="z-index:102;"></div><div class="tip j-tip" style="display:none"><div class="trian"></div><div class="ct j-ct f-f1"></div></div></div>');
    eu.eh = NEJ.C();
    pQ = eu.eh.bu(eu.cq, true);
    cUs = eu.eh.cE;
    pQ.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    pQ.bP = function() {
        this.bQ();
        this.uR = e.bc(this.bb, "j-ic")[0];
        this.cUr = e.bc(this.bb, "u-cmtedtip")[0];
        this.cjK = e.bc(this.bb, "j-tip")[0];
        this.cUp = e.bc(this.bb, "j-ct")[0];
        this.Cp = e.bc(this.bb, "j-editArea")[0];
        this.fT = new p.iv
    };
    pQ.bF = function(Y) {
        this.bI(Y);
        this.wZ = eu.cH.bh({
            parent: this.Cp,
            width: Y.width,
            height: Y.height,
            filterEnter: Y.filterEnter,
            labelText: Y.labelText,
            type: Y.type,
            onInputFocus: this.cUo.Z(this),
            onInputBlur: this.cUn.Z(this),
            onInputChange: this.cjJ.Z(this)
        });
        this.eD = this.wZ.cZq();
        this.cjI = Y.autoShowCount == undefined ? true: Y.autoShowCount;
        this.cjG = '<div>还可以输入<b class="s-fc1"></b>字</div>';
        this.cUi = '<div class="s-fc9">已超过<b></b>字</div>';
        this.Vc = Y.critical || 100;
        this.cUh = !!Y.filterLine;
        this.cUg = Y.tipPos || "right";
        e.FT(this.cUr, "left right", this.cUg);
        this.uR.innerHTML = '<div>还可以输入<b class="s-fc1">' + Y.critical + "</b>字</div>";
        eu.bt(this.uR);
        if ( !! Y.cnt) {
            this.cUp.innerHTML = Y.cnt;
            this.cjF = Y.cnt
        }
        if ( !! Y.width) {
            this.Cp.style.width = Y.width + "px"
        }
        if ( !! Y.height) {
            this.Cp.style.height = Y.height + "px"
        }
    };
    pQ.cc = function() {
        return this.wZ.cc()
    };
    pQ.cX = function(bG) {
        this.wZ.cX(bG);
        this.cjJ()
    };
    pQ.iU = function() {
        this.wZ.iU()
    };
    pQ.dkO = function() {
        this.wZ.cX("");
        var bie = this.bPg(this.cjG, 100);
        this.uR.innerHTML = "";
        this.uR.appendChild(bie)
    };
    pQ.gD = function() {
        return this.fT.ir(this.wZ.cc())
    };
    pQ.biI = function() {
        this.wZ.biI()
    };
    pQ.biH = function() {
        this.wZ.biH()
    };
    pQ.mh = function() {
        this.wZ.mh()
    };
    pQ.jX = function() {
        this.wZ.jX()
    };
    pQ.cUo = function() {
        if (this.uR && this.cjI) eu.bw(this.uR);
        if ( !! this.cjF) {
            eu.bw(this.cjK)
        }
        this.bn("onInputFocus")
    };
    pQ.cUn = function(bj) {
        if (this.uR && this.cjI) eu.bt(this.uR);
        if ( !! this.cjF) {
            eu.bt(this.cjK)
        }
        this.bn("onInputBlur")
    };
    pQ.cjJ = function(bj) {
        if (!this.uR) return false;
        var bG = this.eD.value;
        if (this.cUh) {
            var bPj = bG.replace(/[\r\n]+/g, "");
            if (bPj != bG) {
                this.eD.value = bPj;
                bG = bPj
            }
        }
        bG = eu.tj(bG);
        var cjE = this.fT.ir(bG);
        var cUc = Math.ceil(cjE / 2);
        var bie;
        var rE = this.Vc - cUc;
        if (rE >= 0) bie = this.bPg(this.cjG, rE);
        else {
            var dR = Math.abs(rE);
            if (dR >= 1e3) {
                this.cjD = dR = 1e3;
                if ( !! this.cjD) {
                    var cjC = (this.cjD + this.Vc) * 2;
                    if (cjE > cjC) {
                        this.eD.value = this.fT.My(bG, cjC)
                    }
                }
            }
            bie = this.bPg(this.cUi, dR)
        }
        this.uR.innerHTML = "";
        this.uR.appendChild(bie);
        this.bn("onInputChange", bj)
    };
    pQ.bPg = function(dh, eL) {
        if (u.nY(dh)) dh = e.iN(dh);
        var cTZ = e.cS(dh)[0];
        cTZ.innerText = eL || 0;
        return dh
    };
    pQ.bL = function() {
        if (this.wZ) {
            this.wZ = eu.cH.bg(this.wZ)
        }
        this.bO()
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    bN;
    if ( !! bs.st) return;
    bs.st = NEJ.C();
    bN = bs.st.bu(eO.hS);
    bN.hk = function() {
        this.hy();
        bm.bEu();
        this.bU();
        this.bP()
    };
    bN.bF = function(Y) {
        this.bI(Y);
        this.bOp(Y.clazz);
        this.bqi(Y.parent)
    };
    bN.bL = function() {
        this.bO();
        this.baa();
        delete this.fB;
        bm.dr(this.bb);
        bm.bZ(this.bb, this.Oo);
        delete this.Oo
    };
    bN.bU = dk;
    bN.bP = function() {
        if (!this.bW) this.ZS();
        this.bb = bm.bow(this.bW);
        if (!this.bb) this.bb = bm.rF("div", this.dv);
        bm.bJ(this.bb, this.dv)
    };
    bN.ZS = dk;
    bN.bOp = function(ek) {
        this.Oo = ek || "";
        bm.bJ(this.bb, this.Oo)
    };
    bN.bOV = function() {
        if (!this.dv) return;
        bm.bJ(this.fB, this.dv + "-parent")
    };
    bN.baa = function() {
        if (!this.dv) return;
        bm.bZ(this.fB, this.dv + "-parent")
    };
    bN.kf = function() {
        return this.bb
    };
    bN.bqi = function(dO) {
        if (!this.bb) return this;
        this.baa();
        if (bE.mb(dO)) {
            this.fB = dO(this.bb)
        } else {
            this.fB = bm.bM(dO);
            if ( !! this.fB) this.fB.appendChild(this.bb)
        }
        this.bOV();
        return this
    };
    bN.gI = function() {
        if (!this.fB || !this.bb || this.bb.parentNode == this.fB) return this;
        this.fB.appendChild(this.bb);
        return this
    };
    bN.fs = function() {
        bm.dr(this.bb);
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    co = bq("nej.h"),
    bs = bq("nej.ui"),
    Ea,
    cjB;
    if ( !! bs.bhH) return;
    bs.bhH = NEJ.C();
    Ea = bs.bhH.bu(bs.st);
    cjB = bs.bhH.cE;
    Ea.bF = function(Y) {
        this.bI(Y);
        this.Yj("oncontentready", Y.oncontentready || this.cTU.Z(this));
        this.cTS = !!Y.nohack;
        this.cTP = !!Y.destroyable;
        this.ho(Y.content)
    };
    Ea.bL = function() {
        this.bn("onbeforerecycle");
        this.bO();
        this.bsT();
        this.ho("");
        bm.YS(this.bb, {
            top: "",
            left: ""
        })
    };
    Ea.cTU = dk;
    Ea.bPT = dk;
    Ea.bsT = function() {
        bm.dr(this.bb);
        if ( !! this.Cl) {
            this.Cl = co.bOU(this.bb);
            delete this.Cl
        }
    };
    Ea.ho = function(da) {
        if (!this.bb || !this.bhk || da == null) return this;
        da = da || "";
        bE.nY(da) ? this.bhk.innerHTML = da: this.bhk.appendChild(da);
        this.bn("oncontentready", this.bhk);
        return this
    };
    Ea.vr = function(gG) {
        var bG = gG.top;
        if (bG != null) {
            bG += "px";
            bm.ev(this.bb, "top", bG);
            bm.ev(this.Cl, "top", bG)
        }
        var bG = gG.left;
        if (bG != null) {
            bG += "px";
            bm.ev(this.bb, "left", bG);
            bm.ev(this.Cl, "left", bG)
        }
        return this
    };
    Ea.gI = function() {
        bm.ev(this.bb, "visibility", "hidden");
        cjB.gI.apply(this, arguments);
        this.bPT();
        bm.ev(this.bb, "visibility", "");
        if (!this.cTS) {
            this.Cl = co.Cl(this.bb)
        }
        return this
    };
    Ea.fs = function() {
        this.cTP ? this.bg() : this.bsT();
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    dk = NEJ.F,
    bE = bq("nej.u"),
    bm = bq("nej.e"),
    bs = bq("nej.ui"),
    Kf;
    if ( !! bs.bsW) return;
    bs.bsW = NEJ.C();
    Kf = bs.bsW.bu(bs.st);
    Kf.bF = function(Y) {
        this.bgr();
        this.bI(this.cTO(Y));
        this.vu.onbeforerecycle = this.bg.Z(this);
        this.HR = this.bQk()
    };
    Kf.bL = function() {
        this.bn("onbeforerecycle");
        this.bO();
        delete this.vu;
        bm.dr(this.bb);
        var cjy = this.HR;
        if ( !! cjy) {
            delete this.HR;
            cjy.bg()
        }
    };
    Kf.bQk = dk;
    Kf.cTO = function(Y) {
        var cL = {};
        bE.hW(Y,
        function(bo, bS) {
            this.vu.hasOwnProperty(bS) ? this.vu[bS] = bo: cL[bS] = bo
        },
        this);
        return cL
    };
    Kf.bgr = function() {
        this.vu = {
            clazz: "",
            parent: null,
            content: this.bb,
            destroyable: !1,
            oncontentready: null,
            nohack: !1
        }
    };
    Kf.gI = function() {
        if ( !! this.HR) this.HR.gI();
        this.bn("onaftershow");
        return this
    };
    Kf.fs = function() {
        if ( !! this.HR) this.HR.fs();
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    dx = bq("nej.g"),
    co = bq("nej.h"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    ch = bq("nej.v"),
    bs = bq("nej.ui"),
    bfN,
    cjx;
    if ( !! bs.Se) return;
    var cF = bm.dD(".#<uispace>{position:fixed;_position:absolute;z-index:100;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background-image:url(" + dx.cbI + ");}");
    bs.Se = NEJ.C();
    bfN = bs.Se.bu(bs.st);
    cjx = bs.Se.cE;
    bfN.bF = function(Y) {
        this.bI(Y);
        var da = Y.content || "&nbsp;";
        bE.nY(da) ? this.bb.innerHTML = da: this.bb.appendChild(da)
    };
    bfN.bL = function() {
        this.bO();
        this.bb.innerHTML = "&nbsp;"
    };
    bfN.bU = function() {
        this.dv = cF
    };
    bfN.gI = function() {
        co.bOA(this.bb);
        cjx.gI.apply(this, arguments);
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.DG) return;
    bs.DG = NEJ.C();
    bN = bs.DG.bu(bs.hS);
    bN.bF = function(Y) {
        this.bI(Y);
        this.cTK = !!Y.overflow;
        this.bb = bm.bM(Y.body);
        this.beh = bm.bM(Y.view) || bm.cpg(this.bb);
        this.cjw = bm.bM(Y.mbar) || this.bb;
        this.btc = parseInt(Y.direction) || 0;
        this.hd([[document, "mouseup", this.cTG.Z(this)], [document, "mousemove", this.bQZ.Z(this)], [this.cjw, "mousedown", this.Sj.Z(this)]])
    };
    bN.bL = function() {
        this.bO();
        delete this.bb;
        delete this.cjw;
        delete this.beh
    };
    bN.cju = function() {
        return {
            x: Math.max(this.beh.clientWidth, this.beh.scrollWidth) - this.bb.offsetWidth,
            y: Math.max(this.beh.clientHeight, this.beh.scrollHeight) - this.bb.offsetHeight
        }
    };
    bN.Sj = function(bj) {
        ch.dK(bj);
        if ( !! this.BQ) return;
        this.BQ = {
            x: ch.TU(bj),
            y: ch.TT(bj)
        };
        this.cjt = this.cju()
    };
    bN.bQZ = function(bj) {
        if (!this.BQ) return;
        var gG = {
            x: ch.TU(bj),
            y: ch.TT(bj)
        };
        var cTD = gG.x - this.BQ.x,
        cTC = gG.y - this.BQ.y,
        ml = parseInt(bm.tv(this.bb, "top")) || 0,
        sS = parseInt(bm.tv(this.bb, "left")) || 0,
        bG = {
            top: ml + cTC,
            left: sS + cTD
        };
        this.BQ = gG;
        this.vr(bG)
    };
    bN.cTG = function(bj) {
        if (!this.BQ) return;
        delete this.cjt;
        delete this.BQ;
        this.bn("ondragend", this.bcO())
    };
    bN.vr = function(bj) {
        if (!this.cTK) {
            var cjs = this.cjt || this.cju();
            bj.top = Math.min(cjs.y, Math.max(0, bj.top));
            bj.left = Math.min(cjs.x, Math.max(0, bj.left))
        }
        this.bn("onbeforechange", bj);
        var kl = this.bb.style;
        if (this.btc == 0 || this.btc == 2) kl.top = bj.top + "px";
        if (this.btc == 0 || this.btc == 1) kl.left = bj.left + "px";
        this.bn("onchange", bj);
        return this
    };
    bN.bcO = function() {
        return {
            left: parseInt(bm.tv(this.bb, "left")) || 0,
            top: parseInt(bm.tv(this.bb, "top")) || 0
        }
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    bE = NEJ.P("nej.u"),
    eO = NEJ.P("nej.ut"),
    bs = NEJ.P("nej.ui"),
    cF,
    dj,
    bN,
    sk;
    if ( !! bs.hq) return;
    bs.hq = NEJ.C();
    bN = bs.hq.bu(bs.bhH);
    sk = bs.hq.cE;
    bN.hk = function() {
        this.bRH = {};
        this.kn = {
            onchange: this.bQZ.Z(this)
        };
        this.hy()
    };
    bN.bF = function(Y) {
        this.bI(Y);
        this.cTz(Y.mask);
        this.cTy(Y.align);
        this.cjr(Y.title);
        if (!Y.draggable) return;
        this.iJ = eO.DG.bh(this.kn)
    };
    bN.bL = function() {
        this.bO();
        delete this.vK;
        delete this.bcN;
        if ( !! this.MC) {
            this.MC.bg();
            delete this.MC
        }
        if ( !! this.iJ) {
            this.iJ.bg();
            delete this.iJ
        }
    };
    bN.bU = function() {
        this.dv = cF;
        this.bW = dj
    };
    bN.bP = function() {
        this.bQ();
        var bH = bm.cS(this.bb);
        this.bhk = bH[1];
        this.kn.mbar = bH[0];
        this.kn.body = this.bb;
        ch.bf(bH[2], "mousedown", this.cTv.Z(this));
        ch.bf(this.kn.mbar, "mousedown", this.Sj.Z(this));
        this.cjq = bm.cS(this.kn.mbar)[0]
    };
    bN.cTv = function(bj) {
        ch.dK(bj);
        this.bn("onclose");
        this.fs()
    };
    bN.Sj = function(bj) {
        ch.bn(document, "click")
    };
    bN.bQZ = function(bj) {
        if (!this.Cl) return;
        bm.YS(this.Cl, {
            top: bj.top + "px",
            left: bj.left + "px"
        })
    };
    bN.bPT = function() {
        var Ls = [function() {
            return 0
        },
        function(bbb, gu, bS) {
            return Math.max(0, bbb[bS] + gu[bS] / 2)
        },
        function(bbb, gu, bS) {
            return bbb[bS] + gu[bS]
        }],
        bon = ["left", "top"];
        return function() {
            var bG = {},
            kl = this.bb.style,
            btt = bm.wR(),
            bbb = {
                left: btt.scrollLeft,
                top: btt.scrollTop
            },
            gu = {
                left: btt.clientWidth - this.bb.offsetWidth,
                top: btt.clientHeight - this.bb.offsetHeight
            };
            bE.bA(bon,
            function(bS, bd) {
                var ec = Ls[this.vK[bd]];
                if (!ec) return;
                bG[bS] = ec(bbb, gu, bS)
            },
            this);
            this.vr(bG)
        }
    } ();
    bN.cTo = function() {
        if (!this.MC) {
            if (!this.bcN) return;
            this.bRH.parent = this.fB;
            this.MC = this.bcN.bh(this.bRH)
        }
        this.MC.gI()
    };
    bN.bsT = function() {
        if ( !! this.MC) this.MC.fs();
        sk.bsT.apply(this, arguments)
    };
    bN.cTz = function(mU) {
        if ( !! mU) {
            if (mU instanceof bs.Se) {
                this.MC = mU;
                return
            }
            if (bE.mb(mU)) {
                this.bcN = mU;
                return
            }
            this.bcN = bs.Se;
            if (bE.nY(mU)) this.bRH.clazz = mU;
            return
        }
        this.bcN = null
    };
    bN.cjr = function(oS, dE) {
        if ( !! this.cjq) {
            var buE = !dE ? "innerText": "innerHTML";
            this.cjq[buE] = oS || "标题"
        }
        return this
    };
    bN.cTy = function() {
        var ep = /\s+/,
        cTk = {
            left: 0,
            center: 1,
            right: 2,
            auto: 3
        },
        cTj = {
            top: 0,
            middle: 1,
            bottom: 2,
            auto: 3
        };
        return function(qX) {
            this.vK = (qX || "").split(ep);
            var dh = cTk[this.vK[0]];
            if (dh == null) dh = 1;
            this.vK[0] = dh;
            var dh = cTj[this.vK[1]];
            if (dh == null) dh = 1;
            this.vK[1] = dh;
            return this
        }
    } ();
    bN.gI = function() {
        sk.gI.apply(this, arguments);
        this.cTo();
        return this
    };
    cF = bm.dD(".#<uispace>{position:absolute;z-index:1000;border:1px solid #aaa;background:#fff;}.#<uispace> .zbar{line-height:30px;background:#8098E7;border-bottom:1px solid #aaa;}.#<uispace> .zcnt{padding:10px 5px;}.#<uispace> .zttl{margin-right:20px;text-align:left;}.#<uispace> .zcls{position:absolute;top:5px;right:0;width:20px;height:20px;line-height:20px;cursor:pointer;}");
    dj = bm.bY('<div class="' + cF + '"><div class="zbar"><div class="zttl">标题</div></div><div class="zcnt"></div><span class="zcls" title="关闭窗体">×</span></div>')
})(); (function() {
    var bq = NEJ.P,
    bE = bq("nej.u"),
    bs = bq("nej.ui"),
    bSt;
    if ( !! bs.LI) return;
    bs.LI = NEJ.C();
    bSt = bs.LI.bu(bs.bsW);
    bSt.bQk = function() {
        return bs.hq.bh(this.vu)
    };
    bSt.bgr = function() {
        bs.LI.cE.bgr.apply(this, arguments);
        this.vu.mask = null;
        this.vu.title = "标题";
        this.vu.align = "";
        this.vu.draggable = !1;
        this.vu.onclose = null
    }
})(); (function() {
    var bq = NEJ.P,
    bm = bq("nej.e"),
    dx = window,
    ch = bq("nej.v"),
    cK = bq("nej.ui"),
    bs = bq("edu.u"),
    bSG,
    cTe;
    bs.hq = NEJ.C();
    bSG = bs.hq.bu(cK.LI);
    cTe = bs.hq.cE;
    bs.hq.bSN = function(Y) {
        var fV = bs.hq.bh(Y);
        fV.gI()
    };
    bSG.bF = function(Y) {
        Y = Y || {};
        Y.parent = Y.parent || document.body;
        Y.mask = !!Y.mask || Y.mask == undefined ? this.btx = cK.Se.bh({
            parent: Y.parent,
            clazz: "m-com-mask"
        }) : false;
        Y.draggable = Y.draggable == undefined ? true: !!Y.draggable;
        Y.destroyable = true;
        Y.title = Y.title || "标题";
        if ( !! Y.mask) {
            Y.clazz = "m-basewin m-winmark " + (Y.clazz || "");
            if (!Y.maskClickNotHidden) {
                this.hd([[this.btx.kf(), "click", this.fs.Z(this)]])
            }
        } else {
            Y.clazz = "m-basewin " + (Y.clazz || "")
        }
        this.bI(Y);
        if ( !! this.bb.parentNode && !!this.bb.parentNode.parentNode) {
            var bSR = bm.bc(this.bb.parentNode.parentNode, "zcls")[0];
            bSR.title = "关闭";
            if ( !! Y.closeBtnHidden) {
                bs.bt(bSR)
            } else {
                bs.bw(bSR)
            }
        }
        this.cTd = +(new Date);
        dx.modelList = dx.modelList || {};
        dx.modelList[this.cTd] = this
    };
    bSG.bL = function() {
        if ( !! this.btx) {
            this.btx = cK.Se.bg(this.btx)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    If,
    dz;
    eu.cp = NEJ.C();
    If = eu.cp.bu(eu.hq, true);
    eu.cp.bT = function(Y) {
        if ( !! dz) {
            dz = eu.cp.bg(dz)
        }
        dz = eu.cp.bh(Y);
        dz.gI();
        return dz
    };
    If.bL = function() {
        dz = null;
        this.bn("destroy");
        this.bO()
    };
    If.bU = function() {
        this.bW = e.bY(e.bX("jst-edu-ui-dialog"))
    };
    If.bP = function() {
        this.bQ();
        this.fF = e.cS(e.bc(this.bb, "j-content")[0]);
        this.cjm = this.fF[0];
        this.bkM = this.fF[1];
        this.qz = e.bc(this.bb, "j-right")[0];
        this.Lt = e.bc(this.bb, "j-left")[0];
        this.cSZ = e.bc(this.bb, "j-cancel-txt")[0];
        this.cSY = e.bc(this.bb, "j-ok-txt")[0];
        v.bf(this.qz, "click", this.bjo.Z(this));
        v.bf(this.Lt, "click", this.bTK.Z(this));
        this.fT = new p.iv
    };
    If.bjo = function() {
        if ( !! this.bjn) {
            this.bjn()
        }
        this.fs()
    };
    If.bTK = function() {
        if ( !! this.cjj) {
            this.cjj()
        }
        this.fs()
    };
    If.bF = function(Y) {
        Y = Y || o;
        Y.mask = Y.modal == undefined ? true: !!Y.modal;
        Y.title = Y.title || "提示";
        Y.clazz = "u-window-pd" + (Y.type ? " u-hidetitle": "") + " " + (Y.customStyle || "");
        Y.maskClickNotHidden = Y.maskClickNotHidden == undefined ? true: Y.maskClickNotHidden;
        Y.closeBtnHidden = Y.closeBtnHidden || false;
        this.bI(Y);
        this.cSU = Y.focusNum || 0;
        this.cjj = Y.okFunc;
        this.bjn = Y.cancelFunc;
        this.cSQ = Y.okTip || "确定";
        this.cSP = Y.cancelTip || "取消";
        this.bkM.innerHTML = Y.message || "请输入对话框内容";
        this.cSY.innerText = this.cSQ;
        this.cSZ.innerText = this.cSP;
        this.cSO();
        e.bZ(this.cjm, "ic1 ic2 ic3");
        e.bJ(this.cjm, "ic" + (Y.type || 3));
        if (!Y.type) {
            e.bJ(this.bkM, "cntnom")
        } else {
            e.bZ(this.bkM, "cntnom")
        }
    };
    If.cSO = function() {
        if ( !! this.bjn) {
            eu.bw(this.qz)
        } else {
            eu.bt(this.qz)
        }
        e.bZ(this.qz, "u-btn u-btn-primary");
        e.bZ(this.Lt, "u-btn u-btn-primary");
        if ( !! this.cSU) {
            e.bJ(this.Lt, "u-btn");
            e.bJ(this.qz, "u-btn u-btn-primary");
            this.qz.focus()
        } else {
            e.bJ(this.Lt, "u-btn u-btn-primary");
            e.bJ(this.qz, "u-btn");
            this.Lt.focus()
        }
    };
    If.cSN = function() {
        eu.bt(this.qz);
        eu.bt(this.Lt)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    bq = NEJ.P;
    eu = bq("edu.u"),
    cC = bq("edu.d"),
    bm = bq("nej.e"),
    bs = bq("nej.p"),
    dx = bq("nej.g"),
    bE = bq("nej.u"),
    ch = bq("nej.v"),
    fY = bq("nej.j"),
    bs = bq("edu.m"),
    cP = {},
    dkP = null;
    eu.cSK = function() {
        var cSI = 1024 * 1024 * 5,
        bD = bE.eW(),
        dkQ = "ck-uploadCache";
        var uploadCache = new cC.hA;
        function blobSlice(Fr, gG, eG) {
            var lJ = Math.min(gG + eG, Fr.size);
            return Fr.slice(gG, lJ)
        }
        function uploadBlob(bS) {
            var cI = cP[bS];
            if (!cI) return;
            var BD = cI.options,
            bvY = BD.token,
            bwa = BD.bucket;
            cI.blob = blobSlice(BD.file, cI.dto.offset, cI.dto.partSize);
            var cjg = cI.dto.offset + cI.blob.size >= BD.file.size;
            BD.form.action = g.uploadHost + "/file/multipartUpload.htm?_upload_mth_=sync_parse&partSize=" + (cjg ? cI.blob.size: cI.dto.partSize) + "&uploadId=" + cI.dto.uploadId + "&nextPartNum=" + cI.dto.nextPartNum + "&isLastPart=" + (cjg ? "true": "false") + "&key=" + cI.dto.key + "&token=" + encodeURIComponent(bvY) + "&bucket=" + encodeURIComponent(bwa);
            var cSB = function(cI, bN) {
                var cSA = {
                    timeStamp: bN.timeStamp,
                    loaded: cI.dto.offset + bN.loaded,
                    total: BD.file.size,
                    initOffset: cI.dto.initOffset
                };
                BD.onuploading(cSA)
            };
            var bAm = function(cI, W) {
                if (cI.dto.offset + cI.blob.size >= BD.file.size || !W.retSuc) {
                    delete cP[bS];
                    BD.onload(W)
                } else {
                    cI.dto.offset = cI.dto.offset + cI.blob.size;
                    cI.dto.nextPartNum = W.nextPartNum;
                    uploadBlob(bS)
                }
            };
            var Zh = function(W) {
                BD.onerror(W)
            };
            var Y = {
                type: "json",
                mode: 0,
                method: "POST",
                timeout: 30 * 60 * 1e3,
                cookie: true,
                headers: {
                    "Content-Type": "multipart/form-data"
                },
                data: cI.blob,
                onuploading: cSB.Z(this, cI),
                onload: bAm.Z(this, cI),
                onerror: Zh.Z(this)
            };
            cP[bS].reqId = fY.Lw(BD.form.action, Y)
        }
        return function(Y) {
            var Fr = Y.file;
            if (!Fr) return;
            var bS = bE.eW();
            cP[bS] = {
                options: Y
            };
            var W = "token=" + encodeURIComponent(cP[bS].options.token) + "&fileName=" + encodeURIComponent(Fr.name) + "&fileSize=" + Fr.size + "&bucket=" + encodeURIComponent(cP[bS].options.bucket);
            fY.Lw(g.uploadHost + "/file/initMultipartUpload.htm", {
                type: "json",
                method: "POST",
                data: W,
                mode: 0,
                cookie: true,
                onload: function(fm) {
                    if (cP[bS] === undefined) return;
                    if (fm.offset >= Fr.size - 1 || !fm.retSuc) {
                        delete cP[bS];
                        var cSw = {
                            retSuc: fm.retSuc,
                            nosKey: fm.key,
                            name: Fr.name,
                            errorCode: fm.errorCode,
                            retMsg: fm.retMsg
                        }; !! Y.onload && Y.onload(cSw);
                        return
                    }
                    fm.partSize = fm.partSize || cSI;
                    fm.initOffset = fm.offset;
                    cP[bS].dto = fm;
                    uploadBlob(bS)
                }.Z(this)
            });
            return bS
        }
    } ();
    eu.cSv = function(bS) {
        if ( !! cP[bS]) {
            fY.rt(cP[bS].reqId)
        }
    };
    eu.cjc = function() {
        var cSp = !!g.XMLHttpRequest && !!g.Blob && !!Blob.prototype.hasOwnProperty("slice");
        return function() {
            return cSp
        }
    } ();
    eu.BB = function(cl) {
        var cja = new bs.iv;
        var ciY = cl.slice(0, cl.lastIndexOf(".")),
        ON = cl.slice(cl.lastIndexOf(".")),
        bws = "";
        if (cja.ir(ciY) > 44) {
            bws = cja.My(ciY, 44) + "···" + ON
        }
        return !! bws ? bws: cl
    };
    eu.zN = function(cSi, ciX) {
        switch (cSi) {
        case eu.CONST.UPLOAD_ERROR_LIMITED:
            eu.showToastTips({
                content:
                "文件过大，上传失败",
                type: 2
            });
            if ( !! ciX) {
                ciX()
            }
            break;
        case eu.CONST.UPLOAD_ERROR_AUTHFAILED:
            eu.cp.bT({
                message:
                "您没有登录或者没有权限"
            });
            break;
        default:
            eu.cp.bT({
                message:
                "文件上传失败，请重试"
            });
            break
        }
    };
    eu.cSc = function() {
        var bwB = {};
        bwB[eu.CONST.UPLOAD_TOKEN_TYPE_VIDEO] = {
            support: ["mp4"],
            max: "800M"
        };
        bwB[eu.CONST.UPLOAD_TOKEN_TYPE_PDF] = {
            support: ["pdf"],
            max: "5M"
        };
        return function(bz) {
            return bwB[bz]
        }
    } ();
    eu.SN = function(bz, jq, Xl) {
        if (!jq) {
            return false
        }
        bz = bz || eu.CONST.UPLOAD_TOKEN_TYPE_DEFAULT;
        if (!Xl && !bz) {
            return true
        }
        if (!Xl && !!bz) {
            Xl = eu.cSc(bz) || {}
        }
        var Bo = Xl.support,
        bjU = Xl.suggest,
        iB = Xl.max;
        if (!Bo && !bjU) {
            return true
        }
        if ( !! Bo) {
            var cSa = new RegExp("(" + Bo.join("|") + ")$", "i")
        }
        if ( !! bjU) {
            var cRZ = new RegExp("(" + bjU.join("|") + ")$", "i")
        }
        Xo = {
            regSupport: cSa,
            regSuggest: cRZ,
            message: ( !! bjU ? "建议" + bjU.join("、") + "格式，": "") + ( !! Bo ? "支持" + Bo.join("、") + "格式" + ( !! iB ? "，": "") : "") + ( !! iB ? "文件最大为" + iB: "")
        };
        var bwR = jq.slice(jq.lastIndexOf(".") + 1);
        if ( !! bwR && !!Xo) {
            if ((!Xo.regSuggest || !Xo.regSuggest.test(bwR)) && (!Xo.regSupport || !Xo.regSupport.test(bwR))) {
                eu.cp.bT({
                    message: "不支持所选择的文件格式，请重新选择。" + (Xo.message || ""),
                    customStyle: "m-fileNameDialog"
                });
                return false
            }
        }
        return true
    };
    eu.ciT = function(Bk) {
        var gh = {};
        if ( !! Bk) {
            gh.gids = [];
            gh.urls = [];
            var ciS = Bk.photoGarbageIds.split(",");
            var ciP, ciO, dR = 0;
            for (var i in ciS) {
                var cQ = ciS[i];
                if ( !! cQ && cQ.indexOf("userdef1url") >= 0 && cQ.split(":")[1] != -1) {
                    gh.gids.push(cQ.split(":")[1]);
                    gh.urls.push(Bk.userDef1Url);
                    dR++
                } else if ( !! cQ && cQ.indexOf("userdef2url") >= 0 && cQ.split(":")[1] != -1) {
                    gh.gids.push(cQ.split(":")[1]);
                    gh.urls.push(Bk.userDef2Url);
                    dR++
                } else if ( !! cQ && cQ.indexOf("userdef3url") >= 0 && cQ.split(":")[1] != -1) {
                    gh.gids.push(cQ.split(":")[1]);
                    gh.urls.push(Bk.userDef3Url);
                    dR++
                } else if ( !! cQ && cQ.indexOf("ourl") >= 0 && cQ.split(":")[1] != -1) {
                    ciP = cQ.split(":")[1];
                    ciO = Bk.ourl
                }
            }
            if ( !! Bk.ourl && Bk.ourl.indexOf(".gif") > 0) {
                gh.gids = [];
                gh.urls = [];
                for (var j = 0; j < dR; j++) {
                    gh.gids.push(ciP);
                    gh.urls.push(ciO)
                }
            }
        }
        return gh
    };
    eu.bwZ = function(btS) {
        var ciN = [];
        if ( !! btS) {
            for (var i = 0; i < btS.length; i++) {
                var cI = {};
                cI.gid = btS[i].split("@")[0];
                cI.url = btS[i].split("@")[1];
                ciN.push(cI)
            }
        }
        return ciN
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    eu = NEJ.P("edu.u"),
    Xw,
    cRP;
    eu.btU = NEJ.C();
    Xw = eu.btU.bu(eu.cq, true);
    cRP = eu.btU.cE;
    Xw.bP = function() {
        this.Bh = u.eW(2);
        this.ne = NEJ.P("edu.u.imgUploadSelect" + this.Bh);
        this.bQ();
        this.SW()
    };
    Xw.bL = function() {
        if ( !! this.fB) {
            var bH = e.cS(this.fB);
            if ( !! bH) {
                for (var i = 0; i < bH.length; i++) {
                    this.fB.removeChild(bH[i])
                }
            }
        }
        delete this.lO;
        this.bO()
    };
    Xw.SW = function() {
        this.ne.saveHandle = this.bfU.Z(this)
    };
    Xw.bfU = function(cI) {
        if ( !! cI) {
            var cL = eu.ciT(cI);
            this.bn("onSave", {
                picUrl: cL.urls[0],
                picGid: cL.gids[0],
                newPhoto: true
            })
        }
    };
    Xw.bF = function(Y) {
        var DU = Y.uploadConfig;
        var cRL = "namespace=edu.u.imgUploadSelect" + this.Bh + "&url=" + encodeURIComponent("http://upload.icourse163.org/api/photoUpload2.do?_upload_mth_=sync_parse&sitefrom=study&responsetype=xml&userdefinesize=") + "&uW=" + (DU.uW || 180) + "&uH=" + (DU.uH || 180) + "&LW=" + (DU.LW || 316) + "&LH=" + (DU.LH || 270) + "&pW=" + (DU.pW || 120) + "&pH=" + (DU.pH || 120) + "&dW=" + (DU.dW || 153) + "&dH=" + (DU.dH || 153);
        e.Gp({
            src: g.imageUrlMap.img_upd_select_swf,
            width: "100%",
            height: "100%",
            parent: Y.parent,
            params: {
                flashvars: cRL,
                wmode: "transparent",
                allowscriptaccess: "always"
            },
            onready: function(lR) {
                this.lO = lR
            }.Z(this)
        });
        this.bI(Y)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    ui = NEJ.P("nej.ui"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    IH;
    var cF = e.dD(".#<uispace> {padding:0; width:578px; height:366px;}");
    var dn = e.ee('<div class="u-draUploadDialog"></div>');
    eu.ub = NEJ.C();
    IH = eu.ub.bu(eu.hq, true);
    eu.ub.bT = function(Y) {
        var fV = eu.ub.bh(Y);
        fV.gI()
    };
    IH.bU = function() {
        this.bW = e.bY(e.bX(dn));
        this.dv = cF
    };
    IH.bP = function() {
        this.bQ()
    };
    IH.iR = function() {
        this.fj();
        this.fs()
    };
    IH.bF = function(Y) {
        Y.title = Y.title || "上传图片";
        this.bI(Y);
        this.lq(Y.uploadConfig || {})
    };
    IH.lq = function(DU) {
        this.bxF = eu.btU.bh({
            parent: this.bb,
            onSave: this.mQ.Z(this),
            uploadConfig: DU
        })
    };
    IH.mQ = function(W) {
        this.bn("onComplete", W);
        this.iR()
    };
    IH.fj = function() {
        if ( !! this.bxF) {
            this.bxF = eu.btU.bg(this.bxF)
        }
    };
    IH.bL = function() {
        this.fj();
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    eu = NEJ.P("edu.u"),
    yF;
    var eg = e.bY('<div><a  class="u-btn u-btn-default j-upload" title="支持jpg、gif、png或bmp格式的图片，建议文件小于10M">上传图片</a><div class="flashbox j-flashbox"></div></div>');
    eu.ciK = NEJ.C();
    yF = eu.ciK.bu(eu.cq, true);
    yF.bU = function() {
        this.bW = eg
    };
    yF.bP = function() {
        this.bQ();
        this.Bh = u.eW(2);
        this.ne = NEJ.P("edu.u.imgUpload" + this.Bh);
        this.SW();
        this.pf = e.bc(this.bb, "j-upload")[0];
        this.btX = e.bc(this.bb, "j-flashbox")[0]
    };
    yF.SW = function() {
        this.ne.mouseOver = this.cRJ.Z(this);
        this.ne.mouseOut = this.cRH.Z(this);
        this.ne.uploadStart = this.bxS.Z(this);
        this.ne.uploadComplete = this.bua.Z(this);
        this.ne.uploadError = this.bxU.Z(this)
    };
    yF.cRJ = function() {
        e.bJ(this.pf, "hvr")
    };
    yF.cRH = function() {
        e.bZ(this.pf, "hvr")
    };
    yF.bxS = function(ca, dkU) {
        this.bn("uploadStart")
    };
    yF.bua = function(ca, nz, Bk) {
        if (nz == 999) {
            this.ciJ = eu.ciT(Bk);
            this.bn("uploadComplete", Bk)
        }
    };
    yF.bxU = function(cRE, bhJ, cRD) {
        var rR = "";
        if (bhJ == 12) {
            rR = "图片格式不正确，上传失败"
        } else if (bhJ == 0) {
            rR = "图片过大，上传失败，请重新选择"
        } else {
            rR = "上传失败，请重试"
        }
        this.bn("uploadError", rR)
    };
    yF.dkV = function() {
        return this.ciJ
    };
    yF.bF = function(Y) {
        Y.clazz = Y.clazz || "u-upd-img-btn";
        this.pf.innerText = Y.btnText || "上传图片";
        this.bI(Y);
        var cRB = Y.customSize || ["28x28x1", "120x120x1"];
        var byo = Y.baseUrl || "http://upload.icourse163.org/api/photoUpload2.do?_upload_mth_=sync_parse&";
        byo = byo + "userdefinesize=" + cRB + "&saveorigin=" + (Y.saveorigin || "false") + "&responsetype=" + (Y.responsetype || "xml") + "&rotatedegree=" + (Y.rotatedegree || "0") + "&stamptype=" + (Y.stamptype || "") + "&stampstring=" + encodeURIComponent(Y.stampstring || "") + "&sitefrom=study";
        this.ciJ = null;
        e.Gp({
            src: g.imageUrlMap.image_upload_swf,
            width: "100%",
            height: "100%",
            hidden: false,
            parent: this.btX,
            params: {
                allowScriptAccess: "always",
                wmode: "transparent",
                flashvars: "cbNameSpace=edu.u.imgUpload" + this.Bh + "&uploadExif=true&uploadUrl=" + encodeURIComponent(byo)
            },
            onready: function(lR) {
                this.lO = lR
            }.Z(this)
        })
    };
    yF.bL = function() {
        if ( !! this.btX) {
            var bH = e.cS(this.btX);
            if ( !! bH) {
                for (var i = 0; i < bH.length; i++) {
                    this.btX.removeChild(bH[i])
                }
            }
        }
        delete this.lO;
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    tQ,
    ip = "ck-adminTeacherCache";
    p.bys = NEJ.C();
    tQ = p.bys.bu(p.hA);
    tQ.dkW = function(bIn, ji, bd) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.getSchoolStaffListVo",
            param: [bIn, ji, bd],
            onload: this.cRv.Z(this)
        })
    };
    tQ.cRv = function(W) {
        this.bn("onGetSchoolTeacherList", W)
    };
    tQ.ciG = function() {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.getMocStaffSelfDto",
            param: [],
            onload: this.cRt.Z(this)
        })
    };
    tQ.cRt = function(W) {
        this.bn("onGetMocStaffSelfDto", W)
    };
    tQ.ciF = function(ga, kx) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.getMocStaffDto",
            param: [ga, kx],
            onload: this.cRp.Z(this)
        })
    };
    tQ.cRp = function(W) {
        this.bn("onGetMocStaffDto", W)
    };
    tQ.cRo = function(Tr) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.saveStaffHomepage",
            param: [Tr],
            onload: this.cRn.Z(this)
        })
    };
    tQ.cRn = function(W) {
        this.bn("onSaveStaffHomepage", W)
    };
    tQ.cRl = function(Tr) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.saveStaffSelfHomepage",
            param: [Tr],
            onload: this.cRj.Z(this)
        })
    };
    tQ.cRj = function(W) {
        this.bn("onSaveStaffSelfHomepage", W)
    };
    tQ.cRi = function(Tr) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.saveStaffPersonInfo",
            param: [Tr],
            onload: this.cRh.Z(this)
        })
    };
    tQ.cRh = function(W) {
        this.bn("onSaveStaffPersonInfo", W)
    };
    tQ.cRg = function(Tr) {
        this.bK({
            key: ip + bD,
            url: "MocSchoolBean.saveStaffSelfPersonInfo",
            param: [Tr],
            onload: this.cRf.Z(this)
        })
    };
    tQ.cRf = function(W) {
        this.bn("onSaveStaffSelfPersonInfo", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    zb;
    if ( !! eu.Yx) return;
    var cF = e.dD(".#<uispace> .date{margin-right: 5px;}");
    var fE = e.bY('<div class="u-dateselect f-cb"><div class="f-fl j-dateYear date"></div><div class="f-fl j-dateMonth date"></div><div class="f-fl j-dateDay date"></div></div>');
    var bih = e.ee('<select class="${clazz}">{list min..max as x}<option value ="${x}" >${x}</option>{/list}</select>');
    eu.Yx = NEJ.C();
    zb = eu.Yx.bu(eu.cq, !0);
    zb.bU = function() {
        this.bW = fE;
        this.dv = cF
    };
    zb.bP = function() {
        this.bQ();
        this.ciE = e.bc(this.bb, "j-dateYear")[0];
        this.ciD = e.bc(this.bb, "j-dateMonth")[0];
        this.ciC = e.bc(this.bb, "j-dateDay")[0]
    };
    zb.bzD = function(cV) {
        this.Jq(cV)
    };
    zb.bEp = function() {
        var ft = new Date,
        iQ = this.buI.value,
        jC = this.buN.value,
        yi = this.bzU.value;
        ft.setFullYear(iQ);
        ft.setMonth(jC - 1);
        ft.setDate(yi);
        return ft.getTime()
    };
    zb.Jq = function(cV) {
        var ft = new Date;
        ft.setTime(cV);
        var iQ = ft.getFullYear(),
        jC = ft.getMonth() + 1,
        yi = ft.getDate();
        this.ciB(iQ, jC, yi)
    };
    zb.cRa = function() {
        var ciA = (new Date).getFullYear();
        this.ciE.innerHTML = e.bX(bih, {
            min: ciA - 100,
            max: ciA,
            clazz: "j-year"
        });
        this.ciD.innerHTML = e.bX(bih, {
            min: 1,
            max: 12,
            clazz: "j-month"
        });
        this.buI = e.bc(this.bb, "j-year")[0];
        this.buN = e.bc(this.bb, "j-month")[0];
        this.Jq(this.tn)
    };
    zb.ciB = function(iQ, jC, yi) {
        this.buI.value = iQ;
        this.buN.value = jC;
        var Nd = this.cQY(iQ, jC);
        if (Nd < yi) {
            yi = 1
        }
        this.ciC.innerHTML = e.bX(bih, {
            min: 1,
            max: Nd,
            clazz: "j-day"
        });
        this.bzU = e.bc(this.bb, "j-day")[0];
        this.bzU.value = yi
    };
    zb.cQY = function() {
        var Nd = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        var bAb = function(iQ) {
            return ! (iQ % 400) || !(iQ % 4) && !!(iQ % 100)
        };
        var buW = function(iQ, jC) {
            return jC == 2 && bAb(iQ) ? 29 : Nd[jC - 1]
        };
        return function(iQ, jC) {
            return buW(iQ, jC)
        }
    } ();
    zb.ciz = function() {
        var iQ = this.buI.value,
        jC = this.buN.value,
        yi = this.bzU.value;
        this.ciB(iQ, jC, yi)
    };
    zb.bF = function(Y) {
        this.bI(Y);
        this.tn = Y.time || (new Date).getTime();
        this.cRa();
        v.bf(this.buI, "change", this.ciz.Z(this));
        v.bf(this.buN, "change", this.ciz.Z(this))
    };
    zb.bL = function() {
        this.ciE.innerHTML = "";
        this.ciD.innerHTML = "";
        this.ciC.innerHTML = "";
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    ut = NEJ.P("nej.ut"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("nej.ui"),
    bhb;
    eu.lM = NEJ.C();
    bhb = eu.lM.bu(ut.hS, true);
    bhb.bF = function(Y) {
        this.bI(Y);
        this.fB = Y.parent || e.iN("<div></div>");
        this.fE = Y.tpl || "";
        this.buZ = Y.clickActions || [];
        this.bAt = Y.linkClazz || "j-href";
        this.ciy = Y.linkout || false
    };
    bhb.ho = function(W, du, Ar) {
        this.fE = du || this.fE;
        this.bv = W;
        var du = e.bX(this.fE, {
            xlist: eu.bGz(W),
            prefix: g.urlPrefix,
            constant: eu.CONST,
            role: Ar || null
        });
        this.fB.appendChild(e.iN(du));
        this.ciy = e.bc(this.fB, this.bAt).length > 0;
        v.dY(this.fB, "click");
        v.bf(this.fB, "click", this.kW.Z(this))
    };
    bhb.kW = function(bj) {
        var dI = v.eP(bj),
        jS = dI.parentNode;
        u.bA(this.buZ,
        function(cI) {
            if (e.hJ(dI, cI.clazz)) {
                cI.cb(dI)
            }
        });
        if (dI.tagName.toLowerCase() == "a") {
            v.nS(bj);
            return
        }
        if (this.ciy) {
            while ( !! jS) {
                if (e.hJ(jS, this.bAt)) {
                    var cix = e.df(jS, "href");
                    eu.eE("courseCard", "click", cix);
                    g.open(cix, "_blank");
                    break
                } else {
                    jS = jS.parentNode
                }
            }
        }
    };
    bhb.bL = function() {
        this.fB.innerHTML = "";
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    bD = u.eW(),
    hC,
    oK = "ck-CourseCache",
    rO = 8;
    d.rN = NEJ.C();
    hC = d.rN.bu(d.hA);
    hC.Zf = function(bz) {
        this.bK({
            key: oK + bD,
            url: "AdminCommonBean.getAggreement",
            param: [bz],
            onload: this.cQU.Z(this)
        })
    };
    hC.cQU = function(W) {
        this.bn("onGetAggreement", W)
    };
    hC.ciw = function() {
        this.bK({
            key: oK + bD,
            url: "CourseBean.getCategorys",
            param: [],
            onload: this.bbK.Z(this)
        })
    };
    hC.bbK = function(W) {
        this.bn("onGetCategorys", W)
    };
    hC.cQS = function(bAR, bz, bs, cQR) {
        this.bK({
            key: oK + bD,
            url: "CourseBean.getCoursePanelListByCategory",
            param: [bAR, bz, bs, rO, cQR],
            onload: this.bBa.Z(this)
        })
    };
    hC.bBa = function(W) {
        this.bn("onGetCourseListByCategory", W)
    };
    hC.civ = function(wI) {
        this.bK({
            key: oK + bD,
            url: "CourseBean.getRadomCoursePanelList",
            param: [wI],
            onload: this.bBc.Z(this)
        })
    };
    hC.bBc = function(W) {
        this.bn("onGetRadomCourseList", W)
    };
    hC.ciu = function(ga, bs, rO, bz) {
        this.bK({
            key: oK + bD,
            url: "CourseBean.getCoursePanelListBySchoolId",
            param: [ga, bs, rO, bz],
            onload: this.bgy.Z(this)
        })
    };
    hC.bgy = function(W) {
        this.bn("onGetCourseListBySchoolId", W)
    };
    hC.cit = function(cQN, gn) {
        this.bK({
            key: oK + bD,
            url: "CourseBean.getAllCoursePanelListByStaffId",
            param: [cQN, gn],
            onload: this.bbM.Z(this)
        })
    };
    hC.bbM = function(W) {
        this.bn("onGetAllCourseListByStaffId", W)
    };
    hC.cQM = function(bz, bs) {
        this.bK({
            key: oK + bD,
            url: "CourseBean.getMyLearnedCoursePanelList",
            param: [bz, bs, 4],
            onload: this.cQK.Z(this)
        })
    };
    hC.cQK = function(W) {
        this.bn("onGetMyLearnedCourseList", W)
    };
    hC.bvi = function(cd, password, ciq) {
        this.bK({
            key: oK + bD,
            url: "CourseBean.startTermLearn",
            param: [cd, password],
            onload: this.cQF.Z(this),
            sync: true
        })
    };
    hC.cQF = function(W) {
        this.bn("onStartTermLearn", W)
    };
    hC.cQD = function(cd) {
        this.bK({
            key: oK + bD,
            url: "CourseBean.deleteTermLearn",
            param: [cd],
            onload: this.cQC.Z(this)
        })
    };
    hC.cQC = function(W) {
        this.bn("onDeleteTermLearn", W)
    };
    hC.bBF = function(cd, ciq) {
        this.bK({
            key: oK + bD,
            url: "CourseBean.checkTermLearn",
            param: [cd],
            onload: this.cQA.Z(this),
            sync: ciq || false
        })
    };
    hC.cQA = function(W) {
        this.bn("onCheckTermLearn", W)
    };
    hC.cio = function(ga, hu, rO) {
        this.bK({
            key: oK + bD,
            url: "MocSchoolBean.getMocSchoolLectorDtoList",
            param: [ga, hu, rO],
            onload: this.bBN.Z(this)
        })
    };
    hC.bBN = function(W) {
        this.bn("onGetMocSchoolLectorDtoList", W)
    };
    hC.cin = function(ga, hu, rO) {
        this.bK({
            key: oK + bD,
            url: "MocSchoolBean.getSpocSchoolLectorDtoList",
            param: [ga, hu, rO],
            onload: this.cQw.Z(this)
        })
    };
    hC.cQw = function(W) {
        this.bn("onGetSpocSchoolLectorDtoList", W)
    };
    hC.cil = function(nx) {
        this.bK({
            key: oK + bD,
            url: "MocCollectBean.doCollectSwitch",
            param: [nx],
            onload: this.cQt.Z(this)
        })
    };
    hC.cQt = function(W) {
        this.bn("onDoCollectSwitch", W)
    };
    hC.cQr = function(nx) {
        this.bK({
            key: oK + bD,
            url: "MocCollectBean.doCollectDelete",
            param: [nx],
            onload: this.bBY.Z(this)
        })
    };
    hC.bBY = function(W) {
        this.bn("onDoCollectDelete", W)
    };
    hC.cQi = function(bs) {
        this.bK({
            key: oK + bD,
            url: "MocCollectBean.queryMarkedCourses",
            param: [bs, 6],
            onload: this.cQg.Z(this)
        })
    };
    hC.cQg = function(W) {
        this.bn("onQueryMarkedCourses", W)
    };
    hC.cQd = function(nx) {
        this.bK({
            key: oK + bD,
            url: "MocCollectBean.isCourseMarked",
            param: [nx],
            onload: this.cQb.Z(this)
        })
    };
    hC.cQb = function(W) {
        this.bn("onIsCourseMarked", W)
    };
    hC.cie = function(ZN) {
        ZN.pageSize = rO;
        this.bK({
            key: oK + bD,
            url: "MocSearchBean.searchMocCourse",
            param: [ZN],
            onload: this.bdG.Z(this)
        })
    };
    hC.bdG = function(W) {
        this.bn("onSearchMocCourse", W)
    };
    hC.cPZ = function() {
        this.bK({
            key: oK + bD,
            url: "MocCertQueryBean.getMyCertList",
            param: [],
            onload: this.bCt.Z(this)
        })
    };
    hC.bCt = function(W) {
        this.bn("onGetMyCertList", W)
    };
    hC.cPX = function(cd) {
        this.bK({
            key: oK + bD,
            url: "CourseBean.canDeleteTermLearnRecord4Spoc",
            param: [cd],
            onload: this.cPW.Z(this)
        })
    };
    hC.cPW = function(W) {
        this.bn("onCanDeleteTermLearnRecord4Spoc", W)
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    ch = bq("nej.v"),
    ej = bq("nej.x"),
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.gg) return;
    bs.gg = NEJ.C();
    bN = bs.gg.bu(bs.hS);
    bN.bF = function(Y) {
        this.bI(Y);
        this.gj = Y.event || "click";
        this.or = Y.selected || "js-selected";
        this.kZ = Y.disabled || "js-disabled";
        this.cib = !!Y.inverse;
        this.cPT(Y.list);
        this.BF(Y.index || 0)
    };
    bN.bL = function() {
        var cPS = function(bB) {
            this.bDk(bB, !1)
        };
        return function() {
            this.bO();
            bE.bA(this.dw, cPS, this);
            delete this.dw;
            delete this.gj;
            delete this.dg;
            delete this.kZ;
            delete this.or;
            delete this.cib
        }
    } ();
    bN.cPT = function() {
        var bDp = function(bo) {
            if (!bo) return;
            this.dw.push(bo);
            var bd = this.dw.length - 1,
            ec = this.bDr[bd];
            if (!ec) {
                ec = this.BF.Z(this, bd);
                this.bDr[bd] = ec
            }
            this.hd([[bo, this.gj, ec]])
        };
        return function(bH) {
            this.dw = [];
            if (!this.bDr) this.bDr = [];
            bE.bA(bH, bDp, this)
        }
    } ();
    bN.bDk = function(bC, zV) { !! zV && !this.cib ? bm.bJ(bC, this.or) : bm.bZ(bC, this.or)
    };
    bN.BF = function(bd, bDt) {
        var bC = this.dw[bd];
        if (bDt != !0 && (bd == this.dg || !bC || bm.hJ(bC, this.kZ))) {
            ch.YI(arguments[1]);
            return this
        }
        var bj = {
            index: bd,
            last: this.dg,
            list: this.KO(),
            data: bm.df(bC, "value")
        };
        this.dg = bd;
        bC = this.dw[bj.last];
        if ( !! bC) this.bDk(bC, !1);
        bC = this.dw[this.dg];
        this.bDk(bC, !0);
        this.bn("onchange", bj);
        if (!bj.nostop) ch.YI(arguments[1]);
        return this
    };
    bN.beo = function() {
        return this.dg
    };
    bN.KO = function() {
        return this.dw
    };
    bm.cPR = ej.cPR = function(dO, Y) {
        var ca = bm.mt(dO);
        if (!ca) return null;
        if (!bs.blB(ca, bs.gg)) {
            Y = Y || {};
            Y.list = !Y.clazz ? bm.cS(ca) : bm.bc(ca, Y.clazz);
            delete Y.clazz
        }
        return bs.blB(ca, bs.gg, Y || de)
    };
    ej.isChange = !0
})(); (function() {
    UEDITOR_CONFIG = window.UEDITOR_CONFIG || {};
    var baidu = window.baidu || {};
    window.baidu = baidu;
    window.UE = baidu.editor = window.UE || {};
    UE.plugins = {};
    UE.commands = {};
    UE.instants = {};
    UE.I18N = {};
    UE.version = "1.3.6";
    var dom = UE.dom = {};
    var browser = UE.browser = function() {
        var agent = navigator.userAgent.toLowerCase(),
        opera = window.opera,
        browser = {
            ie: /(msie\s|trident.*rv:)([\w.]+)/.test(agent),
            opera: !!opera && opera.version,
            webkit: agent.indexOf(" applewebkit/") > -1,
            mac: agent.indexOf("macintosh") > -1,
            quirks: document.compatMode == "BackCompat"
        };
        browser.gecko = navigator.product == "Gecko" && !browser.webkit && !browser.opera && !browser.ie;
        var version = 0;
        if (browser.ie) {
            version = (agent.match(/(msie\s|trident.*rv:)([\w.]+)/)[2] || 0) * 1;
            browser.ie11Compat = document.documentMode == 11;
            browser.ie9Compat = document.documentMode == 9;
            browser.ie8 = !!document.documentMode;
            browser.ie8Compat = document.documentMode == 8;
            browser.ie7Compat = version == 7 && !document.documentMode || document.documentMode == 7;
            browser.ie6Compat = version < 7 || browser.quirks;
            browser.ie9above = version > 8;
            browser.ie9below = version < 9
        }
        if (browser.gecko) {
            var geckoRelease = agent.match(/rv:([\d\.]+)/);
            if (geckoRelease) {
                geckoRelease = geckoRelease[1].split(".");
                version = geckoRelease[0] * 1e4 + (geckoRelease[1] || 0) * 100 + (geckoRelease[2] || 0) * 1
            }
        }
        if (/chrome\/(\d+\.\d)/i.test(agent)) {
            browser.chrome = +RegExp["$1"]
        }
        if (/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(agent) && !/chrome/i.test(agent)) {
            browser.safari = +(RegExp["$1"] || RegExp["$2"])
        }
        if (browser.opera) version = parseFloat(opera.version());
        if (browser.webkit) version = parseFloat(agent.match(/ applewebkit\/(\d+)/)[1]);
        browser.version = version;
        browser.isCompatible = !browser.mobile && (browser.ie && version >= 6 || browser.gecko && version >= 10801 || browser.opera && version >= 9.5 || browser.air && version >= 1 || browser.webkit && version >= 522 || false);
        return browser
    } ();
    var ie = browser.ie,
    webkit = browser.webkit,
    gecko = browser.gecko,
    opera = browser.opera;
    var utils = UE.utils = {
        each: function(obj, iterator, context) {
            if (obj == null) return;
            if (obj.length === +obj.length) {
                for (var i = 0,
                l = obj.length; i < l; i++) {
                    if (iterator.call(context, obj[i], i, obj) === false) return false
                }
            } else {
                for (var key in obj) {
                    if (obj.hasOwnProperty(key)) {
                        if (iterator.call(context, obj[key], key, obj) === false) return false
                    }
                }
            }
        },
        makeInstance: function(obj) {
            var noop = new Function;
            noop.prototype = obj;
            obj = new noop;
            noop.prototype = null;
            return obj
        },
        extend: function(t, s, b) {
            if (s) {
                for (var k in s) {
                    if (!b || !t.hasOwnProperty(k)) {
                        t[k] = s[k]
                    }
                }
            }
            return t
        },
        extend2: function(t) {
            var a = arguments;
            for (var i = 1; i < a.length; i++) {
                var x = a[i];
                for (var k in x) {
                    if (!t.hasOwnProperty(k)) {
                        t[k] = x[k]
                    }
                }
            }
            return t
        },
        inherits: function(subClass, superClass) {
            var oldP = subClass.prototype,
            newP = utils.makeInstance(superClass.prototype);
            utils.extend(newP, oldP, true);
            subClass.prototype = newP;
            return newP.constructor = subClass
        },
        bind: function(fn, context) {
            return function() {
                return fn.apply(context, arguments)
            }
        },
        defer: function(fn, delay, exclusion) {
            var timerID;
            return function() {
                if (exclusion) {
                    clearTimeout(timerID)
                }
                timerID = setTimeout(fn, delay)
            }
        },
        indexOf: function(array, item, start) {
            var index = -1;
            start = this.isNumber(start) ? start: 0;
            this.each(array,
            function(v, i) {
                if (i >= start && v === item) {
                    index = i;
                    return false
                }
            });
            return index
        },
        removeItem: function(array, item) {
            for (var i = 0,
            l = array.length; i < l; i++) {
                if (array[i] === item) {
                    array.splice(i, 1);
                    i--
                }
            }
        },
        trim: function(str) {
            return str.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g, "")
        },
        listToMap: function(list) {
            if (!list) return {};
            list = utils.isArray(list) ? list: list.split(",");
            for (var i = 0,
            ci, obj = {}; ci = list[i++];) {
                obj[ci.toUpperCase()] = obj[ci] = 1
            }
            return obj
        },
        unhtml: function(str, reg) {
            return str ? str.replace(reg || /[&<">'](?:(amp|lt|quot|gt|#39|nbsp);)?/g,
            function(a, b) {
                if (b) {
                    return a
                } else {
                    return {
                        "<": "&lt;",
                        "&": "&amp;",
                        '"': "&quot;",
                        ">": "&gt;",
                        "'": "&#39;"
                    } [a]
                }
            }) : ""
        },
        html: function(str) {
            return str ? str.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,
            function(m) {
                return {
                    "&lt;": "<",
                    "&amp;": "&",
                    "&quot;": '"',
                    "&gt;": ">",
                    "&#39;": "'",
                    "&nbsp;": " "
                } [m]
            }) : ""
        },
        cssStyleToDomStyle: function() {
            var test = document.createElement("div").style,
            cache = {
                "float": test.cssFloat != undefined ? "cssFloat": test.styleFloat != undefined ? "styleFloat": "float"
            };
            return function(cssName) {
                return cache[cssName] || (cache[cssName] = cssName.toLowerCase().replace(/-./g,
                function(match) {
                    return match.charAt(1).toUpperCase()
                }))
            }
        } (),
        loadFile: function() {
            var tmpList = [];
            function getItem(doc, obj) {
                try {
                    for (var i = 0,
                    ci; ci = tmpList[i++];) {
                        if (ci.doc === doc && ci.url == (obj.src || obj.href)) {
                            return ci
                        }
                    }
                } catch(e) {
                    return null
                }
            }
            return function(doc, obj, fn) {
                var item = getItem(doc, obj);
                if (item) {
                    if (item.ready) {
                        fn && fn()
                    } else {
                        item.funs.push(fn)
                    }
                    return
                }
                tmpList.push({
                    doc: doc,
                    url: obj.src || obj.href,
                    funs: [fn]
                });
                if (!doc.body) {
                    var html = [];
                    for (var p in obj) {
                        if (p == "tag") continue;
                        html.push(p + '="' + obj[p] + '"')
                    }
                    doc.write("<" + obj.tag + " " + html.join(" ") + " ></" + obj.tag + ">");
                    return
                }
                if (obj.id && doc.getElementById(obj.id)) {
                    return
                }
                var element = doc.createElement(obj.tag);
                delete obj.tag;
                for (var p in obj) {
                    element.setAttribute(p, obj[p])
                }
                element.onload = element.onreadystatechange = function() {
                    if (!this.readyState || /loaded|complete/.test(this.readyState)) {
                        item = getItem(doc, obj);
                        if (item.funs.length > 0) {
                            item.ready = 1;
                            for (var fi; fi = item.funs.pop();) {
                                fi()
                            }
                        }
                        element.onload = element.onreadystatechange = null
                    }
                };
                element.onerror = function() {
                    throw Error("The load " + (obj.href || obj.src) + " fails,check the url settings of file ueditor.config.js ")
                };
                doc.getElementsByTagName("head")[0].appendChild(element)
            }
        } (),
        isEmptyObject: function(obj) {
            if (obj == null) return true;
            if (this.isArray(obj) || this.isString(obj)) return obj.length === 0;
            for (var key in obj) if (obj.hasOwnProperty(key)) return false;
            return true
        },
        fixColor: function(name, value) {
            if (/color/i.test(name) && /rgba?/.test(value)) {
                var array = value.split(",");
                if (array.length > 3) return "";
                value = "#";
                for (var i = 0,
                color; color = array[i++];) {
                    color = parseInt(color.replace(/[^\d]/gi, ""), 10).toString(16);
                    value += color.length == 1 ? "0" + color: color
                }
                value = value.toUpperCase()
            }
            return value
        },
        optCss: function(val) {
            var padding, margin, border;
            val = val.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,
            function(str, key, name, val) {
                if (val.split(" ").length == 1) {
                    switch (key) {
                    case "padding":
                        !padding && (padding = {});
                        padding[name] = val;
                        return "";
                    case "margin":
                        !margin && (margin = {});
                        margin[name] = val;
                        return "";
                    case "border":
                        return val == "initial" ? "": str
                    }
                }
                return str
            });
            function opt(obj, name) {
                if (!obj) {
                    return ""
                }
                var t = obj.top,
                b = obj.bottom,
                l = obj.left,
                r = obj.right,
                val = "";
                if (!t || !l || !b || !r) {
                    for (var p in obj) {
                        val += ";" + name + "-" + p + ":" + obj[p] + ";"
                    }
                } else {
                    val += ";" + name + ":" + (t == b && b == l && l == r ? t: t == b && l == r ? t + " " + l: l == r ? t + " " + l + " " + b: t + " " + r + " " + b + " " + l) + ";"
                }
                return val
            }
            val += opt(padding, "padding") + opt(margin, "margin");
            return val.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/, "").replace(/;([ \n\r\t]+)|\1;/g, ";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,
            function(a, b) {
                return b ? b + ";;": ";"
            })
        },
        clone: function(source, target) {
            var tmp;
            target = target || {};
            for (var i in source) {
                if (source.hasOwnProperty(i)) {
                    tmp = source[i];
                    if (typeof tmp == "object") {
                        target[i] = utils.isArray(tmp) ? [] : {};
                        utils.clone(source[i], target[i])
                    } else {
                        target[i] = tmp
                    }
                }
            }
            return target
        },
        transUnitToPx: function(val) {
            if (!/(pt|cm)/.test(val)) {
                return val
            }
            var unit;
            val.replace(/([\d.]+)(\w+)/,
            function(str, v, u) {
                val = v;
                unit = u
            });
            switch (unit) {
            case "cm":
                val = parseFloat(val) * 25;
                break;
            case "pt":
                val = Math.round(parseFloat(val) * 96 / 72)
            }
            return val + (val ? "px": "")
        },
        domReady: function() {
            var fnArr = [];
            function doReady(doc) {
                doc.isReady = true;
                for (var ci; ci = fnArr.pop(); ci()) {}
            }
            return function(onready, win) {
                win = win || window;
                var doc = win.document;
                onready && fnArr.push(onready);
                if (doc.readyState === "complete") {
                    doReady(doc)
                } else {
                    doc.isReady && doReady(doc);
                    if (browser.ie && browser.version != 11) { (function() {
                            if (doc.isReady) return;
                            try {
                                doc.documentElement.doScroll("left")
                            } catch(error) {
                                setTimeout(arguments.callee, 0);
                                return
                            }
                            doReady(doc)
                        })();
                        win.attachEvent("onload",
                        function() {
                            doReady(doc)
                        })
                    } else {
                        doc.addEventListener("DOMContentLoaded",
                        function() {
                            doc.removeEventListener("DOMContentLoaded", arguments.callee, false);
                            doReady(doc)
                        },
                        false);
                        win.addEventListener("load",
                        function() {
                            doReady(doc)
                        },
                        false);
                        setTimeout(function() {
                            doc.removeEventListener("load", arguments.callee, false);
                            doReady(doc)
                        },
                        2e3)
                    }
                }
            }
        } (),
        cssRule: browser.ie && browser.version != 11 ?
        function(key, style, doc) {
            var indexList, index;
            if (style === undefined || style && style.nodeType && style.nodeType == 9) {
                doc = style && style.nodeType && style.nodeType == 9 ? style: doc || document;
                indexList = doc.indexList || (doc.indexList = {});
                index = indexList[key];
                if (index !== undefined) {
                    return doc.styleSheets[index].cssText
                }
                return undefined
            }
            doc = doc || document;
            indexList = doc.indexList || (doc.indexList = {});
            index = indexList[key];
            if (style === "") {
                if (index !== undefined) {
                    doc.styleSheets[index].cssText = "";
                    delete indexList[key];
                    return true
                }
                return false
            }
            if (index !== undefined) {
                sheetStyle = doc.styleSheets[index]
            } else {
                sheetStyle = doc.createStyleSheet("", index = doc.styleSheets.length);
                indexList[key] = index
            }
            sheetStyle.cssText = style
        }: function(key, style, doc) {
            var head, node;
            if (style === undefined || style && style.nodeType && style.nodeType == 9) {
                doc = style && style.nodeType && style.nodeType == 9 ? style: doc || document;
                node = doc.getElementById(key);
                return node ? node.innerHTML: undefined
            }
            doc = doc || document;
            node = doc.getElementById(key);
            if (style === "") {
                if (node) {
                    node.parentNode.removeChild(node);
                    return true
                }
                return false
            }
            if (node) {
                node.innerHTML = style
            } else {
                node = doc.createElement("style");
                node.id = key;
                node.innerHTML = style;
                doc.getElementsByTagName("head")[0].appendChild(node)
            }
        },
        sort: function(array, compareFn) {
            compareFn = compareFn ||
            function(item1, item2) {
                return item1.localeCompare(item2)
            };
            for (var i = 0,
            len = array.length; i < len; i++) {
                for (var j = i,
                length = array.length; j < length; j++) {
                    if (compareFn(array[i], array[j]) > 0) {
                        var t = array[i];
                        array[i] = array[j];
                        array[j] = t
                    }
                }
            }
            return array
        },
        clearEmptyAttrs: function(obj) {
            for (var p in obj) {
                if (obj[p] === "") {
                    delete obj[p]
                }
            }
            return obj
        }
    };
    utils.each(["String", "Function", "Array", "Number", "RegExp", "Object"],
    function(v) {
        UE.utils["is" + v] = function(obj) {
            return Object.prototype.toString.apply(obj) == "[object " + v + "]"
        }
    });
    var EventBase = UE.EventBase = function() {};
    EventBase.prototype = {
        addListener: function(types, listener) {
            types = utils.trim(types).split(/\s+/);
            for (var i = 0,
            ti; ti = types[i++];) {
                getListener(this, ti, true).push(listener)
            }
        },
        on: function(types, listener) {
            return this.addListener(types, listener)
        },
        off: function(types, listener) {
            return this.removeListener(types, listener)
        },
        trigger: function() {
            return this.fireEvent.apply(this, arguments)
        },
        removeListener: function(types, listener) {
            types = utils.trim(types).split(/\s+/);
            for (var i = 0,
            ti; ti = types[i++];) {
                utils.removeItem(getListener(this, ti) || [], listener)
            }
        },
        fireEvent: function() {
            var types = arguments[0];
            types = utils.trim(types).split(" ");
            for (var i = 0,
            ti; ti = types[i++];) {
                var listeners = getListener(this, ti),
                r,
                t,
                k;
                if (listeners) {
                    k = listeners.length;
                    while (k--) {
                        if (!listeners[k]) continue;
                        t = listeners[k].apply(this, arguments);
                        if (t === true) {
                            return t
                        }
                        if (t !== undefined) {
                            r = t
                        }
                    }
                }
                if (t = this["on" + ti.toLowerCase()]) {
                    r = t.apply(this, arguments)
                }
            }
            return r
        }
    };
    function getListener(obj, type, force) {
        var allListeners;
        type = type.toLowerCase();
        return (allListeners = obj.cPN || force && (obj.cPN = {})) && (allListeners[type] || force && (allListeners[type] = []))
    }
    var dtd = dom.dtd = function() {
        function bq(s) {
            for (var k in s) {
                s[k.toUpperCase()] = s[k]
            }
            return s
        }
        var X = utils.extend2;
        var A = bq({
            isindex: 1,
            fieldset: 1
        }),
        B = bq({
            input: 1,
            button: 1,
            select: 1,
            textarea: 1,
            label: 1
        }),
        C = X(bq({
            a: 1
        }), B),
        D = X({
            iframe: 1
        },
        C),
        E = bq({
            hr: 1,
            ul: 1,
            menu: 1,
            div: 1,
            blockquote: 1,
            noscript: 1,
            table: 1,
            center: 1,
            address: 1,
            dir: 1,
            pre: 1,
            h5: 1,
            dl: 1,
            h4: 1,
            noframes: 1,
            h6: 1,
            ol: 1,
            h1: 1,
            h3: 1,
            h2: 1
        }),
        F = bq({
            ins: 1,
            del: 1,
            script: 1,
            style: 1
        }),
        G = X(bq({
            b: 1,
            acronym: 1,
            bdo: 1,
            "var": 1,
            "#": 1,
            abbr: 1,
            code: 1,
            br: 1,
            i: 1,
            cite: 1,
            kbd: 1,
            u: 1,
            strike: 1,
            s: 1,
            tt: 1,
            strong: 1,
            q: 1,
            samp: 1,
            em: 1,
            dfn: 1,
            span: 1
        }), F),
        H = X(bq({
            sub: 1,
            img: 1,
            embed: 1,
            object: 1,
            sup: 1,
            basefont: 1,
            map: 1,
            applet: 1,
            font: 1,
            big: 1,
            small: 1
        }), G),
        I = X(bq({
            p: 1
        }), H),
        J = X(bq({
            iframe: 1
        }), H, B),
        K = bq({
            img: 1,
            embed: 1,
            noscript: 1,
            br: 1,
            kbd: 1,
            center: 1,
            button: 1,
            basefont: 1,
            h5: 1,
            h4: 1,
            samp: 1,
            h6: 1,
            ol: 1,
            h1: 1,
            h3: 1,
            h2: 1,
            form: 1,
            font: 1,
            "#": 1,
            select: 1,
            menu: 1,
            ins: 1,
            abbr: 1,
            label: 1,
            code: 1,
            table: 1,
            script: 1,
            cite: 1,
            input: 1,
            iframe: 1,
            strong: 1,
            textarea: 1,
            noframes: 1,
            big: 1,
            small: 1,
            span: 1,
            hr: 1,
            sub: 1,
            bdo: 1,
            "var": 1,
            div: 1,
            object: 1,
            sup: 1,
            strike: 1,
            dir: 1,
            map: 1,
            dl: 1,
            applet: 1,
            del: 1,
            isindex: 1,
            fieldset: 1,
            ul: 1,
            b: 1,
            acronym: 1,
            a: 1,
            blockquote: 1,
            i: 1,
            u: 1,
            s: 1,
            tt: 1,
            address: 1,
            q: 1,
            pre: 1,
            p: 1,
            em: 1,
            dfn: 1
        }),
        L = X(bq({
            a: 0
        }), J),
        M = bq({
            tr: 1
        }),
        N = bq({
            "#": 1
        }),
        O = X(bq({
            param: 1
        }), K),
        P = X(bq({
            form: 1
        }), A, D, E, I),
        Q = bq({
            li: 1,
            ol: 1,
            ul: 1
        }),
        R = bq({
            style: 1,
            script: 1
        }),
        S = bq({
            base: 1,
            link: 1,
            meta: 1,
            title: 1
        }),
        T = X(S, R),
        U = bq({
            head: 1,
            body: 1
        }),
        V = bq({
            html: 1
        });
        var block = bq({
            address: 1,
            blockquote: 1,
            center: 1,
            dir: 1,
            div: 1,
            dl: 1,
            fieldset: 1,
            form: 1,
            h1: 1,
            h2: 1,
            h3: 1,
            h4: 1,
            h5: 1,
            h6: 1,
            hr: 1,
            isindex: 1,
            menu: 1,
            noframes: 1,
            ol: 1,
            p: 1,
            pre: 1,
            table: 1,
            ul: 1
        }),
        empty = bq({
            area: 1,
            base: 1,
            basefont: 1,
            br: 1,
            col: 1,
            command: 1,
            dialog: 1,
            embed: 1,
            hr: 1,
            img: 1,
            input: 1,
            isindex: 1,
            keygen: 1,
            link: 1,
            meta: 1,
            param: 1,
            source: 1,
            track: 1,
            wbr: 1
        });
        return bq({
            $nonBodyContent: X(V, U, S),
            $block: block,
            $inline: L,
            $inlineWithA: X(bq({
                a: 1
            }), L),
            $body: X(bq({
                script: 1,
                style: 1
            }), block),
            $cdata: bq({
                script: 1,
                style: 1
            }),
            $empty: empty,
            $nonChild: bq({
                iframe: 1,
                textarea: 1
            }),
            $listItem: bq({
                dd: 1,
                dt: 1,
                li: 1
            }),
            $list: bq({
                ul: 1,
                ol: 1,
                dl: 1
            }),
            $isNotEmpty: bq({
                table: 1,
                ul: 1,
                ol: 1,
                dl: 1,
                iframe: 1,
                area: 1,
                base: 1,
                col: 1,
                hr: 1,
                img: 1,
                embed: 1,
                input: 1,
                link: 1,
                meta: 1,
                param: 1,
                h1: 1,
                h2: 1,
                h3: 1,
                h4: 1,
                h5: 1,
                h6: 1
            }),
            $removeEmpty: bq({
                a: 1,
                abbr: 1,
                acronym: 1,
                address: 1,
                b: 1,
                bdo: 1,
                big: 1,
                cite: 1,
                code: 1,
                del: 1,
                dfn: 1,
                em: 1,
                font: 1,
                i: 1,
                ins: 1,
                label: 1,
                kbd: 1,
                q: 1,
                s: 1,
                samp: 1,
                small: 1,
                span: 1,
                strike: 1,
                strong: 1,
                sub: 1,
                sup: 1,
                tt: 1,
                u: 1,
                "var": 1
            }),
            $removeEmptyBlock: bq({
                p: 1,
                div: 1
            }),
            $tableContent: bq({
                caption: 1,
                col: 1,
                colgroup: 1,
                tbody: 1,
                td: 1,
                tfoot: 1,
                th: 1,
                thead: 1,
                tr: 1,
                table: 1
            }),
            $notTransContent: bq({
                pre: 1,
                script: 1,
                style: 1,
                textarea: 1
            }),
            html: U,
            head: T,
            style: N,
            script: N,
            body: P,
            base: {},
            link: {},
            meta: {},
            title: N,
            col: {},
            tr: bq({
                td: 1,
                th: 1
            }),
            img: {},
            embed: {},
            colgroup: bq({
                thead: 1,
                col: 1,
                tbody: 1,
                tr: 1,
                tfoot: 1
            }),
            noscript: P,
            td: P,
            br: {},
            th: P,
            center: P,
            kbd: L,
            button: X(I, E),
            basefont: {},
            h5: L,
            h4: L,
            samp: L,
            h6: L,
            ol: Q,
            h1: L,
            h3: L,
            option: N,
            h2: L,
            form: X(A, D, E, I),
            select: bq({
                optgroup: 1,
                option: 1
            }),
            font: L,
            ins: L,
            menu: Q,
            abbr: L,
            label: L,
            table: bq({
                thead: 1,
                col: 1,
                tbody: 1,
                tr: 1,
                colgroup: 1,
                caption: 1,
                tfoot: 1
            }),
            code: L,
            tfoot: M,
            cite: L,
            li: P,
            input: {},
            iframe: P,
            strong: L,
            textarea: N,
            noframes: P,
            big: L,
            small: L,
            span: bq({
                "#": 1,
                br: 1,
                b: 1,
                strong: 1,
                u: 1,
                i: 1,
                em: 1,
                sub: 1,
                sup: 1,
                strike: 1,
                span: 1
            }),
            hr: L,
            dt: L,
            sub: L,
            optgroup: bq({
                option: 1
            }),
            param: {},
            bdo: L,
            "var": L,
            div: P,
            object: O,
            sup: L,
            dd: P,
            strike: L,
            area: {},
            dir: Q,
            map: X(bq({
                area: 1,
                form: 1,
                p: 1
            }), A, F, E),
            applet: O,
            dl: bq({
                dt: 1,
                dd: 1
            }),
            del: L,
            isindex: {},
            fieldset: X(bq({
                legend: 1
            }), K),
            thead: M,
            ul: Q,
            acronym: L,
            b: L,
            a: X(bq({
                a: 1
            }), J),
            blockquote: X(bq({
                td: 1,
                tr: 1,
                tbody: 1,
                li: 1
            }), P),
            caption: L,
            i: L,
            u: L,
            tbody: M,
            s: L,
            address: X(D, I),
            tt: L,
            legend: L,
            q: L,
            pre: X(G, C),
            p: X(bq({
                a: 1
            }), L),
            em: L,
            dfn: L
        })
    } ();
    function getDomNode(node, start, ltr, startFromChild, fn, guard) {
        var tmpNode = startFromChild && node[start],
        parent; ! tmpNode && (tmpNode = node[ltr]);
        while (!tmpNode && (parent = (parent || node).parentNode)) {
            if (parent.tagName == "BODY" || guard && !guard(parent)) {
                return null
            }
            tmpNode = parent[ltr]
        }
        if (tmpNode && fn && !fn(tmpNode)) {
            return getDomNode(tmpNode, start, ltr, false, fn)
        }
        return tmpNode
    }
    var attrFix = ie && browser.version < 9 ? {
        tabindex: "tabIndex",
        readonly: "readOnly",
        "for": "htmlFor",
        "class": "className",
        maxlength: "maxLength",
        cellspacing: "cellSpacing",
        cellpadding: "cellPadding",
        rowspan: "rowSpan",
        colspan: "colSpan",
        usemap: "useMap",
        frameborder: "frameBorder"
    }: {
        tabindex: "tabIndex",
        readonly: "readOnly"
    },
    styleBlock = utils.listToMap(["-webkit-box", "-moz-box", "block", "list-item", "table", "table-row-group", "table-header-group", "table-footer-group", "table-row", "table-column-group", "table-column", "table-cell", "table-caption"]);
    var domUtils = dom.domUtils = {
        NODE_ELEMENT: 1,
        NODE_DOCUMENT: 9,
        NODE_TEXT: 3,
        NODE_COMMENT: 8,
        NODE_DOCUMENT_FRAGMENT: 11,
        POSITION_IDENTICAL: 0,
        POSITION_DISCONNECTED: 1,
        POSITION_FOLLOWING: 2,
        POSITION_PRECEDING: 4,
        POSITION_IS_CONTAINED: 8,
        POSITION_CONTAINS: 16,
        fillChar: ie && browser.version == "6" ? "﻿": "​",
        keys: {
            8 : 1,
            46 : 1,
            16 : 1,
            17 : 1,
            18 : 1,
            37 : 1,
            38 : 1,
            39 : 1,
            40 : 1,
            13 : 1
        },
        getPosition: function(nodeA, nodeB) {
            if (nodeA === nodeB) {
                return 0
            }
            var node, parentsA = [nodeA],
            parentsB = [nodeB];
            node = nodeA;
            while (node = node.parentNode) {
                if (node === nodeB) {
                    return 10
                }
                parentsA.push(node)
            }
            node = nodeB;
            while (node = node.parentNode) {
                if (node === nodeA) {
                    return 20
                }
                parentsB.push(node)
            }
            parentsA.reverse();
            parentsB.reverse();
            if (parentsA[0] !== parentsB[0]) {
                return 1
            }
            var i = -1;
            while (i++, parentsA[i] === parentsB[i]) {}
            nodeA = parentsA[i];
            nodeB = parentsB[i];
            while (nodeA = nodeA.nextSibling) {
                if (nodeA === nodeB) {
                    return 4
                }
            }
            return 2
        },
        getNodeIndex: function(node, ignoreTextNode) {
            var preNode = node,
            i = 0;
            while (preNode = preNode.previousSibling) {
                if (ignoreTextNode && preNode.nodeType == 3) {
                    if (preNode.nodeType != preNode.nextSibling.nodeType) {
                        i++
                    }
                    continue
                }
                i++
            }
            return i
        },
        inDoc: function(node, doc) {
            return domUtils.getPosition(node, doc) == 10
        },
        findParent: function(node, filterFn, includeSelf) {
            if (node && !domUtils.isBody(node)) {
                node = includeSelf ? node: node.parentNode;
                while (node) {
                    if (!filterFn || filterFn(node) || domUtils.isBody(node)) {
                        return filterFn && !filterFn(node) && domUtils.isBody(node) ? null: node
                    }
                    node = node.parentNode
                }
            }
            return null
        },
        findParentByTagName: function(node, tagNames, includeSelf, excludeFn) {
            tagNames = utils.listToMap(utils.isArray(tagNames) ? tagNames: [tagNames]);
            return domUtils.findParent(node,
            function(node) {
                return tagNames[node.tagName] && !(excludeFn && excludeFn(node))
            },
            includeSelf)
        },
        findParents: function(node, includeSelf, filterFn, closerFirst) {
            var parents = includeSelf && (filterFn && filterFn(node) || !filterFn) ? [node] : [];
            while (node = domUtils.findParent(node, filterFn)) {
                parents.push(node)
            }
            return closerFirst ? parents: parents.reverse()
        },
        insertAfter: function(node, newNode) {
            return node.nextSibling ? node.parentNode.insertBefore(newNode, node.nextSibling) : node.parentNode.appendChild(newNode)
        },
        remove: function(node, keepChildren) {
            var parent = node.parentNode,
            child;
            if (parent) {
                if (keepChildren && node.hasChildNodes()) {
                    while (child = node.firstChild) {
                        parent.insertBefore(child, node)
                    }
                }
                parent.removeChild(node)
            }
            return node
        },
        getNextDomNode: function(node, startFromChild, filterFn, guard) {
            return getDomNode(node, "firstChild", "nextSibling", startFromChild, filterFn, guard)
        },
        getPreDomNode: function(node, startFromChild, filterFn, guard) {
            return getDomNode(node, "lastChild", "previousSibling", startFromChild, filterFn, guard)
        },
        isBookmarkNode: function(node) {
            return node.nodeType == 1 && node.id && /^_baidu_bookmark_/i.test(node.id)
        },
        getWindow: function(node) {
            var doc = node.ownerDocument || node;
            return doc.defaultView || doc.parentWindow
        },
        getCommonAncestor: function(nodeA, nodeB) {
            if (nodeA === nodeB) return nodeA;
            var parentsA = [nodeA],
            parentsB = [nodeB],
            parent = nodeA,
            i = -1;
            while (parent = parent.parentNode) {
                if (parent === nodeB) {
                    return parent
                }
                parentsA.push(parent)
            }
            parent = nodeB;
            while (parent = parent.parentNode) {
                if (parent === nodeA) return parent;
                parentsB.push(parent)
            }
            parentsA.reverse();
            parentsB.reverse();
            while (i++, parentsA[i] === parentsB[i]) {}
            return i == 0 ? null: parentsA[i - 1]
        },
        clearEmptySibling: function(node, ignoreNext, ignorePre) {
            function clear(next, dir) {
                var tmpNode;
                while (next && !domUtils.isBookmarkNode(next) && (domUtils.isEmptyInlineElement(next) || !(new RegExp("[^\t\n\r" + domUtils.fillChar + "]")).test(next.nodeValue))) {
                    tmpNode = next[dir];
                    domUtils.remove(next);
                    next = tmpNode
                }
            } ! ignoreNext && clear(node.nextSibling, "nextSibling"); ! ignorePre && clear(node.previousSibling, "previousSibling")
        },
        split: function(node, offset) {
            var doc = node.ownerDocument;
            if (browser.ie && offset == node.nodeValue.length) {
                var next = doc.createTextNode("");
                return domUtils.insertAfter(node, next)
            }
            var retval = node.splitText(offset);
            if (browser.ie8) {
                var tmpNode = doc.createTextNode("");
                domUtils.insertAfter(retval, tmpNode);
                domUtils.remove(tmpNode)
            }
            return retval
        },
        isWhitespace: function(node) {
            return ! (new RegExp("[^ \t\n\r" + domUtils.fillChar + "]")).test(node.nodeValue)
        },
        getXY: function(element) {
            var x = 0,
            y = 0;
            while (element.offsetParent) {
                y += element.offsetTop;
                x += element.offsetLeft;
                element = element.offsetParent
            }
            return {
                x: x,
                y: y
            }
        },
        on: function(element, type, handler) {
            var types = utils.isArray(type) ? type: utils.trim(type).split(/\s+/),
            k = types.length;
            if (k) while (k--) {
                type = types[k];
                if (element.addEventListener) {
                    element.addEventListener(type, handler, false)
                } else {
                    if (!handler.cC) {
                        handler.cC = {
                            els: []
                        }
                    }
                    var key = type + handler.toString(),
                    index = utils.indexOf(handler.cC.els, element);
                    if (!handler.cC[key] || index == -1) {
                        if (index == -1) {
                            handler.cC.els.push(element)
                        }
                        if (!handler.cC[key]) {
                            handler.cC[key] = function(evt) {
                                return handler.call(evt.srcElement, evt || window.event)
                            }
                        }
                        element.attachEvent("on" + type, handler.cC[key])
                    }
                }
            }
            element = null
        },
        un: function(element, type, handler) {
            var types = utils.isArray(type) ? type: utils.trim(type).split(/\s+/),
            k = types.length;
            if (k) while (k--) {
                type = types[k];
                if (element.removeEventListener) {
                    element.removeEventListener(type, handler, false)
                } else {
                    var key = type + handler.toString();
                    try {
                        element.detachEvent("on" + type, handler.cC ? handler.cC[key] : handler)
                    } catch(e) {}
                    if (handler.cC && handler.cC[key]) {
                        var index = utils.indexOf(handler.cC.els, element);
                        if (index != -1) {
                            handler.cC.els.splice(index, 1)
                        }
                        handler.cC.els.length == 0 && delete handler.cC[key]
                    }
                }
            }
        },
        isSameElement: function(nodeA, nodeB) {
            if (nodeA.tagName != nodeB.tagName) {
                return false
            }
            var thisAttrs = nodeA.attributes,
            otherAttrs = nodeB.attributes;
            if (!ie && thisAttrs.length != otherAttrs.length) {
                return false
            }
            var attrA, attrB, al = 0,
            bl = 0;
            for (var i = 0; attrA = thisAttrs[i++];) {
                if (attrA.nodeName == "style") {
                    if (attrA.specified) {
                        al++
                    }
                    if (domUtils.isSameStyle(nodeA, nodeB)) {
                        continue
                    } else {
                        return false
                    }
                }
                if (ie) {
                    if (attrA.specified) {
                        al++;
                        attrB = otherAttrs.getNamedItem(attrA.nodeName)
                    } else {
                        continue
                    }
                } else {
                    attrB = nodeB.attributes[attrA.nodeName]
                }
                if (!attrB.specified || attrA.nodeValue != attrB.nodeValue) {
                    return false
                }
            }
            if (ie) {
                for (i = 0; attrB = otherAttrs[i++];) {
                    if (attrB.specified) {
                        bl++
                    }
                }
                if (al != bl) {
                    return false
                }
            }
            return true
        },
        isSameStyle: function(nodeA, nodeB) {
            var styleA = nodeA.style.cssText.replace(/( ?; ?)/g, ";").replace(/( ?: ?)/g, ":"),
            styleB = nodeB.style.cssText.replace(/( ?; ?)/g, ";").replace(/( ?: ?)/g, ":");
            if (browser.opera) {
                styleA = nodeA.style;
                styleB = nodeB.style;
                if (styleA.length != styleB.length) return false;
                for (var p in styleA) {
                    if (/^(\d+|csstext)$/i.test(p)) {
                        continue
                    }
                    if (styleA[p] != styleB[p]) {
                        return false
                    }
                }
                return true
            }
            if (!styleA || !styleB) {
                return styleA == styleB
            }
            styleA = styleA.split(";");
            styleB = styleB.split(";");
            if (styleA.length != styleB.length) {
                return false
            }
            for (var i = 0,
            ci; ci = styleA[i++];) {
                if (utils.indexOf(styleB, ci) == -1) {
                    return false
                }
            }
            return true
        },
        isBlockElm: function(node) {
            return node.nodeType == 1 && (dtd.$block[node.tagName] || styleBlock[domUtils.getComputedStyle(node, "display")]) && !dtd.$nonChild[node.tagName]
        },
        isBody: function(node) {
            return node && node.nodeType == 1 && node.tagName.toLowerCase() == "body"
        },
        breakParent: function(node, parent) {
            var tmpNode, parentClone = node,
            clone = node,
            leftNodes, rightNodes;
            do {
                parentClone = parentClone.parentNode;
                if (leftNodes) {
                    tmpNode = parentClone.cloneNode(false);
                    tmpNode.appendChild(leftNodes);
                    leftNodes = tmpNode;
                    tmpNode = parentClone.cloneNode(false);
                    tmpNode.appendChild(rightNodes);
                    rightNodes = tmpNode
                } else {
                    leftNodes = parentClone.cloneNode(false);
                    rightNodes = leftNodes.cloneNode(false)
                }
                while (tmpNode = clone.previousSibling) {
                    leftNodes.insertBefore(tmpNode, leftNodes.firstChild)
                }
                while (tmpNode = clone.nextSibling) {
                    rightNodes.appendChild(tmpNode)
                }
                clone = parentClone
            } while ( parent !== parentClone );
            tmpNode = parent.parentNode;
            tmpNode.insertBefore(leftNodes, parent);
            tmpNode.insertBefore(rightNodes, parent);
            tmpNode.insertBefore(node, rightNodes);
            domUtils.remove(parent);
            return node
        },
        isEmptyInlineElement: function(node) {
            if (node.nodeType != 1 || !dtd.$removeEmpty[node.tagName]) {
                return 0
            }
            node = node.firstChild;
            while (node) {
                if (domUtils.isBookmarkNode(node)) {
                    return 0
                }
                if (node.nodeType == 1 && !domUtils.isEmptyInlineElement(node) || node.nodeType == 3 && !domUtils.isWhitespace(node)) {
                    return 0
                }
                node = node.nextSibling
            }
            return 1
        },
        trimWhiteTextNode: function(node) {
            function remove(dir) {
                var child;
                while ((child = node[dir]) && child.nodeType == 3 && domUtils.isWhitespace(child)) {
                    node.removeChild(child)
                }
            }
            remove("firstChild");
            remove("lastChild")
        },
        mergeChild: function(node, tagName, attrs) {
            var list = domUtils.getElementsByTagName(node, node.tagName.toLowerCase());
            for (var i = 0,
            ci; ci = list[i++];) {
                if (!ci.parentNode || domUtils.isBookmarkNode(ci)) {
                    continue
                }
                if (ci.tagName.toLowerCase() == "span") {
                    if (node === ci.parentNode) {
                        domUtils.trimWhiteTextNode(node);
                        if (node.childNodes.length == 1) {
                            node.style.cssText = ci.style.cssText + ";" + node.style.cssText;
                            domUtils.remove(ci, true);
                            continue
                        }
                    }
                    ci.style.cssText = node.style.cssText + ";" + ci.style.cssText;
                    if (attrs) {
                        var style = attrs.style;
                        if (style) {
                            style = style.split(";");
                            for (var j = 0,
                            s; s = style[j++];) {
                                ci.style[utils.cssStyleToDomStyle(s.split(":")[0])] = s.split(":")[1]
                            }
                        }
                    }
                    if (domUtils.isSameStyle(ci, node)) {
                        domUtils.remove(ci, true)
                    }
                    continue
                }
                if (domUtils.isSameElement(node, ci)) {
                    domUtils.remove(ci, true)
                }
            }
        },
        getElementsByTagName: function(node, name, filter) {
            if (filter && utils.isString(filter)) {
                var className = filter;
                filter = function(node) {
                    return domUtils.hasClass(node, className)
                }
            }
            name = utils.trim(name).replace(/[ ]{2,}/g, " ").split(" ");
            var arr = [];
            for (var n = 0,
            ni; ni = name[n++];) {
                var list = node.getElementsByTagName(ni);
                for (var i = 0,
                ci; ci = list[i++];) {
                    if (!filter || filter(ci)) arr.push(ci)
                }
            }
            return arr
        },
        mergeToParent: function(node) {
            var parent = node.parentNode;
            while (parent && dtd.$removeEmpty[parent.tagName]) {
                if (parent.tagName == node.tagName || parent.tagName == "A") {
                    domUtils.trimWhiteTextNode(parent);
                    if (parent.tagName == "SPAN" && !domUtils.isSameStyle(parent, node) || parent.tagName == "A" && node.tagName == "SPAN") {
                        if (parent.childNodes.length > 1 || parent !== node.parentNode) {
                            node.style.cssText = parent.style.cssText + ";" + node.style.cssText;
                            parent = parent.parentNode;
                            continue
                        } else {
                            parent.style.cssText += ";" + node.style.cssText;
                            if (parent.tagName == "A") {
                                parent.style.textDecoration = "underline"
                            }
                        }
                    }
                    if (parent.tagName != "A") {
                        parent === node.parentNode && domUtils.remove(node, true);
                        break
                    }
                }
                parent = parent.parentNode
            }
        },
        mergeSibling: function(node, ignorePre, ignoreNext) {
            function merge(rtl, start, node) {
                var next;
                if ((next = node[rtl]) && !domUtils.isBookmarkNode(next) && next.nodeType == 1 && domUtils.isSameElement(node, next)) {
                    while (next.firstChild) {
                        if (start == "firstChild") {
                            node.insertBefore(next.lastChild, node.firstChild)
                        } else {
                            node.appendChild(next.firstChild)
                        }
                    }
                    domUtils.remove(next)
                }
            } ! ignorePre && merge("previousSibling", "firstChild", node); ! ignoreNext && merge("nextSibling", "lastChild", node)
        },
        unSelectable: ie || browser.opera ?
        function(node) {
            node.onselectstart = function() {
                return false
            };
            node.onclick = node.onkeyup = node.onkeydown = function() {
                return false
            };
            node.unselectable = "on";
            node.setAttribute("unselectable", "on");
            for (var i = 0,
            ci; ci = node.all[i++];) {
                switch (ci.tagName.toLowerCase()) {
                case "iframe":
                case "textarea":
                case "input":
                case "select":
                    break;
                default:
                    ci.unselectable = "on";
                    node.setAttribute("unselectable", "on")
                }
            }
        }: function(node) {
            node.style.MozUserSelect = node.style.webkitUserSelect = node.style.KhtmlUserSelect = "none"
        },
        removeAttributes: function(node, attrNames) {
            attrNames = utils.isArray(attrNames) ? attrNames: utils.trim(attrNames).replace(/[ ]{2,}/g, " ").split(" ");
            for (var i = 0,
            ci; ci = attrNames[i++];) {
                ci = attrFix[ci] || ci;
                switch (ci) {
                case "className":
                    node[ci] = "";
                    break;
                case "style":
                    node.style.cssText = "";
                    var val = node.getAttributeNode("style"); ! browser.ie && val && node.removeAttributeNode(val)
                }
                node.removeAttribute(ci)
            }
        },
        createElement: function(doc, tag, attrs) {
            return domUtils.setAttributes(doc.createElement(tag), attrs)
        },
        setAttributes: function(node, attrs) {
            for (var attr in attrs) {
                if (attrs.hasOwnProperty(attr)) {
                    var value = attrs[attr];
                    switch (attr) {
                    case "class":
                        node.className = value;
                        break;
                    case "style":
                        node.style.cssText = node.style.cssText + ";" + value;
                        break;
                    case "innerHTML":
                        node[attr] = value;
                        break;
                    case "value":
                        node.value = value;
                        break;
                    default:
                        node.setAttribute(attrFix[attr] || attr, value)
                    }
                }
            }
            return node
        },
        getComputedStyle: function(element, styleName) {
            var pros = "width height top left";
            if (pros.indexOf(styleName) > -1) {
                return element["offset" + styleName.replace(/^\w/,
                function(s) {
                    return s.toUpperCase()
                })] + "px"
            }
            if (element.nodeType == 3) {
                element = element.parentNode
            }
            if (browser.ie && browser.version < 9 && styleName == "font-size" && !element.style.fontSize && !dtd.$empty[element.tagName] && !dtd.$nonChild[element.tagName]) {
                var span = element.ownerDocument.createElement("span");
                span.style.cssText = "padding:0;border:0;font-family:simsun;";
                span.innerHTML = ".";
                element.appendChild(span);
                var result = span.offsetHeight;
                element.removeChild(span);
                span = null;
                return result + "px"
            }
            try {
                var value = domUtils.getStyle(element, styleName) || (window.getComputedStyle ? domUtils.getWindow(element).getComputedStyle(element, "").getPropertyValue(styleName) : (element.currentStyle || element.style)[utils.cssStyleToDomStyle(styleName)])
            } catch(e) {
                return ""
            }
            return utils.transUnitToPx(utils.fixColor(styleName, value))
        },
        removeClasses: function(elm, classNames) {
            classNames = utils.isArray(classNames) ? classNames: utils.trim(classNames).replace(/[ ]{2,}/g, " ").split(" ");
            for (var i = 0,
            ci, cls = elm.className; ci = classNames[i++];) {
                cls = cls.replace(new RegExp("\\b" + ci + "\\b"), "")
            }
            cls = utils.trim(cls).replace(/[ ]{2,}/g, " ");
            if (cls) {
                elm.className = cls
            } else {
                domUtils.removeAttributes(elm, ["class"])
            }
        },
        addClass: function(elm, classNames) {
            if (!elm) return;
            classNames = utils.trim(classNames).replace(/[ ]{2,}/g, " ").split(" ");
            for (var i = 0,
            ci, cls = elm.className; ci = classNames[i++];) {
                if (! (new RegExp("\\b" + ci + "\\b")).test(cls)) {
                    cls += " " + ci
                }
            }
            elm.className = utils.trim(cls)
        },
        hasClass: function(element, className) {
            if (utils.isRegExp(className)) {
                return className.test(element.className)
            }
            className = utils.trim(className).replace(/[ ]{2,}/g, " ").split(" ");
            for (var i = 0,
            ci, cls = element.className; ci = className[i++];) {
                if (! (new RegExp("\\b" + ci + "\\b", "i")).test(cls)) {
                    return false
                }
            }
            return i - 1 == className.length
        },
        preventDefault: function(evt) {
            evt.preventDefault ? evt.preventDefault() : evt.returnValue = false
        },
        removeStyle: function(element, name) {
            if (browser.ie) {
                if (name == "color") {
                    name = "(^|;)" + name
                }
                element.style.cssText = element.style.cssText.replace(new RegExp(name + "[^:]*:[^;]+;?", "ig"), "")
            } else {
                if (element.style.removeProperty) {
                    element.style.removeProperty(name)
                } else {
                    element.style.removeAttribute(utils.cssStyleToDomStyle(name))
                }
            }
            if (!element.style.cssText) {
                domUtils.removeAttributes(element, ["style"])
            }
        },
        getStyle: function(element, name) {
            var value = element.style[utils.cssStyleToDomStyle(name)];
            return utils.fixColor(name, value)
        },
        setStyle: function(element, name, value) {
            element.style[utils.cssStyleToDomStyle(name)] = value;
            if (!utils.trim(element.style.cssText)) {
                this.removeAttributes(element, "style")
            }
        },
        setStyles: function(element, styles) {
            for (var name in styles) {
                if (styles.hasOwnProperty(name)) {
                    domUtils.setStyle(element, name, styles[name])
                }
            }
        },
        removeDirtyAttr: function(node) {
            for (var i = 0,
            ci, nodes = node.getElementsByTagName("*"); ci = nodes[i++];) {
                ci.removeAttribute("_moz_dirty")
            }
            node.removeAttribute("_moz_dirty")
        },
        getChildCount: function(node, fn) {
            var count = 0,
            first = node.firstChild;
            fn = fn ||
            function() {
                return 1
            };
            while (first) {
                if (fn(first)) {
                    count++
                }
                first = first.nextSibling
            }
            return count
        },
        isEmptyNode: function(node) {
            return ! node.firstChild || domUtils.getChildCount(node,
            function(node) {
                return ! domUtils.isBr(node) && !domUtils.isBookmarkNode(node) && !domUtils.isWhitespace(node)
            }) == 0
        },
        clearSelectedArr: function(nodes) {
            var node;
            while (node = nodes.pop()) {
                domUtils.removeAttributes(node, ["class"])
            }
        },
        scrollToView: function(node, win, offsetTop) {
            var getViewPaneSize = function() {
                var doc = win.document,
                mode = doc.compatMode == "CSS1Compat";
                return {
                    width: (mode ? doc.documentElement.clientWidth: doc.body.clientWidth) || 0,
                    height: (mode ? doc.documentElement.clientHeight: doc.body.clientHeight) || 0
                }
            },
            getScrollPosition = function(win) {
                if ("pageXOffset" in win) {
                    return {
                        x: win.pageXOffset || 0,
                        y: win.pageYOffset || 0
                    }
                } else {
                    var doc = win.document;
                    return {
                        x: doc.documentElement.scrollLeft || doc.body.scrollLeft || 0,
                        y: doc.documentElement.scrollTop || doc.body.scrollTop || 0
                    }
                }
            };
            var winHeight = getViewPaneSize().height,
            offset = winHeight * -1 + offsetTop;
            offset += node.offsetHeight || 0;
            var elementPosition = domUtils.getXY(node);
            offset += elementPosition.y;
            var currentScroll = getScrollPosition(win).y;
            if (offset > currentScroll || offset < currentScroll - winHeight) {
                win.scrollTo(0, offset + (offset < 0 ? -20 : 20))
            }
        },
        isBr: function(node) {
            return node.nodeType == 1 && node.tagName == "BR"
        },
        isFillChar: function(node, isInStart) {
            if (node.nodeType != 3) return false;
            var text = node.nodeValue;
            if (isInStart) {
                return (new RegExp("^" + domUtils.fillChar)).test(text)
            }
            return ! text.replace(new RegExp(domUtils.fillChar, "g"), "").length
        },
        isStartInblock: function(range) {
            var tmpRange = range.cloneRange(),
            flag = 0,
            start = tmpRange.startContainer,
            tmp;
            if (start.nodeType == 1 && start.childNodes[tmpRange.startOffset]) {
                start = start.childNodes[tmpRange.startOffset];
                var pre = start.previousSibling;
                while (pre && domUtils.isFillChar(pre)) {
                    start = pre;
                    pre = pre.previousSibling
                }
            }
            if (this.isFillChar(start, true) && tmpRange.startOffset == 1) {
                tmpRange.setStartBefore(start);
                start = tmpRange.startContainer
            }
            while (start && domUtils.isFillChar(start)) {
                tmp = start;
                start = start.previousSibling
            }
            if (tmp) {
                tmpRange.setStartBefore(tmp);
                start = tmpRange.startContainer
            }
            if (start.nodeType == 1 && domUtils.isEmptyNode(start) && tmpRange.startOffset == 1) {
                tmpRange.setStart(start, 0).collapse(true)
            }
            while (!tmpRange.startOffset) {
                start = tmpRange.startContainer;
                if (domUtils.isBlockElm(start) || domUtils.isBody(start)) {
                    flag = 1;
                    break
                }
                var pre = tmpRange.startContainer.previousSibling,
                tmpNode;
                if (!pre) {
                    tmpRange.setStartBefore(tmpRange.startContainer)
                } else {
                    while (pre && domUtils.isFillChar(pre)) {
                        tmpNode = pre;
                        pre = pre.previousSibling
                    }
                    if (tmpNode) {
                        tmpRange.setStartBefore(tmpNode)
                    } else {
                        tmpRange.setStartBefore(tmpRange.startContainer)
                    }
                }
            }
            return flag && !domUtils.isBody(tmpRange.startContainer) ? 1 : 0
        },
        isEmptyBlock: function(node, reg) {
            if (node.nodeType != 1) return 0;
            reg = reg || new RegExp("[ \t\r\n" + domUtils.fillChar + "]", "g");
            if (node[browser.ie ? "innerText": "textContent"].replace(reg, "").length > 0) {
                return 0
            }
            for (var n in dtd.$isNotEmpty) {
                if (node.getElementsByTagName(n).length) {
                    return 0
                }
            }
            return 1
        },
        setViewportOffset: function(element, offset) {
            var left = parseInt(element.style.left) | 0;
            var top = parseInt(element.style.top) | 0;
            var rect = element.getBoundingClientRect();
            var offsetLeft = offset.left - rect.left;
            var offsetTop = offset.top - rect.top;
            if (offsetLeft) {
                element.style.left = left + offsetLeft + "px"
            }
            if (offsetTop) {
                element.style.top = top + offsetTop + "px"
            }
        },
        fillNode: function(doc, node) {
            var tmpNode = browser.ie ? doc.createTextNode(domUtils.fillChar) : doc.createElement("br");
            node.innerHTML = "";
            node.appendChild(tmpNode)
        },
        moveChild: function(src, tag, dir) {
            while (src.firstChild) {
                if (dir && tag.firstChild) {
                    tag.insertBefore(src.lastChild, tag.firstChild)
                } else {
                    tag.appendChild(src.firstChild)
                }
            }
        },
        hasNoAttributes: function(node) {
            return browser.ie ? /^<\w+\s*?>/.test(node.outerHTML) : node.attributes.length == 0
        },
        isCustomeNode: function(node) {
            return node.nodeType == 1 && node.getAttribute("_ue_custom_node_")
        },
        isTagNode: function(node, tagNames) {
            return node.nodeType == 1 && (new RegExp("\\b" + node.tagName + "\\b", "i")).test(tagNames)
        },
        filterNodeList: function(nodelist, filter, forAll) {
            var results = [];
            if (!utils.isFunction(filter)) {
                var str = filter;
                filter = function(n) {
                    return utils.indexOf(utils.isArray(str) ? str: str.split(" "), n.tagName.toLowerCase()) != -1
                }
            }
            utils.each(nodelist,
            function(n) {
                filter(n) && results.push(n)
            });
            return results.length == 0 ? null: results.length == 1 || !forAll ? results[0] : results
        },
        isInNodeEndBoundary: function(rng, node) {
            var start = rng.startContainer;
            if (start.nodeType == 3 && rng.startOffset != start.nodeValue.length) {
                return 0
            }
            if (start.nodeType == 1 && rng.startOffset != start.childNodes.length) {
                return 0
            }
            while (start !== node) {
                if (start.nextSibling) {
                    return 0
                }
                start = start.parentNode
            }
            return 1
        },
        isBoundaryNode: function(node, dir) {
            var tmp;
            while (!domUtils.isBody(node)) {
                tmp = node;
                node = node.parentNode;
                if (tmp !== node[dir]) {
                    return false
                }
            }
            return true
        }
    };
    var fillCharReg = new RegExp(domUtils.fillChar, "g"); (function() {
        var guid = 0,
        fillChar = domUtils.fillChar,
        fillData;
        function updateCollapse(range) {
            range.collapsed = range.startContainer && range.endContainer && range.startContainer === range.endContainer && range.startOffset == range.endOffset
        }
        function selectOneNode(rng) {
            return ! rng.collapsed && rng.startContainer.nodeType == 1 && rng.startContainer === rng.endContainer && rng.endOffset - rng.startOffset == 1
        }
        function setEndPoint(toStart, node, offset, range) {
            if (node.nodeType == 1 && (dtd.$empty[node.tagName] || dtd.$nonChild[node.tagName])) {
                offset = domUtils.getNodeIndex(node) + (toStart ? 0 : 1);
                node = node.parentNode
            }
            if (toStart) {
                range.startContainer = node;
                range.startOffset = offset;
                if (!range.endContainer) {
                    range.collapse(true)
                }
            } else {
                range.endContainer = node;
                range.endOffset = offset;
                if (!range.startContainer) {
                    range.collapse(false)
                }
            }
            updateCollapse(range);
            return range
        }
        function execContentsAction(range, action) {
            var start = range.startContainer,
            end = range.endContainer,
            startOffset = range.startOffset,
            endOffset = range.endOffset,
            doc = range.document,
            frag = doc.createDocumentFragment(),
            tmpStart,
            tmpEnd;
            if (start.nodeType == 1) {
                start = start.childNodes[startOffset] || (tmpStart = start.appendChild(doc.createTextNode("")))
            }
            if (end.nodeType == 1) {
                end = end.childNodes[endOffset] || (tmpEnd = end.appendChild(doc.createTextNode("")))
            }
            if (start === end && start.nodeType == 3) {
                frag.appendChild(doc.createTextNode(start.substringData(startOffset, endOffset - startOffset)));
                if (action) {
                    start.deleteData(startOffset, endOffset - startOffset);
                    range.collapse(true)
                }
                return frag
            }
            var current, currentLevel, clone = frag,
            startParents = domUtils.findParents(start, true),
            endParents = domUtils.findParents(end, true);
            for (var i = 0; startParents[i] == endParents[i];) {
                i++
            }
            for (var j = i,
            si; si = startParents[j]; j++) {
                current = si.nextSibling;
                if (si == start) {
                    if (!tmpStart) {
                        if (range.startContainer.nodeType == 3) {
                            clone.appendChild(doc.createTextNode(start.nodeValue.slice(startOffset)));
                            if (action) {
                                start.deleteData(startOffset, start.nodeValue.length - startOffset)
                            }
                        } else {
                            clone.appendChild(!action ? start.cloneNode(true) : start)
                        }
                    }
                } else {
                    currentLevel = si.cloneNode(false);
                    clone.appendChild(currentLevel)
                }
                while (current) {
                    if (current === end || current === endParents[j]) {
                        break
                    }
                    si = current.nextSibling;
                    clone.appendChild(!action ? current.cloneNode(true) : current);
                    current = si
                }
                clone = currentLevel
            }
            clone = frag;
            if (!startParents[i]) {
                clone.appendChild(startParents[i - 1].cloneNode(false));
                clone = clone.firstChild
            }
            for (var j = i,
            ei; ei = endParents[j]; j++) {
                current = ei.previousSibling;
                if (ei == end) {
                    if (!tmpEnd && range.endContainer.nodeType == 3) {
                        clone.appendChild(doc.createTextNode(end.substringData(0, endOffset)));
                        if (action) {
                            end.deleteData(0, endOffset)
                        }
                    }
                } else {
                    currentLevel = ei.cloneNode(false);
                    clone.appendChild(currentLevel)
                }
                if (j != i || !startParents[i]) {
                    while (current) {
                        if (current === start) {
                            break
                        }
                        ei = current.previousSibling;
                        clone.insertBefore(!action ? current.cloneNode(true) : current, clone.firstChild);
                        current = ei
                    }
                }
                clone = currentLevel
            }
            if (action) {
                range.setStartBefore(!endParents[i] ? endParents[i - 1] : !startParents[i] ? startParents[i - 1] : endParents[i]).collapse(true)
            }
            tmpStart && domUtils.remove(tmpStart);
            tmpEnd && domUtils.remove(tmpEnd);
            return frag
        }
        var Range = dom.Range = function(document) {
            var me = this;
            me.startContainer = me.startOffset = me.endContainer = me.endOffset = null;
            me.document = document;
            me.collapsed = true
        };
        function removeFillData(doc, excludeNode) {
            try {
                if (fillData && domUtils.inDoc(fillData, doc)) {
                    if (!fillData.nodeValue.replace(fillCharReg, "").length) {
                        var tmpNode = fillData.parentNode;
                        domUtils.remove(fillData);
                        while (tmpNode && domUtils.isEmptyInlineElement(tmpNode) && (browser.safari ? !(domUtils.getPosition(tmpNode, excludeNode) & domUtils.POSITION_CONTAINS) : !tmpNode.contains(excludeNode))) {
                            fillData = tmpNode.parentNode;
                            domUtils.remove(tmpNode);
                            tmpNode = fillData
                        }
                    } else {
                        fillData.nodeValue = fillData.nodeValue.replace(fillCharReg, "")
                    }
                }
            } catch(e) {}
        }
        function mergeSibling(node, dir) {
            var tmpNode;
            node = node[dir];
            while (node && domUtils.isFillChar(node)) {
                tmpNode = node[dir];
                domUtils.remove(node);
                node = tmpNode
            }
        }
        Range.prototype = {
            cloneContents: function() {
                return this.collapsed ? null: execContentsAction(this, 0)
            },
            deleteContents: function() {
                var txt;
                if (!this.collapsed) {
                    execContentsAction(this, 1)
                }
                if (browser.webkit) {
                    txt = this.startContainer;
                    if (txt.nodeType == 3 && !txt.nodeValue.length) {
                        this.setStartBefore(txt).collapse(true);
                        domUtils.remove(txt)
                    }
                }
                return this
            },
            extractContents: function() {
                return this.collapsed ? null: execContentsAction(this, 2)
            },
            setStart: function(node, offset) {
                return setEndPoint(true, node, offset, this)
            },
            setEnd: function(node, offset) {
                return setEndPoint(false, node, offset, this)
            },
            setStartAfter: function(node) {
                return this.setStart(node.parentNode, domUtils.getNodeIndex(node) + 1)
            },
            setStartBefore: function(node) {
                return this.setStart(node.parentNode, domUtils.getNodeIndex(node))
            },
            setEndAfter: function(node) {
                return this.setEnd(node.parentNode, domUtils.getNodeIndex(node) + 1)
            },
            setEndBefore: function(node) {
                return this.setEnd(node.parentNode, domUtils.getNodeIndex(node))
            },
            setStartAtFirst: function(node) {
                return this.setStart(node, 0)
            },
            setStartAtLast: function(node) {
                return this.setStart(node, node.nodeType == 3 ? node.nodeValue.length: node.childNodes.length)
            },
            setEndAtFirst: function(node) {
                return this.setEnd(node, 0)
            },
            setEndAtLast: function(node) {
                return this.setEnd(node, node.nodeType == 3 ? node.nodeValue.length: node.childNodes.length)
            },
            selectNode: function(node) {
                return this.setStartBefore(node).setEndAfter(node)
            },
            selectNodeContents: function(node) {
                return this.setStart(node, 0).setEndAtLast(node)
            },
            cloneRange: function() {
                var me = this;
                return (new Range(me.document)).setStart(me.startContainer, me.startOffset).setEnd(me.endContainer, me.endOffset)
            },
            collapse: function(toStart) {
                var me = this;
                if (toStart) {
                    me.endContainer = me.startContainer;
                    me.endOffset = me.startOffset
                } else {
                    me.startContainer = me.endContainer;
                    me.startOffset = me.endOffset
                }
                me.collapsed = true;
                return me
            },
            shrinkBoundary: function(ignoreEnd) {
                var me = this,
                child, collapsed = me.collapsed;
                function check(node) {
                    return node.nodeType == 1 && !domUtils.isBookmarkNode(node) && !dtd.$empty[node.tagName] && !dtd.$nonChild[node.tagName]
                }
                while (me.startContainer.nodeType == 1 && (child = me.startContainer.childNodes[me.startOffset]) && check(child)) {
                    me.setStart(child, 0)
                }
                if (collapsed) {
                    return me.collapse(true)
                }
                if (!ignoreEnd) {
                    while (me.endContainer.nodeType == 1 && me.endOffset > 0 && (child = me.endContainer.childNodes[me.endOffset - 1]) && check(child)) {
                        me.setEnd(child, child.childNodes.length)
                    }
                }
                return me
            },
            getCommonAncestor: function(includeSelf, ignoreTextNode) {
                var me = this,
                start = me.startContainer,
                end = me.endContainer;
                if (start === end) {
                    if (includeSelf && selectOneNode(this)) {
                        start = start.childNodes[me.startOffset];
                        if (start.nodeType == 1) return start
                    }
                    return ignoreTextNode && start.nodeType == 3 ? start.parentNode: start
                }
                return domUtils.getCommonAncestor(start, end)
            },
            trimBoundary: function(ignoreEnd) {
                this.txtToElmBoundary();
                var start = this.startContainer,
                offset = this.startOffset,
                collapsed = this.collapsed,
                end = this.endContainer;
                if (start.nodeType == 3) {
                    if (offset == 0) {
                        this.setStartBefore(start)
                    } else {
                        if (offset >= start.nodeValue.length) {
                            this.setStartAfter(start)
                        } else {
                            var textNode = domUtils.split(start, offset);
                            if (start === end) {
                                this.setEnd(textNode, this.endOffset - offset)
                            } else if (start.parentNode === end) {
                                this.endOffset += 1
                            }
                            this.setStartBefore(textNode)
                        }
                    }
                    if (collapsed) {
                        return this.collapse(true)
                    }
                }
                if (!ignoreEnd) {
                    offset = this.endOffset;
                    end = this.endContainer;
                    if (end.nodeType == 3) {
                        if (offset == 0) {
                            this.setEndBefore(end)
                        } else {
                            offset < end.nodeValue.length && domUtils.split(end, offset);
                            this.setEndAfter(end)
                        }
                    }
                }
                return this
            },
            txtToElmBoundary: function(ignoreCollapsed) {
                function adjust(r, c) {
                    var container = r[c + "Container"],
                    offset = r[c + "Offset"];
                    if (container.nodeType == 3) {
                        if (!offset) {
                            r["set" + c.replace(/(\w)/,
                            function(a) {
                                return a.toUpperCase()
                            }) + "Before"](container)
                        } else if (offset >= container.nodeValue.length) {
                            r["set" + c.replace(/(\w)/,
                            function(a) {
                                return a.toUpperCase()
                            }) + "After"](container)
                        }
                    }
                }
                if (ignoreCollapsed || !this.collapsed) {
                    adjust(this, "start");
                    adjust(this, "end")
                }
                return this
            },
            insertNode: function(node) {
                var first = node,
                length = 1;
                if (node.nodeType == 11) {
                    first = node.firstChild;
                    length = node.childNodes.length
                }
                this.trimBoundary(true);
                var start = this.startContainer,
                offset = this.startOffset;
                var nextNode = start.childNodes[offset];
                if (nextNode) {
                    start.insertBefore(node, nextNode)
                } else {
                    start.appendChild(node)
                }
                if (first.parentNode === this.endContainer) {
                    this.endOffset = this.endOffset + length
                }
                return this.setStartBefore(first)
            },
            setCursor: function(toEnd, noFillData) {
                return this.collapse(!toEnd).select(noFillData)
            },
            createBookmark: function(serialize, same) {
                var endNode, startNode = this.document.createElement("span");
                startNode.style.cssText = "display:none;line-height:0px;";
                startNode.appendChild(this.document.createTextNode("‍"));
                startNode.id = "_baidu_bookmark_start_" + (same ? "": guid++);
                if (!this.collapsed) {
                    endNode = startNode.cloneNode(true);
                    endNode.id = "_baidu_bookmark_end_" + (same ? "": guid++)
                }
                this.insertNode(startNode);
                if (endNode) {
                    this.collapse().insertNode(endNode).setEndBefore(endNode)
                }
                this.setStartAfter(startNode);
                return {
                    start: serialize ? startNode.id: startNode,
                    end: endNode ? serialize ? endNode.id: endNode: null,
                    id: serialize
                }
            },
            moveToBookmark: function(bookmark) {
                var start = bookmark.id ? this.document.getElementById(bookmark.start) : bookmark.start,
                end = bookmark.end && bookmark.id ? this.document.getElementById(bookmark.end) : bookmark.end;
                this.setStartBefore(start);
                domUtils.remove(start);
                if (end) {
                    this.setEndBefore(end);
                    domUtils.remove(end)
                } else {
                    this.collapse(true)
                }
                return this
            },
            enlarge: function(toBlock, stopFn) {
                var isBody = domUtils.isBody,
                pre, node, tmp = this.document.createTextNode("");
                if (toBlock) {
                    node = this.startContainer;
                    if (node.nodeType == 1) {
                        if (node.childNodes[this.startOffset]) {
                            pre = node = node.childNodes[this.startOffset]
                        } else {
                            node.appendChild(tmp);
                            pre = node = tmp
                        }
                    } else {
                        pre = node
                    }
                    while (1) {
                        if (domUtils.isBlockElm(node)) {
                            node = pre;
                            while ((pre = node.previousSibling) && !domUtils.isBlockElm(pre)) {
                                node = pre
                            }
                            this.setStartBefore(node);
                            break
                        }
                        pre = node;
                        node = node.parentNode
                    }
                    node = this.endContainer;
                    if (node.nodeType == 1) {
                        if (pre = node.childNodes[this.endOffset]) {
                            node.insertBefore(tmp, pre)
                        } else {
                            node.appendChild(tmp)
                        }
                        pre = node = tmp
                    } else {
                        pre = node
                    }
                    while (1) {
                        if (domUtils.isBlockElm(node)) {
                            node = pre;
                            while ((pre = node.nextSibling) && !domUtils.isBlockElm(pre)) {
                                node = pre
                            }
                            this.setEndAfter(node);
                            break
                        }
                        pre = node;
                        node = node.parentNode
                    }
                    if (tmp.parentNode === this.endContainer) {
                        this.endOffset--
                    }
                    domUtils.remove(tmp)
                }
                if (!this.collapsed) {
                    while (this.startOffset == 0) {
                        if (stopFn && stopFn(this.startContainer)) {
                            break
                        }
                        if (isBody(this.startContainer)) {
                            break
                        }
                        this.setStartBefore(this.startContainer)
                    }
                    while (this.endOffset == (this.endContainer.nodeType == 1 ? this.endContainer.childNodes.length: this.endContainer.nodeValue.length)) {
                        if (stopFn && stopFn(this.endContainer)) {
                            break
                        }
                        if (isBody(this.endContainer)) {
                            break
                        }
                        this.setEndAfter(this.endContainer)
                    }
                }
                return this
            },
            enlargeToBlockElm: function(ignoreEnd) {
                while (!domUtils.isBlockElm(this.startContainer)) {
                    this.setStartBefore(this.startContainer)
                }
                if (!ignoreEnd) {
                    while (!domUtils.isBlockElm(this.endContainer)) {
                        this.setEndAfter(this.endContainer)
                    }
                }
                return this
            },
            adjustmentBoundary: function() {
                if (!this.collapsed) {
                    while (!domUtils.isBody(this.startContainer) && this.startOffset == this.startContainer[this.startContainer.nodeType == 3 ? "nodeValue": "childNodes"].length && this.startContainer[this.startContainer.nodeType == 3 ? "nodeValue": "childNodes"].length) {
                        this.setStartAfter(this.startContainer)
                    }
                    while (!domUtils.isBody(this.endContainer) && !this.endOffset && this.endContainer[this.endContainer.nodeType == 3 ? "nodeValue": "childNodes"].length) {
                        this.setEndBefore(this.endContainer)
                    }
                }
                return this
            },
            applyInlineStyle: function(tagName, attrs, list) {
                if (this.collapsed) return this;
                this.trimBoundary().enlarge(false,
                function(node) {
                    return node.nodeType == 1 && domUtils.isBlockElm(node)
                }).adjustmentBoundary();
                var bookmark = this.createBookmark(),
                end = bookmark.end,
                filterFn = function(node) {
                    return node.nodeType == 1 ? node.tagName.toLowerCase() != "br": !domUtils.isWhitespace(node)
                },
                current = domUtils.getNextDomNode(bookmark.start, false, filterFn),
                node,
                pre,
                range = this.cloneRange();
                while (current && domUtils.getPosition(current, end) & domUtils.POSITION_PRECEDING) {
                    if (current.nodeType == 3 || dtd[tagName][current.tagName]) {
                        range.setStartBefore(current);
                        node = current;
                        while (node && (node.nodeType == 3 || dtd[tagName][node.tagName]) && node !== end) {
                            pre = node;
                            node = domUtils.getNextDomNode(node, node.nodeType == 1, null,
                            function(parent) {
                                return dtd[tagName][parent.tagName]
                            })
                        }
                        var frag = range.setEndAfter(pre).extractContents(),
                        elm;
                        if (list && list.length > 0) {
                            var level, top;
                            top = level = list[0].cloneNode(false);
                            for (var i = 1,
                            ci; ci = list[i++];) {
                                level.appendChild(ci.cloneNode(false));
                                level = level.firstChild
                            }
                            elm = level
                        } else {
                            elm = range.document.createElement(tagName)
                        }
                        if (attrs) {
                            domUtils.setAttributes(elm, attrs)
                        }
                        elm.appendChild(frag);
                        range.insertNode(list ? top: elm);
                        var aNode;
                        if (tagName == "span" && attrs.style && /text\-decoration/.test(attrs.style) && (aNode = domUtils.findParentByTagName(elm, "a", true))) {
                            domUtils.setAttributes(aNode, attrs);
                            domUtils.remove(elm, true);
                            elm = aNode
                        } else {
                            domUtils.mergeSibling(elm);
                            domUtils.clearEmptySibling(elm)
                        }
                        domUtils.mergeChild(elm, attrs);
                        current = domUtils.getNextDomNode(elm, false, filterFn);
                        domUtils.mergeToParent(elm);
                        if (node === end) {
                            break
                        }
                    } else {
                        current = domUtils.getNextDomNode(current, true, filterFn)
                    }
                }
                return this.moveToBookmark(bookmark)
            },
            removeInlineStyle: function(tagNames) {
                if (this.collapsed) return this;
                tagNames = utils.isArray(tagNames) ? tagNames: [tagNames];
                this.shrinkBoundary().adjustmentBoundary();
                var start = this.startContainer,
                end = this.endContainer;
                while (1) {
                    if (start.nodeType == 1) {
                        if (utils.indexOf(tagNames, start.tagName.toLowerCase()) > -1) {
                            break
                        }
                        if (start.tagName.toLowerCase() == "body") {
                            start = null;
                            break
                        }
                    }
                    start = start.parentNode
                }
                while (1) {
                    if (end.nodeType == 1) {
                        if (utils.indexOf(tagNames, end.tagName.toLowerCase()) > -1) {
                            break
                        }
                        if (end.tagName.toLowerCase() == "body") {
                            end = null;
                            break
                        }
                    }
                    end = end.parentNode
                }
                var bookmark = this.createBookmark(),
                frag,
                tmpRange;
                if (start) {
                    tmpRange = this.cloneRange().setEndBefore(bookmark.start).setStartBefore(start);
                    frag = tmpRange.extractContents();
                    tmpRange.insertNode(frag);
                    domUtils.clearEmptySibling(start, true);
                    start.parentNode.insertBefore(bookmark.start, start)
                }
                if (end) {
                    tmpRange = this.cloneRange().setStartAfter(bookmark.end).setEndAfter(end);
                    frag = tmpRange.extractContents();
                    tmpRange.insertNode(frag);
                    domUtils.clearEmptySibling(end, false, true);
                    end.parentNode.insertBefore(bookmark.end, end.nextSibling)
                }
                var current = domUtils.getNextDomNode(bookmark.start, false,
                function(node) {
                    return node.nodeType == 1
                }),
                next;
                while (current && current !== bookmark.end) {
                    next = domUtils.getNextDomNode(current, true,
                    function(node) {
                        return node.nodeType == 1
                    });
                    if (utils.indexOf(tagNames, current.tagName.toLowerCase()) > -1) {
                        domUtils.remove(current, true)
                    }
                    current = next
                }
                return this.moveToBookmark(bookmark)
            },
            getClosedNode: function() {
                var node;
                if (!this.collapsed) {
                    var range = this.cloneRange().adjustmentBoundary().shrinkBoundary();
                    if (selectOneNode(range)) {
                        var child = range.startContainer.childNodes[range.startOffset];
                        if (child && child.nodeType == 1 && (dtd.$empty[child.tagName] || dtd.$nonChild[child.tagName])) {
                            node = child
                        }
                    }
                }
                return node
            },
            select: browser.ie ?
            function(noFillData, textRange) {
                var nativeRange;
                if (!this.collapsed) this.shrinkBoundary();
                var node = this.getClosedNode();
                if (node && !textRange) {
                    try {
                        nativeRange = this.document.body.createControlRange();
                        nativeRange.addElement(node);
                        nativeRange.select()
                    } catch(e) {}
                    return this
                }
                var bookmark = this.createBookmark(),
                start = bookmark.start,
                end;
                nativeRange = this.document.body.createTextRange();
                nativeRange.moveToElementText(start);
                nativeRange.moveStart("character", 1);
                if (!this.collapsed) {
                    var nativeRangeEnd = this.document.body.createTextRange();
                    end = bookmark.end;
                    nativeRangeEnd.moveToElementText(end);
                    nativeRange.setEndPoint("EndToEnd", nativeRangeEnd)
                } else {
                    if (!noFillData && this.startContainer.nodeType != 3) {
                        var tmpText = this.document.createTextNode(fillChar),
                        tmp = this.document.createElement("span");
                        tmp.appendChild(this.document.createTextNode(fillChar));
                        start.parentNode.insertBefore(tmp, start);
                        start.parentNode.insertBefore(tmpText, start);
                        removeFillData(this.document, tmpText);
                        fillData = tmpText;
                        mergeSibling(tmp, "previousSibling");
                        mergeSibling(start, "nextSibling");
                        nativeRange.moveStart("character", -1);
                        nativeRange.collapse(true)
                    }
                }
                this.moveToBookmark(bookmark);
                tmp && domUtils.remove(tmp);
                try {
                    nativeRange.select()
                } catch(e) {}
                return this
            }: function(notInsertFillData) {
                function checkOffset(rng) {
                    function check(node, offset, dir) {
                        if (node.nodeType == 3 && node.nodeValue.length < offset) {
                            rng[dir + "Offset"] = node.nodeValue.length
                        }
                    }
                    check(rng.startContainer, rng.startOffset, "start");
                    check(rng.endContainer, rng.endOffset, "end")
                }
                var win = domUtils.getWindow(this.document),
                sel = win.getSelection(),
                txtNode;
                browser.gecko ? this.document.body.focus() : win.focus();
                if (sel) {
                    sel.removeAllRanges();
                    if (this.collapsed && !notInsertFillData) {
                        var start = this.startContainer,
                        child = start;
                        if (start.nodeType == 1) {
                            child = start.childNodes[this.startOffset]
                        }
                        if (! (start.nodeType == 3 && this.startOffset) && (child ? !child.previousSibling || child.previousSibling.nodeType != 3 : !start.lastChild || start.lastChild.nodeType != 3)) {
                            txtNode = this.document.createTextNode(fillChar);
                            this.insertNode(txtNode);
                            removeFillData(this.document, txtNode);
                            mergeSibling(txtNode, "previousSibling");
                            mergeSibling(txtNode, "nextSibling");
                            fillData = txtNode;
                            this.setStart(txtNode, browser.webkit ? 1 : 0).collapse(true)
                        }
                    }
                    var nativeRange = this.document.createRange();
                    if (this.collapsed && browser.opera && this.startContainer.nodeType == 1) {
                        var child = this.startContainer.childNodes[this.startOffset];
                        if (!child) {
                            child = this.startContainer.lastChild;
                            if (child && domUtils.isBr(child)) {
                                this.setStartBefore(child).collapse(true)
                            }
                        } else {
                            while (child && domUtils.isBlockElm(child)) {
                                if (child.nodeType == 1 && child.childNodes[0]) {
                                    child = child.childNodes[0]
                                } else {
                                    break
                                }
                            }
                            child && this.setStartBefore(child).collapse(true)
                        }
                    }
                    checkOffset(this);
                    nativeRange.setStart(this.startContainer, this.startOffset);
                    nativeRange.setEnd(this.endContainer, this.endOffset);
                    sel.addRange(nativeRange)
                }
                return this
            },
            scrollToView: function(win, offset) {
                win = win ? window: domUtils.getWindow(this.document);
                var me = this,
                span = me.document.createElement("span");
                span.innerHTML = "&nbsp;";
                me.cloneRange().insertNode(span);
                domUtils.scrollToView(span, win, offset);
                domUtils.remove(span);
                return me
            },
            inFillChar: function() {
                var start = this.startContainer;
                if (this.collapsed && start.nodeType == 3 && start.nodeValue.replace(new RegExp("^" + domUtils.fillChar), "").length + 1 == start.nodeValue.length) {
                    return true
                }
                return false
            },
            createAddress: function(ignoreEnd, ignoreTxt) {
                var addr = {},
                me = this;
                function getAddress(isStart) {
                    var node = isStart ? me.startContainer: me.endContainer;
                    var parents = domUtils.findParents(node, true,
                    function(node) {
                        return ! domUtils.isBody(node)
                    }),
                    addrs = [];
                    for (var i = 0,
                    ci; ci = parents[i++];) {
                        addrs.push(domUtils.getNodeIndex(ci, ignoreTxt))
                    }
                    var firstIndex = 0;
                    if (ignoreTxt) {
                        if (node.nodeType == 3) {
                            var tmpNode = node.previousSibling;
                            while (tmpNode && tmpNode.nodeType == 3) {
                                firstIndex += tmpNode.nodeValue.replace(fillCharReg, "").length;
                                tmpNode = tmpNode.previousSibling
                            }
                            firstIndex += isStart ? me.startOffset: me.endOffset
                        } else {
                            node = node.childNodes[isStart ? me.startOffset: me.endOffset];
                            if (node) {
                                firstIndex = domUtils.getNodeIndex(node, ignoreTxt)
                            } else {
                                node = isStart ? me.startContainer: me.endContainer;
                                var first = node.firstChild;
                                while (first) {
                                    if (domUtils.isFillChar(first)) {
                                        first = first.nextSibling;
                                        continue
                                    }
                                    firstIndex++;
                                    if (first.nodeType == 3) {
                                        while (first && first.nodeType == 3) {
                                            first = first.nextSibling
                                        }
                                    } else {
                                        first = first.nextSibling
                                    }
                                }
                            }
                        }
                    } else {
                        firstIndex = isStart ? domUtils.isFillChar(node) ? 0 : me.startOffset: me.endOffset
                    }
                    if (firstIndex < 0) {
                        firstIndex = 0
                    }
                    addrs.push(firstIndex);
                    return addrs
                }
                addr.startAddress = getAddress(true);
                if (!ignoreEnd) {
                    addr.endAddress = me.collapsed ? [].concat(addr.startAddress) : getAddress()
                }
                return addr
            },
            moveToAddress: function(addr, ignoreEnd) {
                var me = this;
                function getNode(address, isStart) {
                    var tmpNode = me.document.body,
                    parentNode, offset;
                    for (var i = 0,
                    ci, l = address.length; i < l; i++) {
                        ci = address[i];
                        parentNode = tmpNode;
                        tmpNode = tmpNode.childNodes[ci];
                        if (!tmpNode) {
                            offset = ci;
                            break
                        }
                    }
                    if (isStart) {
                        if (tmpNode) {
                            me.setStartBefore(tmpNode)
                        } else {
                            me.setStart(parentNode, offset)
                        }
                    } else {
                        if (tmpNode) {
                            me.setEndBefore(tmpNode)
                        } else {
                            me.setEnd(parentNode, offset)
                        }
                    }
                }
                getNode(addr.startAddress, true); ! ignoreEnd && addr.endAddress && getNode(addr.endAddress);
                return me
            },
            equals: function(rng) {
                for (var p in this) {
                    if (this.hasOwnProperty(p)) {
                        if (this[p] !== rng[p]) return false
                    }
                }
                return true
            },
            traversal: function(doFn, filterFn) {
                if (this.collapsed) return this;
                var bookmark = this.createBookmark(),
                end = bookmark.end,
                current = domUtils.getNextDomNode(bookmark.start, false, filterFn);
                while (current && current !== end && domUtils.getPosition(current, end) & domUtils.POSITION_PRECEDING) {
                    var tmpNode = domUtils.getNextDomNode(current, false, filterFn);
                    doFn(current);
                    current = tmpNode
                }
                return this.moveToBookmark(bookmark)
            }
        }
    })(); (function() {
        function getBoundaryInformation(range, start) {
            var getIndex = domUtils.getNodeIndex;
            range = range.duplicate();
            range.collapse(start);
            var parent = range.parentElement();
            if (!parent.hasChildNodes()) {
                return {
                    container: parent,
                    offset: 0
                }
            }
            var siblings = parent.children,
            child, testRange = range.duplicate(),
            startIndex = 0,
            endIndex = siblings.length - 1,
            index = -1,
            distance;
            while (startIndex <= endIndex) {
                index = Math.floor((startIndex + endIndex) / 2);
                child = siblings[index];
                testRange.moveToElementText(child);
                var position = testRange.compareEndPoints("StartToStart", range);
                if (position > 0) {
                    endIndex = index - 1
                } else if (position < 0) {
                    startIndex = index + 1
                } else {
                    return {
                        container: parent,
                        offset: getIndex(child)
                    }
                }
            }
            if (index == -1) {
                testRange.moveToElementText(parent);
                testRange.setEndPoint("StartToStart", range);
                distance = testRange.text.replace(/(\r\n|\r)/g, "\n").length;
                siblings = parent.childNodes;
                if (!distance) {
                    child = siblings[siblings.length - 1];
                    return {
                        container: child,
                        offset: child.nodeValue.length
                    }
                }
                var i = siblings.length;
                while (distance > 0) {
                    distance -= siblings[--i].nodeValue.length
                }
                return {
                    container: siblings[i],
                    offset: -distance
                }
            }
            testRange.collapse(position > 0);
            testRange.setEndPoint(position > 0 ? "StartToStart": "EndToStart", range);
            distance = testRange.text.replace(/(\r\n|\r)/g, "\n").length;
            if (!distance) {
                return dtd.$empty[child.tagName] || dtd.$nonChild[child.tagName] ? {
                    container: parent,
                    offset: getIndex(child) + (position > 0 ? 0 : 1)
                }: {
                    container: child,
                    offset: position > 0 ? 0 : child.childNodes.length
                }
            }
            while (distance > 0) {
                try {
                    var pre = child;
                    child = child[position > 0 ? "previousSibling": "nextSibling"];
                    distance -= child.nodeValue.length
                } catch(e) {
                    return {
                        container: parent,
                        offset: getIndex(pre)
                    }
                }
            }
            return {
                container: child,
                offset: position > 0 ? -distance: child.nodeValue.length + distance
            }
        }
        function transformIERangeToRange(ieRange, range) {
            if (ieRange.item) {
                range.selectNode(ieRange.item(0))
            } else {
                var bi = getBoundaryInformation(ieRange, true);
                range.setStart(bi.container, bi.offset);
                if (ieRange.compareEndPoints("StartToEnd", ieRange) != 0) {
                    bi = getBoundaryInformation(ieRange, false);
                    range.setEnd(bi.container, bi.offset)
                }
            }
            return range
        }
        function bDF(sel) {
            var ieRange;
            try {
                ieRange = sel.getNative().createRange()
            } catch(e) {
                return null
            }
            var el = ieRange.item ? ieRange.item(0) : ieRange.parentElement();
            if ((el.ownerDocument || el) === sel.document) {
                return ieRange
            }
            return null
        }
        var Selection = dom.Selection = function(doc) {
            var me = this,
            iframe;
            me.document = doc;
            if (browser.ie9below) {
                iframe = domUtils.getWindow(doc).frameElement;
                domUtils.on(iframe, "beforedeactivate",
                function() {
                    me.ZE = me.getIERange()
                });
                domUtils.on(iframe, "activate",
                function() {
                    try {
                        if (!bDF(me) && me.ZE) {
                            me.ZE.select()
                        }
                    } catch(ex) {}
                    me.ZE = null
                })
            }
            iframe = doc = null
        };
        Selection.prototype = {
            rangeInBody: function(rng, txtRange) {
                var node = browser.ie9below || txtRange ? rng.item ? rng.item() : rng.parentElement() : rng.startContainer;
                return node === this.document.body || domUtils.inDoc(node, this.document)
            },
            getNative: function() {
                var doc = this.document;
                try {
                    return ! doc ? null: browser.ie9below ? doc.selection: domUtils.getWindow(doc).getSelection()
                } catch(e) {
                    return null
                }
            },
            getIERange: function() {
                var ieRange = bDF(this);
                if (!ieRange) {
                    if (this.ZE) {
                        return this.ZE
                    }
                }
                return ieRange
            },
            cache: function() {
                this.clear();
                this.bvq = this.getRange();
                this.bvp = this.getStart();
                this.bDL = this.getStartElementPath()
            },
            getStartElementPath: function() {
                if (this.bDL) {
                    return this.bDL
                }
                var start = this.getStart();
                if (start) {
                    return domUtils.findParents(start, true, null, true)
                }
                return []
            },
            clear: function() {
                this.bDL = this.bvq = this.bvp = null
            },
            isFocus: function() {
                try {
                    if (browser.ie9below) {
                        var nativeRange = bDF(this);
                        return !! (nativeRange && this.rangeInBody(nativeRange))
                    } else {
                        return !! this.getNative().rangeCount
                    }
                } catch(e) {
                    return false
                }
            },
            getRange: function() {
                var me = this;
                function optimze(range) {
                    var child = me.document.body.firstChild,
                    collapsed = range.collapsed;
                    while (child && child.firstChild) {
                        range.setStart(child, 0);
                        child = child.firstChild
                    }
                    if (!range.startContainer) {
                        range.setStart(me.document.body, 0)
                    }
                    if (collapsed) {
                        range.collapse(true)
                    }
                }
                if (me.bvq != null) {
                    return this.bvq
                }
                var range = new baidu.editor.dom.Range(me.document);
                if (browser.ie9below) {
                    var nativeRange = me.getIERange();
                    if (nativeRange) {
                        try {
                            transformIERangeToRange(nativeRange, range)
                        } catch(e) {
                            optimze(range)
                        }
                    } else {
                        optimze(range)
                    }
                } else {
                    var sel = me.getNative();
                    if (sel && sel.rangeCount) {
                        var firstRange = sel.getRangeAt(0);
                        var lastRange = sel.getRangeAt(sel.rangeCount - 1);
                        range.setStart(firstRange.startContainer, firstRange.startOffset).setEnd(lastRange.endContainer, lastRange.endOffset);
                        if (range.collapsed && domUtils.isBody(range.startContainer) && !range.startOffset) {
                            optimze(range)
                        }
                    } else {
                        if (this.TR && domUtils.inDoc(this.TR.startContainer, this.document)) {
                            return this.TR
                        }
                        optimze(range)
                    }
                }
                return this.TR = range
            },
            getStart: function() {
                if (this.bvp) {
                    return this.bvp
                }
                var range = browser.ie9below ? this.getIERange() : this.getRange(),
                tmpRange,
                start,
                tmp,
                parent;
                if (browser.ie9below) {
                    if (!range) {
                        return this.document.body.firstChild
                    }
                    if (range.item) {
                        return range.item(0)
                    }
                    tmpRange = range.duplicate();
                    tmpRange.text.length > 0 && tmpRange.moveStart("character", 1);
                    tmpRange.collapse(1);
                    start = tmpRange.parentElement();
                    parent = tmp = range.parentElement();
                    while (tmp = tmp.parentNode) {
                        if (tmp == start) {
                            start = parent;
                            break
                        }
                    }
                } else {
                    range.shrinkBoundary();
                    start = range.startContainer;
                    if (start.nodeType == 1 && start.hasChildNodes()) {
                        start = start.childNodes[Math.min(start.childNodes.length - 1, range.startOffset)]
                    }
                    if (start.nodeType == 3) {
                        return start.parentNode
                    }
                }
                return start
            },
            getText: function() {
                var nativeSel, nativeRange;
                if (this.isFocus() && (nativeSel = this.getNative())) {
                    nativeRange = browser.ie9below ? nativeSel.createRange() : nativeSel.getRangeAt(0);
                    return browser.ie9below ? nativeRange.text: nativeRange.toString()
                }
                return ""
            },
            clearRange: function() {
                this.getNative()[browser.ie9below ? "empty": "removeAllRanges"]()
            }
        }
    })(); (function() {
        var uid = 0,
        chW;
        function setValue(form, editor) {
            var textarea;
            if (editor.textarea) {
                if (utils.isString(editor.textarea)) {
                    for (var i = 0,
                    ti, tis = domUtils.getElementsByTagName(form, "textarea"); ti = tis[i++];) {
                        if (ti.id == "ueditor_textarea_" + editor.options.textarea) {
                            textarea = ti;
                            break
                        }
                    }
                } else {
                    textarea = editor.textarea
                }
            }
            if (!textarea) {
                form.appendChild(textarea = domUtils.createElement(document, "textarea", {
                    name: editor.options.textarea,
                    id: "ueditor_textarea_" + editor.options.textarea,
                    style: "display:none"
                }));
                editor.textarea = textarea
            }
            textarea.value = editor.hasContents() ? editor.options.allHtmlEnabled ? editor.getAllHtml() : editor.getContent(null, null, true) : ""
        }
        function loadPlugins(me) {
            for (var pi in UE.plugins) {
                UE.plugins[pi].call(me)
            }
        }
        function checkCurLang(I18N) {
            for (var lang in I18N) {
                return lang
            }
        }
        function langReadied(me) {
            me.langIsReady = true;
            me.fireEvent("langReady")
        }
        var Editor = UE.Editor = function(options) {
            var me = this;
            me.uid = uid++;
            EventBase.call(me);
            me.commands = {};
            me.options = utils.extend(utils.clone(options || {}), UEDITOR_CONFIG, true);
            me.shortcutkeys = {};
            me.inputRules = [];
            me.outputRules = [];
            me.setOpt({
                isShow: true,
                initialContent: "",
                initialStyle: "",
                autoClearinitialContent: false,
                iframeCssUrl: me.options.UEDITOR_HOME_URL + "themes/iframe.css",
                textarea: "editorValue",
                focus: false,
                focusInEnd: true,
                autoClearEmptyNode: true,
                fullscreen: false,
                readonly: false,
                zIndex: 999,
                imagePopup: true,
                enterTag: "p",
                customDomain: false,
                lang: "zh-cn",
                langPath: me.options.UEDITOR_HOME_URL + "lang/",
                theme: "default",
                themePath: me.options.UEDITOR_HOME_URL + "themes/",
                allHtmlEnabled: false,
                scaleEnabled: false,
                tableNativeEditInFF: false,
                autoSyncData: true,
                fileNameFormat: "{time}{rand:6}"
            });
            if (!utils.isEmptyObject(UE.I18N)) {
                me.options.lang = checkCurLang(UE.I18N);
                UE.plugin.load(me);
                langReadied(me)
            } else {
                utils.loadFile(document, {
                    src: me.options.langPath + me.options.lang + "/" + me.options.lang + ".js",
                    tag: "script",
                    type: "text/javascript",
                    defer: "defer"
                },
                function() {
                    UE.plugin.load(me);
                    langReadied(me)
                })
            }
            UE.instants["ueditorInstant" + me.uid] = me
        };
        Editor.prototype = {
            ready: function(fn) {
                var me = this;
                if (fn) {
                    me.isReady ? fn.apply(me) : me.addListener("ready", fn)
                }
            },
            setOpt: function(key, val) {
                var obj = {};
                if (utils.isString(key)) {
                    obj[key] = val
                } else {
                    obj = key
                }
                utils.extend(this.options, obj, true)
            },
            destroy: function() {
                var me = this;
                me.fireEvent("destroy");
                var container = me.container.parentNode;
                var textarea = me.textarea;
                if (!textarea) {
                    textarea = document.createElement("textarea");
                    container.parentNode.insertBefore(textarea, container)
                } else {
                    textarea.style.display = ""
                }
                textarea.style.width = me.iframe.offsetWidth + "px";
                textarea.style.height = me.iframe.offsetHeight + "px";
                textarea.value = me.getContent();
                textarea.id = me.key;
                container.innerHTML = "";
                domUtils.remove(container);
                for (var p in me) {
                    if (me.hasOwnProperty(p)) {
                        delete this[p]
                    }
                }
            },
            render: function(container) {
                var me = this,
                options = me.options,
                getStyleValue = function(attr) {
                    return parseInt(domUtils.getComputedStyle(container, attr))
                };
                if (utils.isString(container)) {
                    container = document.getElementById(container)
                }
                if (container) {
                    if (options.initialFrameWidth) {
                        options.minFrameWidth = options.initialFrameWidth
                    } else {
                        options.minFrameWidth = options.initialFrameWidth = container.offsetWidth
                    }
                    if (options.initialFrameHeight) {
                        options.minFrameHeight = options.initialFrameHeight
                    } else {
                        options.initialFrameHeight = options.minFrameHeight = container.offsetHeight
                    }
                    container.style.width = /%$/.test(options.initialFrameWidth) ? "100%": options.initialFrameWidth - getStyleValue("padding-left") - getStyleValue("padding-right") + "px";
                    container.style.height = /%$/.test(options.initialFrameHeight) ? "100%": options.initialFrameHeight - getStyleValue("padding-top") - getStyleValue("padding-bottom") + "px";
                    container.style.zIndex = options.zIndex;
                    var html = (ie && browser.version < 9 ? "": "<!DOCTYPE html>") + "<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head>" + "<style type='text/css'>" + ".view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\n" + "body{margin:8px;font-family:sans-serif;font-size:16px;}" + "p{margin:5px 0;}</style>" + (options.iframeCssUrl ? "<link rel='stylesheet' type='text/css' href='" + utils.unhtml(options.iframeCssUrl) + "'/>": "") + (options.initialStyle ? "<style>" + options.initialStyle + "</style>": "") + "</head><body class='view' ></body>" + "<script type='text/javascript' " + (ie ? "defer='defer'": "") + " id='_initialScript'>" + "setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant" + me.uid + "'];editor.setup(document);},0);" + "var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);</script></html>";
                    container.appendChild(domUtils.createElement(document, "iframe", {
                        id: "ueditor_" + me.uid,
                        width: "100%",
                        height: "100%",
                        frameborder: "0",
                        src: "javascript:void(function(){document.open();" + (options.customDomain && document.domain != location.hostname ? 'document.domain="' + document.domain + '";': "") + 'document.write("' + html + '");document.close();}())'
                    }));
                    container.style.overflow = "hidden";
                    setTimeout(function() {
                        if (/%$/.test(options.initialFrameWidth)) {
                            options.minFrameWidth = options.initialFrameWidth = container.offsetWidth
                        }
                        if (/%$/.test(options.initialFrameHeight)) {
                            options.minFrameHeight = options.initialFrameHeight = container.offsetHeight;
                            container.style.height = options.initialFrameHeight + "px"
                        }
                    })
                }
            },
            setup: function(doc) {
                var me = this,
                options = me.options;
                if (ie) {
                    doc.body.disabled = true;
                    doc.body.contentEditable = true;
                    doc.body.disabled = false
                } else {
                    doc.body.contentEditable = true
                }
                doc.body.spellcheck = false;
                me.document = doc;
                me.window = doc.defaultView || doc.parentWindow;
                me.iframe = me.window.frameElement;
                me.body = doc.body;
                me.selection = new dom.Selection(doc);
                var geckoSel;
                if (browser.gecko && (geckoSel = this.selection.getNative())) {
                    geckoSel.removeAllRanges()
                }
                this.cPC();
                for (var form = this.iframe.parentNode; ! domUtils.isBody(form); form = form.parentNode) {
                    if (form.tagName == "FORM") {
                        me.form = form;
                        if (me.options.autoSyncData) {
                            domUtils.on(me.window, "blur",
                            function() {
                                setValue(form, me)
                            })
                        } else {
                            domUtils.on(form, "submit",
                            function() {
                                setValue(this, me)
                            })
                        }
                        break
                    }
                }
                if (options.initialContent) {
                    if (options.autoClearinitialContent) {
                        var oldExecCommand = me.execCommand;
                        me.execCommand = function() {
                            me.fireEvent("firstBeforeExecCommand");
                            return oldExecCommand.apply(me, arguments)
                        };
                        this.cPA(options.initialContent)
                    } else this.setContent(options.initialContent, false, true)
                }
                if (domUtils.isEmptyNode(me.body)) {
                    me.body.innerHTML = "<p>" + (browser.ie ? "": "<br/>") + "</p>"
                }
                if (options.focus) {
                    setTimeout(function() {
                        me.focus(me.options.focusInEnd); ! me.options.autoClearinitialContent && me.Zs()
                    },
                    0)
                }
                if (!me.container) {
                    me.container = this.iframe.parentNode
                }
                if (options.fullscreen && me.ui) {
                    me.ui.setFullScreen(true)
                }
                try {
                    me.document.execCommand("2D-position", false, false)
                } catch(e) {}
                try {
                    me.document.execCommand("enableInlineTableEditing", false, false)
                } catch(e) {}
                try {
                    me.document.execCommand("enableObjectResizing", false, false)
                } catch(e) {}
                me.cPD();
                me.isReady = 1;
                me.fireEvent("ready");
                options.onready && options.onready.call(me);
                if (!browser.ie9below) {
                    domUtils.on(me.window, ["blur", "focus"],
                    function(e) {
                        if (e.type == "blur") {
                            me.TR = me.selection.getRange();
                            try {
                                me.chV = me.selection.getNative().getRangeAt(0);
                                me.selection.getNative().removeAllRanges()
                            } catch(e) {
                                me.chV = null
                            }
                        } else {
                            try {
                                me.TR && me.TR.select()
                            } catch(e) {}
                        }
                    })
                }
                if (browser.gecko && browser.version <= 10902) {
                    me.body.contentEditable = false;
                    setTimeout(function() {
                        me.body.contentEditable = true
                    },
                    100);
                    setInterval(function() {
                        me.body.style.height = me.iframe.offsetHeight - 20 + "px"
                    },
                    100)
                } ! options.isShow && me.setHide();
                options.readonly && me.setDisabled()
            },
            sync: function(formId) {
                var me = this,
                form = formId ? document.getElementById(formId) : domUtils.findParent(me.iframe.parentNode,
                function(node) {
                    return node.tagName == "FORM"
                },
                true);
                form && setValue(form, me)
            },
            setHeight: function(height, notSetHeight) {
                if (height !== parseInt(this.iframe.parentNode.style.height)) {
                    this.iframe.parentNode.style.height = height + "px"
                } ! notSetHeight && (this.options.minFrameHeight = this.options.initialFrameHeight = height);
                this.body.style.height = height + "px"
            },
            addshortcutkey: function(cmd, keys) {
                var obj = {};
                if (keys) {
                    obj[cmd] = keys
                } else {
                    obj = cmd
                }
                utils.extend(this.shortcutkeys, obj)
            },
            cPD: function() {
                var me = this,
                shortcutkeys = this.shortcutkeys;
                me.addListener("keydown",
                function(type, e) {
                    var keyCode = e.keyCode || e.which;
                    for (var i in shortcutkeys) {
                        var tmp = shortcutkeys[i].split(",");
                        for (var t = 0,
                        ti; ti = tmp[t++];) {
                            ti = ti.split(":");
                            var key = ti[0],
                            param = ti[1];
                            if (/^(ctrl)(\+shift)?\+(\d+)$/.test(key.toLowerCase()) || /^(\d+)$/.test(key)) {
                                if ((RegExp.$1 == "ctrl" ? e.ctrlKey || e.metaKey: 0) && (RegExp.$2 != "" ? e[RegExp.$2.slice(1) + "Key"] : 1) && keyCode == RegExp.$3 || keyCode == RegExp.$1) {
                                    if (me.queryCommandState(i, param) != -1) me.execCommand(i, param);
                                    domUtils.preventDefault(e)
                                }
                            }
                        }
                    }
                })
            },
            getContent: function(cmd, fn, notSetCursor, ignoreBlank, formatter) {
                var me = this;
                if (cmd && utils.isFunction(cmd)) {
                    fn = cmd;
                    cmd = ""
                }
                if (fn ? !fn() : !this.hasContents()) {
                    return ""
                }
                me.fireEvent("beforegetcontent");
                var root = UE.htmlparser(me.body.innerHTML, ignoreBlank);
                me.filterOutputRule(root);
                me.fireEvent("aftergetcontent", cmd, root);
                return root.toHtml(formatter)
            },
            getAllHtml: function() {
                var me = this,
                headHtml = [],
                html = "";
                me.fireEvent("getAllHtml", headHtml);
                if (browser.ie && browser.version > 8) {
                    var headHtmlForIE9 = "";
                    utils.each(me.document.styleSheets,
                    function(si) {
                        headHtmlForIE9 += si.href ? '<link rel="stylesheet" type="text/css" href="' + si.href + '" />': "<style>" + si.cssText + "</style>"
                    });
                    utils.each(me.document.getElementsByTagName("script"),
                    function(si) {
                        headHtmlForIE9 += si.outerHTML
                    })
                }
                return "<html><head>" + (me.options.charset ? '<meta http-equiv="Content-Type" content="text/html; charset=' + me.options.charset + '"/>': "") + (headHtmlForIE9 || me.document.getElementsByTagName("head")[0].innerHTML) + headHtml.join("\n") + "</head>" + "<body " + (ie && browser.version < 9 ? 'class="view"': "") + ">" + me.getContent(null, null, true) + "</body></html>"
            },
            getPlainTxt: function() {
                var reg = new RegExp(domUtils.fillChar, "g"),
                html = this.body.innerHTML.replace(/[\n\r]/g, "");
                //html = html.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi, "\n").replace(/<br\/?>/gi, "\n").replace(/<[^>/] + >/g,"").replace(/ (\n) ? <\ / ([ ^ >] + ) > /g,function(a,b,c){return dtd.$block[c]?"\n":b?b:""});return html.replace(reg,"").replace(/\u00a0 / g," ").replace(/&nbsp;/g, " ")
            },
            getContentTxt: function() {
                var reg = new RegExp(domUtils.fillChar, "g");
                return this.body[browser.ie ? "innerText": "textContent"].replace(reg, "").replace(/\u00a0/g, " ")
            },
            setContent: function(html, isAppendTo, notFireSelectionchange) {
                var me = this;
                me.fireEvent("beforesetcontent", html);
                var root = UE.htmlparser(html);
                me.filterInputRule(root);
                html = root.toHtml();
                me.body.innerHTML = (isAppendTo ? me.body.innerHTML: "") + html;
                function isCdataDiv(node) {
                    return node.tagName == "DIV" && node.getAttribute("cdata_tag")
                }
                if (me.options.enterTag == "p") {
                    var child = this.body.firstChild,
                    tmpNode;
                    if (!child || child.nodeType == 1 && (dtd.$cdata[child.tagName] || isCdataDiv(child) || domUtils.isCustomeNode(child)) && child === this.body.lastChild) {
                        this.body.innerHTML = "<p>" + (browser.ie ? "&nbsp;": "<br/>") + "</p>" + this.body.innerHTML
                    } else {
                        var p = me.document.createElement("p");
                        while (child) {
                            while (child && (child.nodeType == 3 || child.nodeType == 1 && dtd.p[child.tagName] && !dtd.$cdata[child.tagName])) {
                                tmpNode = child.nextSibling;
                                p.appendChild(child);
                                child = tmpNode
                            }
                            if (p.firstChild) {
                                if (!child) {
                                    me.body.appendChild(p);
                                    break
                                } else {
                                    child.parentNode.insertBefore(p, child);
                                    p = me.document.createElement("p")
                                }
                            }
                            child = child.nextSibling
                        }
                    }
                }
                me.fireEvent("aftersetcontent");
                me.fireEvent("contentchange"); ! notFireSelectionchange && me.Zs();
                me.TR = me.ZE = me.chV = null;
                var geckoSel;
                if (browser.gecko && (geckoSel = this.selection.getNative())) {
                    geckoSel.removeAllRanges()
                }
                if (me.options.autoSyncData) {
                    me.form && setValue(me.form, me)
                }
            },
            focus: function(toEnd) {
                try {
                    var me = this,
                    rng = me.selection.getRange();
                    if (toEnd) {
                        var node = me.body.lastChild;
                        if (node && node.nodeType == 1 && !dtd.$empty[node.tagName]) {
                            if (domUtils.isEmptyBlock(node)) {
                                rng.setStartAtFirst(node)
                            } else {
                                rng.setStartAtLast(node)
                            }
                            rng.collapse(true)
                        }
                        rng.setCursor(true)
                    } else {
                        if (!rng.collapsed && domUtils.isBody(rng.startContainer) && rng.startOffset == 0) {
                            var node = me.body.firstChild;
                            if (node && node.nodeType == 1 && !dtd.$empty[node.tagName]) {
                                rng.setStartAtFirst(node).collapse(true)
                            }
                        }
                        rng.select(true)
                    }
                    this.fireEvent("focus selectionchange")
                } catch(e) {}
            },
            isFocus: function() {
                return this.selection.isFocus()
            },
            blur: function() {
                var sel = this.selection.getNative();
                if (sel.empty && browser.ie) {
                    var nativeRng = document.body.createTextRange();
                    nativeRng.moveToElementText(document.body);
                    nativeRng.collapse(true);
                    nativeRng.select();
                    sel.empty()
                } else {
                    sel.removeAllRanges()
                }
            },
            cPC: function() {
                var me = this,
                doc = me.document,
                win = me.window;
                me.bvo = utils.bind(me.bvo, me);
                domUtils.on(doc, ["click", "contextmenu", "mousedown", "keydown", "keyup", "keypress", "mouseup", "mouseover", "mouseout", "selectstart"], me.bvo);
                domUtils.on(win, ["focus", "blur"], me.bvo);
                domUtils.on(me.body, "drop",
                function(e) {
                    if (browser.gecko && e.stopPropagation) {
                        e.stopPropagation()
                    }
                    me.fireEvent("contentchange")
                });
                domUtils.on(doc, ["mouseup", "keydown"],
                function(evt) {
                    if (evt.type == "keydown" && (evt.ctrlKey || evt.metaKey || evt.shiftKey || evt.altKey)) {
                        return
                    }
                    if (evt.button == 2) return;
                    me.Zs(250, evt)
                })
            },
            bvo: function(evt) {
                if (this.fireEvent("before" + evt.type.replace(/^on/, "").toLowerCase()) === false) {
                    return false
                }
                if (this.fireEvent(evt.type.replace(/^on/, ""), evt) === false) {
                    return false
                }
                return this.fireEvent("after" + evt.type.replace(/^on/, "").toLowerCase())
            },
            Zs: function(delay, evt) {
                var me = this;
                var hackForMouseUp = false;
                var mouseX, mouseY;
                if (browser.ie && browser.version < 9 && evt && evt.type == "mouseup") {
                    var range = this.selection.getRange();
                    if (!range.collapsed) {
                        hackForMouseUp = true;
                        mouseX = evt.clientX;
                        mouseY = evt.clientY
                    }
                }
                clearTimeout(chW);
                chW = setTimeout(function() {
                    if (!me.selection || !me.selection.getNative()) {
                        return
                    }
                    var ieRange;
                    if (hackForMouseUp && me.selection.getNative().type == "None") {
                        ieRange = me.document.body.createTextRange();
                        try {
                            ieRange.moveToPoint(mouseX, mouseY)
                        } catch(ex) {
                            ieRange = null
                        }
                    }
                    var bakGetIERange;
                    if (ieRange) {
                        bakGetIERange = me.selection.getIERange;
                        me.selection.getIERange = function() {
                            return ieRange
                        }
                    }
                    me.selection.cache();
                    if (bakGetIERange) {
                        me.selection.getIERange = bakGetIERange
                    }
                    if (me.selection.bvq && me.selection.bvp) {
                        me.fireEvent("beforeselectionchange");
                        me.fireEvent("selectionchange", !!evt);
                        me.fireEvent("afterselectionchange");
                        me.selection.clear()
                    }
                },
                delay || 50)
            },
            bvn: function(fnName, args) {
                var cmdName = args[0].toLowerCase(),
                cmd,
                cmdFn;
                cmd = this.commands[cmdName] || UE.commands[cmdName];
                cmdFn = cmd && cmd[fnName];
                if ((!cmd || !cmdFn) && fnName == "queryCommandState") {
                    return 0
                } else if (cmdFn) {
                    return cmdFn.apply(this, args)
                }
            },
            execCommand: function(cmdName) {
                cmdName = cmdName.toLowerCase();
                var me = this,
                result, cmd = me.commands[cmdName] || UE.commands[cmdName];
                if (!cmd || !cmd.execCommand) {
                    return null
                }
                if (!cmd.notNeedUndo && !me.zS) {
                    me.zS = true;
                    if (me.queryCommandState.apply(me, arguments) != -1) {
                        me.fireEvent("saveScene");
                        me.fireEvent("beforeexeccommand", cmdName);
                        result = this.bvn("execCommand", arguments); ! cmd.ignoreContentChange && !me.chU && me.fireEvent("contentchange");
                        me.fireEvent("afterexeccommand", cmdName);
                        me.fireEvent("saveScene")
                    }
                    me.zS = false
                } else {
                    result = this.bvn("execCommand", arguments); ! me.zS && !cmd.ignoreContentChange && !me.chU && me.fireEvent("contentchange")
                } ! me.zS && !cmd.ignoreContentChange && !me.chU && me.Zs();
                return result
            },
            queryCommandState: function(cmdName) {
                return this.bvn("queryCommandState", arguments)
            },
            queryCommandValue: function(cmdName) {
                return this.bvn("queryCommandValue", arguments)
            },
            hasContents: function(tags) {
                if (tags) {
                    for (var i = 0,
                    ci; ci = tags[i++];) {
                        if (this.document.getElementsByTagName(ci).length > 0) {
                            return true
                        }
                    }
                }
                if (!domUtils.isEmptyBlock(this.body)) {
                    return true
                }
                tags = ["div"];
                for (i = 0; ci = tags[i++];) {
                    var nodes = domUtils.getElementsByTagName(this.document, ci);
                    for (var n = 0,
                    cn; cn = nodes[n++];) {
                        if (domUtils.isCustomeNode(cn)) {
                            return true
                        }
                    }
                }
                return false
            },
            reset: function() {
                this.fireEvent("reset")
            },
            setEnabled: function() {
                var me = this,
                range;
                if (me.body.contentEditable == "false") {
                    me.body.contentEditable = true;
                    range = me.selection.getRange();
                    try {
                        range.moveToBookmark(me.lastBk);
                        delete me.lastBk
                    } catch(e) {
                        range.setStartAtFirst(me.body).collapse(true)
                    }
                    range.select(true);
                    if (me.bkqueryCommandState) {
                        me.queryCommandState = me.bkqueryCommandState;
                        delete me.bkqueryCommandState
                    }
                    me.fireEvent("selectionchange")
                }
            },
            enable: function() {
                return this.setEnabled()
            },
            setDisabled: function(except) {
                var me = this;
                except = except ? utils.isArray(except) ? except: [except] : [];
                if (me.body.contentEditable == "true") {
                    if (!me.lastBk) {
                        me.lastBk = me.selection.getRange().createBookmark(true)
                    }
                    me.body.contentEditable = false;
                    me.bkqueryCommandState = me.queryCommandState;
                    me.queryCommandState = function(type) {
                        if (utils.indexOf(except, type) != -1) {
                            return me.bkqueryCommandState.apply(me, arguments)
                        }
                        return - 1
                    };
                    me.fireEvent("selectionchange")
                }
            },
            disable: function(except) {
                return this.setDisabled(except)
            },
            cPA: function() {
                function clear() {
                    var me = this;
                    if (me.document.getElementById("initContent")) {
                        me.body.innerHTML = "<p>" + (ie ? "": "<br/>") + "</p>";
                        me.removeListener("firstBeforeExecCommand focus", clear);
                        setTimeout(function() {
                            me.focus();
                            me.Zs()
                        },
                        0)
                    }
                }
                return function(cont) {
                    var me = this;
                    me.body.innerHTML = '<p id="initContent">' + cont + "</p>";
                    me.addListener("firstBeforeExecCommand focus", clear)
                }
            } (),
            setShow: function() {
                var me = this,
                range = me.selection.getRange();
                if (me.container.style.display == "none") {
                    try {
                        range.moveToBookmark(me.lastBk);
                        delete me.lastBk
                    } catch(e) {
                        range.setStartAtFirst(me.body).collapse(true)
                    }
                    setTimeout(function() {
                        range.select(true)
                    },
                    100);
                    me.container.style.display = ""
                }
            },
            show: function() {
                return this.setShow()
            },
            setHide: function() {
                var me = this;
                if (!me.lastBk) {
                    me.lastBk = me.selection.getRange().createBookmark(true)
                }
                me.container.style.display = "none"
            },
            hide: function() {
                return this.setHide()
            },
            getLang: function(path) {
                var lang = UE.I18N[this.options.lang];
                if (!lang) {
                    throw Error("not import language file")
                }
                path = (path || "").split(".");
                for (var i = 0,
                ci; ci = path[i++];) {
                    lang = lang[ci];
                    if (!lang) break
                }
                return lang
            },
            getContentLength: function(ingoneHtml, tagNames) {
                var count = this.getContent(false, false, true).length;
                if (ingoneHtml) {
                    tagNames = (tagNames || []).concat(["hr", "img", "iframe"]);
                    count = this.getContentTxt().replace(/[\t\r\n]+/g, "").length;
                    for (var i = 0,
                    ci; ci = tagNames[i++];) {
                        count += this.document.getElementsByTagName(ci).length
                    }
                }
                return count
            },
            addInputRule: function(rule) {
                this.inputRules.push(rule)
            },
            filterInputRule: function(root) {
                for (var i = 0,
                ci; ci = this.inputRules[i++];) {
                    ci.call(this, root)
                }
            },
            addOutputRule: function(rule) {
                this.outputRules.push(rule)
            },
            filterOutputRule: function(root) {
                for (var i = 0,
                ci; ci = this.outputRules[i++];) {
                    ci.call(this, root)
                }
            }
        }; utils.inherits(Editor, EventBase)
    })(); UE.ajax = function() {
        var fnStr = "XMLHttpRequest()";
        try {
            new ActiveXObject("Msxml2.XMLHTTP");
            fnStr = "ActiveXObject('Msxml2.XMLHTTP')"
        } catch(e) {
            try {
                new ActiveXObject("Microsoft.XMLHTTP");
                fnStr = "ActiveXObject('Microsoft.XMLHTTP')"
            } catch(e) {}
        }
        var creatAjaxRequest = new Function("return new " + fnStr);
        function json2str(json) {
            var strArr = [];
            for (var i in json) {
                if (i == "method" || i == "timeout" || i == "async") continue;
                if (! ((typeof json[i]).toLowerCase() == "function" || (typeof json[i]).toLowerCase() == "object")) {
                    strArr.push(encodeURIComponent(i) + "=" + encodeURIComponent(json[i]))
                }
            }
            return strArr.join("&")
        }
        return {
            request: function(url, ajaxOptions) {
                var ajaxRequest = creatAjaxRequest(),
                timeIsOut = false,
                defaultAjaxOptions = {
                    method: "POST",
                    timeout: 5e3,
                    async: true,
                    data: {},
                    onsuccess: function() {},
                    onerror: function() {}
                };
                if (typeof url === "object") {
                    ajaxOptions = url;
                    url = ajaxOptions.url
                }
                if (!ajaxRequest || !url) return;
                var ajaxOpts = ajaxOptions ? utils.extend(defaultAjaxOptions, ajaxOptions) : defaultAjaxOptions;
                var submitStr = json2str(ajaxOpts);
                if (!utils.isEmptyObject(ajaxOpts.data)) {
                    submitStr += (submitStr ? "&": "") + json2str(ajaxOpts.data)
                }
                var timerID = setTimeout(function() {
                    if (ajaxRequest.readyState != 4) {
                        timeIsOut = true;
                        ajaxRequest.abort();
                        clearTimeout(timerID)
                    }
                },
                ajaxOpts.timeout);
                var method = ajaxOpts.method.toUpperCase();
                var str = url + (url.indexOf("?") == -1 ? "?": "&") + (method == "POST" ? "": submitStr + "&noCache=" + +(new Date));
                ajaxRequest.open(method, str, ajaxOpts.async);
                ajaxRequest.onreadystatechange = function() {
                    if (ajaxRequest.readyState == 4) {
                        if (!timeIsOut && ajaxRequest.status == 200) {
                            ajaxOpts.onsuccess(ajaxRequest)
                        } else {
                            ajaxOpts.onerror(ajaxRequest)
                        }
                    }
                };
                if (method == "POST") {
                    ajaxRequest.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
                    ajaxRequest.send(submitStr)
                } else {
                    ajaxRequest.send(null)
                }
            }
        }
    } ();
    var filterWord = UE.filterWord = function() {
        function isWordDocument(str) {
            return /(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/ig.test(str)
        }
        function transUnit(v) {
            v = v.replace(/[\d.]+\w+/g,
            function(m) {
                return utils.transUnitToPx(m)
            });
            return v
        }
        function filterPasteWord(str) {
            return str.replace(/[\t\r\n]+/g, " ").replace(/<!--[\s\S]*?-->/ig, "").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,
            function(str) {
                if (browser.opera) {
                    return ""
                }
                try {
                    if (/Bitmap/i.test(str)) {
                        return ""
                    }
                    var width = str.match(/width:([ \d.]*p[tx])/i)[1],
                    height = str.match(/height:([ \d.]*p[tx])/i)[1],
                    src = str.match(/src=\s*"([^"]*)"/i)[1];
                    return '<img width="' + transUnit(width) + '" height="' + transUnit(height) + '" src="' + src + '" />'
                } catch(e) {
                    return ""
                }
            }).replace(/<\/?div[^>]*>/g, "").replace(/v:\w+=(["']?)[^'"]+\1/g, "").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi, "").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi, "<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,
            function(str, name, marks, val) {
                return name == "class" && val == "MsoListParagraph" ? str: ""
            }).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,
            function(a, b, c) {
                return c.replace(/[\t\r\n ]+/g, " ")
            }).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,
            function(str, tag, tmp, style) {
                var n = [],
                s = style.replace(/^\s+|\s+$/, "").replace(/&#39;/g, "'").replace(/&quot;/gi, "'").split(/;\s*/g);
                for (var i = 0,
                v; v = s[i]; i++) {
                    var name, value, parts = v.split(":");
                    if (parts.length == 2) {
                        name = parts[0].toLowerCase();
                        value = parts[1].toLowerCase();
                        if (/^(background)\w*/.test(name) && value.replace(/(initial|\s)/g, "").length == 0 || /^(margin)\w*/.test(name) && /^0\w+$/.test(value)) {
                            continue
                        }
                        switch (name) {
                        case "mso-padding-alt":
                        case "mso-padding-top-alt":
                        case "mso-padding-right-alt":
                        case "mso-padding-bottom-alt":
                        case "mso-padding-left-alt":
                        case "mso-margin-alt":
                        case "mso-margin-top-alt":
                        case "mso-margin-right-alt":
                        case "mso-margin-bottom-alt":
                        case "mso-margin-left-alt":
                        case "mso-height":
                        case "mso-width":
                        case "mso-vertical-align-alt":
                            if (!/<table/.test(tag)) n[i] = name.replace(/^mso-|-alt$/g, "") + ":" + transUnit(value);
                            continue;
                        case "horiz-align":
                            n[i] = "text-align:" + value;
                            continue;
                        case "vert-align":
                            n[i] = "vertical-align:" + value;
                            continue;
                        case "font-color":
                        case "mso-foreground":
                            n[i] = "color:" + value;
                            continue;
                        case "mso-background":
                        case "mso-highlight":
                            n[i] = "background:" + value;
                            continue;
                        case "mso-default-height":
                            n[i] = "min-height:" + transUnit(value);
                            continue;
                        case "mso-default-width":
                            n[i] = "min-width:" + transUnit(value);
                            continue;
                        case "mso-padding-between-alt":
                            n[i] = "border-collapse:separate;border-spacing:" + transUnit(value);
                            continue;
                        case "text-line-through":
                            if (value == "single" || value == "double") {
                                n[i] = "text-decoration:line-through"
                            }
                            continue;
                        case "mso-zero-height":
                            if (value == "yes") {
                                n[i] = "display:none"
                            }
                            continue;
                        case "margin":
                            if (!/[1-9]/.test(value)) {
                                continue
                            }
                        }
                        if (/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(name) || /text\-indent|padding|margin/.test(name) && /\-[\d.]+/.test(value)) {
                            continue
                        }
                        n[i] = name + ":" + parts[1]
                    }
                }
                return tag + (n.length ? ' style="' + n.join(";").replace(/;{2,}/g, ";") + '"': "")
            }).replace(/[\d.]+(cm|pt)/g,
            function(str) {
                return utils.transUnitToPx(str)
            })
        }
        return function(html) {
            return isWordDocument(html) ? filterPasteWord(html) : html
        }
    } (); (function() {
        var uNode = UE.uNode = function(obj) {
            this.type = obj.type;
            this.data = obj.data;
            this.tagName = obj.tagName;
            this.parentNode = obj.parentNode;
            this.attrs = obj.attrs || {};
            this.children = obj.children
        };
        var notTransAttrs = {
            href: 1,
            src: 1,
            kh: 1,
            sg: 1,
            cdata_data: 1
        };
        var notTransTagName = {
            style: 1,
            script: 1
        };
        var indentChar = "    ",
        breakChar = "\n";
        function insertLine(arr, current, begin) {
            arr.push(breakChar);
            return current + (begin ? 1 : -1)
        }
        function insertIndent(arr, current) {
            for (var i = 0; i < current; i++) {
                arr.push(indentChar)
            }
        }
        uNode.createElement = function(html) {
            if (/[<>]/.test(html)) {
                return UE.htmlparser(html).children[0]
            } else {
                return new uNode({
                    type: "element",
                    children: [],
                    tagName: html
                })
            }
        };
        uNode.createText = function(data, noTrans) {
            return new UE.uNode({
                type: "text",
                data: noTrans ? data: utils.unhtml(data || "")
            })
        };
        function nodeToHtml(node, arr, formatter, current) {
            switch (node.type) {
            case "root":
                for (var i = 0,
                ci; ci = node.children[i++];) {
                    if (formatter && ci.type == "element" && !dtd.$inlineWithA[ci.tagName] && i > 1) {
                        insertLine(arr, current, true);
                        insertIndent(arr, current)
                    }
                    nodeToHtml(ci, arr, formatter, current)
                }
                break;
            case "text":
                isText(node, arr);
                break;
            case "element":
                isElement(node, arr, formatter, current);
                break;
            case "comment":
                isComment(node, arr, formatter)
            }
            return arr
        }
        function isText(node, arr) {
            if (node.parentNode.tagName == "pre") {
                arr.push(node.data)
            } else {
                arr.push(notTransTagName[node.parentNode.tagName] ? utils.html(node.data) : node.data.replace(/[ ]{2}/g, " &nbsp;"))
            }
        }
        function isElement(node, arr, formatter, current) {
            var attrhtml = "";
            if (node.attrs) {
                attrhtml = [];
                var attrs = node.attrs;
                for (var a in attrs) {
                    attrhtml.push(a + (attrs[a] !== undefined ? '="' + (notTransAttrs[a] ? utils.html(attrs[a]).replace(/["]/g,
                    function(a) {
                        return "&quot;"
                    }) : utils.unhtml(attrs[a])) + '"': ""))
                }
                attrhtml = attrhtml.join(" ")
            }
            arr.push("<" + node.tagName + (attrhtml ? " " + attrhtml: "") + (dtd.$empty[node.tagName] ? "/": "") + ">");
            if (formatter && !dtd.$inlineWithA[node.tagName] && node.tagName != "pre") {
                if (node.children && node.children.length) {
                    current = insertLine(arr, current, true);
                    insertIndent(arr, current)
                }
            }
            if (node.children && node.children.length) {
                for (var i = 0,
                ci; ci = node.children[i++];) {
                    if (formatter && ci.type == "element" && !dtd.$inlineWithA[ci.tagName] && i > 1) {
                        insertLine(arr, current);
                        insertIndent(arr, current)
                    }
                    nodeToHtml(ci, arr, formatter, current)
                }
            }
            if (!dtd.$empty[node.tagName]) {
                if (formatter && !dtd.$inlineWithA[node.tagName] && node.tagName != "pre") {
                    if (node.children && node.children.length) {
                        current = insertLine(arr, current);
                        insertIndent(arr, current)
                    }
                }
                arr.push("</" + node.tagName + ">")
            }
        }
        function isComment(node, arr) {
            arr.push("<!--" + node.data + "-->")
        }
        function getNodeById(root, id) {
            var node;
            if (root.type == "element" && root.getAttr("id") == id) {
                return root
            }
            if (root.children && root.children.length) {
                for (var i = 0,
                ci; ci = root.children[i++];) {
                    if (node = getNodeById(ci, id)) {
                        return node
                    }
                }
            }
        }
        function getNodesByTagName(node, tagName, arr) {
            if (node.type == "element" && node.tagName == tagName) {
                arr.push(node)
            }
            if (node.children && node.children.length) {
                for (var i = 0,
                ci; ci = node.children[i++];) {
                    getNodesByTagName(ci, tagName, arr)
                }
            }
        }
        function nodeTraversal(root, fn) {
            if (root.children && root.children.length) {
                for (var i = 0,
                ci; ci = root.children[i];) {
                    nodeTraversal(ci, fn);
                    if (ci.parentNode) {
                        if (ci.children && ci.children.length) {
                            fn(ci)
                        }
                        if (ci.parentNode) i++
                    }
                }
            } else {
                fn(root)
            }
        }
        uNode.prototype = {
            toHtml: function(formatter) {
                var arr = [];
                nodeToHtml(this, arr, formatter, 0);
                return arr.join("")
            },
            innerHTML: function(htmlstr) {
                if (this.type != "element" || dtd.$empty[this.tagName]) {
                    return this
                }
                if (utils.isString(htmlstr)) {
                    if (this.children) {
                        for (var i = 0,
                        ci; ci = this.children[i++];) {
                            ci.parentNode = null
                        }
                    }
                    this.children = [];
                    var tmpRoot = UE.htmlparser(htmlstr);
                    for (var i = 0,
                    ci; ci = tmpRoot.children[i++];) {
                        this.children.push(ci);
                        ci.parentNode = this
                    }
                    return this
                } else {
                    var tmpRoot = new UE.uNode({
                        type: "root",
                        children: this.children
                    });
                    return tmpRoot.toHtml()
                }
            },
            innerText: function(textStr, noTrans) {
                if (this.type != "element" || dtd.$empty[this.tagName]) {
                    return this
                }
                if (textStr) {
                    if (this.children) {
                        for (var i = 0,
                        ci; ci = this.children[i++];) {
                            ci.parentNode = null
                        }
                    }
                    this.children = [];
                    this.appendChild(uNode.createText(textStr, noTrans));
                    return this
                } else {
                    return this.toHtml().replace(/<[^>]+>/g, "")
                }
            },
            getData: function() {
                if (this.type == "element") return "";
                return this.data
            },
            firstChild: function() {
                return this.children ? this.children[0] : null
            },
            lastChild: function() {
                return this.children ? this.children[this.children.length - 1] : null
            },
            previousSibling: function() {
                var parent = this.parentNode;
                for (var i = 0,
                ci; ci = parent.children[i]; i++) {
                    if (ci === this) {
                        return i == 0 ? null: parent.children[i - 1]
                    }
                }
            },
            nextSibling: function() {
                var parent = this.parentNode;
                for (var i = 0,
                ci; ci = parent.children[i++];) {
                    if (ci === this) {
                        return parent.children[i]
                    }
                }
            },
            replaceChild: function(target, source) {
                if (this.children) {
                    if (target.parentNode) {
                        target.parentNode.removeChild(target)
                    }
                    for (var i = 0,
                    ci; ci = this.children[i]; i++) {
                        if (ci === source) {
                            this.children.splice(i, 1, target);
                            source.parentNode = null;
                            target.parentNode = this;
                            return target
                        }
                    }
                }
            },
            appendChild: function(node) {
                if (this.type == "root" || this.type == "element" && !dtd.$empty[this.tagName]) {
                    if (!this.children) {
                        this.children = []
                    }
                    if (node.parentNode) {
                        node.parentNode.removeChild(node)
                    }
                    for (var i = 0,
                    ci; ci = this.children[i]; i++) {
                        if (ci === node) {
                            this.children.splice(i, 1);
                            break
                        }
                    }
                    this.children.push(node);
                    node.parentNode = this;
                    return node
                }
            },
            insertBefore: function(target, source) {
                if (this.children) {
                    if (target.parentNode) {
                        target.parentNode.removeChild(target)
                    }
                    for (var i = 0,
                    ci; ci = this.children[i]; i++) {
                        if (ci === source) {
                            this.children.splice(i, 0, target);
                            target.parentNode = this;
                            return target
                        }
                    }
                }
            },
            insertAfter: function(target, source) {
                if (this.children) {
                    if (target.parentNode) {
                        target.parentNode.removeChild(target)
                    }
                    for (var i = 0,
                    ci; ci = this.children[i]; i++) {
                        if (ci === source) {
                            this.children.splice(i + 1, 0, target);
                            target.parentNode = this;
                            return target
                        }
                    }
                }
            },
            removeChild: function(node, keepChildren) {
                if (this.children) {
                    for (var i = 0,
                    ci; ci = this.children[i]; i++) {
                        if (ci === node) {
                            this.children.splice(i, 1);
                            ci.parentNode = null;
                            if (keepChildren && ci.children && ci.children.length) {
                                for (var j = 0,
                                cj; cj = ci.children[j]; j++) {
                                    this.children.splice(i + j, 0, cj);
                                    cj.parentNode = this
                                }
                            }
                            return ci
                        }
                    }
                }
            },
            getAttr: function(attrName) {
                return this.attrs && this.attrs[attrName.toLowerCase()]
            },
            setAttr: function(attrName, attrVal) {
                if (!attrName) {
                    delete this.attrs;
                    return
                }
                if (!this.attrs) {
                    this.attrs = {}
                }
                if (utils.isObject(attrName)) {
                    for (var a in attrName) {
                        if (!attrName[a]) {
                            delete this.attrs[a]
                        } else {
                            this.attrs[a.toLowerCase()] = attrName[a]
                        }
                    }
                } else {
                    if (!attrVal) {
                        delete this.attrs[attrName]
                    } else {
                        this.attrs[attrName.toLowerCase()] = attrVal
                    }
                }
            },
            getIndex: function() {
                var parent = this.parentNode;
                for (var i = 0,
                ci; ci = parent.children[i]; i++) {
                    if (ci === this) {
                        return i
                    }
                }
                return - 1
            },
            getNodeById: function(id) {
                var node;
                if (this.children && this.children.length) {
                    for (var i = 0,
                    ci; ci = this.children[i++];) {
                        if (node = getNodeById(ci, id)) {
                            return node
                        }
                    }
                }
            },
            getNodesByTagName: function(tagNames) {
                tagNames = utils.trim(tagNames).replace(/[ ]{2,}/g, " ").split(" ");
                var arr = [],
                me = this;
                utils.each(tagNames,
                function(tagName) {
                    if (me.children && me.children.length) {
                        for (var i = 0,
                        ci; ci = me.children[i++];) {
                            getNodesByTagName(ci, tagName, arr)
                        }
                    }
                });
                return arr
            },
            getStyle: function(name) {
                var cssStyle = this.getAttr("style");
                if (!cssStyle) {
                    return ""
                }
                var reg = new RegExp("(^|;)\\s*" + name + ":([^;]+)", "i");
                var match = cssStyle.match(reg);
                if (match && match[0]) {
                    return match[2]
                }
                return ""
            },
            setStyle: function(name, val) {
                function exec(name, val) {
                    var reg = new RegExp("(^|;)\\s*" + name + ":([^;]+;?)", "gi");
                    cssStyle = cssStyle.replace(reg, "$1");
                    if (val) {
                        cssStyle = name + ":" + utils.unhtml(val) + ";" + cssStyle
                    }
                }
                var cssStyle = this.getAttr("style");
                if (!cssStyle) {
                    cssStyle = ""
                }
                if (utils.isObject(name)) {
                    for (var a in name) {
                        exec(a, name[a])
                    }
                } else {
                    exec(name, val)
                }
                this.setAttr("style", utils.trim(cssStyle))
            },
            traversal: function(fn) {
                if (this.children && this.children.length) {
                    nodeTraversal(this, fn)
                }
                return this
            }
        }
    })();
    var htmlparser = UE.htmlparser = function(htmlstr, ignoreBlank) {
        var re_tag = /<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,
        re_attr = /([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g;
        var allowEmptyTags = {
            b: 1,
            code: 1,
            i: 1,
            u: 1,
            strike: 1,
            s: 1,
            tt: 1,
            strong: 1,
            q: 1,
            samp: 1,
            em: 1,
            span: 1,
            sub: 1,
            img: 1,
            sup: 1,
            font: 1,
            big: 1,
            small: 1,
            iframe: 1,
            a: 1,
            br: 1,
            pre: 1
        };
        htmlstr = htmlstr.replace(new RegExp(domUtils.fillChar, "g"), "");
        if (!ignoreBlank) {
            htmlstr = htmlstr.replace(new RegExp("[\\r\\t\\n" + (ignoreBlank ? "": " ") + "]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n" + (ignoreBlank ? "": " ") + "]*", "g"),
            function(a, b) {
                if (b && allowEmptyTags[b.toLowerCase()]) {
                    return a.replace(/(^[\n\r]+)|([\n\r]+$)/g, "")
                }
                return a.replace(new RegExp("^[\\r\\n" + (ignoreBlank ? "": " ") + "]+"), "").replace(new RegExp("[\\r\\n" + (ignoreBlank ? "": " ") + "]+$"), "")
            })
        }
        var notTransAttrs = {
            href: 1,
            src: 1
        };
        var uNode = UE.uNode,
        needParentNode = {
            td: "tr",
            tr: ["tbody", "thead", "tfoot"],
            tbody: "table",
            th: "tr",
            thead: "table",
            tfoot: "table",
            caption: "table",
            li: ["ul", "ol"],
            dt: "dl",
            dd: "dl",
            option: "select"
        },
        needChild = {
            ol: "li",
            ul: "li"
        };
        function text(parent, data) {
            if (needChild[parent.tagName]) {
                var tmpNode = uNode.createElement(needChild[parent.tagName]);
                parent.appendChild(tmpNode);
                tmpNode.appendChild(uNode.createText(data));
                parent = tmpNode
            } else {
                parent.appendChild(uNode.createText(data))
            }
        }
        function element(parent, tagName, htmlattr) {
            var needParentTag;
            if (needParentTag = needParentNode[tagName]) {
                var tmpParent = parent,
                hasParent;
                while (tmpParent.type != "root") {
                    if (utils.isArray(needParentTag) ? utils.indexOf(needParentTag, tmpParent.tagName) != -1 : needParentTag == tmpParent.tagName) {
                        parent = tmpParent;
                        hasParent = true;
                        break
                    }
                    tmpParent = tmpParent.parentNode
                }
                if (!hasParent) {
                    parent = element(parent, utils.isArray(needParentTag) ? needParentTag[0] : needParentTag)
                }
            }
            var elm = new uNode({
                parentNode: parent,
                type: "element",
                tagName: tagName.toLowerCase(),
                children: dtd.$empty[tagName] ? null: []
            });
            if (htmlattr) {
                var attrs = {},
                match;
                while (match = re_attr.exec(htmlattr)) {
                    attrs[match[1].toLowerCase()] = notTransAttrs[match[1].toLowerCase()] ? match[2] || match[3] || match[4] : utils.unhtml(match[2] || match[3] || match[4])
                }
                elm.attrs = attrs
            }
            parent.children.push(elm);
            return dtd.$empty[tagName] ? parent: elm
        }
        function comment(parent, data) {
            parent.children.push(new uNode({
                type: "comment",
                data: data,
                parentNode: parent
            }))
        }
        var match, currentIndex = 0,
        nextIndex = 0;
        var root = new uNode({
            type: "root",
            children: []
        });
        var currentParent = root;
        while (match = re_tag.exec(htmlstr)) {
            currentIndex = match.index;
            try {
                if (currentIndex > nextIndex) {
                    text(currentParent, htmlstr.slice(nextIndex, currentIndex))
                }
                if (match[3]) {
                    if (dtd.$cdata[currentParent.tagName]) {
                        text(currentParent, match[0])
                    } else {
                        currentParent = element(currentParent, match[3].toLowerCase(), match[4])
                    }
                } else if (match[1]) {
                    if (currentParent.type != "root") {
                        if (dtd.$cdata[currentParent.tagName] && !dtd.$cdata[match[1]]) {
                            text(currentParent, match[0])
                        } else {
                            var tmpParent = currentParent;
                            while (currentParent.type == "element" && currentParent.tagName != match[1].toLowerCase()) {
                                currentParent = currentParent.parentNode;
                                if (currentParent.type == "root") {
                                    currentParent = tmpParent;
                                    throw "break"
                                }
                            }
                            currentParent = currentParent.parentNode
                        }
                    }
                } else if (match[2]) {
                    comment(currentParent, match[2])
                }
            } catch(e) {}
            nextIndex = re_tag.lastIndex
        }
        if (nextIndex < htmlstr.length) {
            text(currentParent, htmlstr.slice(nextIndex))
        }
        return root
    };
    var filterNode = UE.filterNode = function() {
        function filterNode(node, rules) {
            switch (node.type) {
            case "text":
                break;
            case "element":
                var val;
                if (val = rules[node.tagName]) {
                    if (val === "-") {
                        node.parentNode.removeChild(node)
                    } else if (utils.isFunction(val)) {
                        var parentNode = node.parentNode,
                        index = node.getIndex();
                        val(node);
                        if (node.parentNode) {
                            if (node.children) {
                                for (var i = 0,
                                ci; ci = node.children[i];) {
                                    filterNode(ci, rules);
                                    if (ci.parentNode) {
                                        i++
                                    }
                                }
                            }
                        } else {
                            for (var i = index,
                            ci; ci = parentNode.children[i];) {
                                filterNode(ci, rules);
                                if (ci.parentNode) {
                                    i++
                                }
                            }
                        }
                    } else {
                        var attrs = val["$"];
                        if (attrs && node.attrs) {
                            var tmpAttrs = {},
                            tmpVal;
                            for (var a in attrs) {
                                tmpVal = node.getAttr(a);
                                if (a == "style" && utils.isArray(attrs[a])) {
                                    var tmpCssStyle = [];
                                    utils.each(attrs[a],
                                    function(v) {
                                        var tmp;
                                        if (tmp = node.getStyle(v)) {
                                            tmpCssStyle.push(v + ":" + tmp)
                                        }
                                    });
                                    tmpVal = tmpCssStyle.join(";")
                                }
                                if (tmpVal) {
                                    tmpAttrs[a] = tmpVal
                                }
                            }
                            node.attrs = tmpAttrs
                        }
                        if (node.children) {
                            for (var i = 0,
                            ci; ci = node.children[i];) {
                                filterNode(ci, rules);
                                if (ci.parentNode) {
                                    i++
                                }
                            }
                        }
                    }
                } else {
                    if (dtd.$cdata[node.tagName]) {
                        node.parentNode.removeChild(node)
                    } else {
                        var parentNode = node.parentNode,
                        index = node.getIndex();
                        node.parentNode.removeChild(node, true);
                        for (var i = index,
                        ci; ci = parentNode.children[i];) {
                            filterNode(ci, rules);
                            if (ci.parentNode) {
                                i++
                            }
                        }
                    }
                }
                break;
            case "comment":
                node.parentNode.removeChild(node)
            }
        }
        return function(root, rules) {
            if (utils.isEmptyObject(rules)) {
                return root
            }
            var val;
            if (val = rules["-"]) {
                utils.each(val.split(" "),
                function(k) {
                    rules[k] = "-"
                })
            }
            for (var i = 0,
            ci; ci = root.children[i];) {
                filterNode(ci, rules);
                if (ci.parentNode) {
                    i++
                }
            }
            return root
        }
    } (); UE.plugin = function() {
        var bEn = {};
        return {
            register: function(pluginName, fn, oldOptionName, afterDisabled) {
                if (oldOptionName && utils.isFunction(oldOptionName)) {
                    afterDisabled = oldOptionName;
                    oldOptionName = null
                }
                bEn[pluginName] = {
                    optionName: oldOptionName || pluginName,
                    execFn: fn,
                    afterDisabled: afterDisabled
                }
            },
            load: function(editor) {
                utils.each(bEn,
                function(plugin) {
                    var chS = plugin.execFn.call(editor);
                    if (editor.options[plugin.optionName] !== false) {
                        if (chS) {
                            utils.each(chS,
                            function(v, k) {
                                switch (k.toLowerCase()) {
                                case "shortcutkey":
                                    editor.addshortcutkey(v);
                                    break;
                                case "bindevents":
                                    utils.each(v,
                                    function(fn, eventName) {
                                        editor.addListener(eventName, fn)
                                    });
                                    break;
                                case "bindmultievents":
                                    utils.each(utils.isArray(v) ? v: [v],
                                    function(event) {
                                        var types = utils.trim(event.type).split(/\s+/);
                                        utils.each(types,
                                        function(eventName) {
                                            editor.addListener(eventName, event.handler)
                                        })
                                    });
                                    break;
                                case "commands":
                                    utils.each(v,
                                    function(execFn, execName) {
                                        editor.commands[execName] = execFn
                                    });
                                    break;
                                case "outputrule":
                                    editor.addOutputRule(v);
                                    break;
                                case "inputrule":
                                    editor.addInputRule(v);
                                    break;
                                case "defaultoptions":
                                    editor.setOpt(v)
                                }
                            })
                        }
                    } else if (plugin.afterDisabled) {
                        plugin.afterDisabled.call(editor)
                    }
                });
                utils.each(UE.plugins,
                function(plugin) {
                    plugin.call(editor)
                })
            },
            run: function(plugnName, editor) {
                var plugin = bEn[pluginName];
                if (plugin) {
                    plugin.exeFn.call(editor)
                }
            }
        }
    } (); window.UE = window.UE || {}; UE.I18N = UE.I18N || {}; UE.I18N["zh-cn"] = {
        labelMap: {
            anchor: "锚点",
            undo: "撤销",
            redo: "重做",
            bold: "加粗",
            indent: "首行缩进",
            snapscreen: "截图",
            italic: "斜体",
            underline: "下划线",
            strikethrough: "删除线",
            subscript: "下标",
            fontborder: "字符边框",
            superscript: "上标",
            formatmatch: "格式刷",
            source: "源代码",
            blockquote: "引用",
            pasteplain: "纯文本粘贴模式",
            selectall: "全选",
            print: "打印",
            preview: "预览",
            horizontal: "分隔线",
            removeformat: "清除格式",
            time: "时间",
            date: "日期",
            unlink: "取消链接",
            insertrow: "前插入行",
            insertcol: "前插入列",
            mergeright: "右合并单元格",
            mergedown: "下合并单元格",
            deleterow: "删除行",
            deletecol: "删除列",
            splittorows: "拆分成行",
            splittocols: "拆分成列",
            splittocells: "完全拆分单元格",
            mergecells: "合并多个单元格",
            deletetable: "删除表格",
            cleardoc: "清空文档",
            insertparagraphbeforetable: "表格前插入行",
            insertcode: "代码语言",
            fontfamily: "字体",
            fontsize: "字号",
            paragraph: "段落格式",
            insertimage: "图片",
            edittable: "表格属性",
            edittd: "单元格属性",
            link: "超链接",
            emotion: "表情",
            spechars: "特殊字符",
            searchreplace: "查询替换",
            map: "Baidu地图",
            gmap: "Google地图",
            insertvideo: "视频",
            help: "帮助",
            justifyleft: "居左对齐",
            justifyright: "居右对齐",
            justifycenter: "居中对齐",
            justifyjustify: "两端对齐",
            forecolor: "字体颜色",
            backcolor: "背景色",
            insertorderedlist: "有序列表",
            insertunorderedlist: "无序列表",
            fullscreen: "全屏",
            directionalityltr: "从左向右输入",
            directionalityrtl: "从右向左输入",
            pagebreak: "分页",
            insertframe: "插入Iframe",
            imagenone: "默认",
            imageleft: "左浮动",
            imageright: "右浮动",
            attachment: "附件",
            imagecenter: "居中",
            wordimage: "图片转存",
            edittip: "编辑提示",
            customstyle: "自定义标题",
            autotypeset: "自动排版",
            webapp: "百度应用",
            touppercase: "字母大写",
            tolowercase: "字母小写",
            background: "背景",
            template: "模板",
            scrawl: "涂鸦",
            music: "音乐",
            inserttable: "插入表格",
            drafts: "从草稿箱加载",
            charts: "图表",
            math: "公式"
        },
        insertcode: {
            as3: "ActionScript 3",
            bash: "Bash/Shell",
            cpp: "C/C++",
            css: "CSS",
            cf: "ColdFusion",
            "c#": "C#",
            delphi: "Delphi",
            diff: "Diff",
            erlang: "Erlang",
            groovy: "Groovy",
            html: "HTML",
            java: "Java",
            jfx: "JavaFX",
            js: "JavaScript",
            pl: "Perl",
            php: "PHP",
            plain: "Plain Text",
            ps: "PowerShell",
            python: "Python",
            ruby: "Ruby",
            scala: "Scala",
            sql: "SQL",
            vb: "Visual Basic",
            xml: "XML"
        },
        fontsize: ["12px", "14px", "16px", "18px", "20px", "24px", "36px"],
        rowspacingtop: {
            title: "段前距",
            list: ["5", "10", "15", "20", "25"]
        },
        rowspacingbottom: {
            title: "段后距",
            list: ["5", "10", "15", "20", "25"]
        },
        lineheight: {
            title: "行间距",
            list: ["1", "1.5", "1.75", "2", "3", "4", "5"]
        }
    }; UE.plugins["defaultfilter"] = function() {
        var me = this;
        me.setOpt({
            allowDivTransToP: true,
            disabledTableInTable: true
        });
        me.addInputRule(function(root) {
            var allowDivTransToP = this.options.allowDivTransToP;
            var val;
            function tdParent(node) {
                while (node && node.type == "element") {
                    if (node.tagName == "td") {
                        return true
                    }
                    node = node.parentNode
                }
                return false
            }
            root.traversal(function(node) {
                if (node.type == "element") {
                    if (!dtd.$cdata[node.tagName] && me.options.autoClearEmptyNode && dtd.$inline[node.tagName] && !dtd.$empty[node.tagName] && (!node.attrs || utils.isEmptyObject(node.attrs))) {
                        if (!node.firstChild()) node.parentNode.removeChild(node);
                        else if (node.tagName == "span" && (!node.attrs || utils.isEmptyObject(node.attrs))) {
                            node.parentNode.removeChild(node, true)
                        }
                        return
                    }
                    switch (node.tagName) {
                    case "style":
                    case "script":
                        node.setAttr({
                            cdata_tag:
                            node.tagName,
                            cdata_data: node.innerHTML() || "",
                            cPs: "true"
                        });
                        node.tagName = "div";
                        node.innerHTML("");
                        break;
                    case "a":
                        if (val = node.getAttr("href")) {
                            node.setAttr("_href", val)
                        }
                        break;
                    case "img":
                        if (val = node.getAttr("src")) {
                            if (/^data:/.test(val)) {
                                node.parentNode.removeChild(node);
                                break
                            }
                        }
                        node.setAttr("_src", node.getAttr("src"));
                        break;
                    case "span":
                        if (browser.webkit && (val = node.getStyle("white-space"))) {
                            if (/nowrap|normal/.test(val)) {
                                node.setStyle("white-space", "");
                                if (me.options.autoClearEmptyNode && utils.isEmptyObject(node.attrs)) {
                                    node.parentNode.removeChild(node, true)
                                }
                            }
                        }
                        break;
                    case "p":
                        if (val = node.getAttr("align")) {
                            node.setAttr("align");
                            node.setStyle("text-align", val)
                        }
                        utils.each(node.children,
                        function(n) {
                            if (n.type == "element" && n.tagName == "p") {
                                var next = n.nextSibling();
                                node.parentNode.insertAfter(n, node);
                                var last = n;
                                while (next) {
                                    var tmp = next.nextSibling();
                                    node.parentNode.insertAfter(next, last);
                                    last = next;
                                    next = tmp
                                }
                                return false
                            }
                        });
                        if (!node.firstChild()) {
                            node.innerHTML(browser.ie ? "&nbsp;": "<br/>")
                        }
                        break;
                    case "div":
                        if (node.getAttr("cdata_tag")) {
                            break
                        }
                        val = node.getAttr("class");
                        if (val && /^line number\d+/.test(val)) {
                            break
                        }
                        if (!allowDivTransToP) {
                            break
                        }
                        var tmpNode, p = UE.uNode.createElement("p");
                        while (tmpNode = node.firstChild()) {
                            if (tmpNode.type == "text" || !UE.dom.dtd.$block[tmpNode.tagName]) {
                                p.appendChild(tmpNode)
                            } else {
                                if (p.firstChild()) {
                                    node.parentNode.insertBefore(p, node);
                                    p = UE.uNode.createElement("p")
                                } else {
                                    node.parentNode.insertBefore(tmpNode, node)
                                }
                            }
                        }
                        if (p.firstChild()) {
                            node.parentNode.insertBefore(p, node)
                        }
                        node.parentNode.removeChild(node);
                        break;
                    case "dl":
                        node.tagName = "ul";
                        break;
                    case "dt":
                    case "dd":
                        node.tagName = "li";
                        break;
                    case "li":
                        var className = node.getAttr("class");
                        if (!className || !/list\-/.test(className)) {
                            node.setAttr()
                        }
                        var tmpNodes = node.getNodesByTagName("ol ul");
                        UE.utils.each(tmpNodes,
                        function(n) {
                            node.parentNode.insertAfter(n, node)
                        });
                        break;
                    case "td":
                    case "th":
                    case "caption":
                        if (!node.children || !node.children.length) {
                            node.appendChild(browser.ie ? UE.uNode.createText(" ") : UE.uNode.createElement("br"))
                        }
                        break;
                    case "table":
                        if (me.options.disabledTableInTable && tdParent(node)) {
                            node.parentNode.insertBefore(UE.uNode.createText(node.innerText()), node);
                            node.parentNode.removeChild(node)
                        }
                    }
                }
            })
        });
        me.addOutputRule(function(root) {
            var val;
            root.traversal(function(node) {
                if (node.type == "element") {
                    if (me.options.autoClearEmptyNode && dtd.$inline[node.tagName] && !dtd.$empty[node.tagName] && (!node.attrs || utils.isEmptyObject(node.attrs))) {
                        if (!node.firstChild()) node.parentNode.removeChild(node);
                        else if (node.tagName == "span" && (!node.attrs || utils.isEmptyObject(node.attrs))) {
                            node.parentNode.removeChild(node, true)
                        }
                        return
                    }
                    switch (node.tagName) {
                    case "div":
                        if (val = node.getAttr("cdata_tag")) {
                            node.tagName = val;
                            node.appendChild(UE.uNode.createText(node.getAttr("cdata_data")));
                            node.setAttr({
                                cdata_tag: "",
                                cdata_data: "",
                                cPs: ""
                            })
                        }
                        break;
                    case "a":
                        if (val = node.getAttr("_href")) {
                            node.setAttr({
                                href: utils.html(val),
                                sg: ""
                            })
                        }
                        break;
                    case "img":
                        if (val = node.getAttr("_src")) {
                            node.setAttr({
                                src: node.getAttr("_src"),
                                kh: ""
                            })
                        }
                    }
                }
            })
        })
    }; UE.commands["inserthtml"] = {
        execCommand: function(command, html, notNeedFilter) {
            var me = this,
            range, div;
            if (!html) {
                return
            }
            if (me.fireEvent("beforeinserthtml", html) === true) {
                return
            }
            range = me.selection.getRange();
            div = range.document.createElement("div");
            div.style.display = "inline";
            if (!notNeedFilter) {
                var root = UE.htmlparser(html);
                if (me.options.filterRules) {
                    UE.filterNode(root, me.options.filterRules)
                }
                me.filterInputRule(root);
                html = root.toHtml()
            }
            div.innerHTML = utils.trim(html);
            if (!range.collapsed) {
                var tmpNode = range.startContainer;
                if (domUtils.isFillChar(tmpNode)) {
                    range.setStartBefore(tmpNode)
                }
                tmpNode = range.endContainer;
                if (domUtils.isFillChar(tmpNode)) {
                    range.setEndAfter(tmpNode)
                }
                range.txtToElmBoundary();
                if (range.endContainer && range.endContainer.nodeType == 1) {
                    tmpNode = range.endContainer.childNodes[range.endOffset];
                    if (tmpNode && domUtils.isBr(tmpNode)) {
                        range.setEndAfter(tmpNode)
                    }
                }
                if (range.startOffset == 0) {
                    tmpNode = range.startContainer;
                    if (domUtils.isBoundaryNode(tmpNode, "firstChild")) {
                        tmpNode = range.endContainer;
                        if (range.endOffset == (tmpNode.nodeType == 3 ? tmpNode.nodeValue.length: tmpNode.childNodes.length) && domUtils.isBoundaryNode(tmpNode, "lastChild")) {
                            me.body.innerHTML = "<p>" + (browser.ie ? "": "<br/>") + "</p>";
                            range.setStart(me.body.firstChild, 0).collapse(true)
                        }
                    }
                } ! range.collapsed && range.deleteContents();
                if (range.startContainer.nodeType == 1) {
                    var child = range.startContainer.childNodes[range.startOffset],
                    pre;
                    if (child && domUtils.isBlockElm(child) && (pre = child.previousSibling) && domUtils.isBlockElm(pre)) {
                        range.setEnd(pre, pre.childNodes.length).collapse();
                        while (child.firstChild) {
                            pre.appendChild(child.firstChild)
                        }
                        domUtils.remove(child)
                    }
                }
            }
            var child, parent, pre, tmp, hadBreak = 0,
            nextNode;
            if (range.inFillChar()) {
                child = range.startContainer;
                if (domUtils.isFillChar(child)) {
                    range.setStartBefore(child).collapse(true);
                    domUtils.remove(child)
                } else if (domUtils.isFillChar(child, true)) {
                    child.nodeValue = child.nodeValue.replace(fillCharReg, "");
                    range.startOffset--;
                    range.collapsed && range.collapse(true)
                }
            }
            var li = domUtils.findParentByTagName(range.startContainer, "li", true);
            if (li) {
                var next, last;
                while (child = div.firstChild) {
                    while (child && (child.nodeType == 3 || !domUtils.isBlockElm(child) || child.tagName == "HR")) {
                        next = child.nextSibling;
                        range.insertNode(child).collapse();
                        last = child;
                        child = next
                    }
                    if (child) {
                        if (/^(ol|ul)$/i.test(child.tagName)) {
                            while (child.firstChild) {
                                last = child.firstChild;
                                domUtils.insertAfter(li, child.firstChild);
                                li = li.nextSibling
                            }
                            domUtils.remove(child)
                        } else {
                            var tmpLi;
                            next = child.nextSibling;
                            tmpLi = me.document.createElement("li");
                            domUtils.insertAfter(li, tmpLi);
                            tmpLi.appendChild(child);
                            last = child;
                            child = next;
                            li = tmpLi
                        }
                    }
                }
                li = domUtils.findParentByTagName(range.startContainer, "li", true);
                if (domUtils.isEmptyBlock(li)) {
                    domUtils.remove(li)
                }
                if (last) {
                    range.setStartAfter(last).collapse(true).select(true)
                }
            } else {
                while (child = div.firstChild) {
                    if (hadBreak) {
                        var p = me.document.createElement("p");
                        while (child && (child.nodeType == 3 || !dtd.$block[child.tagName])) {
                            nextNode = child.nextSibling;
                            p.appendChild(child);
                            child = nextNode
                        }
                        if (p.firstChild) {
                            child = p
                        }
                    }
                    range.insertNode(child);
                    nextNode = child.nextSibling;
                    if (!hadBreak && child.nodeType == domUtils.NODE_ELEMENT && domUtils.isBlockElm(child)) {
                        parent = domUtils.findParent(child,
                        function(node) {
                            return domUtils.isBlockElm(node)
                        });
                        if (parent && parent.tagName.toLowerCase() != "body" && !(dtd[parent.tagName][child.nodeName] && child.parentNode === parent)) {
                            if (!dtd[parent.tagName][child.nodeName]) {
                                pre = parent
                            } else {
                                tmp = child.parentNode;
                                while (tmp !== parent) {
                                    pre = tmp;
                                    tmp = tmp.parentNode
                                }
                            }
                            domUtils.breakParent(child, pre || tmp);
                            var pre = child.previousSibling;
                            domUtils.trimWhiteTextNode(pre);
                            if (!pre.childNodes.length) {
                                domUtils.remove(pre)
                            }
                            if (!browser.ie && (next = child.nextSibling) && domUtils.isBlockElm(next) && next.lastChild && !domUtils.isBr(next.lastChild)) {
                                next.appendChild(me.document.createElement("br"))
                            }
                            hadBreak = 1
                        }
                    }
                    var next = child.nextSibling;
                    if (!div.firstChild && next && domUtils.isBlockElm(next)) {
                        range.setStart(next, 0).collapse(true);
                        break
                    }
                    range.setEndAfter(child).collapse()
                }
                child = range.startContainer;
                if (nextNode && domUtils.isBr(nextNode)) {
                    domUtils.remove(nextNode)
                }
                if (domUtils.isBlockElm(child) && domUtils.isEmptyNode(child)) {
                    if (nextNode = child.nextSibling) {
                        domUtils.remove(child);
                        if (nextNode.nodeType == 1 && dtd.$block[nextNode.tagName]) {
                            range.setStart(nextNode, 0).collapse(true).shrinkBoundary()
                        }
                    } else {
                        try {
                            child.innerHTML = browser.ie ? domUtils.fillChar: "<br/>"
                        } catch(e) {
                            range.setStartBefore(child);
                            domUtils.remove(child)
                        }
                    }
                }
                try {
                    range.select(true)
                } catch(e) {}
            }
            setTimeout(function() {
                range = me.selection.getRange();
                range.scrollToView(me.autoHeightEnabled, me.autoHeightEnabled ? domUtils.getXY(me.iframe).y: 0);
                me.fireEvent("afterinserthtml")
            },
            200)
        }
    }; UE.plugins["autotypeset"] = function() {
        this.setOpt({
            autotypeset: {
                mergeEmptyline: true,
                removeClass: true,
                removeEmptyline: false,
                textAlign: "left",
                imageBlockLine: "center",
                pasteFilter: false,
                clearFontSize: false,
                clearFontFamily: false,
                removeEmptyNode: false,
                removeTagNames: utils.extend({
                    div: 1
                },
                dtd.$removeEmpty),
                indent: false,
                indentValue: "2em"
            }
        });
        var me = this,
        opt = me.options.autotypeset,
        remainClass = {
            selectTdClass: 1,
            pagebreak: 1,
            anchorclass: 1
        },
        remainTag = {
            li: 1
        },
        tags = {
            div: 1,
            p: 1,
            blockquote: 1,
            center: 1,
            h1: 1,
            h2: 1,
            h3: 1,
            h4: 1,
            h5: 1,
            h6: 1,
            span: 1
        },
        highlightCont;
        if (!opt) {
            return
        }
        function isLine(node, notEmpty) {
            if (!node || node.nodeType == 3) return 0;
            if (domUtils.isBr(node)) return 1;
            if (node && node.parentNode && tags[node.tagName.toLowerCase()]) {
                if (highlightCont && highlightCont.contains(node) || node.getAttribute("pagebreak")) {
                    return 0
                }
                return notEmpty ? !domUtils.isEmptyBlock(node) : domUtils.isEmptyBlock(node, new RegExp("[\\s" + domUtils.fillChar + "]", "g"))
            }
        }
        function removeNotAttributeSpan(node) {
            if (!node.style.cssText) {
                domUtils.removeAttributes(node, ["style"]);
                if (node.tagName.toLowerCase() == "span" && domUtils.hasNoAttributes(node)) {
                    domUtils.remove(node, true)
                }
            }
        }
        function autotype(type, html) {
            var me = this,
            cont;
            if (html) {
                if (!opt.pasteFilter) {
                    return
                }
                cont = me.document.createElement("div");
                cont.innerHTML = html.html
            } else {
                cont = me.document.body
            }
            var nodes = domUtils.getElementsByTagName(cont, "*");
            for (var i = 0,
            ci; ci = nodes[i++];) {
                if (me.fireEvent("excludeNodeinautotype", ci) === true) {
                    continue
                }
                if (opt.clearFontSize && ci.style.fontSize) {
                    domUtils.removeStyle(ci, "font-size");
                    removeNotAttributeSpan(ci)
                }
                if (opt.clearFontFamily && ci.style.fontFamily) {
                    domUtils.removeStyle(ci, "font-family");
                    removeNotAttributeSpan(ci)
                }
                if (isLine(ci)) {
                    if (opt.mergeEmptyline) {
                        var next = ci.nextSibling,
                        tmpNode, isBr = domUtils.isBr(ci);
                        while (isLine(next)) {
                            tmpNode = next;
                            next = tmpNode.nextSibling;
                            if (isBr && (!next || next && !domUtils.isBr(next))) {
                                break
                            }
                            domUtils.remove(tmpNode)
                        }
                    }
                    if (opt.removeEmptyline && domUtils.inDoc(ci, cont) && !remainTag[ci.parentNode.tagName.toLowerCase()]) {
                        if (domUtils.isBr(ci)) {
                            next = ci.nextSibling;
                            if (next && !domUtils.isBr(next)) {
                                continue
                            }
                        }
                        domUtils.remove(ci);
                        continue
                    }
                }
                if (isLine(ci, true) && ci.tagName != "SPAN") {
                    if (opt.indent) {
                        ci.style.textIndent = opt.indentValue
                    }
                    if (opt.textAlign) {
                        ci.style.textAlign = opt.textAlign
                    }
                }
                if (opt.removeClass && ci.className && !remainClass[ci.className.toLowerCase()]) {
                    if (highlightCont && highlightCont.contains(ci)) {
                        continue
                    }
                    domUtils.removeAttributes(ci, ["class"])
                }
                if (opt.imageBlockLine && ci.tagName.toLowerCase() == "img" && !ci.getAttribute("emotion")) {
                    if (html) {
                        var img = ci;
                        switch (opt.imageBlockLine) {
                        case "left":
                        case "right":
                        case "none":
                            var pN = img.parentNode,
                            tmpNode, pre, next;
                            while (dtd.$inline[pN.tagName] || pN.tagName == "A") {
                                pN = pN.parentNode
                            }
                            tmpNode = pN;
                            if (tmpNode.tagName == "P" && domUtils.getStyle(tmpNode, "text-align") == "center") {
                                if (!domUtils.isBody(tmpNode) && domUtils.getChildCount(tmpNode,
                                function(node) {
                                    return ! domUtils.isBr(node) && !domUtils.isWhitespace(node)
                                }) == 1) {
                                    pre = tmpNode.previousSibling;
                                    next = tmpNode.nextSibling;
                                    if (pre && next && pre.nodeType == 1 && next.nodeType == 1 && pre.tagName == next.tagName && domUtils.isBlockElm(pre)) {
                                        pre.appendChild(tmpNode.firstChild);
                                        while (next.firstChild) {
                                            pre.appendChild(next.firstChild)
                                        }
                                        domUtils.remove(tmpNode);
                                        domUtils.remove(next)
                                    } else {
                                        domUtils.setStyle(tmpNode, "text-align", "")
                                    }
                                }
                            }
                            domUtils.setStyle(img, "float", opt.imageBlockLine);
                            break;
                        case "center":
                            if (me.queryCommandValue("imagefloat") != "center") {
                                pN = img.parentNode;
                                domUtils.setStyle(img, "float", "none");
                                tmpNode = img;
                                while (pN && domUtils.getChildCount(pN,
                                function(node) {
                                    return ! domUtils.isBr(node) && !domUtils.isWhitespace(node)
                                }) == 1 && (dtd.$inline[pN.tagName] || pN.tagName == "A")) {
                                    tmpNode = pN;
                                    pN = pN.parentNode
                                }
                                var pNode = me.document.createElement("p");
                                domUtils.setAttributes(pNode, {
                                    style: "text-align:center"
                                });
                                tmpNode.parentNode.insertBefore(pNode, tmpNode);
                                pNode.appendChild(tmpNode);
                                domUtils.setStyle(tmpNode, "float", "")
                            }
                        }
                    } else {
                        var range = me.selection.getRange();
                        range.selectNode(ci).select();
                        me.execCommand("imagefloat", opt.imageBlockLine)
                    }
                }
                if (opt.removeEmptyNode) {
                    if (opt.removeTagNames[ci.tagName.toLowerCase()] && domUtils.hasNoAttributes(ci) && domUtils.isEmptyBlock(ci)) {
                        domUtils.remove(ci)
                    }
                }
            }
            if (html) {
                html.html = cont.innerHTML
            }
        }
        if (opt.pasteFilter) {
            me.addListener("beforepaste", autotype)
        }
        me.commands["autotypeset"] = {
            execCommand: function() {
                me.removeListener("beforepaste", autotype);
                if (opt.pasteFilter) {
                    me.addListener("beforepaste", autotype)
                }
                autotype.call(me)
            }
        }
    }; UE.plugin.register("autosubmit",
    function() {
        return {
            shortcutkey: {
                autosubmit: "ctrl+13"
            },
            commands: {
                autosubmit: {
                    execCommand: function() {
                        var me = this,
                        form = domUtils.findParentByTagName(me.iframe, "form", false);
                        if (form) {
                            if (me.fireEvent("beforesubmit") === false) {
                                return
                            }
                            me.sync();
                            form.submit()
                        }
                    }
                }
            }
        }
    }); UE.plugin.register("background",
    function() {
        var me = this,
        cssRuleId = "editor_background",
        isSetColored, reg = new RegExp("body[\\s]*\\{(.+)\\}", "i");
        function stringToObj(str) {
            var obj = {},
            styles = str.split(";");
            utils.each(styles,
            function(v) {
                var index = v.indexOf(":"),
                key = utils.trim(v.substr(0, index)).toLowerCase();
                key && (obj[key] = utils.trim(v.substr(index + 1) || ""))
            });
            return obj
        }
        function setBackground(obj) {
            if (obj) {
                var styles = [];
                for (var name in obj) {
                    if (obj.hasOwnProperty(name)) {
                        styles.push(name + ":" + obj[name] + "; ")
                    }
                }
                utils.cssRule(cssRuleId, styles.length ? "body{" + styles.join("") + "}": "", me.document)
            } else {
                utils.cssRule(cssRuleId, "", me.document)
            }
        }
        var orgFn = me.hasContents;
        me.hasContents = function() {
            if (me.queryCommandValue("background")) {
                return true
            }
            return orgFn.apply(me, arguments)
        };
        return {
            bindEvents: {
                getAllHtml: function(type, headHtml) {
                    var body = this.body,
                    su = domUtils.getComputedStyle(body, "background-image"),
                    url = "";
                    if (su.indexOf(me.options.imagePath) > 0) {
                        url = su.substring(su.indexOf(me.options.imagePath), su.length - 1).replace(/"|\(|\)/ig, "")
                    } else {
                        url = su != "none" ? su.replace(/url\("?|"?\)/ig, "") : ""
                    }
                    var html = '<style type="text/css">body{';
                    var bgObj = {
                        "background-color": domUtils.getComputedStyle(body, "background-color") || "#ffffff",
                        "background-image": url ? "url(" + url + ")": "",
                        "background-repeat": domUtils.getComputedStyle(body, "background-repeat") || "",
                        "background-position": browser.ie ? domUtils.getComputedStyle(body, "background-position-x") + " " + domUtils.getComputedStyle(body, "background-position-y") : domUtils.getComputedStyle(body, "background-position"),
                        height: domUtils.getComputedStyle(body, "height")
                    };
                    for (var name in bgObj) {
                        if (bgObj.hasOwnProperty(name)) {
                            html += name + ":" + bgObj[name] + "; "
                        }
                    }
                    html += "}</style> ";
                    headHtml.push(html)
                },
                aftersetcontent: function() {
                    if (isSetColored == false) setBackground()
                }
            },
            inputRule: function(root) {
                isSetColored = false;
                utils.each(root.getNodesByTagName("p"),
                function(p) {
                    var styles = p.getAttr("data-background");
                    if (styles) {
                        isSetColored = true;
                        setBackground(stringToObj(styles));
                        p.parentNode.removeChild(p)
                    }
                })
            },
            outputRule: function(root) {
                var me = this,
                styles = (utils.cssRule(cssRuleId, me.document) || "").replace(/[\n\r]+/g, "").match(reg);
                if (styles) {
                    root.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="' + utils.trim(styles[1].replace(/"/g, "").replace(/[\s]+/g, " ")) + '"><br/></p>'))
                }
            },
            commands: {
                background: {
                    execCommand: function(cmd, obj) {
                        setBackground(obj)
                    },
                    queryCommandValue: function() {
                        var me = this,
                        styles = (utils.cssRule(cssRuleId, me.document) || "").replace(/[\n\r]+/g, "").match(reg);
                        return styles ? stringToObj(styles[1]) : null
                    },
                    notNeedUndo: true
                }
            }
        }
    }); UE.commands["imagefloat"] = {
        execCommand: function(cmd, align) {
            var me = this,
            range = me.selection.getRange();
            if (!range.collapsed) {
                var img = range.getClosedNode();
                if (img && img.tagName == "IMG") {
                    switch (align) {
                    case "left":
                    case "right":
                    case "none":
                        var pN = img.parentNode,
                        tmpNode, pre, next;
                        while (dtd.$inline[pN.tagName] || pN.tagName == "A") {
                            pN = pN.parentNode
                        }
                        tmpNode = pN;
                        if (tmpNode.tagName == "P" && domUtils.getStyle(tmpNode, "text-align") == "center") {
                            if (!domUtils.isBody(tmpNode) && domUtils.getChildCount(tmpNode,
                            function(node) {
                                return ! domUtils.isBr(node) && !domUtils.isWhitespace(node)
                            }) == 1) {
                                pre = tmpNode.previousSibling;
                                next = tmpNode.nextSibling;
                                if (pre && next && pre.nodeType == 1 && next.nodeType == 1 && pre.tagName == next.tagName && domUtils.isBlockElm(pre)) {
                                    pre.appendChild(tmpNode.firstChild);
                                    while (next.firstChild) {
                                        pre.appendChild(next.firstChild)
                                    }
                                    domUtils.remove(tmpNode);
                                    domUtils.remove(next)
                                } else {
                                    domUtils.setStyle(tmpNode, "text-align", "")
                                }
                            }
                            range.selectNode(img).select()
                        }
                        domUtils.setStyle(img, "float", align == "none" ? "": align);
                        if (align == "none") {
                            domUtils.removeAttributes(img, "align")
                        }
                        break;
                    case "center":
                        if (me.queryCommandValue("imagefloat") != "center") {
                            pN = img.parentNode;
                            domUtils.setStyle(img, "float", "");
                            domUtils.removeAttributes(img, "align");
                            tmpNode = img;
                            while (pN && domUtils.getChildCount(pN,
                            function(node) {
                                return ! domUtils.isBr(node) && !domUtils.isWhitespace(node)
                            }) == 1 && (dtd.$inline[pN.tagName] || pN.tagName == "A")) {
                                tmpNode = pN;
                                pN = pN.parentNode
                            }
                            range.setStartBefore(tmpNode).setCursor(false);
                            pN = me.document.createElement("div");
                            pN.appendChild(tmpNode);
                            domUtils.setStyle(tmpNode, "float", "");
                            me.execCommand("insertHtml", '<p id="_img_parent_tmp" style="text-align:center">' + pN.innerHTML + "</p>");
                            tmpNode = me.document.getElementById("_img_parent_tmp");
                            tmpNode.removeAttribute("id");
                            tmpNode = tmpNode.firstChild;
                            range.selectNode(tmpNode).select();
                            next = tmpNode.parentNode.nextSibling;
                            if (next && domUtils.isEmptyNode(next)) {
                                domUtils.remove(next)
                            }
                        }
                        break
                    }
                }
            }
        },
        queryCommandValue: function() {
            var range = this.selection.getRange(),
            startNode,
            floatStyle;
            if (range.collapsed) {
                return "none"
            }
            startNode = range.getClosedNode();
            if (startNode && startNode.nodeType == 1 && startNode.tagName == "IMG") {
                floatStyle = domUtils.getComputedStyle(startNode, "float") || startNode.getAttribute("align");
                if (floatStyle == "none") {
                    floatStyle = domUtils.getComputedStyle(startNode.parentNode, "text-align") == "center" ? "center": floatStyle
                }
                return {
                    left: 1,
                    right: 1,
                    center: 1
                } [floatStyle] ? floatStyle: "none"
            }
            return "none"
        },
        queryCommandState: function() {
            var range = this.selection.getRange(),
            startNode;
            if (range.collapsed) return - 1;
            startNode = range.getClosedNode();
            if (startNode && startNode.nodeType == 1 && startNode.tagName == "IMG") {
                return 0
            }
            return - 1
        }
    }; UE.commands["insertimage"] = {
        execCommand: function(cmd, opt) {
            opt = utils.isArray(opt) ? opt: [opt];
            if (!opt.length) {
                return
            }
            var me = this,
            range = me.selection.getRange(),
            img = range.getClosedNode();
            if (img && /img/i.test(img.tagName) && (img.className != "edui-faked-video" || img.className.indexOf("edui-upload-video") != -1) && !img.getAttribute("word_img")) {
                var first = opt.shift();
                var floatStyle = first["floatStyle"];
                delete first["floatStyle"];
                domUtils.setAttributes(img, first);
                me.execCommand("imagefloat", floatStyle);
                if (opt.length > 0) {
                    range.setStartAfter(img).setCursor(false, true);
                    me.execCommand("insertimage", opt)
                }
            } else {
                var html = [],
                str = "",
                ci;
                ci = opt[0];
                if (opt.length == 1) {
                    str = '<img src="' + ci.src + '" ' + (ci.kh ? ' _src="' + ci.kh + '" ': "") + (ci.id ? 'id="' + ci.id + '" ': "") + (ci.width ? 'width="' + ci.width + '" ': "") + (ci.height ? ' height="' + ci.height + '" ': "") + (ci["floatStyle"] == "left" || ci["floatStyle"] == "right" ? ' style="float:' + ci["floatStyle"] + ';"': "") + (ci.title && ci.title != "" ? ' title="' + ci.title + '"': "") + (ci.border && ci.border != "0" ? ' border="' + ci.border + '"': "") + (ci.alt && ci.alt != "" ? ' alt="' + ci.alt + '"': "") + (ci.hspace && ci.hspace != "0" ? ' hspace = "' + ci.hspace + '"': "") + (ci.vspace && ci.vspace != "0" ? ' vspace = "' + ci.vspace + '"': "") + "/>";
                    if (ci["floatStyle"] == "center") {
                        str = '<p style="text-align: center">' + str + "</p>"
                    }
                    html.push(str)
                } else {
                    for (var i = 0; ci = opt[i++];) {
                        str = "<p " + (ci["floatStyle"] == "center" ? 'style="text-align: center" ': "") + '><img src="' + ci.src + '" ' + (ci.id ? 'id="' + ci.id + '" ': "") + (ci.width ? 'width="' + ci.width + '" ': "") + (ci.kh ? ' _src="' + ci.kh + '" ': "") + (ci.height ? ' height="' + ci.height + '" ': "") + ' style="' + (ci["floatStyle"] && ci["floatStyle"] != "center" ? "float:" + ci["floatStyle"] + ";": "") + (ci.border || "") + '" ' + (ci.title ? ' title="' + ci.title + '"': "") + " /></p>";
                        html.push(str)
                    }
                }
                me.execCommand("insertHtml", html.join(""))
            }
        }
    }; UE.plugins["justify"] = function() {
        var me = this,
        block = domUtils.isBlockElm,
        defaultValue = {
            left: 1,
            right: 1,
            center: 1,
            justify: 1
        },
        doJustify = function(range, style) {
            var bookmark = range.createBookmark(),
            filterFn = function(node) {
                return node.nodeType == 1 ? node.tagName.toLowerCase() != "br" && !domUtils.isBookmarkNode(node) : !domUtils.isWhitespace(node)
            };
            range.enlarge(true);
            var bookmark2 = range.createBookmark(),
            current = domUtils.getNextDomNode(bookmark2.start, false, filterFn),
            tmpRange = range.cloneRange(),
            tmpNode;
            while (current && !(domUtils.getPosition(current, bookmark2.end) & domUtils.POSITION_FOLLOWING)) {
                if (current.nodeType == 3 || !block(current)) {
                    tmpRange.setStartBefore(current);
                    while (current && current !== bookmark2.end && !block(current)) {
                        tmpNode = current;
                        current = domUtils.getNextDomNode(current, false, null,
                        function(node) {
                            return ! block(node)
                        })
                    }
                    tmpRange.setEndAfter(tmpNode);
                    var common = tmpRange.getCommonAncestor();
                    if (!domUtils.isBody(common) && block(common)) {
                        domUtils.setStyles(common, utils.isString(style) ? {
                            "text-align": style
                        }: style);
                        current = common
                    } else {
                        var p = range.document.createElement("p");
                        domUtils.setStyles(p, utils.isString(style) ? {
                            "text-align": style
                        }: style);
                        var frag = tmpRange.extractContents();
                        p.appendChild(frag);
                        tmpRange.insertNode(p);
                        current = p
                    }
                    current = domUtils.getNextDomNode(current, false, filterFn)
                } else {
                    current = domUtils.getNextDomNode(current, true, filterFn)
                }
            }
            return range.moveToBookmark(bookmark2).moveToBookmark(bookmark)
        };
        UE.commands["justify"] = {
            execCommand: function(cmdName, align) {
                var range = this.selection.getRange(),
                txt;
                if (range.collapsed) {
                    txt = this.document.createTextNode("p");
                    range.insertNode(txt)
                }
                doJustify(range, align);
                if (txt) {
                    range.setStartBefore(txt).collapse(true);
                    domUtils.remove(txt)
                }
                range.select();
                return true
            },
            queryCommandValue: function() {
                var startNode = this.selection.getStart(),
                value = domUtils.getComputedStyle(startNode, "text-align");
                return defaultValue[value] ? value: "left"
            },
            queryCommandState: function() {
                var start = this.selection.getStart(),
                cell = start && domUtils.findParentByTagName(start, ["td", "th", "caption"], true);
                return cell ? -1 : 0
            }
        }
    }; UE.plugins["font"] = function() {
        var me = this,
        fonts = {
            forecolor: "color",
            backcolor: "background-color",
            fontsize: "font-size",
            fontfamily: "font-family",
            underline: "text-decoration",
            strikethrough: "text-decoration",
            fontborder: "border"
        },
        needCmd = {
            underline: 1,
            strikethrough: 1,
            fontborder: 1
        },
        needSetChild = {
            forecolor: "color",
            backcolor: "background-color",
            fontsize: "font-size",
            fontfamily: "font-family"
        };
        me.setOpt({
            fontfamily: [{
                name: "songti",
                val: "宋体,SimSun"
            },
            {
                name: "yahei",
                val: "微软雅黑,Microsoft YaHei"
            },
            {
                name: "kaiti",
                val: "楷体,楷体_GB2312, SimKai"
            },
            {
                name: "heiti",
                val: "黑体, SimHei"
            },
            {
                name: "lishu",
                val: "隶书, SimLi"
            },
            {
                name: "andaleMono",
                val: "andale mono"
            },
            {
                name: "arial",
                val: "arial, helvetica,sans-serif"
            },
            {
                name: "arialBlack",
                val: "arial black,avant garde"
            },
            {
                name: "comicSansMs",
                val: "comic sans ms"
            },
            {
                name: "impact",
                val: "impact,chicago"
            },
            {
                name: "timesNewRoman",
                val: "times new roman"
            }],
            fontsize: [10, 11, 12, 14, 16, 18, 20, 24, 36]
        });
        function mergeWithParent(node) {
            var parent;
            while (parent = node.parentNode) {
                if (parent.tagName == "SPAN" && domUtils.getChildCount(parent,
                function(child) {
                    return ! domUtils.isBookmarkNode(child) && !domUtils.isBr(child)
                }) == 1) {
                    parent.style.cssText += node.style.cssText;
                    domUtils.remove(node, true);
                    node = parent
                } else {
                    break
                }
            }
        }
        function mergeChild(rng, cmdName, value) {
            if (needSetChild[cmdName]) {
                rng.adjustmentBoundary();
                if (!rng.collapsed && rng.startContainer.nodeType == 1) {
                    var start = rng.startContainer.childNodes[rng.startOffset];
                    if (start && domUtils.isTagNode(start, "span")) {
                        var bk = rng.createBookmark();
                        utils.each(domUtils.getElementsByTagName(start, "span"),
                        function(span) {
                            if (!span.parentNode || domUtils.isBookmarkNode(span)) return;
                            if (cmdName == "backcolor" && domUtils.getComputedStyle(span, "background-color").toLowerCase() === value) {
                                return
                            }
                            domUtils.removeStyle(span, needSetChild[cmdName]);
                            if (span.style.cssText.replace(/^\s+$/, "").length == 0) {
                                domUtils.remove(span, true)
                            }
                        });
                        rng.moveToBookmark(bk)
                    }
                }
            }
        }
        function mergesibling(rng, cmdName, value) {
            var collapsed = rng.collapsed,
            bk = rng.createBookmark(),
            common;
            if (collapsed) {
                common = bk.start.parentNode;
                while (dtd.$inline[common.tagName]) {
                    common = common.parentNode
                }
            } else {
                common = domUtils.getCommonAncestor(bk.start, bk.end)
            }
            utils.each(domUtils.getElementsByTagName(common, "span"),
            function(span) {
                if (!span.parentNode || domUtils.isBookmarkNode(span)) return;
                if (/\s*border\s*:\s*none;?\s*/i.test(span.style.cssText)) {
                    if (/^\s*border\s*:\s*none;?\s*$/.test(span.style.cssText)) {
                        domUtils.remove(span, true)
                    } else {
                        domUtils.removeStyle(span, "border")
                    }
                    return
                }
                if (/border/i.test(span.style.cssText) && span.parentNode.tagName == "SPAN" && /border/i.test(span.parentNode.style.cssText)) {
                    span.style.cssText = span.style.cssText.replace(/border[^:]*:[^;]+;?/gi, "")
                }
                if (! (cmdName == "fontborder" && value == "none")) {
                    var next = span.nextSibling;
                    while (next && next.nodeType == 1 && next.tagName == "SPAN") {
                        if (domUtils.isBookmarkNode(next) && cmdName == "fontborder") {
                            span.appendChild(next);
                            next = span.nextSibling;
                            continue
                        }
                        if (next.style.cssText == span.style.cssText) {
                            domUtils.moveChild(next, span);
                            domUtils.remove(next)
                        }
                        if (span.nextSibling === next) break;
                        next = span.nextSibling
                    }
                }
                mergeWithParent(span);
                if (browser.ie && browser.version > 8) {
                    var parent = domUtils.findParent(span,
                    function(n) {
                        return n.tagName == "SPAN" && /background-color/.test(n.style.cssText)
                    });
                    if (parent && !/background-color/.test(span.style.cssText)) {
                        span.style.backgroundColor = parent.style.backgroundColor
                    }
                }
            });
            rng.moveToBookmark(bk);
            mergeChild(rng, cmdName, value)
        }
        me.addInputRule(function(root) {
            utils.each(root.getNodesByTagName("u s del font strike"),
            function(node) {
                if (node.tagName == "font") {
                    var cssStyle = [];
                    for (var p in node.attrs) {
                        switch (p) {
                        case "size":
                            cssStyle.push("font-size:" + ({
                                1 : "10",
                                2 : "12",
                                3 : "16",
                                4 : "18",
                                5 : "24",
                                6 : "32",
                                7 : "48"
                            } [node.attrs[p]] || node.attrs[p]) + "px");
                            break;
                        case "color":
                            cssStyle.push("color:" + node.attrs[p]);
                            break;
                        case "face":
                            cssStyle.push("font-family:" + node.attrs[p]);
                            break;
                        case "style":
                            cssStyle.push(node.attrs[p])
                        }
                    }
                    node.attrs = {
                        style: cssStyle.join(";")
                    }
                } else {
                    var val = node.tagName == "u" ? "underline": "line-through";
                    node.attrs = {
                        style: (node.getAttr("style") || "") + "text-decoration:" + val + ";"
                    }
                }
                node.tagName = "span"
            })
        });
        for (var p in fonts) { (function(cmd, style) {
                UE.commands[cmd] = {
                    execCommand: function(cmdName, value) {
                        value = value || (this.queryCommandState(cmdName) ? "none": cmdName == "underline" ? "underline": cmdName == "fontborder" ? "1px solid #000": "line-through");
                        var me = this,
                        range = this.selection.getRange(),
                        text;
                        if (value == "default") {
                            if (range.collapsed) {
                                text = me.document.createTextNode("font");
                                range.insertNode(text).select()
                            }
                            me.execCommand("removeFormat", "span,a", style);
                            if (text) {
                                range.setStartBefore(text).collapse(true);
                                domUtils.remove(text)
                            }
                            mergesibling(range, cmdName, value);
                            range.select()
                        } else {
                            if (!range.collapsed) {
                                if (needCmd[cmd] && me.queryCommandValue(cmd)) {
                                    me.execCommand("removeFormat", "span,a", style)
                                }
                                range = me.selection.getRange();
                                range.applyInlineStyle("span", {
                                    style: style + ":" + value
                                });
                                mergesibling(range, cmdName, value);
                                range.select()
                            } else {
                                var span = domUtils.findParentByTagName(range.startContainer, "span", true);
                                text = me.document.createTextNode("font");
                                if (span && !span.children.length && !span[browser.ie ? "innerText": "textContent"].replace(fillCharReg, "").length) {
                                    range.insertNode(text);
                                    if (needCmd[cmd]) {
                                        range.selectNode(text).select();
                                        me.execCommand("removeFormat", "span,a", style, null);
                                        span = domUtils.findParentByTagName(text, "span", true);
                                        range.setStartBefore(text)
                                    }
                                    span && (span.style.cssText += ";" + style + ":" + value);
                                    range.collapse(true).select()
                                } else {
                                    range.insertNode(text);
                                    range.selectNode(text).select();
                                    span = range.document.createElement("span");
                                    if (needCmd[cmd]) {
                                        if (domUtils.findParentByTagName(text, "a", true)) {
                                            range.setStartBefore(text).setCursor();
                                            domUtils.remove(text);
                                            return
                                        }
                                        me.execCommand("removeFormat", "span,a", style)
                                    }
                                    span.style.cssText = style + ":" + value;
                                    text.parentNode.insertBefore(span, text);
                                    if (!browser.ie || browser.ie && browser.version == 9) {
                                        var spanParent = span.parentNode;
                                        while (!domUtils.isBlockElm(spanParent)) {
                                            if (spanParent.tagName == "SPAN") {
                                                span.style.cssText = spanParent.style.cssText + ";" + span.style.cssText
                                            }
                                            spanParent = spanParent.parentNode
                                        }
                                    }
                                    if (opera) {
                                        setTimeout(function() {
                                            range.setStart(span, 0).collapse(true);
                                            mergesibling(range, cmdName, value);
                                            range.select()
                                        })
                                    } else {
                                        range.setStart(span, 0).collapse(true);
                                        mergesibling(range, cmdName, value);
                                        range.select()
                                    }
                                }
                                domUtils.remove(text)
                            }
                        }
                        return true
                    },
                    queryCommandValue: function(cmdName) {
                        var startNode = this.selection.getStart();
                        if (cmdName == "underline" || cmdName == "strikethrough") {
                            var tmpNode = startNode,
                            value;
                            while (tmpNode && !domUtils.isBlockElm(tmpNode) && !domUtils.isBody(tmpNode)) {
                                if (tmpNode.nodeType == 1) {
                                    value = domUtils.getComputedStyle(tmpNode, style);
                                    if (value != "none") {
                                        return value
                                    }
                                }
                                tmpNode = tmpNode.parentNode
                            }
                            return "none"
                        }
                        if (cmdName == "fontborder") {
                            var tmp = startNode,
                            val;
                            while (tmp && dtd.$inline[tmp.tagName]) {
                                if (val = domUtils.getComputedStyle(tmp, "border")) {
                                    if (/1px/.test(val) && /solid/.test(val)) {
                                        return val
                                    }
                                }
                                tmp = tmp.parentNode
                            }
                            return ""
                        }
                        if (cmdName == "FontSize") {
                            var styleVal = domUtils.getComputedStyle(startNode, style),
                            tmp = /^([\d\.]+)(\w+)$/.exec(styleVal);
                            if (tmp) {
                                return Math.floor(tmp[1]) + tmp[2]
                            }
                            return styleVal
                        }
                        return domUtils.getComputedStyle(startNode, style)
                    },
                    queryCommandState: function(cmdName) {
                        if (!needCmd[cmdName]) return 0;
                        var val = this.queryCommandValue(cmdName);
                        if (cmdName == "fontborder") {
                            return /1px/.test(val) && /solid/.test(val)
                        } else {
                            return cmdName == "underline" ? /underline/.test(val) : /line\-through/.test(val)
                        }
                    }
                }
            })(p, fonts[p])
        }
    }; UE.plugins["link"] = function() {
        function optimize(range) {
            var start = range.startContainer,
            end = range.endContainer;
            if (start = domUtils.findParentByTagName(start, "a", true)) {
                range.setStartBefore(start)
            }
            if (end = domUtils.findParentByTagName(end, "a", true)) {
                range.setEndAfter(end)
            }
        }
        UE.commands["unlink"] = {
            execCommand: function() {
                var range = this.selection.getRange(),
                bookmark;
                if (range.collapsed && !domUtils.findParentByTagName(range.startContainer, "a", true)) {
                    return
                }
                bookmark = range.createBookmark();
                optimize(range);
                range.removeInlineStyle("a").moveToBookmark(bookmark).select()
            },
            queryCommandState: function() {
                return ! this.highlight && this.queryCommandValue("link") ? 0 : -1
            }
        };
        function doLink(range, opt, me) {
            var rngClone = range.cloneRange(),
            link = me.queryCommandValue("link");
            optimize(range = range.adjustmentBoundary());
            var start = range.startContainer;
            if (start.nodeType == 1 && link) {
                start = start.childNodes[range.startOffset];
                if (start && start.nodeType == 1 && start.tagName == "A" && /^(?:https?|ftp|file)\s*:\s*\/\//.test(start[browser.ie ? "innerText": "textContent"])) {
                    start[browser.ie ? "innerText": "textContent"] = utils.html(opt.textValue || opt.href)
                }
            }
            if (!rngClone.collapsed || link) {
                range.removeInlineStyle("a");
                rngClone = range.cloneRange()
            }
            if (rngClone.collapsed) {
                var a = range.document.createElement("a"),
                text = "";
                if (opt.textValue) {
                    text = utils.html(opt.textValue);
                    delete opt.textValue
                } else {
                    text = utils.html(opt.href)
                }
                domUtils.setAttributes(a, opt);
                start = domUtils.findParentByTagName(rngClone.startContainer, "a", true);
                if (start && domUtils.isInNodeEndBoundary(rngClone, start)) {
                    range.setStartAfter(start).collapse(true)
                }
                a[browser.ie ? "innerText": "textContent"] = text;
                range.insertNode(a).selectNode(a)
            } else {
                range.applyInlineStyle("a", opt)
            }
        }
        UE.commands["link"] = {
            execCommand: function(cmdName, opt) {
                var range;
                opt.sg && (opt.sg = utils.unhtml(opt.sg, /[<">]/g));
                opt.href && (opt.href = utils.unhtml(opt.href, /[<">]/g));
                opt.textValue && (opt.textValue = utils.unhtml(opt.textValue, /[<">]/g));
                doLink(range = this.selection.getRange(), opt, this);
                range.collapse().select(true)
            },
            queryCommandValue: function() {
                var range = this.selection.getRange(),
                node;
                if (range.collapsed) {
                    node = range.startContainer;
                    node = node.nodeType == 1 ? node: node.parentNode;
                    if (node && (node = domUtils.findParentByTagName(node, "a", true)) && !domUtils.isInNodeEndBoundary(range, node)) {
                        return node
                    }
                } else {
                    range.shrinkBoundary();
                    var start = range.startContainer.nodeType == 3 || !range.startContainer.childNodes[range.startOffset] ? range.startContainer: range.startContainer.childNodes[range.startOffset],
                    end = range.endContainer.nodeType == 3 || range.endOffset == 0 ? range.endContainer: range.endContainer.childNodes[range.endOffset - 1],
                    common = range.getCommonAncestor();
                    node = domUtils.findParentByTagName(common, "a", true);
                    if (!node && common.nodeType == 1) {
                        var as = common.getElementsByTagName("a"),
                        ps,
                        pe;
                        for (var i = 0,
                        ci; ci = as[i++];) {
                            ps = domUtils.getPosition(ci, start),
                            pe = domUtils.getPosition(ci, end);
                            if ((ps & domUtils.POSITION_FOLLOWING || ps & domUtils.POSITION_CONTAINS) && (pe & domUtils.POSITION_PRECEDING || pe & domUtils.POSITION_CONTAINS)) {
                                node = ci;
                                break
                            }
                        }
                    }
                    return node
                }
            },
            queryCommandState: function() {
                var img = this.selection.getRange().getClosedNode(),
                flag = img && (img.className == "edui-faked-video" || img.className.indexOf("edui-upload-video") != -1);
                return flag ? -1 : 0
            }
        }
    }; UE.plugins["insertframe"] = function() {
        var me = this;
        function deleteIframe() {
            me.ij && delete me.ij
        }
        me.addListener("selectionchange",
        function() {
            deleteIframe()
        })
    }; UE.plugins["removeformat"] = function() {
        var me = this;
        me.setOpt({
            removeFormatTags: "b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",
            removeFormatAttributes: "class,style,lang,width,height,align,hspace,valign"
        });
        me.commands["removeformat"] = {
            execCommand: function(cmdName, tags, style, attrs, notIncludeA) {
                var tagReg = new RegExp("^(?:" + (tags || this.options.removeFormatTags).replace(/,/g, "|") + ")$", "i"),
                removeFormatAttributes = style ? [] : (attrs || this.options.removeFormatAttributes).split(","),
                range = new dom.Range(this.document),
                bookmark,
                node,
                parent,
                filter = function(node) {
                    return node.nodeType == 1
                };
                function isRedundantSpan(node) {
                    if (node.nodeType == 3 || node.tagName.toLowerCase() != "span") {
                        return 0
                    }
                    if (browser.ie) {
                        var attrs = node.attributes;
                        if (attrs.length) {
                            for (var i = 0,
                            l = attrs.length; i < l; i++) {
                                if (attrs[i].specified) {
                                    return 0
                                }
                            }
                            return 1
                        }
                    }
                    return ! node.attributes.length
                }
                function doRemove(range) {
                    var bookmark1 = range.createBookmark();
                    if (range.collapsed) {
                        range.enlarge(true)
                    }
                    if (!notIncludeA) {
                        var aNode = domUtils.findParentByTagName(range.startContainer, "a", true);
                        if (aNode) {
                            range.setStartBefore(aNode)
                        }
                        aNode = domUtils.findParentByTagName(range.endContainer, "a", true);
                        if (aNode) {
                            range.setEndAfter(aNode)
                        }
                    }
                    bookmark = range.createBookmark();
                    node = bookmark.start;
                    while ((parent = node.parentNode) && !domUtils.isBlockElm(parent)) {
                        domUtils.breakParent(node, parent);
                        domUtils.clearEmptySibling(node)
                    }
                    if (bookmark.end) {
                        node = bookmark.end;
                        while ((parent = node.parentNode) && !domUtils.isBlockElm(parent)) {
                            domUtils.breakParent(node, parent);
                            domUtils.clearEmptySibling(node)
                        }
                        var current = domUtils.getNextDomNode(bookmark.start, false, filter),
                        next;
                        while (current) {
                            if (current == bookmark.end) {
                                break
                            }
                            next = domUtils.getNextDomNode(current, true, filter);
                            if (!dtd.$empty[current.tagName.toLowerCase()] && !domUtils.isBookmarkNode(current)) {
                                if (tagReg.test(current.tagName)) {
                                    if (style) {
                                        domUtils.removeStyle(current, style);
                                        if (isRedundantSpan(current) && style != "text-decoration") {
                                            domUtils.remove(current, true)
                                        }
                                    } else {
                                        domUtils.remove(current, true)
                                    }
                                } else {
                                    if (!dtd.$tableContent[current.tagName] && !dtd.$list[current.tagName]) {
                                        domUtils.removeAttributes(current, removeFormatAttributes);
                                        if (isRedundantSpan(current)) {
                                            domUtils.remove(current, true)
                                        }
                                    }
                                }
                            }
                            current = next
                        }
                    }
                    var pN = bookmark.start.parentNode;
                    if (domUtils.isBlockElm(pN) && !dtd.$tableContent[pN.tagName] && !dtd.$list[pN.tagName]) {
                        domUtils.removeAttributes(pN, removeFormatAttributes)
                    }
                    pN = bookmark.end.parentNode;
                    if (bookmark.end && domUtils.isBlockElm(pN) && !dtd.$tableContent[pN.tagName] && !dtd.$list[pN.tagName]) {
                        domUtils.removeAttributes(pN, removeFormatAttributes)
                    }
                    range.moveToBookmark(bookmark).moveToBookmark(bookmark1);
                    var node = range.startContainer,
                    tmp, collapsed = range.collapsed;
                    while (node.nodeType == 1 && domUtils.isEmptyNode(node) && dtd.$removeEmpty[node.tagName]) {
                        tmp = node.parentNode;
                        range.setStartBefore(node);
                        if (range.startContainer === range.endContainer) {
                            range.endOffset--
                        }
                        domUtils.remove(node);
                        node = tmp
                    }
                    if (!collapsed) {
                        node = range.endContainer;
                        while (node.nodeType == 1 && domUtils.isEmptyNode(node) && dtd.$removeEmpty[node.tagName]) {
                            tmp = node.parentNode;
                            range.setEndBefore(node);
                            domUtils.remove(node);
                            node = tmp
                        }
                    }
                }
                range = this.selection.getRange();
                doRemove(range);
                range.select()
            }
        }
    }; UE.plugins["blockquote"] = function() {
        var me = this;
        function getObj(editor) {
            return domUtils.filterNodeList(editor.selection.getStartElementPath(), "blockquote")
        }
        me.commands["blockquote"] = {
            execCommand: function(cmdName, attrs) {
                var range = this.selection.getRange(),
                obj = getObj(this),
                blockquote = dtd.blockquote,
                bookmark = range.createBookmark();
                if (obj) {
                    var start = range.startContainer,
                    startBlock = domUtils.isBlockElm(start) ? start: domUtils.findParent(start,
                    function(node) {
                        return domUtils.isBlockElm(node)
                    }),
                    end = range.endContainer,
                    endBlock = domUtils.isBlockElm(end) ? end: domUtils.findParent(end,
                    function(node) {
                        return domUtils.isBlockElm(node)
                    });
                    startBlock = domUtils.findParentByTagName(startBlock, "li", true) || startBlock;
                    endBlock = domUtils.findParentByTagName(endBlock, "li", true) || endBlock;
                    if (startBlock.tagName == "LI" || startBlock.tagName == "TD" || startBlock === obj || domUtils.isBody(startBlock)) {
                        domUtils.remove(obj, true)
                    } else {
                        domUtils.breakParent(startBlock, obj)
                    }
                    if (startBlock !== endBlock) {
                        obj = domUtils.findParentByTagName(endBlock, "blockquote");
                        if (obj) {
                            if (endBlock.tagName == "LI" || endBlock.tagName == "TD" || domUtils.isBody(endBlock)) {
                                obj.parentNode && domUtils.remove(obj, true)
                            } else {
                                domUtils.breakParent(endBlock, obj)
                            }
                        }
                    }
                    var blockquotes = domUtils.getElementsByTagName(this.document, "blockquote");
                    for (var i = 0,
                    bi; bi = blockquotes[i++];) {
                        if (!bi.childNodes.length) {
                            domUtils.remove(bi)
                        } else if (domUtils.getPosition(bi, startBlock) & domUtils.POSITION_FOLLOWING && domUtils.getPosition(bi, endBlock) & domUtils.POSITION_PRECEDING) {
                            domUtils.remove(bi, true)
                        }
                    }
                } else {
                    var tmpRange = range.cloneRange(),
                    node = tmpRange.startContainer.nodeType == 1 ? tmpRange.startContainer: tmpRange.startContainer.parentNode,
                    preNode = node,
                    doEnd = 1;
                    while (1) {
                        if (domUtils.isBody(node)) {
                            if (preNode !== node) {
                                if (range.collapsed) {
                                    tmpRange.selectNode(preNode);
                                    doEnd = 0
                                } else {
                                    tmpRange.setStartBefore(preNode)
                                }
                            } else {
                                tmpRange.setStart(node, 0)
                            }
                            break
                        }
                        if (!blockquote[node.tagName]) {
                            if (range.collapsed) {
                                tmpRange.selectNode(preNode)
                            } else {
                                tmpRange.setStartBefore(preNode)
                            }
                            break
                        }
                        preNode = node;
                        node = node.parentNode
                    }
                    if (doEnd) {
                        preNode = node = node = tmpRange.endContainer.nodeType == 1 ? tmpRange.endContainer: tmpRange.endContainer.parentNode;
                        while (1) {
                            if (domUtils.isBody(node)) {
                                if (preNode !== node) {
                                    tmpRange.setEndAfter(preNode)
                                } else {
                                    tmpRange.setEnd(node, node.childNodes.length)
                                }
                                break
                            }
                            if (!blockquote[node.tagName]) {
                                tmpRange.setEndAfter(preNode);
                                break
                            }
                            preNode = node;
                            node = node.parentNode
                        }
                    }
                    node = range.document.createElement("blockquote");
                    domUtils.setAttributes(node, attrs);
                    node.appendChild(tmpRange.extractContents());
                    tmpRange.insertNode(node);
                    var childs = domUtils.getElementsByTagName(node, "blockquote");
                    for (var i = 0,
                    ci; ci = childs[i++];) {
                        if (ci.parentNode) {
                            domUtils.remove(ci, true)
                        }
                    }
                }
                range.moveToBookmark(bookmark).select()
            },
            queryCommandState: function() {
                return getObj(this) ? 1 : 0
            }
        }
    }; UE.commands["touppercase"] = UE.commands["tolowercase"] = {
        execCommand: function(cmd) {
            var me = this;
            var rng = me.selection.getRange();
            if (rng.collapsed) {
                return rng
            }
            var bk = rng.createBookmark(),
            bkEnd = bk.end,
            filterFn = function(node) {
                return ! domUtils.isBr(node) && !domUtils.isWhitespace(node)
            },
            curNode = domUtils.getNextDomNode(bk.start, false, filterFn);
            while (curNode && domUtils.getPosition(curNode, bkEnd) & domUtils.POSITION_PRECEDING) {
                if (curNode.nodeType == 3) {
                    curNode.nodeValue = curNode.nodeValue[cmd == "touppercase" ? "toUpperCase": "toLowerCase"]()
                }
                curNode = domUtils.getNextDomNode(curNode, true, filterFn);
                if (curNode === bkEnd) {
                    break
                }
            }
            rng.moveToBookmark(bk).select()
        }
    }; UE.commands["indent"] = {
        execCommand: function() {
            var me = this,
            value = me.queryCommandState("indent") ? "0em": me.options.indentValue || "2em";
            me.execCommand("Paragraph", "p", {
                style: "text-indent:" + value
            })
        },
        queryCommandState: function() {
            var pN = domUtils.filterNodeList(this.selection.getStartElementPath(), "p h1 h2 h3 h4 h5 h6");
            return pN && pN.style.textIndent && parseInt(pN.style.textIndent) ? 1 : 0
        }
    }; UE.commands["print"] = {
        execCommand: function() {
            this.window.print()
        },
        notNeedUndo: 1
    }; UE.plugins["selectall"] = function() {
        var me = this;
        me.commands["selectall"] = {
            execCommand: function() {
                var me = this,
                body = me.body,
                range = me.selection.getRange();
                range.selectNodeContents(body);
                if (domUtils.isEmptyBlock(body)) {
                    if (browser.opera && body.firstChild && body.firstChild.nodeType == 1) {
                        range.setStartAtFirst(body.firstChild)
                    }
                    range.collapse(true)
                }
                range.select(true)
            },
            notNeedUndo: 1
        };
        me.addshortcutkey({
            selectAll: "ctrl+65"
        })
    }; UE.plugins["paragraph"] = function() {
        var me = this,
        block = domUtils.isBlockElm,
        notExchange = ["TD", "LI", "PRE"],
        doParagraph = function(range, style, attrs, sourceCmdName) {
            var bookmark = range.createBookmark(),
            filterFn = function(node) {
                return node.nodeType == 1 ? node.tagName.toLowerCase() != "br" && !domUtils.isBookmarkNode(node) : !domUtils.isWhitespace(node)
            },
            para;
            range.enlarge(true);
            var bookmark2 = range.createBookmark(),
            current = domUtils.getNextDomNode(bookmark2.start, false, filterFn),
            tmpRange = range.cloneRange(),
            tmpNode;
            while (current && !(domUtils.getPosition(current, bookmark2.end) & domUtils.POSITION_FOLLOWING)) {
                if (current.nodeType == 3 || !block(current)) {
                    tmpRange.setStartBefore(current);
                    while (current && current !== bookmark2.end && !block(current)) {
                        tmpNode = current;
                        current = domUtils.getNextDomNode(current, false, null,
                        function(node) {
                            return ! block(node)
                        })
                    }
                    tmpRange.setEndAfter(tmpNode);
                    para = range.document.createElement(style);
                    if (attrs) {
                        domUtils.setAttributes(para, attrs);
                        if (sourceCmdName && sourceCmdName == "customstyle" && attrs.style) {
                            para.style.cssText = attrs.style
                        }
                    }
                    para.appendChild(tmpRange.extractContents());
                    if (domUtils.isEmptyNode(para)) {
                        domUtils.fillChar(range.document, para)
                    }
                    tmpRange.insertNode(para);
                    var parent = para.parentNode;
                    if (block(parent) && !domUtils.isBody(para.parentNode) && utils.indexOf(notExchange, parent.tagName) == -1) {
                        if (! (sourceCmdName && sourceCmdName == "customstyle")) {
                            parent.getAttribute("dir") && para.setAttribute("dir", parent.getAttribute("dir"));
                            parent.style.cssText && (para.style.cssText = parent.style.cssText + ";" + para.style.cssText);
                            parent.style.textAlign && !para.style.textAlign && (para.style.textAlign = parent.style.textAlign);
                            parent.style.textIndent && !para.style.textIndent && (para.style.textIndent = parent.style.textIndent);
                            parent.style.padding && !para.style.padding && (para.style.padding = parent.style.padding)
                        }
                        if (attrs && /h\d/i.test(parent.tagName) && !/h\d/i.test(para.tagName)) {
                            domUtils.setAttributes(parent, attrs);
                            if (sourceCmdName && sourceCmdName == "customstyle" && attrs.style) {
                                parent.style.cssText = attrs.style
                            }
                            domUtils.remove(para, true);
                            para = parent
                        } else {
                            domUtils.remove(para.parentNode, true)
                        }
                    }
                    if (utils.indexOf(notExchange, parent.tagName) != -1) {
                        current = parent
                    } else {
                        current = para
                    }
                    current = domUtils.getNextDomNode(current, false, filterFn)
                } else {
                    current = domUtils.getNextDomNode(current, true, filterFn)
                }
            }
            return range.moveToBookmark(bookmark2).moveToBookmark(bookmark)
        };
        me.setOpt("paragraph", {
            p: "",
            h1: "",
            h2: "",
            h3: "",
            h4: "",
            h5: "",
            h6: ""
        });
        me.commands["paragraph"] = {
            execCommand: function(cmdName, style, attrs, sourceCmdName) {
                var range = this.selection.getRange();
                if (range.collapsed) {
                    var txt = this.document.createTextNode("p");
                    range.insertNode(txt);
                    if (browser.ie) {
                        var node = txt.previousSibling;
                        if (node && domUtils.isWhitespace(node)) {
                            domUtils.remove(node)
                        }
                        node = txt.nextSibling;
                        if (node && domUtils.isWhitespace(node)) {
                            domUtils.remove(node)
                        }
                    }
                }
                range = doParagraph(range, style, attrs, sourceCmdName);
                if (txt) {
                    range.setStartBefore(txt).collapse(true);
                    pN = txt.parentNode;
                    domUtils.remove(txt);
                    if (domUtils.isBlockElm(pN) && domUtils.isEmptyNode(pN)) {
                        domUtils.fillNode(this.document, pN)
                    }
                }
                if (browser.gecko && range.collapsed && range.startContainer.nodeType == 1) {
                    var child = range.startContainer.childNodes[range.startOffset];
                    if (child && child.nodeType == 1 && child.tagName.toLowerCase() == style) {
                        range.setStart(child, 0).collapse(true)
                    }
                }
                range.select();
                return true
            },
            queryCommandValue: function() {
                var node = domUtils.filterNodeList(this.selection.getStartElementPath(), "p h1 h2 h3 h4 h5 h6");
                return node ? node.tagName.toLowerCase() : ""
            }
        }
    }; (function() {
        var block = domUtils.isBlockElm,
        getObj = function(editor) {
            return domUtils.filterNodeList(editor.selection.getStartElementPath(),
            function(n) {
                return n.getAttribute("dir")
            })
        },
        doDirectionality = function(range, editor, forward) {
            var bookmark, filterFn = function(node) {
                return node.nodeType == 1 ? !domUtils.isBookmarkNode(node) : !domUtils.isWhitespace(node)
            },
            obj = getObj(editor);
            if (obj && range.collapsed) {
                obj.setAttribute("dir", forward);
                return range
            }
            bookmark = range.createBookmark();
            range.enlarge(true);
            var bookmark2 = range.createBookmark(),
            current = domUtils.getNextDomNode(bookmark2.start, false, filterFn),
            tmpRange = range.cloneRange(),
            tmpNode;
            while (current && !(domUtils.getPosition(current, bookmark2.end) & domUtils.POSITION_FOLLOWING)) {
                if (current.nodeType == 3 || !block(current)) {
                    tmpRange.setStartBefore(current);
                    while (current && current !== bookmark2.end && !block(current)) {
                        tmpNode = current;
                        current = domUtils.getNextDomNode(current, false, null,
                        function(node) {
                            return ! block(node)
                        })
                    }
                    tmpRange.setEndAfter(tmpNode);
                    var common = tmpRange.getCommonAncestor();
                    if (!domUtils.isBody(common) && block(common)) {
                        common.setAttribute("dir", forward);
                        current = common
                    } else {
                        var p = range.document.createElement("p");
                        p.setAttribute("dir", forward);
                        var frag = tmpRange.extractContents();
                        p.appendChild(frag);
                        tmpRange.insertNode(p);
                        current = p
                    }
                    current = domUtils.getNextDomNode(current, false, filterFn)
                } else {
                    current = domUtils.getNextDomNode(current, true, filterFn)
                }
            }
            return range.moveToBookmark(bookmark2).moveToBookmark(bookmark)
        };
        UE.commands["directionality"] = {
            execCommand: function(cmdName, forward) {
                var range = this.selection.getRange();
                if (range.collapsed) {
                    var txt = this.document.createTextNode("d");
                    range.insertNode(txt)
                }
                doDirectionality(range, this, forward);
                if (txt) {
                    range.setStartBefore(txt).collapse(true);
                    domUtils.remove(txt)
                }
                range.select();
                return true
            },
            queryCommandValue: function() {
                var node = getObj(this);
                return node ? node.getAttribute("dir") : "ltr"
            }
        }
    })(); UE.plugins["horizontal"] = function() {
        var me = this;
        me.commands["horizontal"] = {
            execCommand: function(cmdName) {
                var me = this;
                if (me.queryCommandState(cmdName) !== -1) {
                    me.execCommand("insertHtml", "<hr>");
                    var range = me.selection.getRange(),
                    start = range.startContainer;
                    if (start.nodeType == 1 && !start.childNodes[range.startOffset]) {
                        var tmp;
                        if (tmp = start.childNodes[range.startOffset - 1]) {
                            if (tmp.nodeType == 1 && tmp.tagName == "HR") {
                                if (me.options.enterTag == "p") {
                                    tmp = me.document.createElement("p");
                                    range.insertNode(tmp);
                                    range.setStart(tmp, 0).setCursor()
                                } else {
                                    tmp = me.document.createElement("br");
                                    range.insertNode(tmp);
                                    range.setStartBefore(tmp).setCursor()
                                }
                            }
                        }
                    }
                    return true
                }
            },
            queryCommandState: function() {
                return domUtils.filterNodeList(this.selection.getStartElementPath(), "table") ? -1 : 0
            }
        };
        me.addListener("delkeydown",
        function(name, evt) {
            var rng = this.selection.getRange();
            rng.txtToElmBoundary(true);
            if (domUtils.isStartInblock(rng)) {
                var tmpNode = rng.startContainer;
                var pre = tmpNode.previousSibling;
                if (pre && domUtils.isTagNode(pre, "hr")) {
                    domUtils.remove(pre);
                    rng.select();
                    domUtils.preventDefault(evt);
                    return true
                }
            }
        })
    }; UE.plugins["rowspacing"] = function() {
        var me = this;
        me.setOpt({
            rowspacingtop: ["5", "10", "15", "20", "25"],
            rowspacingbottom: ["5", "10", "15", "20", "25"]
        });
        me.commands["rowspacing"] = {
            execCommand: function(cmdName, value, dir) {
                this.execCommand("paragraph", "p", {
                    style: "margin-" + dir + ":" + value + "px"
                });
                return true
            },
            queryCommandValue: function(cmdName, dir) {
                var pN = domUtils.filterNodeList(this.selection.getStartElementPath(),
                function(node) {
                    return domUtils.isBlockElm(node)
                }),
                value;
                if (pN) {
                    value = domUtils.getComputedStyle(pN, "margin-" + dir).replace(/[^\d]/g, "");
                    return ! value ? 0 : value
                }
                return 0
            }
        }
    }; UE.plugins["lineheight"] = function() {
        var me = this;
        me.setOpt({
            lineheight: ["1", "1.5", "1.75", "2", "3", "4", "5"]
        });
        me.commands["lineheight"] = {
            execCommand: function(cmdName, value) {
                this.execCommand("paragraph", "p", {
                    style: "line-height:" + (value == "1" ? "normal": value + "em")
                });
                return true
            },
            queryCommandValue: function() {
                var pN = domUtils.filterNodeList(this.selection.getStartElementPath(),
                function(node) {
                    return domUtils.isBlockElm(node)
                });
                if (pN) {
                    var value = domUtils.getComputedStyle(pN, "line-height");
                    return value == "normal" ? 1 : value.replace(/[^\d.]*/ig, "")
                }
            }
        }
    }; UE.plugins["insertcode"] = function() {
        var me = this;
        me.ready(function() {
            utils.cssRule("code", "code{display: block;white-space: pre;margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}", me.document)
        });
        me.setOpt("insertcode", {
            as3: "ActionScript3",
            bash: "Bash/Shell",
            cpp: "C/C++",
            css: "Css",
            cf: "CodeFunction",
            "c#": "C#",
            delphi: "Delphi",
            diff: "Diff",
            erlang: "Erlang",
            groovy: "Groovy",
            html: "Html",
            java: "Java",
            jfx: "JavaFx",
            js: "Javascript",
            pl: "Perl",
            php: "Php",
            plain: "Plain Text",
            ps: "PowerShell",
            python: "Python",
            ruby: "Ruby",
            scala: "Scala",
            sql: "Sql",
            vb: "Vb",
            xml: "Xml"
        });
        me.commands["insertcode"] = {
            execCommand: function(cmd, lang) {
                var me = this,
                rng = me.selection.getRange(),
                codeNode = domUtils.findParentByTagName(rng.startContainer, "code", true);
                if (codeNode) {
                    codeNode.className = "brush:" + lang + ";toolbar:false;"
                } else {
                    var code = "";
                    if (rng.collapsed) {
                        code = browser.ie ? browser.version > 8 ? "": "&nbsp;": "<br/>"
                    } else {
                        var frag = rng.extractContents();
                        var div = me.document.createElement("div");
                        div.appendChild(frag);
                        utils.each(UE.filterNode(UE.htmlparser(div.innerHTML.replace(/[\r\t]/g, "")), me.options.filterTxtRules).children,
                        function(node) {
                            if (browser.ie && browser.version > 8) {
                                if (node.type == "element") {
                                    if (node.tagName == "br") {
                                        code += "\n"
                                    } else if (!dtd.$empty[node.tagName]) {
                                        utils.each(node.children,
                                        function(cn) {
                                            if (cn.type == "element") {
                                                if (cn.tagName == "br") {
                                                    code += "\n"
                                                } else if (!dtd.$empty[node.tagName]) {
                                                    code += cn.innerText()
                                                }
                                            } else {
                                                code += cn.data
                                            }
                                        });
                                        if (!/\n$/.test(code)) {
                                            code += "\n"
                                        }
                                    }
                                } else {
                                    code += node.data + "\n"
                                }
                                if (!node.nextSibling() && /\n$/.test(code)) {
                                    code = code.replace(/\n$/, "")
                                }
                            } else {
                                if (browser.ie) {
                                    if (node.type == "element") {
                                        if (node.tagName == "br") {
                                            code += "<br>"
                                        } else if (!dtd.$empty[node.tagName]) {
                                            utils.each(node.children,
                                            function(cn) {
                                                if (cn.type == "element") {
                                                    if (cn.tagName == "br") {
                                                        code += "<br>"
                                                    } else if (!dtd.$empty[node.tagName]) {
                                                        code += cn.innerText()
                                                    }
                                                } else {
                                                    code += cn.data
                                                }
                                            });
                                            if (!/br>$/.test(code)) {
                                                code += "<br>"
                                            }
                                        }
                                    } else {
                                        code += node.data + "<br>"
                                    }
                                    if (!node.nextSibling() && /<br>$/.test(code)) {
                                        code = code.replace(/<br>$/, "")
                                    }
                                } else {
                                    code += node.type == "element" ? dtd.$empty[node.tagName] ? "": node.innerText() : node.data;
                                    if (!/br\/?\s*>$/.test(code)) {
                                        if (!node.nextSibling()) return;
                                        code += "<br>"
                                    }
                                }
                            }
                        })
                    }
                    me.execCommand("inserthtml", '<code id="coder"class="brush:' + lang + ';toolbar:false">' + code + "</code>", true);
                    codeNode = me.document.getElementById("coder");
                    domUtils.removeAttributes(codeNode, "id");
                    var tmpNode = codeNode.previousSibling;
                    if (tmpNode && (tmpNode.nodeType == 3 && tmpNode.nodeValue.length == 1 && browser.ie && browser.version == 6 || domUtils.isEmptyBlock(tmpNode))) {
                        domUtils.remove(tmpNode)
                    }
                    var rng = me.selection.getRange();
                    if (domUtils.isEmptyBlock(codeNode)) {
                        rng.setStart(codeNode, 0).setCursor(false, true)
                    } else {
                        rng.selectNodeContents(codeNode).select()
                    }
                }
            },
            queryCommandValue: function() {
                var path = this.selection.getStartElementPath();
                var lang = "";
                utils.each(path,
                function(node) {
                    if (node.nodeName == "CODE") {
                        var match = node.className.match(/brush:([^;]+)/);
                        lang = match && match[1] ? match[1] : "";
                        return false
                    }
                });
                return lang
            }
        };
        me.addInputRule(function(root) {
            utils.each(root.getNodesByTagName("code"),
            function(codeNode) {
                var brs = codeNode.getNodesByTagName("br");
                if (brs.length) {
                    browser.ie && browser.version > 8 && utils.each(brs,
                    function(br) {
                        var txt = UE.uNode.createText("\n");
                        br.parentNode.insertBefore(txt, br);
                        br.parentNode.removeChild(br)
                    });
                    return
                }
                if (browser.ie && browser.version > 8) return;
                var code = codeNode.innerText().split(/\n/);
                codeNode.innerHTML("");
                utils.each(code,
                function(c) {
                    if (c.length) {
                        codeNode.appendChild(UE.uNode.createText(c))
                    }
                    codeNode.appendChild(UE.uNode.createElement("br"))
                })
            })
        });
        me.addOutputRule(function(root) {
            utils.each(root.getNodesByTagName("code"),
            function(codeNode) {
                var code = "";
                utils.each(codeNode.children,
                function(n) {
                    if (n.type == "text") {
                        code += n.data.replace(/[ ]/g, "&nbsp;").replace(/\n$/, "")
                    } else {
                        if (n.tagName == "br") {
                            code += "\n"
                        } else {
                            code += !dtd.$empty[n.tagName] ? "": n.innerText()
                        }
                    }
                });
                codeNode.innerText(code.replace(/(&nbsp;|\n)+$/, ""))
            })
        });
        me.notNeedCodeQuery = {
            help: 1,
            undo: 1,
            redo: 1,
            source: 1,
            print: 1,
            searchreplace: 1,
            fullscreen: 1,
            preview: 1,
            insertparagraph: 1,
            elementpath: 1,
            insertcode: 1,
            inserthtml: 1,
            selectall: 1
        };
        var orgQuery = me.queryCommandState;
        me.queryCommandState = function(cmd) {
            var me = this;
            if (!me.notNeedCodeQuery[cmd.toLowerCase()] && me.selection && me.queryCommandValue("insertcode")) {
                return - 1
            }
            return UE.Editor.prototype.queryCommandState.apply(this, arguments)
        };
        me.addListener("beforeenterkeydown",
        function() {
            var rng = me.selection.getRange();
            var codeNode = domUtils.findParentByTagName(rng.startContainer, "code", true);
            if (codeNode) {
                me.fireEvent("saveScene");
                if (!rng.collapsed) {
                    rng.deleteContents()
                }
                if (!browser.ie || browser.ie9above) {
                    var tmpNode = me.document.createElement("br"),
                    codeNode;
                    rng.insertNode(tmpNode).setStartAfter(tmpNode).collapse(true);
                    var next = tmpNode.nextSibling;
                    if (!next && (!browser.ie || browser.version > 10)) {
                        rng.insertNode(tmpNode.cloneNode(false))
                    } else {
                        rng.setStartAfter(tmpNode)
                    }
                    codeNode = tmpNode.previousSibling;
                    var tmp;
                    while (codeNode) {
                        tmp = codeNode;
                        codeNode = codeNode.previousSibling;
                        if (!codeNode || codeNode.nodeName == "BR") {
                            codeNode = tmp;
                            break
                        }
                    }
                    if (codeNode) {
                        var str = "";
                        while (codeNode && codeNode.nodeName != "BR" && (new RegExp("^[\\s" + domUtils.fillChar + "]*$")).test(codeNode.nodeValue)) {
                            str += codeNode.nodeValue;
                            codeNode = codeNode.nextSibling
                        }
                        if (codeNode.nodeName != "BR") {
                            var match = codeNode.nodeValue.match(new RegExp("^([\\s" + domUtils.fillChar + "]+)"));
                            if (match && match[1]) {
                                str += match[1]
                            }
                        }
                        if (str) {
                            str = me.document.createTextNode(str);
                            rng.insertNode(str).setStartAfter(str)
                        }
                    }
                    rng.collapse(true).select(true)
                } else {
                    if (browser.version > 8) {
                        var txt = me.document.createTextNode("\n");
                        var start = rng.startContainer;
                        if (rng.startOffset == 0) {
                            var preNode = start.previousSibling;
                            if (preNode) {
                                rng.insertNode(txt);
                                var fillchar = me.document.createTextNode(" ");
                                rng.setStartAfter(txt).insertNode(fillchar).setStart(fillchar, 0).collapse(true).select(true)
                            }
                        } else {
                            rng.insertNode(txt).setStartAfter(txt);
                            var fillchar = me.document.createTextNode(" ");
                            start = rng.startContainer.childNodes[rng.startOffset];
                            if (start && !/^\n/.test(start.nodeValue)) {
                                rng.setStartBefore(txt)
                            }
                            rng.insertNode(fillchar).setStart(fillchar, 0).collapse(true).select(true)
                        }
                    } else {
                        var tmpNode = me.document.createElement("br");
                        rng.insertNode(tmpNode);
                        rng.insertNode(me.document.createTextNode(domUtils.fillChar));
                        rng.setStartAfter(tmpNode);
                        codeNode = tmpNode.previousSibling;
                        var tmp;
                        while (codeNode) {
                            tmp = codeNode;
                            codeNode = codeNode.previousSibling;
                            if (!codeNode || codeNode.nodeName == "BR") {
                                codeNode = tmp;
                                break
                            }
                        }
                        if (codeNode) {
                            var str = "";
                            while (codeNode && codeNode.nodeName != "BR" && (new RegExp("^[ " + domUtils.fillChar + "]*$")).test(codeNode.nodeValue)) {
                                str += codeNode.nodeValue;
                                codeNode = codeNode.nextSibling
                            }
                            if (codeNode.nodeName != "BR") {
                                var match = codeNode.nodeValue.match(new RegExp("^([ " + domUtils.fillChar + "]+)"));
                                if (match && match[1]) {
                                    str += match[1]
                                }
                            }
                            str = me.document.createTextNode(str);
                            rng.insertNode(str).setStartAfter(str)
                        }
                        rng.collapse(true).select()
                    }
                }
                me.fireEvent("saveScene");
                return true
            }
        });
        me.addListener("tabkeydown",
        function(cmd, evt) {
            var rng = me.selection.getRange();
            var codeNode = domUtils.findParentByTagName(rng.startContainer, "code", true);
            if (codeNode) {
                me.fireEvent("saveScene");
                if (evt.shiftKey) {} else {
                    if (!rng.collapsed) {
                        var bk = rng.createBookmark();
                        var start = bk.start.previousSibling;
                        while (start) {
                            if (codeNode.firstChild === start && !domUtils.isBr(start)) {
                                codeNode.insertBefore(me.document.createTextNode("    "), start);
                                break
                            }
                            if (domUtils.isBr(start)) {
                                codeNode.insertBefore(me.document.createTextNode("    "), start.nextSibling);
                                break
                            }
                            start = start.previousSibling
                        }
                        var end = bk.end;
                        start = bk.start.nextSibling;
                        if (codeNode.firstChild === bk.start) {
                            codeNode.insertBefore(me.document.createTextNode("    "), start.nextSibling)
                        }
                        while (start && start !== end) {
                            if (domUtils.isBr(start) && start.nextSibling) {
                                if (start.nextSibling === end) {
                                    break
                                }
                                codeNode.insertBefore(me.document.createTextNode("    "), start.nextSibling)
                            }
                            start = start.nextSibling
                        }
                        rng.moveToBookmark(bk).select()
                    } else {
                        var tmpNode = me.document.createTextNode("    ");
                        rng.insertNode(tmpNode).setStartAfter(tmpNode).collapse(true).select(true)
                    }
                }
                me.fireEvent("saveScene");
                return true
            }
        });
        me.addListener("beforeinserthtml",
        function(evtName, html) {
            var me = this,
            rng = me.selection.getRange(),
            codeNode = domUtils.findParentByTagName(rng.startContainer, "code", true);
            if (codeNode) {
                if (!rng.collapsed) {
                    rng.deleteContents()
                }
                var htmlstr = "";
                if (browser.ie && browser.version > 8) {
                    utils.each(UE.filterNode(UE.htmlparser(html), me.options.filterTxtRules).children,
                    function(node) {
                        if (node.type == "element") {
                            if (node.tagName == "br") {
                                htmlstr += "\n"
                            } else if (!dtd.$empty[node.tagName]) {
                                utils.each(node.children,
                                function(cn) {
                                    if (cn.type == "element") {
                                        if (cn.tagName == "br") {
                                            htmlstr += "\n"
                                        } else if (!dtd.$empty[node.tagName]) {
                                            htmlstr += cn.innerText()
                                        }
                                    } else {
                                        htmlstr += cn.data
                                    }
                                });
                                if (!/\n$/.test(htmlstr)) {
                                    htmlstr += "\n"
                                }
                            }
                        } else {
                            htmlstr += node.data + "\n"
                        }
                        if (!node.nextSibling() && /\n$/.test(htmlstr)) {
                            htmlstr = htmlstr.replace(/\n$/, "")
                        }
                    });
                    var tmpNode = me.document.createTextNode(utils.html(htmlstr.replace(/&nbsp;/g, " ")));
                    rng.insertNode(tmpNode).selectNode(tmpNode).select()
                } else {
                    var frag = me.document.createDocumentFragment();
                    utils.each(UE.filterNode(UE.htmlparser(html), me.options.filterTxtRules).children,
                    function(node) {
                        if (node.type == "element") {
                            if (node.tagName == "br") {
                                frag.appendChild(me.document.createElement("br"))
                            } else if (!dtd.$empty[node.tagName]) {
                                utils.each(node.children,
                                function(cn) {
                                    if (cn.type == "element") {
                                        if (cn.tagName == "br") {
                                            frag.appendChild(me.document.createElement("br"))
                                        } else if (!dtd.$empty[node.tagName]) {
                                            frag.appendChild(me.document.createTextNode(utils.html(cn.innerText().replace(/&nbsp;/g, " "))))
                                        }
                                    } else {
                                        frag.appendChild(me.document.createTextNode(utils.html(cn.data.replace(/&nbsp;/g, " "))))
                                    }
                                });
                                if (frag.lastChild.nodeName != "BR") {
                                    frag.appendChild(me.document.createElement("br"))
                                }
                            }
                        } else {
                            frag.appendChild(me.document.createTextNode(utils.html(node.data.replace(/&nbsp;/g, " "))))
                        }
                        if (!node.nextSibling() && frag.lastChild.nodeName == "BR") {
                            frag.removeChild(frag.lastChild)
                        }
                    });
                    rng.insertNode(frag).select()
                }
                return true
            }
        });
        me.addListener("keydown",
        function(cmd, evt) {
            var me = this,
            keyCode = evt.keyCode || evt.which;
            if (keyCode == 40) {
                var rng = me.selection.getRange(),
                codeNode,
                start = rng.startContainer;
                if (rng.collapsed && (codeNode = domUtils.findParentByTagName(rng.startContainer, "code", true)) && !codeNode.nextSibling) {
                    var last = codeNode.lastChild;
                    while (last && last.nodeName == "BR") {
                        last = last.previousSibling
                    }
                    if (last === start || rng.startContainer === codeNode && rng.startOffset == codeNode.childNodes.length) {
                        me.execCommand("insertparagraph");
                        domUtils.preventDefault(evt)
                    }
                }
            }
        });
        me.addListener("delkeydown",
        function(type, evt) {
            var rng = this.selection.getRange();
            rng.txtToElmBoundary(true);
            var start = rng.startContainer;
            if (domUtils.isTagNode(start, "code") && rng.collapsed && domUtils.isStartInblock(rng)) {
                var p = me.document.createElement("p");
                domUtils.fillNode(me.document, p);
                start.parentNode.insertBefore(p, start);
                domUtils.remove(start);
                rng.setStart(p, 0).setCursor(false, true);
                domUtils.preventDefault(evt);
                return true
            }
        })
    }; UE.commands["cleardoc"] = {
        execCommand: function(cmdName) {
            var me = this,
            enterTag = me.options.enterTag,
            range = me.selection.getRange();
            if (enterTag == "br") {
                me.body.innerHTML = "<br/>";
                range.setStart(me.body, 0).setCursor()
            } else {
                me.body.innerHTML = "<p>" + (ie ? "": "<br/>") + "</p>";
                range.setStart(me.body.firstChild, 0).setCursor(false, true)
            }
            setTimeout(function() {
                me.fireEvent("clearDoc")
            },
            0)
        }
    }; UE.plugin.register("anchor",
    function() {
        return {
            bindEvents: {
                ready: function() {
                    utils.cssRule("anchor", ".anchorclass{background: url('" + this.options.themePath + this.options.theme + "/images/anchor.gif') no-repeat scroll left center transparent;border: 1px dotted #0000FF;cursor: auto;display: inline-block;height: 16px;width: 15px;}", this.document)
                }
            },
            outputRule: function(root) {
                utils.each(root.getNodesByTagName("img"),
                function(a) {
                    var val;
                    if (val = a.getAttr("anchorname")) {
                        a.tagName = "a";
                        a.setAttr({
                            anchorname: "",
                            name: val,
                            "class": ""
                        })
                    }
                })
            },
            inputRule: function(root) {
                utils.each(root.getNodesByTagName("a"),
                function(a) {
                    var val;
                    if ((val = a.getAttr("name")) && !a.getAttr("href")) {
                        a.tagName = "img";
                        a.setAttr({
                            anchorname: a.getAttr("name"),
                            "class": "anchorclass"
                        });
                        a.setAttr("name")
                    }
                })
            },
            commands: {
                anchor: {
                    execCommand: function(cmd, name) {
                        var range = this.selection.getRange(),
                        img = range.getClosedNode();
                        if (img && img.getAttribute("anchorname")) {
                            if (name) {
                                img.setAttribute("anchorname", name)
                            } else {
                                range.setStartBefore(img).setCursor();
                                domUtils.remove(img)
                            }
                        } else {
                            if (name) {
                                var anchor = this.document.createElement("img");
                                range.collapse(true);
                                domUtils.setAttributes(anchor, {
                                    anchorname: name,
                                    "class": "anchorclass"
                                });
                                range.insertNode(anchor).setStartAfter(anchor).setCursor(false, true)
                            }
                        }
                    }
                }
            }
        }
    }); UE.plugins["wordcount"] = function() {
        var me = this;
        me.setOpt("wordCount", true);
        me.addListener("contentchange",
        function() {
            me.fireEvent("wordcount")
        });
        var timer;
        me.addListener("ready",
        function() {
            var me = this;
            domUtils.on(me.body, "keyup",
            function(evt) {
                var code = evt.keyCode || evt.which,
                ignores = {
                    16 : 1,
                    18 : 1,
                    20 : 1,
                    37 : 1,
                    38 : 1,
                    39 : 1,
                    40 : 1
                };
                if (code in ignores) return;
                clearTimeout(timer);
                timer = setTimeout(function() {
                    me.fireEvent("wordcount")
                },
                200)
            })
        })
    }; UE.plugins["pagebreak"] = function() {
        var me = this,
        notBreakTags = ["td"];
        me.setOpt("pageBreakTag", "_ueditor_page_break_tag_");
        function fillNode(node) {
            if (domUtils.isEmptyBlock(node)) {
                var firstChild = node.firstChild,
                tmpNode;
                while (firstChild && firstChild.nodeType == 1 && domUtils.isEmptyBlock(firstChild)) {
                    tmpNode = firstChild;
                    firstChild = firstChild.firstChild
                } ! tmpNode && (tmpNode = node);
                domUtils.fillNode(me.document, tmpNode)
            }
        }
        me.ready(function() {
            utils.cssRule("pagebreak", ".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}", me.document)
        });
        function isHr(node) {
            return node && node.nodeType == 1 && node.tagName == "HR" && node.className == "pagebreak"
        }
        me.addInputRule(function(root) {
            root.traversal(function(node) {
                if (node.type == "text" && node.data == me.options.pageBreakTag) {
                    var hr = UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');
                    node.parentNode.insertBefore(hr, node);
                    node.parentNode.removeChild(node)
                }
            })
        });
        me.addOutputRule(function(node) {
            utils.each(node.getNodesByTagName("hr"),
            function(n) {
                if (n.getAttr("class") == "pagebreak") {
                    var txt = UE.uNode.createText(me.options.pageBreakTag);
                    n.parentNode.insertBefore(txt, n);
                    n.parentNode.removeChild(n)
                }
            })
        });
        me.commands["pagebreak"] = {
            execCommand: function() {
                var range = me.selection.getRange(),
                hr = me.document.createElement("hr");
                domUtils.setAttributes(hr, {
                    "class": "pagebreak",
                    noshade: "noshade",
                    size: "5"
                });
                domUtils.unSelectable(hr);
                var node = domUtils.findParentByTagName(range.startContainer, notBreakTags, true),
                parents = [],
                pN;
                if (node) {
                    switch (node.tagName) {
                    case "TD":
                        pN = node.parentNode;
                        if (!pN.previousSibling) {
                            var table = domUtils.findParentByTagName(pN, "table");
                            table.parentNode.insertBefore(hr, table);
                            parents = domUtils.findParents(hr, true)
                        } else {
                            pN.parentNode.insertBefore(hr, pN);
                            parents = domUtils.findParents(hr)
                        }
                        pN = parents[1];
                        if (hr !== pN) {
                            domUtils.breakParent(hr, pN)
                        }
                        me.fireEvent("afteradjusttable", me.document)
                    }
                } else {
                    if (!range.collapsed) {
                        range.deleteContents();
                        var start = range.startContainer;
                        while (!domUtils.isBody(start) && domUtils.isBlockElm(start) && domUtils.isEmptyNode(start)) {
                            range.setStartBefore(start).collapse(true);
                            domUtils.remove(start);
                            start = range.startContainer
                        }
                    }
                    range.insertNode(hr);
                    var pN = hr.parentNode,
                    nextNode;
                    while (!domUtils.isBody(pN)) {
                        domUtils.breakParent(hr, pN);
                        nextNode = hr.nextSibling;
                        if (nextNode && domUtils.isEmptyBlock(nextNode)) {
                            domUtils.remove(nextNode)
                        }
                        pN = hr.parentNode
                    }
                    nextNode = hr.nextSibling;
                    var pre = hr.previousSibling;
                    if (isHr(pre)) {
                        domUtils.remove(pre)
                    } else {
                        pre && fillNode(pre)
                    }
                    if (!nextNode) {
                        var p = me.document.createElement("p");
                        hr.parentNode.appendChild(p);
                        domUtils.fillNode(me.document, p);
                        range.setStart(p, 0).collapse(true)
                    } else {
                        if (isHr(nextNode)) {
                            domUtils.remove(nextNode)
                        } else {
                            fillNode(nextNode)
                        }
                        range.setEndAfter(hr).collapse(false)
                    }
                    range.select(true)
                }
            }
        }
    }; UE.plugins["undo"] = function() {
        var saveSceneTimer;
        var me = this,
        maxUndoCount = me.options.maxUndoCount || 20,
        maxInputCount = me.options.maxInputCount || 20,
        fillchar = new RegExp(domUtils.fillChar + "|</hr>", "gi");
        var noNeedFillCharTags = {
            ol: 1,
            ul: 1,
            table: 1,
            tbody: 1,
            tr: 1,
            body: 1
        };
        var orgState = me.options.autoClearEmptyNode;
        function compareAddr(indexA, indexB) {
            if (indexA.length != indexB.length) return 0;
            for (var i = 0,
            l = indexA.length; i < l; i++) {
                if (indexA[i] != indexB[i]) return 0
            }
            return 1
        }
        function compareRangeAddress(rngAddrA, rngAddrB) {
            if (rngAddrA.collapsed != rngAddrB.collapsed) {
                return 0
            }
            if (!compareAddr(rngAddrA.startAddress, rngAddrB.startAddress) || !compareAddr(rngAddrA.endAddress, rngAddrB.endAddress)) {
                return 0
            }
            return 1
        }
        function UndoManager() {
            this.list = [];
            this.index = 0;
            this.hasUndo = false;
            this.hasRedo = false;
            this.undo = function() {
                if (this.hasUndo) {
                    if (!this.list[this.index - 1] && this.list.length == 1) {
                        this.reset();
                        return
                    }
                    while (this.list[this.index].content == this.list[this.index - 1].content) {
                        this.index--;
                        if (this.index == 0) {
                            return this.restore(0)
                        }
                    }
                    this.restore(--this.index)
                }
            };
            this.redo = function() {
                if (this.hasRedo) {
                    while (this.list[this.index].content == this.list[this.index + 1].content) {
                        this.index++;
                        if (this.index == this.list.length - 1) {
                            return this.restore(this.index)
                        }
                    }
                    this.restore(++this.index)
                }
            };
            this.restore = function() {
                var me = this.editor;
                var scene = this.list[this.index];
                var root = UE.htmlparser(scene.content.replace(fillchar, ""));
                me.options.autoClearEmptyNode = false;
                me.filterInputRule(root);
                me.options.autoClearEmptyNode = orgState;
                me.document.body.innerHTML = root.toHtml();
                me.fireEvent("afterscencerestore");
                if (browser.ie) {
                    utils.each(domUtils.getElementsByTagName(me.document, "td th caption p"),
                    function(node) {
                        if (domUtils.isEmptyNode(node)) {
                            domUtils.fillNode(me.document, node)
                        }
                    })
                }
                try {
                    var rng = (new dom.Range(me.document)).moveToAddress(scene.address);
                    rng.select(noNeedFillCharTags[rng.startContainer.nodeName.toLowerCase()])
                } catch(e) {}
                this.update();
                this.clearKey();
                me.fireEvent("reset", true)
            };
            this.getScene = function() {
                var me = this.editor;
                var rng = me.selection.getRange(),
                rngAddress = rng.createAddress(false, true);
                me.fireEvent("beforegetscene");
                var root = UE.htmlparser(me.body.innerHTML);
                me.options.autoClearEmptyNode = false;
                me.filterOutputRule(root);
                me.options.autoClearEmptyNode = orgState;
                var cont = root.toHtml();
                me.fireEvent("aftergetscene");
                return {
                    address: rngAddress,
                    content: cont
                }
            };
            this.save = function(notCompareRange, notSetCursor) {
                clearTimeout(saveSceneTimer);
                var currentScene = this.getScene(notSetCursor),
                lastScene = this.list[this.index];
                if (lastScene && lastScene.content == currentScene.content && (notCompareRange ? 1 : compareRangeAddress(lastScene.address, currentScene.address))) {
                    return
                }
                this.list = this.list.slice(0, this.index + 1);
                this.list.push(currentScene);
                if (this.list.length > maxUndoCount) {
                    this.list.shift()
                }
                this.index = this.list.length - 1;
                this.clearKey();
                this.update()
            };
            this.update = function() {
                this.hasRedo = !!this.list[this.index + 1];
                this.hasUndo = !!this.list[this.index - 1]
            };
            this.reset = function() {
                this.list = [];
                this.index = 0;
                this.hasUndo = false;
                this.hasRedo = false;
                this.clearKey()
            };
            this.clearKey = function() {
                keycont = 0;
                lastKeyCode = null
            }
        }
        me.undoManger = new UndoManager;
        me.undoManger.editor = me;
        function saveScene() {
            this.undoManger.save()
        }
        me.addListener("saveScene",
        function() {
            var args = Array.prototype.splice.call(arguments, 1);
            this.undoManger.save.apply(this.undoManger, args)
        });
        me.addListener("reset",
        function(type, exclude) {
            if (!exclude) {
                this.undoManger.reset()
            }
        });
        me.commands["redo"] = me.commands["undo"] = {
            execCommand: function(cmdName) {
                this.undoManger[cmdName]()
            },
            queryCommandState: function(cmdName) {
                return this.undoManger["has" + (cmdName.toLowerCase() == "undo" ? "Undo": "Redo")] ? 0 : -1
            },
            notNeedUndo: 1
        };
        var keys = {
            16 : 1,
            17 : 1,
            18 : 1,
            37 : 1,
            38 : 1,
            39 : 1,
            40 : 1
        },
        keycont = 0,
        lastKeyCode;
        var inputType = false;
        me.addListener("ready",
        function() {
            domUtils.on(this.body, "compositionstart",
            function() {
                inputType = true
            });
            domUtils.on(this.body, "compositionend",
            function() {
                inputType = false
            })
        });
        me.addshortcutkey({
            Undo: "ctrl+90",
            Redo: "ctrl+89"
        });
        var isCollapsed = true;
        me.addListener("keydown",
        function(type, evt) {
            var me = this;
            var keyCode = evt.keyCode || evt.which;
            if (!keys[keyCode] && !evt.ctrlKey && !evt.metaKey && !evt.shiftKey && !evt.altKey) {
                if (inputType) return;
                if (!me.selection.getRange().collapsed) {
                    me.undoManger.save(false, true);
                    isCollapsed = false;
                    return
                }
                if (me.undoManger.list.length == 0) {
                    me.undoManger.save(true)
                }
                clearTimeout(saveSceneTimer);
                function save(cont) {
                    if (cont.selection.getRange().collapsed) cont.fireEvent("contentchange");
                    cont.undoManger.save(false, true);
                    cont.fireEvent("selectionchange")
                }
                saveSceneTimer = setTimeout(function() {
                    if (inputType) {
                        var interalTimer = setInterval(function() {
                            if (!inputType) {
                                save(me);
                                clearInterval(interalTimer)
                            }
                        },
                        300);
                        return
                    }
                    save(me)
                },
                200);
                lastKeyCode = keyCode;
                keycont++;
                if (keycont >= maxInputCount) {
                    save(me)
                }
            }
        });
        me.addListener("keyup",
        function(type, evt) {
            var keyCode = evt.keyCode || evt.which;
            if (!keys[keyCode] && !evt.ctrlKey && !evt.metaKey && !evt.shiftKey && !evt.altKey) {
                if (inputType) return;
                if (!isCollapsed) {
                    this.undoManger.save(false, true);
                    isCollapsed = true
                }
            }
        });
        me.stopCmdUndo = function() {
            me.zS = true
        };
        me.startCmdUndo = function() {
            me.zS = false
        }
    }; UE.plugins["paste"] = function() {
        function getClipboardData(callback) {
            var doc = this.document;
            if (doc.getElementById("baidu_pastebin")) {
                return
            }
            var range = this.selection.getRange(),
            bk = range.createBookmark(),
            pastebin = doc.createElement("div");
            pastebin.id = "baidu_pastebin";
            browser.webkit && pastebin.appendChild(doc.createTextNode(domUtils.fillChar + domUtils.fillChar));
            doc.body.appendChild(pastebin);
            bk.start.style.display = "";
            pastebin.style.cssText = "position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:" + domUtils.getXY(bk.start).y + "px";
            range.selectNodeContents(pastebin).select(true);
            setTimeout(function() {
                if (browser.webkit) {
                    for (var i = 0,
                    pastebins = doc.querySelectorAll("#baidu_pastebin"), pi; pi = pastebins[i++];) {
                        if (domUtils.isEmptyNode(pi)) {
                            domUtils.remove(pi)
                        } else {
                            pastebin = pi;
                            break
                        }
                    }
                }
                try {
                    pastebin.parentNode.removeChild(pastebin)
                } catch(e) {}
                range.moveToBookmark(bk).select(true);
                callback(pastebin)
            },
            0)
        }
        var me = this;
        var txtContent, htmlContent, address;
        function filter(div) {
            var html;
            if (div.firstChild) {
                var nodes = domUtils.getElementsByTagName(div, "span");
                for (var i = 0,
                ni; ni = nodes[i++];) {
                    if (ni.id == "_baidu_cut_start" || ni.id == "_baidu_cut_end") {
                        domUtils.remove(ni)
                    }
                }
                if (browser.webkit) {
                    var brs = div.querySelectorAll("div br");
                    for (var i = 0,
                    bi; bi = brs[i++];) {
                        var pN = bi.parentNode;
                        if (pN.tagName == "DIV" && pN.childNodes.length == 1) {
                            pN.innerHTML = "<p><br/></p>";
                            domUtils.remove(pN)
                        }
                    }
                    var divs = div.querySelectorAll("#baidu_pastebin");
                    for (var i = 0,
                    di; di = divs[i++];) {
                        var tmpP = me.document.createElement("p");
                        di.parentNode.insertBefore(tmpP, di);
                        while (di.firstChild) {
                            tmpP.appendChild(di.firstChild)
                        }
                        domUtils.remove(di)
                    }
                    var metas = div.querySelectorAll("meta");
                    for (var i = 0,
                    ci; ci = metas[i++];) {
                        domUtils.remove(ci)
                    }
                    var brs = div.querySelectorAll("br");
                    for (i = 0; ci = brs[i++];) {
                        if (/^apple-/i.test(ci.className)) {
                            domUtils.remove(ci)
                        }
                    }
                }
                if (browser.gecko) {
                    var dirtyNodes = div.querySelectorAll("[_moz_dirty]");
                    for (i = 0; ci = dirtyNodes[i++];) {
                        ci.removeAttribute("_moz_dirty")
                    }
                }
                if (!browser.ie) {
                    var spans = div.querySelectorAll("span.Apple-style-span");
                    for (var i = 0,
                    ci; ci = spans[i++];) {
                        domUtils.remove(ci, true)
                    }
                }
                html = div.innerHTML;
                html = UE.filterWord(html);
                var root = UE.htmlparser(html);
                if (me.options.filterRules) {
                    UE.filterNode(root, me.options.filterRules)
                }
                me.filterInputRule(root);
                if (browser.webkit) {
                    var br = root.lastChild();
                    if (br && br.type == "element" && br.tagName == "br") {
                        root.removeChild(br)
                    }
                    utils.each(me.body.querySelectorAll("div"),
                    function(node) {
                        if (domUtils.isEmptyBlock(node)) {
                            domUtils.remove(node, true)
                        }
                    })
                }
                html = {
                    html: root.toHtml()
                };
                me.fireEvent("beforepaste", html, root);
                if (!html.html) {
                    return
                }
                root = UE.htmlparser(html.html, true);
                if (me.queryCommandState("pasteplain") === 1) {
                    var cPq = UE.filterNode(root, me.options.filterTxtRules).toHtml();
                    me.execCommand("insertHtml", cPq, false)
                } else {
                    UE.filterNode(root, me.options.filterTxtRules);
                    txtContent = root.toHtml();
                    htmlContent = html.html;
                    address = me.selection.getRange().createAddress(true);
                    me.execCommand("insertHtml", htmlContent, true)
                }
                me.fireEvent("afterpaste", html)
            }
        }
        me.addListener("pasteTransfer",
        function(cmd, plainType) {
            if (address && txtContent && htmlContent && txtContent != htmlContent) {
                var range = me.selection.getRange();
                range.moveToAddress(address, true);
                if (!range.collapsed) {
                    while (!domUtils.isBody(range.startContainer)) {
                        var start = range.startContainer;
                        if (start.nodeType == 1) {
                            start = start.childNodes[range.startOffset];
                            if (!start) {
                                range.setStartBefore(range.startContainer);
                                continue
                            }
                            var pre = start.previousSibling;
                            if (pre && pre.nodeType == 3 && (new RegExp("^[\n\r\t " + domUtils.fillChar + "]*$")).test(pre.nodeValue)) {
                                range.setStartBefore(pre)
                            }
                        }
                        if (range.startOffset == 0) {
                            range.setStartBefore(range.startContainer)
                        } else {
                            break
                        }
                    }
                    while (!domUtils.isBody(range.endContainer)) {
                        var end = range.endContainer;
                        if (end.nodeType == 1) {
                            end = end.childNodes[range.endOffset];
                            if (!end) {
                                range.setEndAfter(range.endContainer);
                                continue
                            }
                            var next = end.nextSibling;
                            if (next && next.nodeType == 3 && (new RegExp("^[\n\r\t" + domUtils.fillChar + "]*$")).test(next.nodeValue)) {
                                range.setEndAfter(next)
                            }
                        }
                        if (range.endOffset == range.endContainer[range.endContainer.nodeType == 3 ? "nodeValue": "childNodes"].length) {
                            range.setEndAfter(range.endContainer)
                        } else {
                            break
                        }
                    }
                }
                range.deleteContents();
                range.select(true);
                me.zS = true;
                var html = htmlContent;
                if (plainType === 2) {
                    html = html.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,
                    function(a, b, tagName, attrs) {
                        tagName = tagName.toLowerCase();
                        if ({
                            img: 1
                        } [tagName]) {
                            return a
                        }
                        attrs = attrs.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,
                        function(str, atr, val) {
                            if ({
                                src: 1,
                                href: 1,
                                name: 1
                            } [atr.toLowerCase()]) {
                                return atr + "=" + val + " "
                            }
                            return ""
                        });
                        if ({
                            span: 1,
                            div: 1
                        } [tagName]) {
                            return ""
                        } else {
                            return "<" + b + tagName + " " + utils.trim(attrs) + ">"
                        }
                    })
                } else if (plainType) {
                    html = txtContent
                }
                me.execCommand("inserthtml", html, true);
                me.zS = false;
                var rng = me.selection.getRange();
                while (!domUtils.isBody(rng.startContainer) && !rng.startOffset && rng.startContainer[rng.startContainer.nodeType == 3 ? "nodeValue": "childNodes"].length) {
                    rng.setStartBefore(rng.startContainer)
                }
                var tmpAddress = rng.createAddress(true);
                address.endAddress = tmpAddress.startAddress
            }
        });
        me.addListener("ready",
        function() {
            domUtils.on(me.body, "cut",
            function() {
                var range = me.selection.getRange();
                if (!range.collapsed && me.undoManger) {
                    me.undoManger.save()
                }
            });
            domUtils.on(me.body, browser.ie || browser.opera ? "keydown": "paste",
            function(e) {
                if ((browser.ie || browser.opera) && (!e.ctrlKey && !e.metaKey || e.keyCode != "86")) {
                    return
                }
                getClipboardData.call(me,
                function(div) {
                    filter(div)
                })
            })
        })
    }; UE.plugins["list"] = function() {
        var me = this,
        notExchange = {
            TD: 1,
            PRE: 1,
            BLOCKQUOTE: 1
        };
        var customStyle = {
            cn: "cn-1-",
            cn1: "cn-2-",
            cn2: "cn-3-",
            num: "num-1-",
            num1: "num-2-",
            num2: "num-3-",
            dash: "dash",
            dot: "dot"
        };
        me.setOpt({
            autoTransWordToList: false,
            insertorderedlist: {
                num: "",
                num1: "",
                num2: "",
                cn: "",
                cn1: "",
                cn2: "",
                decimal: "",
                "lower-alpha": "",
                "lower-roman": "",
                "upper-alpha": "",
                "upper-roman": ""
            },
            insertunorderedlist: {
                circle: "",
                disc: "",
                square: "",
                dash: "",
                dot: ""
            },
            listDefaultPaddingLeft: "30",
            listiconpath: "http://bs.baidu.com/listicon/",
            maxListLevel: -1
        });
        function listToArray(list) {
            var arr = [];
            for (var p in list) {
                arr.push(p)
            }
            return arr
        }
        var listStyle = {
            OL: listToArray(me.options.insertorderedlist),
            UL: listToArray(me.options.insertunorderedlist)
        };
        var liiconpath = me.options.listiconpath;
        for (var s in customStyle) {
            if (!me.options.insertorderedlist.hasOwnProperty(s) && !me.options.insertunorderedlist.hasOwnProperty(s)) {
                delete customStyle[s]
            }
        }
        me.ready(function() {
            var customCss = [];
            for (var p in customStyle) {
                if (p == "dash" || p == "dot") {
                    customCss.push("li.list-" + customStyle[p] + "{background-image:url(" + liiconpath + customStyle[p] + ".gif)}");
                    customCss.push("ul.custom_" + p + "{list-style:none;}ul.custom_" + p + " li{background-position:0 3px;background-repeat:no-repeat}")
                } else {
                    for (var i = 0; i < 99; i++) {
                        customCss.push("li.list-" + customStyle[p] + i + "{background-image:url(" + liiconpath + "list-" + customStyle[p] + i + ".gif)}")
                    }
                    customCss.push("ol.custom_" + p + "{list-style:none;}ol.custom_" + p + " li{background-position:0 3px;background-repeat:no-repeat}")
                }
                switch (p) {
                case "cn":
                    customCss.push("li.list-" + p + "-paddingleft-1{padding-left:25px}");
                    customCss.push("li.list-" + p + "-paddingleft-2{padding-left:40px}");
                    customCss.push("li.list-" + p + "-paddingleft-3{padding-left:55px}");
                    break;
                case "cn1":
                    customCss.push("li.list-" + p + "-paddingleft-1{padding-left:30px}");
                    customCss.push("li.list-" + p + "-paddingleft-2{padding-left:40px}");
                    customCss.push("li.list-" + p + "-paddingleft-3{padding-left:55px}");
                    break;
                case "cn2":
                    customCss.push("li.list-" + p + "-paddingleft-1{padding-left:40px}");
                    customCss.push("li.list-" + p + "-paddingleft-2{padding-left:55px}");
                    customCss.push("li.list-" + p + "-paddingleft-3{padding-left:68px}");
                    break;
                case "num":
                case "num1":
                    customCss.push("li.list-" + p + "-paddingleft-1{padding-left:25px}");
                    break;
                case "num2":
                    customCss.push("li.list-" + p + "-paddingleft-1{padding-left:35px}");
                    customCss.push("li.list-" + p + "-paddingleft-2{padding-left:40px}");
                    break;
                case "dash":
                    customCss.push("li.list-" + p + "-paddingleft{padding-left:35px}");
                    break;
                case "dot":
                    customCss.push("li.list-" + p + "-paddingleft{padding-left:20px}")
                }
            }
            customCss.push(".list-paddingleft-1{padding-left:0}");
            customCss.push(".list-paddingleft-2{padding-left:" + me.options.listDefaultPaddingLeft + "px}");
            customCss.push(".list-paddingleft-3{padding-left:" + me.options.listDefaultPaddingLeft * 2 + "px}");
            utils.cssRule("list", "ol,ul{margin:0;pading:0;" + (browser.ie ? "": "width:95%") + "}" + customCss.join("\n"), me.document)
        });
        me.ready(function() {
            domUtils.on(me.body, "cut",
            function() {
                setTimeout(function() {
                    var rng = me.selection.getRange(),
                    li;
                    if (!rng.collapsed) {
                        if (li = domUtils.findParentByTagName(rng.startContainer, "li", true)) {
                            if (!li.nextSibling && domUtils.isEmptyBlock(li)) {
                                var pn = li.parentNode,
                                node;
                                if (node = pn.previousSibling) {
                                    domUtils.remove(pn);
                                    rng.setStartAtLast(node).collapse(true);
                                    rng.select(true)
                                } else if (node = pn.nextSibling) {
                                    domUtils.remove(pn);
                                    rng.setStartAtFirst(node).collapse(true);
                                    rng.select(true)
                                } else {
                                    var tmpNode = me.document.createElement("p");
                                    domUtils.fillNode(me.document, tmpNode);
                                    pn.parentNode.insertBefore(tmpNode, pn);
                                    domUtils.remove(pn);
                                    rng.setStart(tmpNode, 0).collapse(true);
                                    rng.select(true)
                                }
                            }
                        }
                    }
                })
            })
        });
        function getStyle(node) {
            var cls = node.className;
            if (domUtils.hasClass(node, /custom_/)) {
                return cls.match(/custom_(\w+)/)[1]
            }
            return domUtils.getStyle(node, "list-style-type")
        }
        me.addListener("beforepaste",
        function(type, html) {
            var me = this,
            rng = me.selection.getRange(),
            li;
            var root = UE.htmlparser(html.html, true);
            if (li = domUtils.findParentByTagName(rng.startContainer, "li", true)) {
                var list = li.parentNode,
                tagName = list.tagName == "OL" ? "ul": "ol";
                utils.each(root.getNodesByTagName(tagName),
                function(n) {
                    n.tagName = list.tagName;
                    n.setAttr();
                    if (n.parentNode === root) {
                        type = getStyle(list) || (list.tagName == "OL" ? "decimal": "disc")
                    } else {
                        var className = n.parentNode.getAttr("class");
                        if (className && /custom_/.test(className)) {
                            type = className.match(/custom_(\w+)/)[1]
                        } else {
                            type = n.parentNode.getStyle("list-style-type")
                        }
                        if (!type) {
                            type = list.tagName == "OL" ? "decimal": "disc"
                        }
                    }
                    var index = utils.indexOf(listStyle[list.tagName], type);
                    if (n.parentNode !== root) index = index + 1 == listStyle[list.tagName].length ? 0 : index + 1;
                    var currentStyle = listStyle[list.tagName][index];
                    if (customStyle[currentStyle]) {
                        n.setAttr("class", "custom_" + currentStyle)
                    } else {
                        n.setStyle("list-style-type", currentStyle)
                    }
                })
            }
            html.html = root.toHtml()
        });
        me.addInputRule(function(root) {
            utils.each(root.getNodesByTagName("li"),
            function(li) {
                var tmpP = UE.uNode.createElement("p");
                for (var i = 0,
                ci; ci = li.children[i];) {
                    if (ci.type == "text" || dtd.p[ci.tagName]) {
                        tmpP.appendChild(ci)
                    } else {
                        if (tmpP.firstChild()) {
                            li.insertBefore(tmpP, ci);
                            tmpP = UE.uNode.createElement("p");
                            i = i + 2
                        } else {
                            i++
                        }
                    }
                }
                if (tmpP.firstChild() && !tmpP.parentNode || !li.firstChild()) {
                    li.appendChild(tmpP)
                }
                if (!tmpP.firstChild()) {
                    tmpP.innerHTML(browser.ie ? "&nbsp;": "<br/>")
                }
                var p = li.firstChild();
                var lastChild = p.lastChild();
                if (lastChild && lastChild.type == "text" && /^\s*$/.test(lastChild.data)) {
                    p.removeChild(lastChild)
                }
            });
            if (me.options.autoTransWordToList) {
                var orderlisttype = {
                    num1: /^\d+\)/,
                    decimal: /^\d+\./,
                    "lower-alpha": /^[a-z]+\)/,
                    "upper-alpha": /^[A-Z]+\./,
                    cn: /^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,
                    cn2: /^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/
                },
                unorderlisttype = {
                    square: "n"
                };
                function checkListType(content, container) {
                    var span = container.firstChild();
                    if (span && span.type == "element" && span.tagName == "span" && /Wingdings|Symbol/.test(span.getStyle("font-family"))) {
                        for (var p in unorderlisttype) {
                            if (unorderlisttype[p] == span.data) {
                                return p
                            }
                        }
                        return "disc"
                    }
                    for (var p in orderlisttype) {
                        if (orderlisttype[p].test(content)) {
                            return p
                        }
                    }
                }
                utils.each(root.getNodesByTagName("p"),
                function(node) {
                    if (node.getAttr("class") != "MsoListParagraph") {
                        return
                    }
                    node.setStyle("margin", "");
                    node.setStyle("margin-left", "");
                    node.setAttr("class", "");
                    function appendLi(list, p, type) {
                        if (list.tagName == "ol") {
                            if (browser.ie) {
                                var first = p.firstChild();
                                if (first.type == "element" && first.tagName == "span" && orderlisttype[type].test(first.innerText())) {
                                    p.removeChild(first)
                                }
                            } else {
                                p.innerHTML(p.innerHTML().replace(orderlisttype[type], ""))
                            }
                        } else {
                            p.removeChild(p.firstChild())
                        }
                        var li = UE.uNode.createElement("li");
                        li.appendChild(p);
                        list.appendChild(li)
                    }
                    var tmp = node,
                    type, cacheNode = node;
                    if (node.parentNode.tagName != "li" && (type = checkListType(node.innerText(), node))) {
                        var list = UE.uNode.createElement(me.options.insertorderedlist.hasOwnProperty(type) ? "ol": "ul");
                        if (customStyle[type]) {
                            list.setAttr("class", "custom_" + type)
                        } else {
                            list.setStyle("list-style-type", type)
                        }
                        while (node && node.parentNode.tagName != "li" && checkListType(node.innerText(), node)) {
                            tmp = node.nextSibling();
                            if (!tmp) {
                                node.parentNode.insertBefore(list, node)
                            }
                            appendLi(list, node, type);
                            node = tmp
                        }
                        if (!list.parentNode && node && node.parentNode) {
                            node.parentNode.insertBefore(list, node)
                        }
                    }
                    var span = cacheNode.firstChild();
                    if (span && span.type == "element" && span.tagName == "span" && /^\s*(&nbsp;)+\s*$/.test(span.innerText())) {
                        span.parentNode.removeChild(span)
                    }
                })
            }
        });
        me.addListener("contentchange",
        function() {
            adjustListStyle(me.document)
        });
        function adjustListStyle(doc, ignore) {
            utils.each(domUtils.getElementsByTagName(doc, "ol ul"),
            function(node) {
                if (!domUtils.inDoc(node, doc)) return;
                var parent = node.parentNode;
                if (parent.tagName == node.tagName) {
                    var nodeStyleType = getStyle(node) || (node.tagName == "OL" ? "decimal": "disc"),
                    parentStyleType = getStyle(parent) || (parent.tagName == "OL" ? "decimal": "disc");
                    if (nodeStyleType == parentStyleType) {
                        var styleIndex = utils.indexOf(listStyle[node.tagName], nodeStyleType);
                        styleIndex = styleIndex + 1 == listStyle[node.tagName].length ? 0 : styleIndex + 1;
                        setListStyle(node, listStyle[node.tagName][styleIndex])
                    }
                }
                var index = 0,
                type = 2;
                if (domUtils.hasClass(node, /custom_/)) {
                    if (! (/[ou]l/i.test(parent.tagName) && domUtils.hasClass(parent, /custom_/))) {
                        type = 1
                    }
                } else {
                    if (/[ou]l/i.test(parent.tagName) && domUtils.hasClass(parent, /custom_/)) {
                        type = 3
                    }
                }
                var style = domUtils.getStyle(node, "list-style-type");
                style && (node.style.cssText = "list-style-type:" + style);
                node.className = utils.trim(node.className.replace(/list-paddingleft-\w+/, "")) + " list-paddingleft-" + type;
                utils.each(domUtils.getElementsByTagName(node, "li"),
                function(li) {
                    li.style.cssText && (li.style.cssText = "");
                    if (!li.firstChild) {
                        domUtils.remove(li);
                        return
                    }
                    if (li.parentNode !== node) {
                        return
                    }
                    index++;
                    if (domUtils.hasClass(node, /custom_/)) {
                        var paddingLeft = 1,
                        currentStyle = getStyle(node);
                        if (node.tagName == "OL") {
                            if (currentStyle) {
                                switch (currentStyle) {
                                case "cn":
                                case "cn1":
                                case "cn2":
                                    if (index > 10 && (index % 10 == 0 || index > 10 && index < 20)) {
                                        paddingLeft = 2
                                    } else if (index > 20) {
                                        paddingLeft = 3
                                    }
                                    break;
                                case "num2":
                                    if (index > 9) {
                                        paddingLeft = 2
                                    }
                                }
                            }
                            li.className = "list-" + customStyle[currentStyle] + index + " " + "list-" + currentStyle + "-paddingleft-" + paddingLeft
                        } else {
                            li.className = "list-" + customStyle[currentStyle] + " " + "list-" + currentStyle + "-paddingleft"
                        }
                    } else {
                        li.className = li.className.replace(/list-[\w\-]+/gi, "")
                    }
                    var className = li.getAttribute("class");
                    if (className !== null && !className.replace(/\s/g, "")) {
                        domUtils.removeAttributes(li, "class")
                    }
                }); ! ignore && adjustList(node, node.tagName.toLowerCase(), getStyle(node) || domUtils.getStyle(node, "list-style-type"), true)
            })
        }
        function adjustList(list, tag, style, ignoreEmpty) {
            var nextList = list.nextSibling;
            if (nextList && nextList.nodeType == 1 && nextList.tagName.toLowerCase() == tag && (getStyle(nextList) || domUtils.getStyle(nextList, "list-style-type") || (tag == "ol" ? "decimal": "disc")) == style) {
                domUtils.moveChild(nextList, list);
                if (nextList.childNodes.length == 0) {
                    domUtils.remove(nextList)
                }
            }
            if (nextList && domUtils.isFillChar(nextList)) {
                domUtils.remove(nextList)
            }
            var preList = list.previousSibling;
            if (preList && preList.nodeType == 1 && preList.tagName.toLowerCase() == tag && (getStyle(preList) || domUtils.getStyle(preList, "list-style-type") || (tag == "ol" ? "decimal": "disc")) == style) {
                domUtils.moveChild(list, preList)
            }
            if (preList && domUtils.isFillChar(preList)) {
                domUtils.remove(preList)
            } ! ignoreEmpty && domUtils.isEmptyBlock(list) && domUtils.remove(list);
            if (getStyle(list)) {
                adjustListStyle(list.ownerDocument, true)
            }
        }
        function setListStyle(list, style) {
            if (customStyle[style]) {
                list.className = "custom_" + style
            }
            try {
                domUtils.setStyle(list, "list-style-type", style)
            } catch(e) {}
        }
        function clearEmptySibling(node) {
            var tmpNode = node.previousSibling;
            if (tmpNode && domUtils.isEmptyBlock(tmpNode)) {
                domUtils.remove(tmpNode)
            }
            tmpNode = node.nextSibling;
            if (tmpNode && domUtils.isEmptyBlock(tmpNode)) {
                domUtils.remove(tmpNode)
            }
        }
        me.addListener("keydown",
        function(type, evt) {
            function preventAndSave() {
                evt.preventDefault ? evt.preventDefault() : evt.returnValue = false;
                me.fireEvent("contentchange");
                me.undoManger && me.undoManger.save()
            }
            function findList(node, filterFn) {
                while (node && !domUtils.isBody(node)) {
                    if (filterFn(node)) {
                        return null
                    }
                    if (node.nodeType == 1 && /[ou]l/i.test(node.tagName)) {
                        return node
                    }
                    node = node.parentNode
                }
                return null
            }
            var keyCode = evt.keyCode || evt.which;
            if (keyCode == 13 && !evt.shiftKey) {
                var rng = me.selection.getRange(),
                parent = domUtils.findParent(rng.startContainer,
                function(node) {
                    return domUtils.isBlockElm(node)
                },
                true),
                li = domUtils.findParentByTagName(rng.startContainer, "li", true);
                if (parent && parent.tagName != "PRE" && !li) {
                    var html = parent.innerHTML.replace(new RegExp(domUtils.fillChar, "g"), "");
                    if (/^\s*1\s*\.[^\d]/.test(html)) {
                        parent.innerHTML = html.replace(/^\s*1\s*\./, "");
                        rng.setStartAtLast(parent).collapse(true).select();
                        me.zS = true;
                        me.execCommand("insertorderedlist");
                        me.zS = false
                    }
                }
                var range = me.selection.getRange(),
                start = findList(range.startContainer,
                function(node) {
                    return node.tagName == "TABLE"
                }),
                end = range.collapsed ? start: findList(range.endContainer,
                function(node) {
                    return node.tagName == "TABLE"
                });
                if (start && end && start === end) {
                    if (!range.collapsed) {
                        start = domUtils.findParentByTagName(range.startContainer, "li", true);
                        end = domUtils.findParentByTagName(range.endContainer, "li", true);
                        if (start && end && start === end) {
                            range.deleteContents();
                            li = domUtils.findParentByTagName(range.startContainer, "li", true);
                            if (li && domUtils.isEmptyBlock(li)) {
                                pre = li.previousSibling;
                                next = li.nextSibling;
                                p = me.document.createElement("p");
                                domUtils.fillNode(me.document, p);
                                parentList = li.parentNode;
                                if (pre && next) {
                                    range.setStart(next, 0).collapse(true).select(true);
                                    domUtils.remove(li)
                                } else {
                                    if (!pre && !next || !pre) {
                                        parentList.parentNode.insertBefore(p, parentList)
                                    } else {
                                        li.parentNode.parentNode.insertBefore(p, parentList.nextSibling)
                                    }
                                    domUtils.remove(li);
                                    if (!parentList.firstChild) {
                                        domUtils.remove(parentList)
                                    }
                                    range.setStart(p, 0).setCursor()
                                }
                                preventAndSave();
                                return
                            }
                        } else {
                            var tmpRange = range.cloneRange(),
                            bk = tmpRange.collapse(false).createBookmark();
                            range.deleteContents();
                            tmpRange.moveToBookmark(bk);
                            var li = domUtils.findParentByTagName(tmpRange.startContainer, "li", true);
                            clearEmptySibling(li);
                            tmpRange.select();
                            preventAndSave();
                            return
                        }
                    }
                    li = domUtils.findParentByTagName(range.startContainer, "li", true);
                    if (li) {
                        if (domUtils.isEmptyBlock(li)) {
                            bk = range.createBookmark();
                            var parentList = li.parentNode;
                            if (li !== parentList.lastChild) {
                                domUtils.breakParent(li, parentList);
                                clearEmptySibling(li)
                            } else {
                                parentList.parentNode.insertBefore(li, parentList.nextSibling);
                                if (domUtils.isEmptyNode(parentList)) {
                                    domUtils.remove(parentList)
                                }
                            }
                            if (!dtd.$list[li.parentNode.tagName]) {
                                if (!domUtils.isBlockElm(li.firstChild)) {
                                    p = me.document.createElement("p");
                                    li.parentNode.insertBefore(p, li);
                                    while (li.firstChild) {
                                        p.appendChild(li.firstChild)
                                    }
                                    domUtils.remove(li)
                                } else {
                                    domUtils.remove(li, true)
                                }
                            }
                            range.moveToBookmark(bk).select()
                        } else {
                            var first = li.firstChild;
                            if (!first || !domUtils.isBlockElm(first)) {
                                var p = me.document.createElement("p"); ! li.firstChild && domUtils.fillNode(me.document, p);
                                while (li.firstChild) {
                                    p.appendChild(li.firstChild)
                                }
                                li.appendChild(p);
                                first = p
                            }
                            var span = me.document.createElement("span");
                            range.insertNode(span);
                            domUtils.breakParent(span, li);
                            var nextLi = span.nextSibling;
                            first = nextLi.firstChild;
                            if (!first) {
                                p = me.document.createElement("p");
                                domUtils.fillNode(me.document, p);
                                nextLi.appendChild(p);
                                first = p
                            }
                            if (domUtils.isEmptyNode(first)) {
                                first.innerHTML = "";
                                domUtils.fillNode(me.document, first)
                            }
                            range.setStart(first, 0).collapse(true).shrinkBoundary().select();
                            domUtils.remove(span);
                            var pre = nextLi.previousSibling;
                            if (pre && domUtils.isEmptyBlock(pre)) {
                                pre.innerHTML = "<p></p>";
                                domUtils.fillNode(me.document, pre.firstChild)
                            }
                        }
                        preventAndSave()
                    }
                }
            }
            if (keyCode == 8) {
                range = me.selection.getRange();
                if (range.collapsed && domUtils.isStartInblock(range)) {
                    tmpRange = range.cloneRange().trimBoundary();
                    li = domUtils.findParentByTagName(range.startContainer, "li", true);
                    if (li && domUtils.isStartInblock(tmpRange)) {
                        start = domUtils.findParentByTagName(range.startContainer, "p", true);
                        if (start && start !== li.firstChild) {
                            var parentList = domUtils.findParentByTagName(start, ["ol", "ul"]);
                            domUtils.breakParent(start, parentList);
                            clearEmptySibling(start);
                            me.fireEvent("contentchange");
                            range.setStart(start, 0).setCursor(false, true);
                            me.fireEvent("saveScene");
                            domUtils.preventDefault(evt);
                            return
                        }
                        if (li && (pre = li.previousSibling)) {
                            if (keyCode == 46 && li.childNodes.length) {
                                return
                            }
                            if (dtd.$list[pre.tagName]) {
                                pre = pre.lastChild
                            }
                            me.undoManger && me.undoManger.save();
                            first = li.firstChild;
                            if (domUtils.isBlockElm(first)) {
                                if (domUtils.isEmptyNode(first)) {
                                    pre.appendChild(first);
                                    range.setStart(first, 0).setCursor(false, true);
                                    while (li.firstChild) {
                                        pre.appendChild(li.firstChild)
                                    }
                                } else {
                                    span = me.document.createElement("span");
                                    range.insertNode(span);
                                    if (domUtils.isEmptyBlock(pre)) {
                                        pre.innerHTML = ""
                                    }
                                    domUtils.moveChild(li, pre);
                                    range.setStartBefore(span).collapse(true).select(true);
                                    domUtils.remove(span)
                                }
                            } else {
                                if (domUtils.isEmptyNode(li)) {
                                    var p = me.document.createElement("p");
                                    pre.appendChild(p);
                                    range.setStart(p, 0).setCursor()
                                } else {
                                    range.setEnd(pre, pre.childNodes.length).collapse().select(true);
                                    while (li.firstChild) {
                                        pre.appendChild(li.firstChild)
                                    }
                                }
                            }
                            domUtils.remove(li);
                            me.fireEvent("contentchange");
                            me.fireEvent("saveScene");
                            domUtils.preventDefault(evt);
                            return
                        }
                        if (li && !li.previousSibling) {
                            var parentList = li.parentNode;
                            var bk = range.createBookmark();
                            if (domUtils.isTagNode(parentList.parentNode, "ol ul")) {
                                parentList.parentNode.insertBefore(li, parentList);
                                if (domUtils.isEmptyNode(parentList)) {
                                    domUtils.remove(parentList)
                                }
                            } else {
                                while (li.firstChild) {
                                    parentList.parentNode.insertBefore(li.firstChild, parentList)
                                }
                                domUtils.remove(li);
                                if (domUtils.isEmptyNode(parentList)) {
                                    domUtils.remove(parentList)
                                }
                            }
                            range.moveToBookmark(bk).setCursor(false, true);
                            me.fireEvent("contentchange");
                            me.fireEvent("saveScene");
                            domUtils.preventDefault(evt);
                            return
                        }
                    }
                }
            }
        });
        me.addListener("keyup",
        function(type, evt) {
            var keyCode = evt.keyCode || evt.which;
            if (keyCode == 8) {
                var rng = me.selection.getRange(),
                list;
                if (list = domUtils.findParentByTagName(rng.startContainer, ["ol", "ul"], true)) {
                    adjustList(list, list.tagName.toLowerCase(), getStyle(list) || domUtils.getComputedStyle(list, "list-style-type"), true)
                }
            }
        });
        me.addListener("tabkeydown",
        function() {
            var range = me.selection.getRange();
            function checkLevel(li) {
                if (me.options.maxListLevel != -1) {
                    var level = li.parentNode,
                    levelNum = 0;
                    while (/[ou]l/i.test(level.tagName)) {
                        levelNum++;
                        level = level.parentNode
                    }
                    if (levelNum >= me.options.maxListLevel) {
                        return true
                    }
                }
            }
            var li = domUtils.findParentByTagName(range.startContainer, "li", true);
            if (li) {
                var bk;
                if (range.collapsed) {
                    if (checkLevel(li)) return true;
                    var parentLi = li.parentNode,
                    list = me.document.createElement(parentLi.tagName),
                    index = utils.indexOf(listStyle[list.tagName], getStyle(parentLi) || domUtils.getComputedStyle(parentLi, "list-style-type"));
                    index = index + 1 == listStyle[list.tagName].length ? 0 : index + 1;
                    var currentStyle = listStyle[list.tagName][index];
                    setListStyle(list, currentStyle);
                    if (domUtils.isStartInblock(range)) {
                        me.fireEvent("saveScene");
                        bk = range.createBookmark();
                        parentLi.insertBefore(list, li);
                        list.appendChild(li);
                        adjustList(list, list.tagName.toLowerCase(), currentStyle);
                        me.fireEvent("contentchange");
                        range.moveToBookmark(bk).select(true);
                        return true
                    }
                } else {
                    me.fireEvent("saveScene");
                    bk = range.createBookmark();
                    for (var i = 0,
                    closeList, parents = domUtils.findParents(li), ci; ci = parents[i++];) {
                        if (domUtils.isTagNode(ci, "ol ul")) {
                            closeList = ci;
                            break
                        }
                    }
                    var current = li;
                    if (bk.end) {
                        while (current && !(domUtils.getPosition(current, bk.end) & domUtils.POSITION_FOLLOWING)) {
                            if (checkLevel(current)) {
                                current = domUtils.getNextDomNode(current, false, null,
                                function(node) {
                                    return node !== closeList
                                });
                                continue
                            }
                            var parentLi = current.parentNode,
                            list = me.document.createElement(parentLi.tagName),
                            index = utils.indexOf(listStyle[list.tagName], getStyle(parentLi) || domUtils.getComputedStyle(parentLi, "list-style-type"));
                            var currentIndex = index + 1 == listStyle[list.tagName].length ? 0 : index + 1;
                            var currentStyle = listStyle[list.tagName][currentIndex];
                            setListStyle(list, currentStyle);
                            parentLi.insertBefore(list, current);
                            while (current && !(domUtils.getPosition(current, bk.end) & domUtils.POSITION_FOLLOWING)) {
                                li = current.nextSibling;
                                list.appendChild(current);
                                if (!li || domUtils.isTagNode(li, "ol ul")) {
                                    if (li) {
                                        while (li = li.firstChild) {
                                            if (li.tagName == "LI") {
                                                break
                                            }
                                        }
                                    } else {
                                        li = domUtils.getNextDomNode(current, false, null,
                                        function(node) {
                                            return node !== closeList
                                        })
                                    }
                                    break
                                }
                                current = li
                            }
                            adjustList(list, list.tagName.toLowerCase(), currentStyle);
                            current = li
                        }
                    }
                    me.fireEvent("contentchange");
                    range.moveToBookmark(bk).select();
                    return true
                }
            }
        });
        function getLi(start) {
            while (start && !domUtils.isBody(start)) {
                if (start.nodeName == "TABLE") {
                    return null
                }
                if (start.nodeName == "LI") {
                    return start
                }
                start = start.parentNode
            }
        }
        me.commands["insertorderedlist"] = me.commands["insertunorderedlist"] = {
            execCommand: function(command, style) {
                if (!style) {
                    style = command.toLowerCase() == "insertorderedlist" ? "decimal": "disc"
                }
                var me = this,
                range = this.selection.getRange(),
                filterFn = function(node) {
                    return node.nodeType == 1 ? node.tagName.toLowerCase() != "br": !domUtils.isWhitespace(node)
                },
                tag = command.toLowerCase() == "insertorderedlist" ? "ol": "ul",
                frag = me.document.createDocumentFragment();
                range.adjustmentBoundary().shrinkBoundary();
                var bko = range.createBookmark(true),
                start = getLi(me.document.getElementById(bko.start)),
                modifyStart = 0,
                end = getLi(me.document.getElementById(bko.end)),
                modifyEnd = 0,
                startParent,
                endParent,
                list,
                tmp;
                if (start || end) {
                    start && (startParent = start.parentNode);
                    if (!bko.end) {
                        end = start
                    }
                    end && (endParent = end.parentNode);
                    if (startParent === endParent) {
                        while (start !== end) {
                            tmp = start;
                            start = start.nextSibling;
                            if (!domUtils.isBlockElm(tmp.firstChild)) {
                                var p = me.document.createElement("p");
                                while (tmp.firstChild) {
                                    p.appendChild(tmp.firstChild)
                                }
                                tmp.appendChild(p)
                            }
                            frag.appendChild(tmp)
                        }
                        tmp = me.document.createElement("span");
                        startParent.insertBefore(tmp, end);
                        if (!domUtils.isBlockElm(end.firstChild)) {
                            p = me.document.createElement("p");
                            while (end.firstChild) {
                                p.appendChild(end.firstChild)
                            }
                            end.appendChild(p)
                        }
                        frag.appendChild(end);
                        domUtils.breakParent(tmp, startParent);
                        if (domUtils.isEmptyNode(tmp.previousSibling)) {
                            domUtils.remove(tmp.previousSibling)
                        }
                        if (domUtils.isEmptyNode(tmp.nextSibling)) {
                            domUtils.remove(tmp.nextSibling)
                        }
                        var nodeStyle = getStyle(startParent) || domUtils.getComputedStyle(startParent, "list-style-type") || (command.toLowerCase() == "insertorderedlist" ? "decimal": "disc");
                        if (startParent.tagName.toLowerCase() == tag && nodeStyle == style) {
                            for (var i = 0,
                            ci, tmpFrag = me.document.createDocumentFragment(); ci = frag.firstChild;) {
                                if (domUtils.isTagNode(ci, "ol ul")) {
                                    tmpFrag.appendChild(ci)
                                } else {
                                    while (ci.firstChild) {
                                        tmpFrag.appendChild(ci.firstChild);
                                        domUtils.remove(ci)
                                    }
                                }
                            }
                            tmp.parentNode.insertBefore(tmpFrag, tmp)
                        } else {
                            list = me.document.createElement(tag);
                            setListStyle(list, style);
                            list.appendChild(frag);
                            tmp.parentNode.insertBefore(list, tmp)
                        }
                        domUtils.remove(tmp);
                        list && adjustList(list, tag, style);
                        range.moveToBookmark(bko).select();
                        return
                    }
                    if (start) {
                        while (start) {
                            tmp = start.nextSibling;
                            if (domUtils.isTagNode(start, "ol ul")) {
                                frag.appendChild(start)
                            } else {
                                var tmpfrag = me.document.createDocumentFragment(),
                                hasBlock = 0;
                                while (start.firstChild) {
                                    if (domUtils.isBlockElm(start.firstChild)) {
                                        hasBlock = 1
                                    }
                                    tmpfrag.appendChild(start.firstChild)
                                }
                                if (!hasBlock) {
                                    var tmpP = me.document.createElement("p");
                                    tmpP.appendChild(tmpfrag);
                                    frag.appendChild(tmpP)
                                } else {
                                    frag.appendChild(tmpfrag)
                                }
                                domUtils.remove(start)
                            }
                            start = tmp
                        }
                        startParent.parentNode.insertBefore(frag, startParent.nextSibling);
                        if (domUtils.isEmptyNode(startParent)) {
                            range.setStartBefore(startParent);
                            domUtils.remove(startParent)
                        } else {
                            range.setStartAfter(startParent)
                        }
                        modifyStart = 1
                    }
                    if (end && domUtils.inDoc(endParent, me.document)) {
                        start = endParent.firstChild;
                        while (start && start !== end) {
                            tmp = start.nextSibling;
                            if (domUtils.isTagNode(start, "ol ul")) {
                                frag.appendChild(start)
                            } else {
                                tmpfrag = me.document.createDocumentFragment();
                                hasBlock = 0;
                                while (start.firstChild) {
                                    if (domUtils.isBlockElm(start.firstChild)) {
                                        hasBlock = 1
                                    }
                                    tmpfrag.appendChild(start.firstChild)
                                }
                                if (!hasBlock) {
                                    tmpP = me.document.createElement("p");
                                    tmpP.appendChild(tmpfrag);
                                    frag.appendChild(tmpP)
                                } else {
                                    frag.appendChild(tmpfrag)
                                }
                                domUtils.remove(start)
                            }
                            start = tmp
                        }
                        var tmpDiv = domUtils.createElement(me.document, "div", {
                            tmpDiv: 1
                        });
                        domUtils.moveChild(end, tmpDiv);
                        frag.appendChild(tmpDiv);
                        domUtils.remove(end);
                        endParent.parentNode.insertBefore(frag, endParent);
                        range.setEndBefore(endParent);
                        if (domUtils.isEmptyNode(endParent)) {
                            domUtils.remove(endParent)
                        }
                        modifyEnd = 1
                    }
                }
                if (!modifyStart) {
                    range.setStartBefore(me.document.getElementById(bko.start))
                }
                if (bko.end && !modifyEnd) {
                    range.setEndAfter(me.document.getElementById(bko.end))
                }
                range.enlarge(true,
                function(node) {
                    return notExchange[node.tagName]
                });
                frag = me.document.createDocumentFragment();
                var bk = range.createBookmark(),
                current = domUtils.getNextDomNode(bk.start, false, filterFn),
                tmpRange = range.cloneRange(),
                tmpNode,
                block = domUtils.isBlockElm;
                while (current && current !== bk.end && domUtils.getPosition(current, bk.end) & domUtils.POSITION_PRECEDING) {
                    if (current.nodeType == 3 || dtd.li[current.tagName]) {
                        if (current.nodeType == 1 && dtd.$list[current.tagName]) {
                            while (current.firstChild) {
                                frag.appendChild(current.firstChild)
                            }
                            tmpNode = domUtils.getNextDomNode(current, false, filterFn);
                            domUtils.remove(current);
                            current = tmpNode;
                            continue
                        }
                        tmpNode = current;
                        tmpRange.setStartBefore(current);
                        while (current && current !== bk.end && (!block(current) || domUtils.isBookmarkNode(current))) {
                            tmpNode = current;
                            current = domUtils.getNextDomNode(current, false, null,
                            function(node) {
                                return ! notExchange[node.tagName]
                            })
                        }
                        if (current && block(current)) {
                            tmp = domUtils.getNextDomNode(tmpNode, false, filterFn);
                            if (tmp && domUtils.isBookmarkNode(tmp)) {
                                current = domUtils.getNextDomNode(tmp, false, filterFn);
                                tmpNode = tmp
                            }
                        }
                        tmpRange.setEndAfter(tmpNode);
                        current = domUtils.getNextDomNode(tmpNode, false, filterFn);
                        var li = range.document.createElement("li");
                        li.appendChild(tmpRange.extractContents());
                        if (domUtils.isEmptyNode(li)) {
                            var tmpNode = range.document.createElement("p");
                            while (li.firstChild) {
                                tmpNode.appendChild(li.firstChild)
                            }
                            li.appendChild(tmpNode)
                        }
                        frag.appendChild(li)
                    } else {
                        current = domUtils.getNextDomNode(current, true, filterFn)
                    }
                }
                range.moveToBookmark(bk).collapse(true);
                list = me.document.createElement(tag);
                setListStyle(list, style);
                list.appendChild(frag);
                range.insertNode(list);
                adjustList(list, tag, style);
                for (var i = 0,
                ci, tmpDivs = domUtils.getElementsByTagName(list, "div"); ci = tmpDivs[i++];) {
                    if (ci.getAttribute("tmpDiv")) {
                        domUtils.remove(ci, true)
                    }
                }
                range.moveToBookmark(bko).select()
            },
            queryCommandState: function(command) {
                var tag = command.toLowerCase() == "insertorderedlist" ? "ol": "ul";
                var path = this.selection.getStartElementPath();
                for (var i = 0,
                ci; ci = path[i++];) {
                    if (ci.nodeName == "TABLE") {
                        return 0
                    }
                    if (tag == ci.nodeName.toLowerCase()) {
                        return 1
                    }
                }
                return 0
            },
            queryCommandValue: function(command) {
                var tag = command.toLowerCase() == "insertorderedlist" ? "ol": "ul";
                var path = this.selection.getStartElementPath(),
                node;
                for (var i = 0,
                ci; ci = path[i++];) {
                    if (ci.nodeName == "TABLE") {
                        node = null;
                        break
                    }
                    if (tag == ci.nodeName.toLowerCase()) {
                        node = ci;
                        break
                    }
                }
                return node ? getStyle(node) || domUtils.getComputedStyle(node, "list-style-type") : null
            }
        }
    }; UE.plugins["enterkey"] = function() {
        var hTag, me = this,
        tag = me.options.enterTag;
        me.addListener("keyup",
        function(type, evt) {
            var keyCode = evt.keyCode || evt.which;
            if (keyCode == 13) {
                var range = me.selection.getRange(),
                start = range.startContainer,
                doSave;
                if (!browser.ie) {
                    if (/h\d/i.test(hTag)) {
                        if (browser.gecko) {
                            var h = domUtils.findParentByTagName(start, ["h1", "h2", "h3", "h4", "h5", "h6", "blockquote", "caption", "table"], true);
                            if (!h) {
                                me.document.execCommand("formatBlock", false, "<p>");
                                doSave = 1
                            }
                        } else {
                            if (start.nodeType == 1) {
                                var tmp = me.document.createTextNode(""),
                                div;
                                range.insertNode(tmp);
                                div = domUtils.findParentByTagName(tmp, "div", true);
                                if (div) {
                                    var p = me.document.createElement("p");
                                    while (div.firstChild) {
                                        p.appendChild(div.firstChild)
                                    }
                                    div.parentNode.insertBefore(p, div);
                                    domUtils.remove(div);
                                    range.setStartBefore(tmp).setCursor();
                                    doSave = 1
                                }
                                domUtils.remove(tmp)
                            }
                        }
                        if (me.undoManger && doSave) {
                            me.undoManger.save()
                        }
                    }
                    browser.opera && range.select()
                } else {
                    me.fireEvent("saveScene", true, true)
                }
            }
        });
        me.addListener("keydown",
        function(type, evt) {
            var keyCode = evt.keyCode || evt.which;
            if (keyCode == 13) {
                if (me.fireEvent("beforeenterkeydown")) {
                    domUtils.preventDefault(evt);
                    return
                }
                me.fireEvent("saveScene", true, true);
                hTag = "";
                var range = me.selection.getRange();
                if (!range.collapsed) {
                    var start = range.startContainer,
                    end = range.endContainer,
                    startTd = domUtils.findParentByTagName(start, "td", true),
                    endTd = domUtils.findParentByTagName(end, "td", true);
                    if (startTd && endTd && startTd !== endTd || !startTd && endTd || startTd && !endTd) {
                        evt.preventDefault ? evt.preventDefault() : evt.returnValue = false;
                        return
                    }
                }
                if (tag == "p") {
                    if (!browser.ie) {
                        start = domUtils.findParentByTagName(range.startContainer, ["ol", "ul", "p", "h1", "h2", "h3", "h4", "h5", "h6", "blockquote", "caption"], true);
                        if (!start && !browser.opera) {
                            me.document.execCommand("formatBlock", false, "<p>");
                            if (browser.gecko) {
                                range = me.selection.getRange();
                                start = domUtils.findParentByTagName(range.startContainer, "p", true);
                                start && domUtils.removeDirtyAttr(start)
                            }
                        } else {
                            hTag = start.tagName;
                            start.tagName.toLowerCase() == "p" && browser.gecko && domUtils.removeDirtyAttr(start)
                        }
                    }
                } else {
                    evt.preventDefault ? evt.preventDefault() : evt.returnValue = false;
                    if (!range.collapsed) {
                        range.deleteContents();
                        start = range.startContainer;
                        if (start.nodeType == 1 && (start = start.childNodes[range.startOffset])) {
                            while (start.nodeType == 1) {
                                if (dtd.$empty[start.tagName]) {
                                    range.setStartBefore(start).setCursor();
                                    if (me.undoManger) {
                                        me.undoManger.save()
                                    }
                                    return false
                                }
                                if (!start.firstChild) {
                                    var br = range.document.createElement("br");
                                    start.appendChild(br);
                                    range.setStart(start, 0).setCursor();
                                    if (me.undoManger) {
                                        me.undoManger.save()
                                    }
                                    return false
                                }
                                start = start.firstChild
                            }
                            if (start === range.startContainer.childNodes[range.startOffset]) {
                                br = range.document.createElement("br");
                                range.insertNode(br).setCursor()
                            } else {
                                range.setStart(start, 0).setCursor()
                            }
                        } else {
                            br = range.document.createElement("br");
                            range.insertNode(br).setStartAfter(br).setCursor()
                        }
                    } else {
                        br = range.document.createElement("br");
                        range.insertNode(br);
                        var parent = br.parentNode;
                        if (parent.lastChild === br) {
                            br.parentNode.insertBefore(br.cloneNode(true), br);
                            range.setStartBefore(br)
                        } else {
                            range.setStartAfter(br)
                        }
                        range.setCursor()
                    }
                }
            }
        })
    }; UE.plugins["keystrokes"] = function() {
        var me = this;
        var collapsed = true;
        me.addListener("keydown",
        function(type, evt) {
            var keyCode = evt.keyCode || evt.which,
            rng = me.selection.getRange();
            if (!rng.collapsed && !(evt.ctrlKey || evt.shiftKey || evt.altKey || evt.metaKey) && (keyCode >= 65 && keyCode <= 90 || keyCode >= 48 && keyCode <= 57 || keyCode >= 96 && keyCode <= 111 || {
                13 : 1,
                8 : 1,
                46 : 1
            } [keyCode])) {
                var tmpNode = rng.startContainer;
                if (domUtils.isFillChar(tmpNode)) {
                    rng.setStartBefore(tmpNode)
                }
                tmpNode = rng.endContainer;
                if (domUtils.isFillChar(tmpNode)) {
                    rng.setEndAfter(tmpNode)
                }
                rng.txtToElmBoundary();
                if (rng.endContainer && rng.endContainer.nodeType == 1) {
                    tmpNode = rng.endContainer.childNodes[rng.endOffset];
                    if (tmpNode && domUtils.isBr(tmpNode)) {
                        rng.setEndAfter(tmpNode)
                    }
                }
                if (rng.startOffset == 0) {
                    tmpNode = rng.startContainer;
                    if (domUtils.isBoundaryNode(tmpNode, "firstChild")) {
                        tmpNode = rng.endContainer;
                        if (rng.endOffset == (tmpNode.nodeType == 3 ? tmpNode.nodeValue.length: tmpNode.childNodes.length) && domUtils.isBoundaryNode(tmpNode, "lastChild")) {
                            me.fireEvent("saveScene");
                            me.body.innerHTML = "<p>" + (browser.ie ? "": "<br/>") + "</p>";
                            rng.setStart(me.body.firstChild, 0).setCursor(false, true);
                            me.Zs();
                            return
                        }
                    }
                }
            }
            if (keyCode == 8) {
                rng = me.selection.getRange();
                collapsed = rng.collapsed;
                if (me.fireEvent("delkeydown", evt)) {
                    return
                }
                var start, end;
                if (rng.collapsed && rng.inFillChar()) {
                    start = rng.startContainer;
                    if (domUtils.isFillChar(start)) {
                        rng.setStartBefore(start).shrinkBoundary(true).collapse(true);
                        domUtils.remove(start)
                    } else {
                        start.nodeValue = start.nodeValue.replace(new RegExp("^" + domUtils.fillChar), "");
                        rng.startOffset--;
                        rng.collapse(true).select(true)
                    }
                }
                if (start = rng.getClosedNode()) {
                    me.fireEvent("saveScene");
                    rng.setStartBefore(start);
                    domUtils.remove(start);
                    rng.setCursor();
                    me.fireEvent("saveScene");
                    domUtils.preventDefault(evt);
                    return
                }
                if (!browser.ie) {
                    start = domUtils.findParentByTagName(rng.startContainer, "table", true);
                    end = domUtils.findParentByTagName(rng.endContainer, "table", true);
                    if (start && !end || !start && end || start !== end) {
                        evt.preventDefault();
                        return
                    }
                }
            }
            if (keyCode == 9) {
                var excludeTagNameForTabKey = {
                    ol: 1,
                    ul: 1,
                    table: 1
                };
                if (me.fireEvent("tabkeydown", evt)) {
                    domUtils.preventDefault(evt);
                    return
                }
                var range = me.selection.getRange();
                me.fireEvent("saveScene");
                for (var i = 0,
                txt = "",
                tabSize = me.options.tabSize || 4,
                tabNode = me.options.tabNode || "&nbsp;"; i < tabSize; i++) {
                    txt += tabNode
                }
                var span = me.document.createElement("span");
                span.innerHTML = txt + domUtils.fillChar;
                if (range.collapsed) {
                    range.insertNode(span.cloneNode(true).firstChild).setCursor(true)
                } else {
                    var filterFn = function(node) {
                        return domUtils.isBlockElm(node) && !excludeTagNameForTabKey[node.tagName.toLowerCase()]
                    };
                    start = domUtils.findParent(range.startContainer, filterFn, true);
                    end = domUtils.findParent(range.endContainer, filterFn, true);
                    if (start && end && start === end) {
                        range.deleteContents();
                        range.insertNode(span.cloneNode(true).firstChild).setCursor(true)
                    } else {
                        var bookmark = range.createBookmark();
                        range.enlarge(true);
                        var bookmark2 = range.createBookmark(),
                        current = domUtils.getNextDomNode(bookmark2.start, false, filterFn);
                        while (current && !(domUtils.getPosition(current, bookmark2.end) & domUtils.POSITION_FOLLOWING)) {
                            current.insertBefore(span.cloneNode(true).firstChild, current.firstChild);
                            current = domUtils.getNextDomNode(current, false, filterFn)
                        }
                        range.moveToBookmark(bookmark2).moveToBookmark(bookmark).select()
                    }
                }
                domUtils.preventDefault(evt)
            }
            if (browser.gecko && keyCode == 46) {
                range = me.selection.getRange();
                if (range.collapsed) {
                    start = range.startContainer;
                    if (domUtils.isEmptyBlock(start)) {
                        var parent = start.parentNode;
                        while (domUtils.getChildCount(parent) == 1 && !domUtils.isBody(parent)) {
                            start = parent;
                            parent = parent.parentNode
                        }
                        if (start === parent.lastChild) evt.preventDefault();
                        return
                    }
                }
            }
        });
        me.addListener("keyup",
        function(type, evt) {
            var keyCode = evt.keyCode || evt.which,
            rng, me = this;
            if (keyCode == 8) {
                if (me.fireEvent("delkeyup")) {
                    return
                }
                rng = me.selection.getRange();
                if (rng.collapsed) {
                    var tmpNode, autoClearTagName = ["h1", "h2", "h3", "h4", "h5", "h6"];
                    if (tmpNode = domUtils.findParentByTagName(rng.startContainer, autoClearTagName, true)) {
                        if (domUtils.isEmptyBlock(tmpNode)) {
                            var pre = tmpNode.previousSibling;
                            if (pre && pre.nodeName != "TABLE") {
                                domUtils.remove(tmpNode);
                                rng.setStartAtLast(pre).setCursor(false, true);
                                return
                            } else {
                                var next = tmpNode.nextSibling;
                                if (next && next.nodeName != "TABLE") {
                                    domUtils.remove(tmpNode);
                                    rng.setStartAtFirst(next).setCursor(false, true);
                                    return
                                }
                            }
                        }
                    }
                    if (domUtils.isBody(rng.startContainer)) {
                        var tmpNode = domUtils.createElement(me.document, "p", {
                            innerHTML: browser.ie ? domUtils.fillChar: "<br/>"
                        });
                        rng.insertNode(tmpNode).setStart(tmpNode, 0).setCursor(false, true)
                    }
                }
                if (!collapsed && (rng.startContainer.nodeType == 3 || rng.startContainer.nodeType == 1 && domUtils.isEmptyBlock(rng.startContainer))) {
                    if (browser.ie) {
                        var span = rng.document.createElement("span");
                        rng.insertNode(span).setStartBefore(span).collapse(true);
                        rng.select();
                        domUtils.remove(span)
                    } else {
                        rng.select()
                    }
                }
            }
        })
    }; UE.plugins["fiximgclick"] = function() {
        function Scale() {
            this.editor = null;
            this.resizer = null;
            this.cover = null;
            this.doc = document;
            this.prePos = {
                x: 0,
                y: 0
            };
            this.startPos = {
                x: 0,
                y: 0
            }
        } (function() {
            var rect = [[0, 0, -1, -1], [0, 0, 0, -1], [0, 0, 1, -1], [0, 0, -1, 0], [0, 0, 1, 0], [0, 0, -1, 1], [0, 0, 0, 1], [0, 0, 1, 1]];
            Scale.prototype = {
                init: function(editor) {
                    var me = this;
                    me.editor = editor;
                    me.startPos = this.prePos = {
                        x: 0,
                        y: 0
                    };
                    me.dragId = -1;
                    var hands = [],
                    cover = me.cover = document.createElement("div"),
                    resizer = me.resizer = document.createElement("div");
                    cover.id = me.editor.iframe.id + "_imagescale_cover";
                    cover.style.cssText = "position:absolute;display:none;z-index:" + me.editor.options.zIndex + ";filter:alpha(opacity=0); opacity:0;background:#CCC;";
                    domUtils.on(cover, "mousedown click",
                    function() {
                        me.hide()
                    });
                    for (i = 0; i < 8; i++) {
                        hands.push('<span class="edui-editor-scale-hand' + i + '"></span>')
                    }
                    resizer.id = me.editor.iframe.id + "_imagescale";
                    resizer.className = "edui-editor-scale";
                    resizer.innerHTML = hands.join("");
                    resizer.style.cssText += ";display:none;border:1px solid #3b77ff;z-index:" + me.editor.options.zIndex + ";";
                    me.editor.iframe.parentNode.parentNode.appendChild(cover);
                    me.editor.iframe.parentNode.parentNode.appendChild(resizer);
                    me.initStyle();
                    me.initEvents()
                },
                initStyle: function() {
                    utils.cssRule("imagescale", ".edui-editor-scale{position:absolute;border:1px solid #38B2CE;}" + ".edui-editor-scale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}" + ".edui-editor-scale .edui-editor-scale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}" + ".edui-editor-scale .edui-editor-scale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}" + ".edui-editor-scale .edui-editor-scale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}" + ".edui-editor-scale .edui-editor-scale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}" + ".edui-editor-scale .edui-editor-scale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}" + ".edui-editor-scale .edui-editor-scale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}" + ".edui-editor-scale .edui-editor-scale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}" + ".edui-editor-scale .edui-editor-scale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")
                },
                initEvents: function() {
                    var me = this;
                    me.startPos.x = me.startPos.y = 0;
                    me.isDraging = false
                },
                sY: function(e) {
                    var me = this;
                    switch (e.type) {
                    case "mousedown":
                        var hand = e.target || e.srcElement,
                        hand;
                        if (hand.className.indexOf("edui-editor-scale-hand") != -1 && me.dragId == -1) {
                            me.dragId = hand.className.slice( - 1);
                            me.startPos.x = me.prePos.x = e.clientX;
                            me.startPos.y = me.prePos.y = e.clientY;
                            domUtils.on(me.doc, "mousemove", me.proxy(me.sY, me))
                        }
                        break;
                    case "mousemove":
                        if (me.dragId != -1) {
                            me.updateContainerStyle(me.dragId, {
                                x: e.clientX - me.prePos.x,
                                y: e.clientY - me.prePos.y
                            });
                            me.prePos.x = e.clientX;
                            me.prePos.y = e.clientY;
                            me.updateTargetElement()
                        }
                        break;
                    case "mouseup":
                        if (me.dragId != -1) {
                            me.updateContainerStyle(me.dragId, {
                                x: e.clientX - me.prePos.x,
                                y: e.clientY - me.prePos.y
                            });
                            me.updateTargetElement();
                            if (me.target.parentNode) me.attachTo(me.target);
                            me.dragId = -1
                        }
                        domUtils.un(me.doc, "mousemove", me.proxy(me.sY, me));
                        me.editor.fireEvent("contentchange");
                        break;
                    default:
                        break
                    }
                },
                updateTargetElement: function() {
                    var me = this,
                    targetPos;
                    domUtils.setStyles(me.target, {
                        width: me.resizer.style.width,
                        height: me.resizer.style.height
                    });
                    me.attachTo(me.target)
                },
                updateContainerStyle: function(dir, offset) {
                    var me = this,
                    dom = me.resizer,
                    tmp;
                    if (rect[dir][0] != 0) {
                        tmp = parseInt(dom.style.left) + offset.x;
                        dom.style.left = me.bvk("left", tmp) + "px"
                    }
                    if (rect[dir][1] != 0) {
                        tmp = parseInt(dom.style.top) + offset.y;
                        dom.style.top = me.bvk("top", tmp) + "px"
                    }
                    if (rect[dir][2] != 0) {
                        tmp = dom.clientWidth + rect[dir][2] * offset.x;
                        dom.style.width = me.bvk("width", tmp) + "px"
                    }
                    if (rect[dir][3] != 0) {
                        tmp = dom.clientHeight + rect[dir][3] * offset.y;
                        dom.style.height = me.bvk("height", tmp) + "px"
                    }
                },
                bvk: function(prop, value) {
                    var ele = this.resizer,
                    wrap = document;
                    value = isNaN(value) ? 0 : value;
                    switch (prop) {
                    case "left":
                        return value < 0 ? 0 : value + ele.clientWidth > wrap.clientWidth ? wrap.clientWidth - ele.clientWidth: value;
                    case "top":
                        return value < 0 ? 0 : value + ele.clientHeight > wrap.clientHeight ? wrap.clientHeight - ele.clientHeight: value;
                    case "width":
                        return value <= 0 ? 1 : value + ele.offsetLeft > wrap.clientWidth ? wrap.clientWidth - ele.offsetLeft: value;
                    case "height":
                        return value <= 0 ? 1 : value + ele.offsetTop > wrap.clientHeight ? wrap.clientHeight - ele.offsetTop: value
                    }
                },
                hideCover: function() {
                    this.cover.style.display = "none"
                },
                showCover: function() {
                    var me = this,
                    editorPos = domUtils.getXY(me.editor.iframe.parentNode.parentNode),
                    iframePos = domUtils.getXY(me.editor.iframe);
                    domUtils.setStyles(me.cover, {
                        width: me.editor.iframe.offsetWidth + "px",
                        height: me.editor.iframe.offsetHeight + "px",
                        top: iframePos.y - editorPos.y + "px",
                        left: iframePos.x - editorPos.x + "px",
                        position: "absolute",
                        display: ""
                    })
                },
                show: function(targetObj) {
                    var me = this;
                    me.resizer.style.display = "block";
                    if (targetObj) me.attachTo(targetObj);
                    domUtils.on(this.resizer, "mousedown", me.proxy(me.sY, me));
                    domUtils.on(me.doc, "mouseup", me.proxy(me.sY, me));
                    me.showCover();
                    me.editor.fireEvent("afterscaleshow", me);
                    me.editor.fireEvent("saveScene")
                },
                hide: function() {
                    var me = this;
                    me.hideCover();
                    me.resizer.style.display = "none";
                    domUtils.un(me.resizer, "mousedown", me.proxy(me.sY, me));
                    domUtils.un(me.doc, "mouseup", me.proxy(me.sY, me));
                    me.editor.fireEvent("afterscalehide", me)
                },
                proxy: function(fn, context) {
                    return function(e) {
                        return fn.apply(context || this, arguments)
                    }
                },
                attachTo: function(targetObj) {
                    var me = this,
                    target = me.target = targetObj,
                    resizer = this.resizer,
                    imgPos = domUtils.getXY(target),
                    iframePos = domUtils.getXY(me.editor.iframe),
                    editorPos = domUtils.getXY(resizer.parentNode);
                    domUtils.setStyles(resizer, {
                        width: target.width + "px",
                        height: target.height + "px",
                        left: iframePos.x + imgPos.x - me.editor.document.body.scrollLeft - editorPos.x - parseInt(resizer.style.borderLeftWidth) + "px",
                        top: iframePos.y + imgPos.y - me.editor.document.body.scrollTop - editorPos.y - parseInt(resizer.style.borderTopWidth) + "px"
                    })
                }
            }
        })();
        return function() {
            var me = this,
            imageScale;
            me.setOpt("imageScaleEnabled", true);
            if (!browser.ie && me.options.imageScaleEnabled) {
                me.addListener("click",
                function(type, e) {
                    var range = me.selection.getRange(),
                    img = range.getClosedNode();
                    if (img && img.tagName == "IMG" && me.body.contentEditable != "false") {
                        if (!imageScale) {
                            imageScale = new Scale;
                            imageScale.init(me);
                            me.iframe.parentNode.parentNode.appendChild(imageScale.resizer);
                            var bfx = function(e) {
                                imageScale.hide();
                                if (imageScale.target) me.selection.getRange().selectNode(imageScale.target).select()
                            },
                            bvj = function(e) {
                                var ele = e.target || e.srcElement;
                                if (ele && (ele.className === undefined || ele.className.indexOf("edui-editor-scale") == -1)) {
                                    bfx(e)
                                }
                            },
                            timer;
                            me.addListener("afterscaleshow",
                            function(e) {
                                me.addListener("beforekeydown", bfx);
                                me.addListener("beforemousedown", bvj);
                                domUtils.on(document, "keydown", bfx);
                                domUtils.on(document, "mousedown", bvj);
                                me.selection.getNative().removeAllRanges()
                            });
                            me.addListener("afterscalehide",
                            function(e) {
                                me.removeListener("beforekeydown", bfx);
                                me.removeListener("beforemousedown", bvj);
                                domUtils.un(document, "keydown", bfx);
                                domUtils.un(document, "mousedown", bvj);
                                var target = imageScale.target;
                                if (target.parentNode) {
                                    me.selection.getRange().selectNode(target).select()
                                }
                            });
                            domUtils.on(imageScale.resizer, "mousedown",
                            function(e) {
                                me.selection.getNative().removeAllRanges();
                                var ele = e.target || e.srcElement;
                                if (ele && ele.className.indexOf("edui-editor-scale-hand") == -1) {
                                    timer = setTimeout(function() {
                                        imageScale.hide();
                                        if (imageScale.target) me.selection.getRange().selectNode(ele).select()
                                    },
                                    200)
                                }
                            });
                            domUtils.on(imageScale.resizer, "mouseup",
                            function(e) {
                                var ele = e.target || e.srcElement;
                                if (ele && ele.className.indexOf("edui-editor-scale-hand") == -1) {
                                    clearTimeout(timer)
                                }
                            })
                        }
                        imageScale.show(img)
                    } else {
                        if (imageScale && imageScale.resizer.style.display != "none") imageScale.hide()
                    }
                })
            }
            if (browser.webkit) {
                me.addListener("click",
                function(type, e) {
                    if (e.target.tagName == "IMG" && me.body.contentEditable != "false") {
                        var range = new dom.Range(me.document);
                        range.selectNode(e.target).select()
                    }
                })
            }
        }
    } (); UE.plugin.register("autolink",
    function() {
        var cont = 0;
        return ! browser.ie ? {
            bindEvents: {
                reset: function() {
                    cont = 0
                },
                keydown: function(type, evt) {
                    var me = this;
                    var keyCode = evt.keyCode || evt.which;
                    if (keyCode == 32 || keyCode == 13) {
                        var sel = me.selection.getNative(),
                        range = sel.getRangeAt(0).cloneRange(),
                        offset,
                        charCode;
                        var start = range.startContainer;
                        while (start.nodeType == 1 && range.startOffset > 0) {
                            start = range.startContainer.childNodes[range.startOffset - 1];
                            if (!start) {
                                break
                            }
                            range.setStart(start, start.nodeType == 1 ? start.childNodes.length: start.nodeValue.length);
                            range.collapse(true);
                            start = range.startContainer
                        }
                        do {
                            if (range.startOffset == 0) {
                                start = range.startContainer.previousSibling;
                                while (start && start.nodeType == 1) {
                                    start = start.lastChild
                                }
                                if (!start || domUtils.isFillChar(start)) {
                                    break
                                }
                                offset = start.nodeValue.length
                            } else {
                                start = range.startContainer;
                                offset = range.startOffset
                            }
                            range.setStart(start, offset - 1);
                            charCode = range.toString().charCodeAt(0)
                        } while ( charCode != 160 && charCode != 32 );
                        if (range.toString().replace(new RegExp(domUtils.fillChar, "g"), "").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)) {
                            while (range.toString().length) {
                                if (/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(range.toString())) {
                                    break
                                }
                                try {
                                    range.setStart(range.startContainer, range.startOffset + 1)
                                } catch(e) {
                                    var start = range.startContainer;
                                    while (! (next = start.nextSibling)) {
                                        if (domUtils.isBody(start)) {
                                            return
                                        }
                                        start = start.parentNode
                                    }
                                    range.setStart(next, 0)
                                }
                            }
                            if (domUtils.findParentByTagName(range.startContainer, "a", true)) {
                                return
                            }
                            var a = me.document.createElement("a"),
                            text = me.document.createTextNode(" "),
                            href;
                            me.undoManger && me.undoManger.save();
                            a.appendChild(range.extractContents());
                            a.href = a.innerHTML = a.innerHTML.replace(/<[^>]+>/g, "");
                            href = a.getAttribute("href").replace(new RegExp(domUtils.fillChar, "g"), "");
                            href = /^(?:https?:\/\/)/ig.test(href) ? href: "http://" + href;
                            a.setAttribute("_src", utils.html(href));
                            a.href = utils.html(href);
                            range.insertNode(a);
                            a.parentNode.insertBefore(text, a.nextSibling);
                            range.setStart(text, 0);
                            range.collapse(true);
                            sel.removeAllRanges();
                            sel.addRange(range);
                            me.undoManger && me.undoManger.save()
                        }
                    }
                }
            }
        }: {}
    },
    function() {
        var keyCodes = {
            37 : 1,
            38 : 1,
            39 : 1,
            40 : 1,
            13 : 1,
            32 : 1
        };
        function checkIsCludeLink(node) {
            if (node.nodeType == 3) {
                return null
            }
            if (node.nodeName == "A") {
                return node
            }
            var lastChild = node.lastChild;
            while (lastChild) {
                if (lastChild.nodeName == "A") {
                    return lastChild
                }
                if (lastChild.nodeType == 3) {
                    if (domUtils.isWhitespace(lastChild)) {
                        lastChild = lastChild.previousSibling;
                        continue
                    }
                    return null
                }
                lastChild = lastChild.lastChild
            }
        }
        browser.ie && this.addListener("keyup",
        function(cmd, evt) {
            var me = this,
            keyCode = evt.keyCode;
            if (keyCodes[keyCode]) {
                var rng = me.selection.getRange();
                var start = rng.startContainer;
                if (keyCode == 13) {
                    while (start && !domUtils.isBody(start) && !domUtils.isBlockElm(start)) {
                        start = start.parentNode
                    }
                    if (start && !domUtils.isBody(start) && start.nodeName == "P") {
                        var pre = start.previousSibling;
                        if (pre && pre.nodeType == 1) {
                            var pre = checkIsCludeLink(pre);
                            if (pre && !pre.getAttribute("_href")) {
                                domUtils.remove(pre, true)
                            }
                        }
                    }
                } else if (keyCode == 32) {
                    if (start.nodeType == 3 && /^\s$/.test(start.nodeValue)) {
                        start = start.previousSibling;
                        if (start && start.nodeName == "A" && !start.getAttribute("_href")) {
                            domUtils.remove(start, true)
                        }
                    }
                } else {
                    start = domUtils.findParentByTagName(start, "a", true);
                    if (start && !start.getAttribute("_href")) {
                        var bk = rng.createBookmark();
                        domUtils.remove(start, true);
                        rng.moveToBookmark(bk).select(true)
                    }
                }
            }
        })
    }); UE.plugins["autoheight"] = function() {
        var me = this;
        me.autoHeightEnabled = me.options.autoHeightEnabled !== false;
        if (!me.autoHeightEnabled) {
            return
        }
        var bakOverflow, lastHeight = 0,
        options = me.options,
        currentHeight, timer;
        function adjustHeight() {
            var me = this;
            clearTimeout(timer);
            if (isFullscreen) return;
            if (!me.queryCommandState || me.queryCommandState && me.queryCommandState("source") != 1) {
                timer = setTimeout(function() {
                    var node = me.body.lastChild;
                    while (node && node.nodeType != 1) {
                        node = node.previousSibling
                    }
                    if (node && node.nodeType == 1) {
                        node.style.clear = "both";
                        currentHeight = Math.max(domUtils.getXY(node).y + node.offsetHeight + 25, Math.max(options.minFrameHeight, options.initialFrameHeight));
                        if (currentHeight != lastHeight) {
                            me.setHeight(currentHeight, true);
                            lastHeight = currentHeight
                        }
                        domUtils.removeStyle(node, "clear")
                    }
                },
                50)
            }
        }
        var isFullscreen;
        me.addListener("fullscreenchanged",
        function(cmd, f) {
            isFullscreen = f
        });
        me.addListener("destroy",
        function() {
            me.removeListener("contentchange afterinserthtml keyup mouseup", adjustHeight)
        });
        me.enableAutoHeight = function() {
            var me = this;
            if (!me.autoHeightEnabled) {
                return
            }
            var doc = me.document;
            me.autoHeightEnabled = true;
            bakOverflow = doc.body.style.overflowY;
            doc.body.style.overflowY = "hidden";
            me.addListener("contentchange afterinserthtml keyup mouseup", adjustHeight);
            setTimeout(function() {
                adjustHeight.call(me)
            },
            browser.gecko ? 100 : 0);
            me.fireEvent("autoheightchanged", me.autoHeightEnabled)
        };
        me.disableAutoHeight = function() {
            me.body.style.overflowY = bakOverflow || "";
            me.removeListener("contentchange", adjustHeight);
            me.removeListener("keyup", adjustHeight);
            me.removeListener("mouseup", adjustHeight);
            me.autoHeightEnabled = false;
            me.fireEvent("autoheightchanged", me.autoHeightEnabled)
        };
        me.addListener("ready",
        function() {
            me.enableAutoHeight();
            var timer;
            domUtils.on(browser.ie ? me.body: me.document, browser.webkit ? "dragover": "drop",
            function() {
                clearTimeout(timer);
                timer = setTimeout(function() {
                    adjustHeight.call(me)
                },
                100)
            })
        })
    }; UE.plugins["pasteplain"] = function() {
        var me = this;
        me.setOpt({
            pasteplain: true,
            filterTxtRules: function() {
                function transP(node) {
                    node.tagName = "p";
                    node.setStyle()
                }
                function removeClass(node) {
                    node.className = ""
                }
                function removeNode(node) {
                    node.parentNode.removeChild(node, true)
                }
                return {
                    "-": "script style object iframe embed input select",
                    p: {
                        $: {}
                    },
                    br: {
                        $: {}
                    },
                    div: function(node) {
                        var tmpNode, p = UE.uNode.createElement("p");
                        while (tmpNode = node.firstChild()) {
                            if (tmpNode.type == "text" || !UE.dom.dtd.$block[tmpNode.tagName]) {
                                p.appendChild(tmpNode)
                            } else {
                                if (p.firstChild()) {
                                    node.parentNode.insertBefore(p, node);
                                    p = UE.uNode.createElement("p")
                                } else {
                                    node.parentNode.insertBefore(tmpNode, node)
                                }
                            }
                        }
                        if (p.firstChild()) {
                            node.parentNode.insertBefore(p, node)
                        }
                        node.parentNode.removeChild(node)
                    },
                    ol: removeNode,
                    ul: removeNode,
                    dl: removeNode,
                    dt: removeNode,
                    dd: removeNode,
                    li: removeNode,
                    caption: removeNode,
                    h1: removeNode,
                    h2: removeNode,
                    h3: removeNode,
                    h4: removeNode,
                    h5: removeNode,
                    h6: removeNode,
                    th: removeClass,
                    tr: removeClass,
                    td: removeClass
                }
            } ()
        });
        var pasteplain = me.options.pasteplain;
        me.commands["pasteplain"] = {
            queryCommandState: function() {
                return pasteplain ? 1 : 0
            },
            execCommand: function() {
                pasteplain = !pasteplain | 0
            },
            notNeedUndo: 1
        }
    }; UE.plugins["basestyle"] = function() {
        var basestyles = {
            bold: ["strong", "b"],
            italic: ["em", "i"],
            subscript: ["sub"],
            superscript: ["sup"]
        },
        getObj = function(editor, tagNames) {
            return domUtils.filterNodeList(editor.selection.getStartElementPath(), tagNames)
        },
        me = this;
        me.addshortcutkey({
            Bold: "ctrl+66",
            Italic: "ctrl+73",
            Underline: "ctrl+85"
        });
        me.addInputRule(function(root) {
            utils.each(root.getNodesByTagName("b i"),
            function(node) {
                switch (node.tagName) {
                case "b":
                    node.tagName = "strong";
                    break;
                case "i":
                    node.tagName = "em"
                }
            })
        });
        for (var style in basestyles) { (function(cmd, tagNames) {
                me.commands[cmd] = {
                    execCommand: function(cmdName) {
                        var range = me.selection.getRange(),
                        obj = getObj(this, tagNames);
                        if (range.collapsed) {
                            if (obj) {
                                var tmpText = me.document.createTextNode("");
                                range.insertNode(tmpText).removeInlineStyle(tagNames);
                                range.setStartBefore(tmpText);
                                domUtils.remove(tmpText)
                            } else {
                                var tmpNode = range.document.createElement(tagNames[0]);
                                if (cmdName == "superscript" || cmdName == "subscript") {
                                    tmpText = me.document.createTextNode("");
                                    range.insertNode(tmpText).removeInlineStyle(["sub", "sup"]).setStartBefore(tmpText).collapse(true)
                                }
                                range.insertNode(tmpNode).setStart(tmpNode, 0)
                            }
                            range.collapse(true)
                        } else {
                            if (cmdName == "superscript" || cmdName == "subscript") {
                                if (!obj || obj.tagName.toLowerCase() != cmdName) {
                                    range.removeInlineStyle(["sub", "sup"])
                                }
                            }
                            obj ? range.removeInlineStyle(tagNames) : range.applyInlineStyle(tagNames[0])
                        }
                        range.select()
                    },
                    queryCommandState: function() {
                        return getObj(this, tagNames) ? 1 : 0
                    }
                }
            })(style, basestyles[style])
        }
    }; UE.plugins["elementpath"] = function() {
        var currentLevel, tagNames, me = this;
        me.setOpt("elementPathEnabled", true);
        if (!me.options.elementPathEnabled) {
            return
        }
        me.commands["elementpath"] = {
            execCommand: function(cmdName, level) {
                var start = tagNames[level],
                range = me.selection.getRange();
                currentLevel = level * 1;
                range.selectNode(start).select()
            },
            queryCommandValue: function() {
                var parents = [].concat(this.selection.getStartElementPath()).reverse(),
                names = [];
                tagNames = parents;
                for (var i = 0,
                ci; ci = parents[i]; i++) {
                    if (ci.nodeType == 3) {
                        continue
                    }
                    var name = ci.tagName.toLowerCase();
                    if (name == "img" && ci.getAttribute("anchorname")) {
                        name = "anchor"
                    }
                    names[i] = name;
                    if (currentLevel == i) {
                        currentLevel = -1;
                        break
                    }
                }
                return names
            }
        }
    }; UE.plugins["formatmatch"] = function() {
        var me = this,
        list = [],
        img,
        flag = 0;
        me.addListener("reset",
        function() {
            list = [];
            flag = 0
        });
        function addList(type, evt) {
            if (browser.webkit) {
                var target = evt.target.tagName == "IMG" ? evt.target: null
            }
            function addFormat(range) {
                if (text) {
                    range.selectNode(text)
                }
                return range.applyInlineStyle(list[list.length - 1].tagName, null, list)
            }
            me.undoManger && me.undoManger.save();
            var range = me.selection.getRange(),
            imgT = target || range.getClosedNode();
            if (img && imgT && imgT.tagName == "IMG") {
                imgT.style.cssText += ";float:" + (img.style.cssFloat || img.style.styleFloat || "none") + ";display:" + (img.style.display || "inline");
                img = null
            } else {
                if (!img) {
                    var collapsed = range.collapsed;
                    if (collapsed) {
                        var text = me.document.createTextNode("match");
                        range.insertNode(text).select()
                    }
                    me.zS = true;
                    var removeFormatAttributes = me.options.removeFormatAttributes;
                    me.options.removeFormatAttributes = "";
                    me.execCommand("removeformat");
                    me.options.removeFormatAttributes = removeFormatAttributes;
                    me.zS = false;
                    range = me.selection.getRange();
                    if (list.length) {
                        addFormat(range)
                    }
                    if (text) {
                        range.setStartBefore(text).collapse(true)
                    }
                    range.select();
                    text && domUtils.remove(text)
                }
            }
            me.undoManger && me.undoManger.save();
            me.removeListener("mouseup", addList);
            flag = 0
        }
        me.commands["formatmatch"] = {
            execCommand: function(cmdName) {
                if (flag) {
                    flag = 0;
                    list = [];
                    me.removeListener("mouseup", addList);
                    return
                }
                var range = me.selection.getRange();
                img = range.getClosedNode();
                if (!img || img.tagName != "IMG") {
                    range.collapse(true).shrinkBoundary();
                    var start = range.startContainer;
                    list = domUtils.findParents(start, true,
                    function(node) {
                        return ! domUtils.isBlockElm(node) && node.nodeType == 1
                    });
                    for (var i = 0,
                    ci; ci = list[i]; i++) {
                        if (ci.tagName == "A") {
                            list.splice(i, 1);
                            break
                        }
                    }
                }
                me.addListener("mouseup", addList);
                flag = 1
            },
            queryCommandState: function() {
                return flag
            },
            notNeedUndo: 1
        }
    }; UE.plugins["customstyle"] = function() {
        var me = this;
        me.setOpt({
            customstyle: [{
                tag: "h1",
                name: "tc",
                style: "font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"
            },
            {
                tag: "h1",
                name: "tl",
                style: "font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"
            },
            {
                tag: "span",
                name: "im",
                style: "font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"
            },
            {
                tag: "span",
                name: "hi",
                style: "font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"
            }]
        });
        me.commands["customstyle"] = {
            execCommand: function(cmdName, obj) {
                var me = this,
                tagName = obj.tag,
                node = domUtils.findParent(me.selection.getStart(),
                function(node) {
                    return node.getAttribute("label")
                },
                true),
                range,
                bk,
                tmpObj = {};
                for (var p in obj) {
                    if (obj[p] !== undefined) tmpObj[p] = obj[p]
                }
                delete tmpObj.tag;
                if (node && node.getAttribute("label") == obj.label) {
                    range = this.selection.getRange();
                    bk = range.createBookmark();
                    if (range.collapsed) {
                        if (dtd.$block[node.tagName]) {
                            var fillNode = me.document.createElement("p");
                            domUtils.moveChild(node, fillNode);
                            node.parentNode.insertBefore(fillNode, node);
                            domUtils.remove(node)
                        } else {
                            domUtils.remove(node, true)
                        }
                    } else {
                        var common = domUtils.getCommonAncestor(bk.start, bk.end),
                        nodes = domUtils.getElementsByTagName(common, tagName);
                        if ((new RegExp(tagName, "i")).test(common.tagName)) {
                            nodes.push(common)
                        }
                        for (var i = 0,
                        ni; ni = nodes[i++];) {
                            if (ni.getAttribute("label") == obj.label) {
                                var ps = domUtils.getPosition(ni, bk.start),
                                pe = domUtils.getPosition(ni, bk.end);
                                if ((ps & domUtils.POSITION_FOLLOWING || ps & domUtils.POSITION_CONTAINS) && (pe & domUtils.POSITION_PRECEDING || pe & domUtils.POSITION_CONTAINS)) if (dtd.$block[tagName]) {
                                    var fillNode = me.document.createElement("p");
                                    domUtils.moveChild(ni, fillNode);
                                    ni.parentNode.insertBefore(fillNode, ni)
                                }
                                domUtils.remove(ni, true)
                            }
                        }
                        node = domUtils.findParent(common,
                        function(node) {
                            return node.getAttribute("label") == obj.label
                        },
                        true);
                        if (node) {
                            domUtils.remove(node, true)
                        }
                    }
                    range.moveToBookmark(bk).select()
                } else {
                    if (dtd.$block[tagName]) {
                        this.execCommand("paragraph", tagName, tmpObj, "customstyle");
                        range = me.selection.getRange();
                        if (!range.collapsed) {
                            range.collapse();
                            node = domUtils.findParent(me.selection.getStart(),
                            function(node) {
                                return node.getAttribute("label") == obj.label
                            },
                            true);
                            var pNode = me.document.createElement("p");
                            domUtils.insertAfter(node, pNode);
                            domUtils.fillNode(me.document, pNode);
                            range.setStart(pNode, 0).setCursor()
                        }
                    } else {
                        range = me.selection.getRange();
                        if (range.collapsed) {
                            node = me.document.createElement(tagName);
                            domUtils.setAttributes(node, tmpObj);
                            range.insertNode(node).setStart(node, 0).setCursor();
                            return
                        }
                        bk = range.createBookmark();
                        range.applyInlineStyle(tagName, tmpObj).moveToBookmark(bk).select()
                    }
                }
            },
            queryCommandValue: function() {
                var parent = domUtils.filterNodeList(this.selection.getStartElementPath(),
                function(node) {
                    return node.getAttribute("label")
                });
                return parent ? parent.getAttribute("label") : ""
            }
        };
        me.addListener("keyup",
        function(type, evt) {
            var keyCode = evt.keyCode || evt.which;
            if (keyCode == 32 || keyCode == 13) {
                var range = me.selection.getRange();
                if (range.collapsed) {
                    var node = domUtils.findParent(me.selection.getStart(),
                    function(node) {
                        return node.getAttribute("label")
                    },
                    true);
                    if (node && dtd.$block[node.tagName] && domUtils.isEmptyNode(node)) {
                        var p = me.document.createElement("p");
                        domUtils.insertAfter(node, p);
                        domUtils.fillNode(me.document, p);
                        domUtils.remove(node);
                        range.setStart(p, 0).setCursor()
                    }
                }
            }
        })
    }; UE.commands["insertparagraph"] = {
        execCommand: function(cmdName, front) {
            var me = this,
            range = me.selection.getRange(),
            start = range.startContainer,
            tmpNode;
            while (start) {
                if (domUtils.isBody(start)) {
                    break
                }
                tmpNode = start;
                start = start.parentNode
            }
            if (tmpNode) {
                var p = me.document.createElement("p");
                if (front) {
                    tmpNode.parentNode.insertBefore(p, tmpNode)
                } else {
                    tmpNode.parentNode.insertBefore(p, tmpNode.nextSibling)
                }
                domUtils.fillNode(me.document, p);
                range.setStart(p, 0).setCursor(false, true)
            }
        }
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    Aj,
    cPp;
    var dn = '<div class="zitm zbg" title=""><div class="zicn zbg"></div></div>';
    bs.baP = NEJ.C();
    Aj = bs.baP.bu(bs.st);
    cPp = bs.baP.cE;
    Aj.hk = function() {
        this.hy()
    };
    Aj.bF = function(Y) {
        this.bI(Y);
        this.iu = Y.title || "";
        this.cPm = Y.onclick || dk;
        this.bb.title = this.iu;
        this.bvf(false);
        this.kM(false)
    };
    Aj.bL = function() {
        this.bO()
    };
    Aj.bU = function() {
        this.bW = bm.bY(dn)
    };
    Aj.bP = function() {
        this.bQ();
        this.xY = false;
        this.chR = false;
        ch.bf(this.bb, "click", this.kW.Z(this))
    };
    Aj.kM = function(EU) {
        this.xY = EU;
        if (EU) {
            bm.bJ(this.bb, "js-disabled")
        } else {
            bm.bZ(this.bb, "js-disabled")
        }
    };
    Aj.chQ = function() {
        return this.xY
    };
    Aj.bvf = function(chP) {
        this.chR = chP;
        if (chP) {
            bm.bJ(this.bb, "js-checked")
        } else {
            bm.bZ(this.bb, "js-checked")
        }
    };
    Aj.dkY = function() {
        return this.chR
    };
    Aj.kW = function() {
        if (this.xY) {
            return
        }
        this.cPm()
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bs = bq("nej.ut"),
    chN = {},
    Np;
    if ( !! bs.beU) return;
    bs.beU = NEJ.C();
    Np = bs.beU.bu(bs.hS);
    bs.beU.cR = function() {
        chN[this.command] = this
    };
    bs.beU.dkZ = function(cPf) {
        return chN[cPf] || null
    };
    Np.hk = function() {
        this.gj = this.constructor.command;
        this.hy()
    };
    Np.bF = function(Y) {
        this.bI(Y);
        this.fq = Y.area;
        this.cPe = Y.toolbar
    };
    Np.bL = function() {
        this.bO();
        delete this.fq;
        delete this.cPe
    };
    Np.cPc = dk;
    Np.dla = dk;
    Np.dlb = function() {
        return null
    };
    Np.dle = function() {
        return null
    }
})(); (function() {
    var bq = NEJ.P,
    dk = NEJ.F,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    eO = bq("nej.ut"),
    bs = bq("nej.ut.cmd"),
    biv;
    if ( !! bs.chI) return;
    bs.chI = NEJ.C();
    biv = bs.chI.bu(eO.beU);
    biv.hk = function() {
        this.bGe = {
            destroyable: !0,
            parent: document.body,
            onchange: this.jv.Z(this)
        };
        this.hy()
    };
    biv.jv = dk;
    biv.cOV = dk;
    biv.cPc = function(Y) {
        ch.bn(document, "click");
        var bB = Y.target,
        gG = bm.rx(bB);
        this.bGe.top = gG.y + bB.offsetHeight + 1;
        this.bGe.left = gG.x - 1;
        this.bGe.width = bB.clientWidth;
        this.cOV();
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    FJ,
    cOJ;
    var dn = '<div class="zitm zbg" title=""><div class="zicn zbg"></div></div>';
    bs.bbs = NEJ.C();
    FJ = bs.bbs.bu(bs.st);
    cOJ = bs.bbs.cE;
    FJ.hk = function() {
        this.hy()
    };
    FJ.bF = function(Y) {
        this.bI(Y);
        this.iu = Y.title || "";
        this.fq = Y.editor;
        this.bGt = {
            onchange: this.bvb.Z(this)
        };
        this.bb.title = this.iu;
        this.kM(false)
    };
    FJ.bL = function() {
        this.bO()
    };
    FJ.bU = function() {
        this.bW = bm.bY(dn)
    };
    FJ.bP = function() {
        this.bQ();
        this.xY = false;
        ch.bf(this.bb, "click", this.kW.Z(this))
    };
    FJ.kM = function(EU) {
        this.xY = EU;
        if (EU) {
            bm.bJ(this.bb, "js-disabled")
        } else {
            bm.bZ(this.bb, "js-disabled")
        }
    };
    FJ.chQ = function() {
        return this.xY
    };
    FJ.kW = function() {};
    FJ.bvb = function(W) {}
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    ch = bq("nej.v"),
    cO = bq("nej.ui"),
    bs = bq("nej.ui.cmd"),
    nk,
    bva;
    if ( !! bs.KA) return;
    bs.KA = NEJ.C();
    nk = bs.KA.bu(cO.LI);
    bva = bs.KA.cE;
    nk.bU = function() {
        this.dv = cF;
        this.bW = dj
    };
    nk.bP = function() {
        this.bQ();
        this.xP = bm.bc(this.bb, "j-btn");
        this.ln = bm.bc(this.bb, "ipt");
        this.TH = bm.bc(this.bb, "j-error")[0]
    };
    nk.Aq = function() {
        this.fs()
    };
    nk.bGQ = function() {
        var kK = {};
        kK.name = bE.dV(this.ln[0].value);
        kK.href = this.ln[1].value;
        var ep = /^(?:http(s)?:\/\/)[^\s].?/,
        Ir = /^(?:http(s)?:\/\/).*/;
        var cN = kK.href.search(ep),
        bGY = kK.href.search(Ir);
        if (bGY < 0) {
            this.bn("onErrorLink", 0);
            return
        }
        if (cN < 0) {
            this.bn("onErrorLink", 1);
            return
        }
        this.bn("onchange", kK);
        this.fs()
    };
    nk.bF = function(Y) {
        Y.parent = Y.parent || document.body;
        Y.draggable = Y.draggable || false;
        Y.destroyable = Y.destroyable || false;
        Y.title = Y.title || "超链接";
        Y.mask = Y.maskclazz || true;
        this.bI(Y);
        this.ln[0].value = Y.name || "";
        this.hd([[this.xP[1], "click", this.bGQ.Z(this)], [this.xP[0], "click", this.Aq.Z(this)], [this.ln[0], "focus", this.qt.Z(this, "")], [this.ln[1], "focus", this.qt.Z(this, "")]])
    };
    nk.qt = function(fG) {
        this.TH.innerText = fG
    };
    nk.bL = function() {
        this.bO()
    };
    nk.cOH = function() {
        this.ln[1].focus();
        this.ln[1].value = "http://"
    };
    var dj = bm.bY('<div><div class="u-row f-cb"><div class="u-edit f-cb"><div class="f-fl u-title">标题</div><input class="f-fl ipt" type="text" /></div></div><div class="f-cb"><div class="u-edit f-cb"><div class="f-fl u-title">链接</div><input class="f-fl ipt" type="text" value="http://" /></div></div><div class="u-error j-error"></div><div class="btn f-cb"><a class="f-fr slave j-btn"><span>取消 </span></a><a class="f-fr main right j-btn"><span>确定 </span></a></div></div>');
    var cF = bm.dD(".#<uispace>{padding:20px 20px 32px 20px;}.#<uispace> .u-title{color:#ccc;height:35px;line-height:35px;margin:0 8px 0 10px;}.#<uispace> .u-row{margin-bottom:10px;}.#<uispace> .u-error{color:red;padding-top:10px;}.#<uispace> .u-edit{position: relative;z-index: 101;background: #FAFAFA;border: 1px solid #DFDFDF;-webkit-box-shadow: inset 1px 1px 2px #DFDFDF;-moz-box-shadow: inset 1px 1px 2px #dfdfdf;box-shadow: inset 1px 1px 2px #DFDFDF;}.#<uispace> .ipt{display:block;font-size: 14px;position: relative;z-index: 101;line-height:35px;height:35px;width: 290px;resize: none;background: transparent;border: none;color: #444;overflow:hidden;}")
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("nej.ui"),
    j = NEJ.P("nej.j"),
    eu = NEJ.P("edu.u"),
    oT,
    cOG;
    var m_math = ["\\widetilde{ab}", "\\overline{ab}", "\\overbrace{ab}", "\\sqrt{ab}", "f'", "x^{k}", "\\lim_{a \\rightarrow b}", "\\begin{bmatrix}a & b \\\\c & d \\end{bmatrix}", "\\big(a\\big)", "\\int_a^b x", "\\sum_a^b x", "\\prod_a^b x", "\\bigcap_a^b x", "\\bigvee_a^b x", "\\bigotimes", "\\widehat{ab}", "\\underline{ab}", "\\underbrace{ab}", "\\sqrt[n]{ab}", "\\frac{a}{b}", "x_{k}", "\\frac{\\partial^nf}{\\partial x^n}", "x =\\begin{cases}a & x = 0\\\\b & x > 0\\end{cases}", "\\big\\{a\\big\\}", "\\oint_a^b x", "\\bigsqcup_a^b x", "\\coprod_a^b x", "\\bigcup_a^b x", "\\bigwedge_a^b x", "\\bigoplus"];
    var m_greek = ["\\alpha", "\\beta", "\\gamma", "\\delta", "\\epsilon", "\\varepsilon", "\\zeta", "\\eta", "\\theta", "\\vartheta", "\\gamma", "\\kappa", "\\lambda", "\\mu", "\\nu", "\\xi", "o", "\\pi", "\\varpi", "\\rho", "\\varrho", "\\sigma", "\\varsigma", "\\tau", "\\upsilon", "\\phi", "\\varphi", "\\chi", "\\psi", "\\omega", "\\Gamma", "\\Delta", "\\Theta", "\\Lambda", "\\Xi", "\\Pi", "\\Sigma", "\\Upsilon", "\\Phi", "\\Psi", "\\Omega", "\\$"];
    var m_rel = ["\\leq", "\\prec", "\\preceq", "\\ll", "\\subset", "\\subseteq", "\\sqsubset", "\\sqsubseteq", "\\in", "\\vdash", ">", "\\smile", "\\sim", "\\asymp", "\\equiv", "\\mid", "\\neq", "\\perp", ":", "\\geq", "\\succ", "\\succeq", "\\gg", "\\supset", "\\supseteq", "\\sqsupset", "\\sqsupseteq", "\\ni", "\\dashv", "<", "\\frown", "\\simeq", "\\approx", "\\parallel", "\\propto"];
    var m_logic = ["\\hat{a}", "\\acute{a}", "\\bar{a}", "\\dot{a}", "\\breve{a}", "\\check{a}", "\\grave{a}", "\\vec{a}", "\\ddot{a}", "\\tilde{a}", "+", "\\times", "\\cap", "\\cup", "\\vee", "\\setminus", "\\bigtriangleup", "\\triangleright", "\\oplus", "\\otimes", "\\odot", "\\uplus", "\\ast", "\\circ", "-", "\\div", "\\sqcup", "\\sqcap", "\\wedge", "\\wr", "\\bigtriangledown", "\\triangleleft", "\\ominus", "\\oslash", "\\bigcirc", "\\amalg", "\\star", "\\bullet"];
    var m_symbol = ["\\ldots", "\\vdots", "\\mp", "\\times", "/", "|", "\\imath", "\\nabla", "\\top", "\\forall", "\\neg", "\\partial", "\\Re", "\\aleph", "\\ell", "\\wp", "\\prime", "\\surd", "\\natural", "\\clubsuit", "\\cdots", "\\ddots", "\\pm", "\\div", "\\backslash", "\\|", "\\jmath", "\\triangle", "\\bot", "\\exists", "\\flat", "\\infty", "\\Im", "\\hbar", "\\emptyset", ".", "\\angle", "\\sharp", "\\Diamond", "\\spadesuit"];
    var m_arrow = ["\\leftarrow", "\\Leftarrow", "\\leftrightarrow", "\\mapsto", "\\leftharpoonup", "\\rightharpoonup", "\\longleftarrow", "\\Longleftarrow", "\\longleftrightarrow", "\\uparrow", "\\downarrow", "\\updownarrow", "\\rightleftharpoons", "\\nearrow", "\\searrow", "\\rightarrow", "\\Rightarrow", "\\Leftrightarrow", "\\leftharpoondown", "\\rightharpoondown", "\\longrightarrow", "\\Longrightarrow", "\\Longleftrightarrow", "\\Uparrow", "\\Downarrow", "\\Updownarrow", "\\nwarrow", "\\swarrow"];
    var m_math_rect = ["2,2,29,47", "31,2,58,47", "60,2,87,47", "89,2,119,47", "121,2,148,47", "150,2,177,47", "179,2,214,47", "216,2,314,47", "316,2,344,47", "346,2,378,47", "380,2,420,47", "422,2,459,47", "461,2,493,47", "495,2,527,47", "529,2,556,47", "2,49,29,94", "31,49,58,94", "60,49,87,94", "89,49,119,94", "121,49,148,94", "150,49,177,94", "179,49,214,94", "216,49,314,94", "316,49,344,94", "346,49,378,94", "380,49,420,94", "422,49,459,94", "461,49,493,94", "495,49,527,94", "529,49,556,94"];
    var m_greek_rect = ["2,2,29,22", "31,2,58,22", "60,2,87,22", "89,2,116,22", "118,2,145,22", "147,2,174,22", "176,2,203,22", "205,2,232,22", "234,2,261,22", "263,2,290,22", "292,2,319,22", "321,2,348,22", "350,2,377,22", "379,2,406,22", "408,2,435,22", "437,2,464,22", "466,2,493,22", "495,2,522,22", "524,2,551,22", "553,2,580,22", "582,2,609,22", "2,24,29,44", "31,24,58,44", "60,24,87,44", "89,24,116,44", "118,24,145,44", "147,24,174,44", "176,24,203,44", "205,24,232,44", "234,24,261,44", "263,24,290,44", "292,24,319,44", "321,24,348,44", "350,24,377,44", "379,24,406,44", "408,24,435,44", "437,24,464,44", "466,24,493,44", "495,24,522,44", "524,24,551,44", "553,24,580,44", "582,24,609,44"];
    var m_rel_rect = ["2,2,29,28", "31,2,58,28", "60,2,87,28", "89,2,116,28", "118,2,145,28", "147,2,174,28", "176,2,203,28", "205,2,232,28", "234,2,261,28", "263,2,290,28", "292,2,319,28", "321,2,348,28", "350,2,377,28", "379,2,406,28", "408,2,435,28", "437,2,464,28", "466,2,493,28", "2,30,29,51", "31,30,58,51", "60,30,87,51", "89,30,116,51", "118,30,145,51", "147,30,174,51", "176,30,203,51", "205,30,232,51", "234,30,261,51", "263,30,290,51", "292,30,319,51", "321,30,348,51", "350,30,377,51", "379,30,406,51", "408,30,435,51", "437,30,464,51", "466,30,493,51", "495,30,522,51"];
    var m_logic_rect = ["2,2,29,24", "31,2,58,24", "60,2,87,24", "89,2,116,24", "118,2,145,24", "147,2,174,24", "176,2,203,24", "205,2,232,24", "234,2,261,24", "263,2,290,24", "292,2,319,24", "321,2,348,24", "350,2,377,24", "379,2,406,24", "408,2,435,24", "437,2,464,24", "466,2,493,24", "495,2,522,24", "524,2,551,24", "2,26,29,52", "31,26,58,52", "60,26,87,52", "89,26,116,52", "118,26,145,52", "147,26,174,52", "176,26,203,52", "205,26,232,52", "234,26,261,52", "263,26,290,52", "292,26,319,52", "321,26,348,52", "350,26,377,52", "379,26,406,52", "408,26,435,52", "437,26,464,52", "466,26,493,52", "495,26,522,52", "524,26,551,52"];
    var m_symbol_rect = ["2,2,29,26", "31,2,58,26", "60,2,87,26", "89,2,116,26", "118,2,145,26", "147,2,174,26", "176,2,203,26", "205,2,232,26", "234,2,261,26", "263,2,290,26", "292,2,319,26", "321,2,348,26", "350,2,377,26", "379,2,406,26", "408,2,435,26", "437,2,464,26", "466,2,493,26", "495,2,522,26", "524,2,551,26", "553,2,580,26", "2,28,29,54", "31,28,58,54", "60,28,87,54", "89,28,116,54", "118,28,145,54", "147,28,174,54", "176,28,203,54", "205,28,232,54", "234,28,261,54", "263,28,290,54", "292,28,319,54", "321,28,348,54", "350,28,377,54", "379,28,406,54", "408,28,435,54", "437,28,464,54", "466,28,493,54", "495,28,522,54", "524,28,551,54", "553,28,580,54"];
    var m_arrow_rect = ["2,2,29,25", "31,2,58,25", "60,2,87,25", "89,2,116,25", "118,2,145,25", "147,2,174,25", "176,2,214,25", "216,2,254,25", "256,2,294,25", "296,2,323,25", "325,2,352,25", "354,2,381,25", "383,2,410,25", "412,2,439,25", "2,27,29,50", "31,27,58,50", "60,27,87,50", "89,27,116,50", "118,27,145,50", "147,27,174,50", "176,27,214,50", "216,27,254,50", "256,27,294,50", "296,27,323,50", "325,27,352,50", "354,27,381,50", "383,27,410,50", "412,27,439,50"];
    var s_algebra = ["\\left(x-1\\right)\\left(x+3\\right)", "\\sqrt{a^2+b^2}", "x = a_0 + \\frac{1}{a_1 + \\frac{1}{a_2 + \\frac{1}{a_3 + a_4}}}", "x = a_0 + \\frac{1}{\\displaystyle a_1 + \\frac{1}{\\displaystyle a_2 + \\frac{1}{\\displaystyle a_3 + a_4}}}", "\\sqrt{\\frac{x^2}{k+1}}\\qquad\nx^{\\frac{2}{k+1}}\\qquad\n\\frac{\\partial^2f}{\\partial x^2}"];
    var s_calculus = ["\\frac{\\partial y}{\\partial x}", "\\frac{d}{dx}c^n=nx^{n-1}", "\\frac{d}{dx}e^{ax}=a\\,e^{ax}", "\\frac{d}{dx}\\ln(x)=\\frac{1}{x}", "\\frac{d}{dx}\\sin x=\\cos x", "a_i^2 + b_j^2 = c_k^2"];
    var s_stats = ["{^n}C_r", "\\frac{n!}{r!(n-r)!}", "\\sum_{i=1}^{n}{X_i}", "\\sum_{i=1}^{n}{X_i^2}", "\\sum_{i=1}^{n}{(X_i - \\overline{X})^2}", "X_1, \\cdots,X_n", "\\frac{x-\\mu}{\\sigma}"];
    var s_set = ["\\bigcup_{i=1}^{n}{X_i}", "\\bigcap_{i=1}^{n}{X_i}"];
    var s_trig = ["\\cos^{-1}\\theta", "\\sin^{-1}\\theta", "e^{i \\theta}", "\\left(\\frac{\\pi}{2}-\\theta \\right )", "\\lim_{x \\to a} \\frac{f(x) - f(a)}{x - a}", "\\int_{0}^{\\pi} \\sin x \\, dx = 2"];
    var s_physics = ["\\vec{F}=m\\vec{a}", "e=m c^2", "\\vec{F}=m \\frac{d \\vec{v}}{dt} + \\vec{v}\\frac{dm}{dt}", "\\oint \\vec{F} \\cdot d\\vec{s}=0", "\\vec{F}_g=-F\\frac{m_1 m_2}{r^2} \\vec{e}_r"];
    var s_matrices = ["\\begin{pmatrix}\n a_{11} & a_{12} \\\\\n a_{21} & a_{22}\n \\end{pmatrix}", "\\begin{pmatrix}\n a_{11} & a_{12} & a_{13}\\\\\n a_{21} & a_{22} & a_{23}\\\\\n a_{31} & a_{32} & a_{33}\n \\end{pmatrix}", "\\begin{pmatrix}\n a_{11} & \\cdots & a_{1n}\\\\\n \\vdots & \\ddots & \\vdots\\\\\n a_{m1} & \\cdots & a_{mn}\n \\end{pmatrix}", "\\begin{pmatrix}\n 1 & 0 \\\\\n 0 & 1\n \\end{pmatrix}", "\\mathbf{X} = \\left(\n\\begin{array}{ccc}\nx_1 & x_2 & \\ldots \\\\\nx_3 & x_4 & \\ldots \\\\\n\\vdots & \\vdots & \\ddots\n\\end{array} \\right)"];
    var s_chemistry = ["_{10}^{5}C^{16}", "2H_2 + O_2 {\\overset{n,m}{\\longrightarrow}} 2H_2O", "A\\underset{b}{\\overset{a}{\\longleftrightarrow}}B", "A\\underset{0}{\\overset{a}{\\rightleftharpoons}}B", "A\\underset{0^{\\circ}C }{\\overset{100^{\\circ}C}{\\rightleftharpoons}}B"];
    var samples = ["\\left(x-1\\right)\\left(x+3\\right)", "\\sqrt{a^2+b^2}", "a_i^2 + b_j^2 = c_k^2", "\\sum_{i=1}^{n} x_{i}^{2}", "x = a_0 + \\frac{1}{a_1 + \\frac{1}{a_2 + \\frac{1}{a_3 + a_4}}}", "x = a_0 + \\frac{1}{\\displaystyle a_1 + \\frac{1}{\\displaystyle a_2 + \\frac{1}{\\displaystyle a_3 + a_4}}}", "\\lim_{x \\to a} \\frac{f(x) - f(a)}{x - a}", "\\int_{0}^{\\pi} \\sin x \\, dx = 2", "\\frac{d}{d\\theta} \\sin(\\theta) = \\cos(\\theta)", "\\mathbf{X} = \\left(\n\\begin{array}{ccc}\nx_1 & x_2 & \\ldots \\\\\nx_3 & x_4 & \\ldots \\\\\n\\vdots & \\vdots & \\ddots\n\\end{array} \\right)"];
    var m_normal_img = {
        math: "http://img2.ph.126.net/G3MYoLa9g8WpKl0TWAYyWg==/2019301483022554715.png",
        greek: "http://img2.ph.126.net/EbQDQuKuBYrlS0rZFWpbkg==/6608780665003467926.png",
        rel: "http://img0.ph.126.net/Vt7_hp2xQXJwCaN-oTa8LQ==/6598205562169887885.png",
        symbol: "http://img2.ph.126.net/crG-r_w69oeg_2wCfkWEww==/6597704184867699980.png",
        logic: "http://img0.ph.126.net/whnMeWV_WxAoCQg7SHssvQ==/3190237386138797667.png",
        arrow: "http://img2.ph.126.net/VxmY-43B8jqHNx22w8cG4g==/6597543656170048310.png",
        Algebra_1: "http://img2.ph.126.net/UQihbSjorHPa6M66y7-liQ==/4791830003622446441.png",
        Algebra_2: "http://img0.ph.126.net/IzWfQsPlWxSi1QXN-RYc1w==/1448470230253357794.png",
        Algebra_3: "http://img1.ph.126.net/b0ogK2TTM1hypDoGyOBfeQ==/6597202807565753503.png",
        Algebra_4: "http://img1.ph.126.net/b0ogK2TTM1hypDoGyOBfeQ==/6597202807565753503.png",
        Algebra_5: "http://img1.ph.126.net/jEloIOEsTGw5hrHl-DTjvA==/1882223169364789588.png",
        Calculus_1: "http://img2.ph.126.net/qi61tho2IlM3J5q118SkiA==/2053359955204861724.png",
        Calculus_2: "http://img0.ph.126.net/7hITU95jGVKjr5lvcxVDEg==/3159838088654437749.png",
        Calculus_3: "http://img2.ph.126.net/mHoke2y1Q7QjOy7SdSZ_bA==/87820192833871898.png",
        Calculus_4: "http://img2.ph.126.net/fI37iu4MldT2mdoABt9K6w==/2854156263946906340.png",
        Calculus_5: "http://img2.ph.126.net/jtOULAW0EmkntU4MvuHnsg==/2633479882122969578.png",
        Calculus_6: "http://img1.ph.126.net/qzuBICz13K1qpSzoQFEhgw==/6597497476680500014.png",
        Stats_1: "http://img2.ph.126.net/dpDV5xCKNH050M7BIW6T6A==/4835177150035861754.png",
        Stats_2: "http://img0.ph.126.net/oFsmSZ2k1P_oCgRuNRrEtA==/6598094511495507735.png",
        Stats_3: "http://img1.ph.126.net/F6cGevZA6tOMA477y-EJIw==/1139410705825566685.png",
        Stats_4: "http://img1.ph.126.net/hkUSozEU_O-rw6zo0P3jqw==/708191041504319116.png",
        Stats_5: "http://img2.ph.126.net/Ou4e4KkpHL2y22aAPI1GfA==/6597477685471200077.png",
        Stats_6: "http://img0.ph.126.net/HIIq-iI-LoFZuouian8VrA==/1334191389626577906.png",
        Stats_7: "http://img1.ph.126.net/-AMAzTlNvtLoSvcAAq4xag==/6597636015146779870.png",
        Set_1: "http://img2.ph.126.net/aWNb4VxJOD7Pn0C7csEFiQ==/6597900997449074369.png",
        Set_2: "http://img2.ph.126.net/N1hBtCFPi4_hNZMTGF-lqg==/6598112103681548699.png",
        Trig_1: "http://img1.ph.126.net/QQQjrBesRuHbT8rOcZhhRw==/1825365224069039284.png",
        Trig_2: "http://img0.ph.126.net/zaRh16mtMcmxj5WPl7iq_A==/6608681708956968093.png",
        Trig_3: "http://img0.ph.126.net/JUJwy5K4ydQjL45U33jIDA==/6608636628980229456.png",
        Trig_4: "http://img0.ph.126.net/Fa6bgqR8qKjyPn-9OCQAlw==/1984680060887425938.png",
        Trig_5: "http://img1.ph.126.net/dTjZ0NFeHdeETG0neihOVg==/6598164880239685021.png",
        Trig_6: "http://img1.ph.126.net/kx9we2exD1W7hnP8s2-ArA==/6608426622260169550.png",
        Physics_1: "http://img2.ph.126.net/43GWnpj4030o8j0wGJYLiw==/720294465502878278.png",
        Physics_2: "http://img1.ph.126.net/CgJGzVVVHP8gocLayZ6sUg==/6608487095398851985.png",
        Physics_3: "http://img1.ph.126.net/ZtYA5oW2muRdKSN1XjGm9Q==/1745707805659777441.png",
        Physics_4: "http://img2.ph.126.net/_jnhyNKizoeocDqpCVyOvg==/1756685329751488529.png",
        Physics_5: "http://img0.ph.126.net/DQ9-kxDlyFrdFuQDGyNAbg==/6597675597565382544.png",
        Matrices_1: "http://img0.ph.126.net/To5ah5g69Lp1LdoU5yguiA==/2262495862900545069.png",
        Matrices_2: "http://img2.ph.126.net/72lTyMExzTUXky6BddxNLQ==/1413848808118630055.png",
        Matrices_3: "http://img1.ph.126.net/oDZp9cT2eCZzOvx2uG7NNg==/6597141234914598082.png",
        Matrices_4: "http://img0.ph.126.net/AJBcQbQzSAxZOnf6RD23ZQ==/6597198409519248396.png",
        Matrices_5: "http://img2.ph.126.net/jQ8sb2aftHq6wamn_l4PPQ==/6608562961701168488.png",
        Chemistry_1: "http://img1.ph.126.net/vJN63vEddPmjwgWa7dqtAg==/1916000166570022513.png",
        Chemistry_2: "http://img2.ph.126.net/h6ZPvjlo7HAwJ_iLQK2uQw==/2057863554832177238.png",
        Chemistry_3: "http://img1.ph.126.net/uMzxgfryIOeJE1K7yXSDJw==/1709679008641115020.png",
        Chemistry_4: "http://img0.ph.126.net/ADxwUfbFWhPc18OCkDSh-Q==/6597869111611873233.png",
        Chemistry_5: "http://img0.ph.126.net/cO7plxf5gtWSbNAL8yuF3g==/1409908158444404259.png"
    };
    var dn = e.ee('<div class="m-mathedit f-cb"><div class="u-equation j-equation f-pr"><div class="f-cb eqitems"><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">数学</div><div class="j-eqitem eqitem eqitem-1 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">希腊</div><div class="j-eqitem eqitem eqitem-2 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">关系</div><div class="j-eqitem eqitem eqitem-3 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">符号</div><div class="j-eqitem eqitem eqitem-4 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">逻辑</div><div class="j-eqitem eqitem eqitem-5 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">矩形</div><div class="j-eqitem eqitem eqitem-6 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">代数</div><div class="j-eqitem eqitem eqitem-7 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">微积分</div><div class="j-eqitem eqitem eqitem-8 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">统计学</div><div class="j-eqitem eqitem eqitem-9 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">集合</div><div class="j-eqitem eqitem eqitem-10 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">三角</div><div class="j-eqitem eqitem eqitem-11 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">物理</div><div class="j-eqitem eqitem eqitem-12 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">矩阵</div><div class="j-eqitem eqitem eqitem-13 f-pa" style="display:none;"></div></div><div class="item f-fl j-item f-cb f-pr"><div class="itemname f-f0">化学</div><div class="j-eqitem eqitem eqitem-14 f-pa" style="display:none;"></div></div></div><div class="imgsrea f-pa"></div></div><div class="u-latex j-latex"><p class="f-f0 latextip">latex编辑区域：</p><p class="f-f0 chinatip" style="dispaly:block;">暂不支持中文字符，请不要输入中文字符</p><div class="latexarea"><textarea class="j-latexSrc latexSrc"></textarea></div><div class="latexlen"><span class="j-latexMsg latexMsg"></span><span class="tipinfo">注意：超过200字符长度 无法解析出图片</span></div><a class="j-preview u-btn u-btn-preview">预览</a><div class="imgshow"><span class="imginfo f-f0">公式图片：</span><img src="" class="j-latexImg latexImg" /></div><p class="f-f0 savetip">提示： 确定前请点击预览查看效果<p></div></div>');
    p.buX = NEJ.C();
    oT = p.buX.bu(p.st, true);
    cOG = p.buX.cE;
    oT.bU = function() {
        this.bW = e.bY(e.bX(dn))
    };
    oT.bP = function() {
        this.bQ();
        this.pd = e.bc(this.bb, "j-item");
        this.qD = e.bc(this.bb, "j-eqitem");
        this.EQ = e.bc(this.bb, "j-latexSrc")[0];
        this.TC = e.bc(this.bb, "j-latexMsg")[0];
        this.JD = e.bc(this.bb, "j-latexImg")[0];
        this.kv = e.bc(this.bb, "j-preview")[0];
        v.bf(this.kv, "click", this.cOC.Z(this))
    };
    oT.bL = function() {
        this.JD.src = "";
        this.EQ.value = "";
        this.TC.innerText = "";
        u.bA(this.qD,
        function(bo, bd) {
            bo.innerHTML = ""
        }.Z(this));
        this.bO()
    };
    oT.bF = function(Y) {
        this.bI(Y);
        this.cOz();
        eu.bt(this.JD)
    };
    oT.cOz = function() {
        this.YV(this.qD[0], m_math, m_math_rect, "math");
        this.YV(this.qD[1], m_greek, m_greek_rect, "greek");
        this.YV(this.qD[2], m_rel, m_rel_rect, "rel");
        this.YV(this.qD[3], m_symbol, m_symbol_rect, "symbol");
        this.YV(this.qD[4], m_logic, m_logic_rect, "logic");
        this.YV(this.qD[5], m_arrow, m_arrow_rect, "arrow");
        u.bA(this.pd,
        function(bo, bd) {
            v.bf(bo, "mouseover", this.chA.Z(this, true, bd));
            v.bf(bo, "mouseout", this.chA.Z(this, false, bd))
        }.Z(this));
        this.cOv = e.bc(this.bb, "j-areaitem");
        u.bA(this.cOv,
        function(bo, bd) {
            v.bf(bo, "click", this.chy.Z(this, bo))
        }.Z(this));
        this.qD[6].innerHTML = this.Ne(s_algebra, "Algebra");
        this.qD[7].innerHTML = this.Ne(s_calculus, "Calculus");
        this.qD[8].innerHTML = this.Ne(s_stats, "Stats");
        this.qD[9].innerHTML = this.Ne(s_set, "Set");
        this.qD[10].innerHTML = this.Ne(s_trig, "Trig");
        this.qD[11].innerHTML = this.Ne(s_physics, "Physics");
        this.qD[12].innerHTML = this.Ne(s_matrices, "Matrices");
        this.qD[13].innerHTML = this.Ne(s_chemistry, "Chemistry");
        this.cOr = e.bc(this.bb, "j-sample");
        u.bA(this.cOr,
        function(bo, bd) {
            v.bf(bo, "mouseover", this.chx.Z(this, true, bo));
            v.bf(bo, "mouseout", this.chx.Z(this, false, bo));
            v.bf(bo, "click", this.cOp.Z(this, bo))
        }.Z(this));
        v.bf(this.EQ, "keyup",
        function() {
            this.TC.innerHTML = this.EQ.value.length + " 字符"
        }.Z(this))
    };
    oT.chy = function(bo) {
        this.chv(this.EQ, bo.title)
    };
    oT.chA = function(cU, bd) {
        if ( !! cU) {
            e.bJ(e.cS(this.pd[bd])[0], "selected");
            this.qD[bd].style.display = "block"
        } else {
            e.bZ(e.cS(this.pd[bd])[0], "selected");
            this.qD[bd].style.display = "none"
        }
    };
    oT.dlf = function(cU, bd) {
        if ( !! cU) {
            e.bJ(this.cOb[bd], "selected");
            this.cNX[bd].style.display = "block"
        } else {
            e.bZ(this.cOb[bd], "selected");
            this.cNX[bd].style.display = "none"
        }
    };
    oT.cOp = function(bo) {
        var cl = e.hT(bo, "name");
        var bd = e.hT(bo, "index");
        var s = "";
        if (cl == "Algebra") s = s_algebra[bd];
        else if (cl == "Calculus") s = s_calculus[bd];
        else if (cl == "Stats") s = s_stats[bd];
        else if (cl == "Set") s = s_set[bd];
        else if (cl == "Trig") s = s_trig[bd];
        else if (cl == "Physics") s = s_physics[bd];
        else if (cl == "Matrices") s = s_matrices[bd];
        else if (cl == "Chemistry") s = s_chemistry[bd];
        this.chv(this.EQ, s)
    };
    oT.chx = function(cU, bo) {
        if ( !! cU) {
            bo.style.border = "1px solid #65a200"
        } else {
            bo.style.border = "1px solid #ddd"
        }
    };
    oT.chv = function(d, g) {
        if (document.selection) {
            d.focus();
            var e = document.selection.createRange();
            e.text = g;
            d.focus()
        } else {
            if (d.selectionStart || d.selectionStart === 0) {
                if (d.value) {
                    g = " " + g + " "
                } else {
                    g = g + " "
                }
                var h = d.value.length;
                var b = d.selectionStart;
                var a = d.selectionEnd;
                var f = d.scrollTop;
                d.value = d.value.substring(0, b) + g + d.value.substring(a, d.value.length);
                d.focus();
                d.selectionStart = b + g.length;
                d.selectionEnd = b + g.length;
                d.scrollTop = f
            } else {
                if (d.value) {
                    g = " " + g
                }
                var h = d.value.length;
                d.value += g;
                d.focus()
            }
        }
    };
    oT.cOC = function() {
        if (!this.EQ.value) {
            this.TC.innerHTML = "";
            this.cNW();
            return
        }
        var cNU = "bg,s," + "FFFFFF" + "80";
        var dli = "&chf=" + encodeURIComponent(cNU) + "&chco=" + "000000";
        if (this.EQ.value.length > 200) {
            this.TC.innerHTML = "公式长度已经超过200个字符";
            e.bJ(this.TC, "warninfo");
            this.JD.src = "";
            eu.bt(this.JD);
            this.bn("onGetImgSrc", this.JD.src)
        } else {
            this.TC.innerHTML = this.EQ.value.length + " 字符";
            e.bZ(this.TC, "warninfo");
            window.resultShow = this.cNO();
            var cJ = "http://capture.srv.icourse163.org/image/latex.do?latex=" + encodeURIComponent(this.EQ.value) + "&size=18&callback=resultShow";
            this.cNL(cJ)
        }
    };
    oT.cNL = function(src) {
        var script = document.createElement("script");
        script.setAttribute("type", "text/javascript");
        script.src = src;
        document.body.appendChild(script)
    };
    oT.cNO = function() {
        var buQ = this;
        return function(W) {
            buQ.JD.src = W.url;
            eu.bw(buQ.JD);
            buQ.bn("onGetImgSrc", buQ.JD.src)
        }
    };
    oT.cNW = function() {
        this.JD.src = "";
        this.EQ.value = ""
    };
    oT.cNK = function(cQ) {
        return cQ
    };
    oT.YV = function(dO, arr, arr2, name) {
        var img = document.createElement("img");
        e.hT(img, "src", m_normal_img[name]);
        e.hT(img, "usemap", "#map_" + name);
        var map = document.createElement("map");
        e.hT(map, "name", "map_" + name);
        for (var i = 0; i < arr2.length; i++) {
            var myarea = document.createElement("area");
            e.hT(myarea, "shape", "rect");
            e.hT(myarea, "title", this.cNK(arr[i]));
            e.hT(myarea, "coords", arr2[i]);
            myarea.onclick = this.chy.Z(this, myarea);
            map.appendChild(myarea)
        }
        dO.appendChild(img);
        dO.appendChild(map)
    };
    oT.Ne = function(arr, name) {
        var s = "";
        for (var i = 0; i < arr.length; i++) {
            var cNJ = name + "_" + (i + 1);
            s += '<div class="f-fl j-sample samright" name="' + name + '" index="' + i + '"><span class="verticalAlign"></span><img src="' + m_normal_img[cNJ] + '"></div>'
        }
        return s
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    cK = bq("nej.ui.cmd"),
    ch = bq("nej.v"),
    Ty,
    cNI;
    bs.buM = NEJ.C();
    Ty = bs.buM.bu(cK.KA);
    cNI = bs.buM.cE;
    var dj = bm.bY('<div class="u-richeditor-math"><div class="j-equation"></div><input type="hidden" class="j-ipt" /><input type="hidden" class="j-ipt" /><div class="btns f-cb"><a class="f-fr u-btn u-btn-primary j-btn">取消</a><a class="f-fr u-btn u-btn-default j-btn">确定</a></div></div>');
    Ty.hk = function(Y) {
        Y = Y || {};
        Y.onErrorLink = this.buK.Z(this);
        this.hy(Y)
    };
    Ty.buK = function(bz) {};
    Ty.bF = function(Y) {
        Y = Y || {};
        Y.title = "公式编辑";
        Y.clazz = Y.clazz || "m-basewin u-window-math";
        Y.draggable = false;
        Y.align = "center middle";
        Y.maskclazz = Y.maskclazz || "m-editorwin";
        this.bIJ = bs.buX.bh({
            parent: this.cNG,
            onGetImgSrc: function(bG) {
                this.ln[1].value = bG
            }.Z(this)
        });
        this.bI(Y)
    };
    Ty.bL = function() {
        if ( !! this.bIJ) {
            this.bIJ = bs.buX.bg(this.bIJ)
        }
        this.bO()
    };
    Ty.bP = function() {
        this.bQ();
        this.cNG = bm.bc(this.bb, "j-equation")[0];
        this.ln = bm.bc(this.bb, "j-ipt")
    };
    Ty.bU = function() {
        this.bW = dj
    }
})(); (function() {
    var bq = NEJ.P,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    YM,
    cNF;
    if ( !! bs.buJ) return;
    bs.buJ = NEJ.C();
    YM = bs.buJ.bu(bs.bbs);
    cNF = bs.buJ.cE;
    YM.bF = function(Y) {
        this.bI(Y);
        this.fq.addListener("selectionchange",
        function(type, causeByUi, uiReady) {
            var jb = this.fq.queryCommandState(this.mj);
            if (jb == -1) {
                this.kM(true)
            } else {
                if (!uiReady) {
                    this.kM(false)
                }
            }
        }.Z(this))
    };
    YM.bP = function() {
        this.bQ();
        this.mj = "insertimage"
    };
    YM.bvb = function(bJa) {
        if (!bJa) return;
        if ( !! bJa.href) {
            this.fq.execCommand(this.mj, {
                src: bJa.href
            })
        }
    };
    YM.kW = function() {
        if (this.xY) {
            return
        }
        this.fq.focus();
        this.buH = bs.buM.bh(this.bGt);
        this.buH.gI()
    };
    YM.bL = function() {
        if ( !! this.buH) {
            this.buH = bs.buM.bg(this.buH)
        }
        this.bO()
    }
})(); (function() {
    var dx = window,
    bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    nk,
    bva;
    var dj = '<div class="u-richeditor-link"><div class="row f-cb"><div class="txtwrap f-cb"><div class="f-fl title">标题</div><input class="f-fl ipt j-ipt" type="text" /></div></div><div class="row f-cb"><div class="txtwrap f-cb"><div class="f-fl title">链接</div><input class="f-fl ipt j-ipt" type="text" value="http://"/></div></div><div class="error j-error"></div><div class="btns f-cb">$btn_html_str</div></div>';
    var cF = bm.dD("");
    bs.KA = NEJ.C();
    nk = bs.KA.bu(bs.LI);
    bva = bs.KA.cE;
    nk.bU = function() {
        this.dv = cF;
        this.bW = bm.bY(this.bJh())
    };
    nk.bJh = function() {
        var cNE = dx.eduEditor_options.isStudy ? '<a class="f-fr cancel btn j-btn"><span>取消</span></a><a class="f-fr ok btn j-btn"><span>确定</span></a>': '<a class="f-fr u-btn u-btn-primary j-btn">取消</a><a class="f-fr u-btn u-btn-default j-btn">确定</a>';
        return dj.replace("$btn_html_str", cNE)
    };
    nk.bP = function() {
        this.bQ();
        this.xP = bm.bc(this.bb, "j-btn");
        this.ln = bm.bc(this.bb, "j-ipt");
        this.TH = bm.bc(this.bb, "j-error")[0]
    };
    nk.Aq = function() {
        this.fs()
    };
    nk.bGQ = function() {
        var kK = {};
        kK.name = bE.dV(this.ln[0].value);
        kK.href = this.ln[1].value;
        var ep = /^(?:http(s)?:\/\/)[^\s].?/,
        Ir = /^(?:http(s)?:\/\/).*/;
        var cN = kK.href.search(ep),
        bGY = kK.href.search(Ir);
        if (bGY < 0) {
            this.buK(0);
            return
        }
        if (cN < 0) {
            this.buK(1);
            return
        }
        this.bn("onchange", kK);
        this.fs()
    };
    nk.buK = function(bz) {
        if (bz == 0) {
            this.qt("请输入合法的链接地址（http://或https://）")
        } else {
            this.qt("请输入合法的链接地址")
        }
    };
    nk.bF = function(Y) {
        Y = Y || {};
        Y.clazz = Y.clazz || "m-basewin u-editor-linkCard";
        Y.maskclazz = Y.maskclazz || "m-editor-mask";
        Y.parent = Y.parent || document.body;
        Y.draggable = Y.draggable || false;
        Y.destroyable = Y.destroyable || false;
        Y.title = Y.title || "超链接";
        Y.mask = Y.mask || true;
        this.bI(Y);
        this.hd([[this.xP[1], "click", this.bGQ.Z(this)], [this.xP[0], "click", this.Aq.Z(this)], [this.ln[0], "focus", this.qt.Z(this, "")], [this.ln[1], "focus", this.qt.Z(this, "")]]);
        this.ln[0].value = Y.name || "";
        this.ln[1].value = ""
    };
    nk.cOH = function() {
        this.ln[1].focus();
        this.ln[1].value = ""
    };
    nk.qt = function(fG) {
        this.TH.innerText = fG
    };
    nk.bL = function() {
        this.bO()
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    YJ,
    cNy;
    bs.bJy = NEJ.C();
    YJ = bs.bJy.bu(bs.bbs);
    cNy = bs.bJy.cE;
    YJ.bF = function(Y) {
        this.bI(Y);
        this.fq.addListener("selectionchange",
        function(type, causeByUi, uiReady) {
            var jb = this.fq.queryCommandState(this.mj);
            if (jb == -1) {
                this.kM(true)
            } else {
                if (!uiReady) {
                    this.kM(false)
                }
            }
        }.Z(this))
    };
    YJ.bL = function() {
        this.bO()
    };
    YJ.bP = function() {
        this.bQ();
        this.mj = "link"
    };
    YJ.kW = function() {
        if (this.xY) {
            return
        }
        bs.KA.bh(this.bGt).gI()
    };
    YJ.bvb = function(W) {
        this.fq.execCommand(this.mj, {
            href: W.href,
            textValue: W.name,
            target: "_blank"
        })
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    dx = window,
    om,
    cNx;
    var dj = '<div class="u-richeditor-uploadCard"><div class="tab"><a class="f-ib tabitem j-tab"><span>上传图片</span></a><a class="f-ib tabitem j-tab"><span>引用站外图片</span></a><image class="hideimage j-image"/></div><div class="cnt j-cnt"><div class="f-pr uploadcon">$btn1_html_str<div class="j-choosefile f-pa"></div></div><p class="desc j-desc"></p></div><div class="cnt j-cnt"><div class="f-cb webcon"><div class="f-fl txtwrap"><input class="txt j-ipturl" type="text"/></div>$btn2_html_str</div><p class="desc j-desc"></p></div><div class="error j-error"></div></div>';
    var cF = bm.dD("");
    bs.bJL = NEJ.C();
    om = bs.bJL.bu(bs.LI);
    cNx = bs.bJL.cE;
    om.hk = function(Y) {
        Y = Y || {};
        this.cNw = Y.swfUrl || dx.imageUrlMap.image_upload_swf || "/res/swf/imageUpload.swf";
        this.cNv = Y.baseUrl || dx.eduEditor_options.imageUploadUrl || "http://upload.icourse163.org/api/photoUpload2.do?_upload_mth_=sync_parse&";
        this.cNu = Y.flashWidth || 92;
        this.cNs = Y.flashHeight || 34;
        this.buD = Y.namespace || "edu.ut";
        this.cNr = Y.userdefinesize || "520x520x0x90;520x520x0x85";
        this.cNq = Y.saveorigin || "false";
        this.cNp = Y.responsetype || "xml";
        this.cNo = Y.rotatedegree || "0";
        this.cNi = Y.stamptype || "";
        this.cNh = Y.stampstring || "";
        this.cNg = Y.sitefrom || "study";
        this.cNc = Y.fDesc || "支持JPG、JPEG、GIF、BMP格式的图片，文件需小于10M";
        this.cNb = Y.oDesc || "网络图片不能超过2M";
        this.hy(Y);
        this.cNa = this.cNv + "userdefinesize=" + this.cNr + "&saveorigin=" + this.cNq + "&responsetype=" + this.cNp + "&rotatedegree=" + this.cNo + "&stamptype=" + this.cNi + "&stampstring=" + encodeURIComponent(this.cNh) + "&sitefrom=" + this.cNg;
        this.cMY(this.buD);
        bm.Gp({
            src: this.cNw,
            hidden: false,
            parent: this.cMX,
            width: this.cNu,
            height: this.cNs,
            params: {
                flashvars: "cbNameSpace=" + this.buD + "&uploadExif=true&uploadUrl=" + encodeURIComponent(this.cNa),
                allowscriptaccess: "always",
                wmode: "transparent"
            },
            onready: this.cMW.Z(this)
        })
    };
    om.cMW = function(lR) {
        this.lO = lR
    };
    om.cMV = function() {
        this.bKO.src = this.buz.value.trim()
    };
    om.cMU = function() {
        this.qt("无法获取链接中的图片，请检查链接或稍后重试")
    };
    om.cMT = function() {
        var tx = {};
        tx.resultcode = 999;
        tx.userDef2Url = this.buz.value;
        this.bua("webimg", tx.resultcode, tx)
    };
    om.bF = function(Y) {
        Y = Y || {};
        Y.clazz = Y.clazz || "m-basewin u-window-upload";
        Y.maskclazz = Y.maskclazz || "m-editorwin";
        Y.parent = Y.parent || document.body;
        Y.draggable = Y.draggable || false;
        Y.destroyable = Y.destroyable || false;
        Y.title = Y.title || "选择图片";
        Y.mask = true;
        this.bI(Y);
        this.qt("")
    };
    om.bL = function() {
        if ( !! this.bLd) {
            this.bLd = eO.gg.bg(this.bLd)
        }
        this.bO()
    };
    om.bP = function() {
        this.bQ();
        this.chn = bm.bc(this.bb, "j-desc");
        this.chn[0].innerText = this.cNc || "支持JPG、JPEG、GIF、BMP格式的图片，文件需小于10M";
        this.chn[1].innerText = this.cNb || "网络图片不能超过2M";
        this.ed = bm.bc(this.bb, "j-tab");
        this.cMX = bm.bc(this.bb, "j-choosefile")[0];
        this.Yy = bm.bc(this.bb, "j-cnt");
        this.buz = bm.bc(this.bb, "j-ipturl")[0];
        this.cMR = bm.bc(this.bb, "j-smturl")[0];
        this.TH = bm.bc(this.bb, "j-error")[0];
        this.bKO = bm.bc(this.bb, "j-image")[0];
        this.bLd = eO.gg.bh({
            list: this.ed,
            selected: "j-selected",
            onchange: this.chm.Z(this)
        });
        ch.bf(this.cMR, "click", this.cMV.Z(this));
        ch.bf(this.bKO, "error", this.cMU.Z(this));
        ch.bf(this.bKO, "load", this.cMT.Z(this));
        ch.bf(this.buz, "focus", this.qt.Z(this, ""))
    };
    om.bU = function() {
        this.dv = cF;
        this.bW = bm.bY(this.bJh())
    };
    om.bJh = function() {
        var cMP = dx.eduEditor_options.isStudy ? '<a class="btn choosebtn f-pa"><span>选择图片</span></a>': '<a class="u-btn f-pa">选择图片</a>';
        var cMM = dx.eduEditor_options.isStudy ? '<a class="btn f-fl okbtn j-smturl"><span>确定</span></a>': '<a class="u-btn f-fl j-smturl">确定</a>';
        return dj.replace("$btn1_html_str", cMP).replace("$btn2_html_str", cMM)
    };
    om.cMY = function(cML) {
        this.cMK = bE.eW(2);
        this.buD = cML + this.cMK;
        var zc = NEJ.P(this.buD);
        zc.uploadStart = this.bxS.Z(this);
        zc.uploadComplete = this.bua.Z(this);
        zc.uploadError = this.bxU.Z(this);
        zc.showProgress = this.cMI.Z(this)
    };
    om.bxS = function() {
        this.cMH()
    };
    om.bua = function(ca, nz, tx) {
        if (nz != 999) {
            this.qt("图片上传失败");
            this.bLX()
        } else {
            this.qt("");
            this.bn("onchange", tx);
            this.bLX();
            this.fs()
        }
    };
    om.qt = function(fG) {
        this.TH.innerText = fG
    };
    om.cMH = function() {
        if (dx.eduEditor_options) {
            if (typeof dx.eduEditor_options.showLoadingFn == "function") {
                dx.eduEditor_options.showLoadingFn()
            }
        }
    };
    om.bLX = function() {
        if (dx.eduEditor_options) {
            if (typeof dx.eduEditor_options.hideLoadingFn == "function") {
                dx.eduEditor_options.hideLoadingFn()
            }
        }
    };
    om.cMI = dk;
    om.bxU = function(cRE, bhJ, cRD) {
        if (bhJ == 12) {
            this.qt("图片格式不正确，上传失败")
        } else if (bhJ == 0) {
            this.qt("图片过大，上传失败，请重新选择")
        } else {
            this.qt("上传失败，请重试")
        }
        this.bLX()
    };
    om.chm = function(bj) {
        this.qt("");
        var bd = bj.index;
        if (!bd) {
            this.Yy[0].style.display = "";
            this.Yy[1].style.display = "none"
        } else {
            this.buz.value = "";
            this.Yy[1].style.display = "";
            this.Yy[0].style.display = "none"
        }
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    Yu,
    cMF;
    bs.bMc = NEJ.C();
    Yu = bs.bMc.bu(bs.bbs);
    cMF = bs.bMc.cE;
    Yu.bF = function(Y) {
        this.bI(Y);
        this.fq.addListener("selectionchange",
        function(type, causeByUi, uiReady) {
            var jb = this.fq.queryCommandState(this.mj);
            if (jb == -1) {
                this.kM(true)
            } else {
                if (!uiReady) {
                    this.kM(false)
                }
            }
        }.Z(this))
    };
    Yu.bL = function() {
        this.bO()
    };
    Yu.bP = function() {
        this.bQ();
        this.mj = "insertimage"
    };
    Yu.kW = function() {
        if (this.xY) {
            return
        }
        bs.bJL.bh(this.bGt).gI()
    };
    Yu.bvb = function(tx) {
        this.hs = 0;
        if ( !! tx.ourl && tx.ourl.indexOf(".gif") > 0) {
            this.lN = tx.ourl;
            if ( !! tx.photoGarbageIds) {
                var ZV = tx.photoGarbageIds.split(",");
                bE.bA(ZV,
                function(bo, bd) {
                    if (bo.search("ourl") >= 0) this.hs = bo.split(":")[1]
                },
                this)
            }
        } else {
            this.lN = tx.userDef2Url;
            if ( !! tx.photoGarbageIds) {
                var ZV = tx.photoGarbageIds.split(",");
                bE.bA(ZV,
                function(bo, bd) {
                    if (bo.search("userdef2url") >= 0) this.hs = bo.split(":")[1]
                },
                this)
            }
        }
        this.fq.execCommand(this.mj, {
            src: this.lN,
            id: this.hs
        })
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v");
    var bMo = [];
    function cME() {
        for (var i = 0; i < bMo.length; i++) {
            var chl = bMo[i];
            if ( !! chl.buq) {
                chl.buq()
            }
        }
    }
    ch.bf(document, "mousedown", cME);
    var bML, cMC;
    bs.bun = NEJ.C();
    bML = bs.bun.bu(bs.st);
    cMC = bs.bun.cE;
    bML.hk = function() {
        this.hy();
        bMo.push(this)
    };
    bML.buq = function() {}
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    kD,
    bMS;
    var dn = '<div class="zdlitm zbg"><div class="up j-up f-thide"></div><div class="down f-bg j-list"></div></div>';
    bs.fI = NEJ.C();
    kD = bs.fI.bu(bs.bun);
    bMS = bs.fI.cE;
    kD.bP = function() {
        this.bQ();
        this.Jb = bm.bc(this.bb, "j-up")[0];
        this.oy = bm.bc(this.bb, "j-list")[0]
    };
    kD.bU = function() {
        this.bW = bm.bY(dn)
    };
    kD.bF = function(Y) {
        this.bI(Y);
        this.fq = Y.editor;
        this.kZ = false;
        this.Yp(this.bum);
        this.AP = Y.data;
        this.bem();
        this.bNh(this.AP);
        ch.bf(this.oy, "mousedown",
        function(qm) {
            ch.dK(qm)
        });
        this.hd([[this.bb, "mouseup",
        function(bj) {
            if (!this.kZ) {
                this.bNi(bj)
            }
        }.Z(this)]]);
        this.kM(false);
        this.fq.addListener("selectionchange",
        function(type, causeByUi, uiReady) {
            var jb = this.fq.queryCommandState(this.mj);
            if (jb == -1) {
                this.kM(true)
            } else {
                this.kM(false);
                this.chk()
            }
        }.Z(this));
        this.fq.addListener("focus",
        function() {
            this.bem()
        }.Z(this))
    };
    kD.bNh = function(W) {
        this.oy.innerHTML = "";
        if (!W) {
            return
        }
        for (var i in W) {
            if ( !! W[i]) {
                var To = W[i];
                var bNq = this.bNy(i, W[i]);
                var du = bm.iN(bNq);
                this.hd([[du, "mouseup", this.yR.Z(this, i)]]);
                this.oy.appendChild(du)
            }
        }
    };
    kD.bNy = function(bS, bG) {
        return '<div class="f-thide list" title="' + bE.dV(bS.toString()) + '">' + bE.dV(bG.toString()) + "</div>"
    };
    kD.yR = function(W, bj) {
        if ( !! bj) {
            ch.dK(bj)
        }
        this.IZ = W;
        this.Yp(this.AP[this.IZ]);
        this.bem()
    };
    kD.kM = function(Tn) {
        if ( !! Tn) {
            bm.bJ(this.bb, "js-disabled")
        } else {
            bm.bZ(this.bb, "js-disabled")
        }
        this.kZ = !!Tn
    };
    kD.chk = function() {
        var bG = this.fq.queryCommandValue(this.mj);
        if ( !! bG) {
            this.Yp(bG)
        } else {
            this.Yp(this.bum)
        }
    };
    kD.Yp = function(bG) {
        this.Jb.innerText = bG
    };
    kD.bNi = function(bj) {
        if ( !! bj) ch.dK(bj);
        if (this.oy.style.display != "block") {
            this.oy.style.display = "block"
        } else {
            this.bem()
        }
    };
    kD.bem = function() {
        this.oy.style.display = "none"
    };
    kD.bL = function() {
        this.bO()
    };
    kD.buq = kD.bem
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    Yh,
    chj;
    bs.bNY = NEJ.C();
    Yh = bs.bNY.bu(bs.fI);
    chj = bs.bNY.cE;
    Yh.bP = function() {
        this.bQ();
        this.mj = "insertcode"
    };
    Yh.bF = function(Y) {
        this.bum = "代码语言";
        this.bI(Y);
        this.oy.style.width = "135px"
    };
    Yh.chk = function() {
        var bG = this.fq.queryCommandValue(this.mj);
        if ( !! bG) {
            this.Yp(this.AP[bG])
        } else {
            this.Yp(this.bum)
        }
    };
    Yh.yR = function(W, bj) {
        chj.yR.apply(this, arguments);
        this.fq.execCommand(this.mj, this.IZ)
    };
    Yh.bL = function() {
        this.bO()
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    Yg,
    chi;
    bs.bOd = NEJ.C();
    Yg = bs.bOd.bu(bs.fI);
    chi = bs.bOd.cE;
    Yg.bP = function() {
        this.bQ();
        this.mj = "FontSize"
    };
    Yg.bF = function(Y) {
        this.bum = "字号";
        this.bI(Y);
        this.oy.style.width = "108px"
    };
    Yg.bNy = function(bS, bG) {
        return '<div class="f-thide list" style="font-size:' + bE.dV(bG.toString()) + ';">' + bE.dV(bG.toString()) + "</div>"
    };
    Yg.yR = function(W, bj) {
        chi.yR.apply(this, arguments);
        this.fq.execCommand(this.mj, this.AP[this.IZ])
    };
    Yg.bL = function() {
        this.bO()
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    bul,
    cMu;
    var dn = '<div class="zitm zbg"><div class="zicn zbg j-up f-thide"></div><div class="down f-bg j-list"></div></div>';
    bs.buk = NEJ.C();
    bul = bs.buk.bu(bs.fI);
    cMu = bs.buk.cE;
    bul.bU = function() {
        this.bW = bm.bY(dn)
    };
    bul.bF = function(Y) {
        this.bI(Y);
        this.iu = Y.title || "";
        this.bb.title = this.iu;
        this.Jb.innerText = ""
    };
    bul.bL = function() {
        this.bO()
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    Yb,
    chg;
    bs.bui = NEJ.C();
    Yb = bs.bui.bu(bs.buk);
    chg = bs.bui.cE;
    Yb.bP = function() {
        this.bQ()
    };
    Yb.bF = function(Y) {
        Y.title = Y.data.title || "";
        Y.data = Y.data.list;
        this.bI(Y);
        this.oy.style.width = "85px";
        if (Y.title == "段前距") {
            this.mj = "top"
        } else {
            this.mj = "bottom"
        }
    };
    Yb.bNy = function(bS, bG) {
        return '<div class="f-thide list">' + bE.dV(bG.toString()) + "px</div>"
    };
    Yb.yR = function(W, bj) {
        chg.yR.apply(this, arguments);
        this.fq.execCommand("rowspacing", this.AP[this.IZ], this.mj)
    };
    Yb.bL = function() {
        this.bO()
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    bhe,
    chf;
    bs.bOz = NEJ.C();
    bhe = bs.bOz.bu(bs.buk);
    chf = bs.bOz.cE;
    bhe.bP = function() {
        this.bQ()
    };
    bhe.bF = function(Y) {
        Y.title = Y.data.title || "";
        Y.data = Y.data.list;
        this.bI(Y);
        this.oy.style.width = "85px";
        this.mj = "lineheight"
    };
    bhe.yR = function(W, bj) {
        chf.yR.apply(this, arguments);
        this.fq.execCommand(this.mj, this.AP[this.IZ])
    };
    bhe.bL = function() {
        this.bO()
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    IT,
    cMp;
    var dn = '<div class="u-ecolorpicker"><a class="clear j-clearcolor">无颜色</a><div class="colors j-colors"></div></div>';
    bs.buh = NEJ.C();
    IT = bs.buh.bu(bs.st);
    cMp = bs.buh.cE;
    IT.hk = function() {
        this.hy()
    };
    IT.bF = function(Y) {
        this.bI(Y)
    };
    IT.bL = function() {
        this.bO()
    };
    IT.bU = function() {
        this.bW = bm.bY(dn)
    };
    IT.bP = function() {
        this.bQ();
        this.che = ["#E53333", "#E56600", "#FF9900", "#64451D", "#DFC5A4", "#FFE500", "#009900", "#006600", "#99BB00", "#B8D100", "#60D978", "#00D5FF", "#337FE5", "#003399", "#4C33E5", "#9933E5", "#CC33E5", "#EE33EE", "#ffffff", "#cccccc", "#999999", "#666666", "#333333", "#000000"];
        this.XZ = null;
        this.cMm = bm.bc(this.bb, "j-clearcolor")[0];
        this.cMh = bm.bc(this.bb, "j-colors")[0];
        ch.bf(this.cMm, "mouseup", this.cMg.Z(this));
        this.cMc()
    };
    IT.cMc = function() {
        var dE = "";
        for (var i = this.che.length - 1; i >= 0; i--) {
            dE += '<a class="colorbtn j-colorbtn" title="' + this.che[i] + '"><span></span></a>'
        }
        this.cMh.innerHTML = dE;
        this.bue = bm.bc(this.bb, "j-colorbtn");
        ch.bf(this.bb, "mousedown",
        function(qm) {
            ch.dK(qm)
        });
        bE.bA(this.bue,
        function(bo, bd) {
            bm.ev(bo.childNodes[0], "background-color", bo.title);
            ch.bf(bo, "mouseup", this.cMb.Z(this, bd))
        }.Z(this))
    };
    IT.cMg = function(qm) {
        if ( !! qm) {
            ch.dK(qm)
        }
        if (this.XZ != null) {
            bm.bZ(this.bue[this.XZ], "selected")
        }
        this.XZ = null;
        this.bn("onClearColor")
    };
    IT.cMb = function(bd, qm) {
        if ( !! qm) {
            ch.dK(qm)
        }
        if (this.XZ != null) {
            bm.bZ(this.bue[this.XZ], "selected")
        }
        this.XZ = bd;
        var bB = this.bue[bd];
        var cLY = bB.title;
        bm.bJ(bB, "selected");
        this.bn("onColorPick", cLY)
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    ch = bq("nej.v"),
    tT,
    cLX;
    var dn = '<div class="zitm zbg colorbtn" title=""><div class="zicn zbg"></div><div class="colordown j-down"></div></div>';
    bs.buc = NEJ.C();
    tT = bs.buc.bu(bs.bun);
    cLX = bs.buc.cE;
    tT.hk = function() {
        this.hy()
    };
    tT.bF = function(Y) {
        this.bI(Y);
        this.iu = Y.title || "";
        this.fq = Y.editor;
        this.bb.title = this.iu;
        this.kM(false);
        this.fq.addListener("selectionchange",
        function() {
            var qU = this.fq.queryCommandState(this.mj);
            if (qU == -1) {
                this.kM(true)
            } else {
                this.kM(false)
            }
        }.Z(this));
        this.fq.addListener("focus",
        function() {
            this.bkp()
        }.Z(this))
    };
    tT.bL = function() {
        if (this.bub) {
            this.bub = bs.buh.bg(this.bub)
        }
        this.bO()
    };
    tT.bU = function() {
        this.bW = bm.bY(dn)
    };
    tT.bP = function() {
        this.bQ();
        this.mj = "forecolor";
        this.xY = false;
        this.tU = bm.bc(this.bb, "j-down")[0];
        ch.bf(this.bb, "mouseup", this.kW.Z(this))
    };
    tT.kM = function(EU) {
        this.xY = EU;
        if (EU) {
            bm.bJ(this.bb, "js-disabled")
        } else {
            bm.bZ(this.bb, "js-disabled")
        }
    };
    tT.chQ = function() {
        return this.xY
    };
    tT.kW = function(qm) {
        if (this.xY) {
            return
        }
        if (!this.bub) {
            this.bub = bs.buh.bh({
                parent: this.tU,
                onColorPick: this.cLW.Z(this),
                onClearColor: this.cLV.Z(this)
            })
        }
        if (bm.tv(this.tU, "display") == "block") {
            this.bkp()
        } else {
            this.cLT()
        }
    };
    tT.cLT = function() {
        this.tU.style.display = "block"
    };
    tT.bkp = function() {
        this.tU.style.display = "none"
    };
    tT.cLW = function(hi) {
        this.bkp();
        this.fq.execCommand(this.mj, hi)
    };
    tT.cLV = function() {
        this.bkp();
        this.fq.execCommand(this.mj, "default")
    };
    tT.buq = tT.bkp
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    AZ,
    cLO;
    var dn = '<div class="f-cb"></div>';
    var cF = bm.dD("");
    bs.btZ = NEJ.C();
    AZ = bs.btZ.bu(bs.st);
    cLO = bs.btZ.cE;
    AZ.hk = function() {
        this.hy()
    };
    AZ.bF = function(Y) {
        this.bI(Y);
        this.cgZ = false;
        this.fq = Y.editor;
        this.XK = Y.showCmds || ["cleardoc", "undo", "redo", "bold", "italic", "underline", "strikethrough", "insertorderedlist", "insertunorderedlist", "image", "math", "link", "insertcode", "fontsize", "fontcolor"];
        this.fq.ready(function(Kz) {
            if (!this.cgZ) {
                this.cLL();
                this.cLK();
                this.cLJ();
                this.cLI();
                this.cgZ = true
            }
        }.Z(this))
    };
    AZ.bL = function() {
        if (this.Tc) {
            for (var hc in this.Tc) {
                if (this.Tc[hc]) {
                    this.Tc[hc] = bs.baP.bg(this.Tc[hc])
                }
            }
        }
        if (this.Tb) {
            for (var wQ in this.Tb) {
                if (this.Tb[wQ]) {
                    this.Tb[wQ] = this.Tb[wQ].constructor.bg(this.Tb[wQ])
                }
            }
        }
        if (this.SY) {
            for (var wQ in this.SY) {
                if (this.SY[wQ]) {
                    this.SY[wQ] = this.SY[wQ].constructor.bg(this.SY[wQ])
                }
            }
        }
        if (this.SX) {
            for (var wQ in this.SX) {
                if (this.SX[wQ]) {
                    this.SX[wQ] = bs.buc.bg(this.SX[wQ])
                }
            }
        }
        if (this.beO) {
            for (var i = 0; i < this.beO.length; i++) {
                bm.sE(this.beO[i])
            }
        }
        this.bO()
    };
    AZ.bU = function() {
        this.dv = cF;
        this.bW = bm.bY(dn)
    };
    AZ.bP = function() {
        this.bQ();
        this.cLG = [{
            name: "cleardoc",
            title: "labelMap.cleardoc",
            clazz: "z-i-11",
            cmd: "cleardoc"
        },
        {
            name: "undo",
            title: "labelMap.undo",
            clazz: "z-i-9",
            cmd: "undo"
        },
        {
            name: "redo",
            title: "labelMap.redo",
            clazz: "z-i-10",
            cmd: "redo"
        },
        {
            name: "zisp"
        },
        {
            name: "bold",
            title: "labelMap.bold",
            clazz: "z-i-0",
            cmd: "bold"
        },
        {
            name: "italic",
            title: "labelMap.italic",
            clazz: "z-i-1",
            cmd: "italic"
        },
        {
            name: "underline",
            title: "labelMap.underline",
            clazz: "z-i-2",
            cmd: "underline"
        },
        {
            name: "strikethrough",
            title: "labelMap.strikethrough",
            clazz: "z-i-3",
            cmd: "strikethrough"
        },
        {
            name: "insertorderedlist",
            title: "labelMap.insertorderedlist",
            clazz: "z-i-4",
            cmd: "insertorderedlist",
            value: "decimal"
        },
        {
            name: "insertunorderedlist",
            title: "labelMap.insertunorderedlist",
            clazz: "z-i-5",
            cmd: "insertunorderedlist",
            value: "disc"
        }];
        this.cLF = [{
            name: "fontcolor",
            title: "labelMap.forecolor",
            clazz: "z-i-12"
        },
        {
            name: "zisp"
        }];
        this.cgX = [{
            name: "justifyleft",
            title: "labelMap.justifyleft",
            clazz: "z-i-0",
            cmd: "justify",
            value: "left"
        },
        {
            name: "justifycenter",
            title: "labelMap.justifycenter",
            clazz: "z-i-0",
            cmd: "justify",
            value: "center"
        },
        {
            name: "justifyright",
            title: "labelMap.justifyright",
            clazz: "z-i-0",
            cmd: "justify",
            value: "right"
        }];
        this.cLB = [{
            name: "link",
            title: "labelMap.link",
            clazz: "z-i-6",
            constructor: bs.bJy
        },
        {
            name: "image",
            title: "labelMap.insertimage",
            clazz: "z-i-7",
            constructor: bs.bMc
        },
        {
            name: "math",
            title: "labelMap.math",
            clazz: "z-i-8",
            constructor: bs.buJ
        },
        {
            name: "zisp"
        }];
        this.cLy = [{
            name: "insertcode",
            title: "insertcode",
            clazz: "z-i-code",
            constructor: bs.bNY,
            type: "map"
        },
        {
            name: "fontsize",
            title: "fontsize",
            clazz: "z-i-size",
            constructor: bs.bOd,
            type: "list"
        },
        {
            name: "rowspacingtop",
            title: "rowspacingtop",
            clazz: "z-i-0",
            constructor: bs.bui,
            type: "list"
        },
        {
            name: "lineheight",
            title: "lineheight",
            clazz: "z-i-0",
            constructor: bs.bOz,
            type: "list"
        },
        {
            name: "rowspacingbottom",
            title: "rowspacingbottom",
            clazz: "z-i-0",
            constructor: bs.bui,
            type: "list"
        }]
    };
    AZ.bfi = function() {
        var cgW = bm.iN('<div class="zisp"></div>');
        this.bb.appendChild(cgW);
        if (!this.beO) {
            this.beO = []
        }
        this.beO.push(cgW)
    };
    AZ.cLL = function() {
        this.Tc = {};
        var qh = this.fq;
        var dO = this.bb;
        var Bf = 0;
        bE.bA(this.cLG,
        function(bo, bd) {
            if (bo.name == "zisp" && Bf > 0) {
                this.bfi();
                return
            }
            if (bE.oa(this.XK, bo.name) == -1) {
                return
            }
            this.Tc[bo.name] = function(hc) {
                var ug = bs.baP.bh({
                    parent: dO,
                    title: qh.getLang(hc.title),
                    clazz: hc.clazz,
                    onclick: function() {
                        qh.execCommand(hc.cmd, hc.value)
                    }.Z(this)
                });
                qh.addListener("selectionchange",
                function(type, causeByUi, uiReady) {
                    var jb = qh.queryCommandState(hc.cmd);
                    if (jb == -1) {
                        ug.kM(true);
                        ug.bvf(false)
                    } else {
                        if (!uiReady) {
                            ug.kM(false);
                            ug.bvf(jb)
                        }
                    }
                });
                return ug
            } (bo);
            Bf++
        }.Z(this));
        Bf = 0;
        bE.bA(this.cgX,
        function(bo, bd) {
            if (bo.name == "zisp" && Bf > 0) {
                this.bfi();
                return
            }
            if (bE.oa(this.cgX, bo.name) == -1) {
                return
            }
            this.Tc[bo.name] = function(hc) {
                var ug = bs.baP.bh({
                    parent: dO,
                    title: qh.getLang(hc.title),
                    clazz: hc.clazz,
                    onclick: function() {
                        qh.execCommand(hc.cmd, hc.value)
                    }.Z(this)
                });
                qh.addListener("selectionchange",
                function(type, causeByUi, uiReady) {
                    ug.kM(qh.queryCommandState(hc.cmd) == -1);
                    ug.bvf(qh.queryCommandValue(hc.cmd) == hc.value && !uiReady)
                });
                return ug
            } (bo);
            Bf++
        }.Z(this))
    };
    AZ.cLJ = function() {
        this.Tb = {};
        var qh = this.fq;
        var dO = this.bb;
        var Bf = 0;
        bE.bA(this.cLB,
        function(bo, bd) {
            if (bo.name == "zisp" && Bf > 0) {
                this.bfi();
                return
            }
            if (bE.oa(this.XK, bo.name) == -1) {
                return
            }
            this.Tb[bo.name] = function(hc) {
                var ug = hc.constructor.bh({
                    parent: dO,
                    title: qh.getLang(hc.title),
                    clazz: hc.clazz,
                    editor: qh
                });
                return ug
            } (bo);
            Bf++
        }.Z(this))
    };
    AZ.cLI = function() {
        this.SY = {};
        var qh = this.fq;
        var dO = this.bb;
        var Bf = 0;
        bE.bA(this.cLy,
        function(bo, bd) {
            if (bo.name == "zisp" && Bf > 0) {
                this.bfi();
                return
            }
            if (bE.oa(this.XK, bo.name) == -1) {
                return
            }
            this.SY[bo.name] = function(hc) {
                var ug = hc.constructor.bh({
                    parent: dO,
                    data: qh.getLang(hc.title),
                    editor: qh,
                    clazz: hc.clazz
                });
                return ug
            } (bo);
            Bf++
        }.Z(this))
    };
    AZ.cLK = function() {
        this.SX = {};
        var qh = this.fq;
        var dO = this.bb;
        bE.bA(this.cLF,
        function(bo, bd) {
            if (bo.name == "zisp" && this.SX.length > 0) {
                this.bfi();
                return
            }
            if (bE.oa(this.XK, bo.name) == -1) {
                return
            }
            this.SX[bo.name] = function(hc) {
                var ug = bs.buc.bh({
                    parent: dO,
                    title: qh.getLang(hc.title),
                    editor: qh,
                    clazz: hc.clazz
                });
                return ug
            } (bo)
        }.Z(this))
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    dx = window,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    rU,
    cLs;
    var dn = '<div class="u-richeditor"><div class="ztbar j-toolbar"></div><div class="zarea j-area"></div></div>';
    var cF = bm.dD("");
    var cLr = ".view{ font-size:12px; border:0; text-align:left; color:#666; line-height:22px; word-break:break-word; word-wrap:break-word;}.view em{ font-style:italic;}.view p{ margin:0; padding:0;}.view div{ margin:10px 0; padding:0;}.view sup, .view blockquote{ border-left:3px solid #D0E5F2; font-style:normal; padding: 0 0 0 10px; vertical-align:baseline; margin:0; font-size:14px;}.viewimg{ max-height:520px; max-width:520px; vertical-align:middle;}.view code{ min-height:25px; font-family:monospace; white-space:pre-wrap; margin:.5em 0; padding:.4em .6em; border-radius:8px; background:#EFEFEF;}.view table{ border-collapse:collapse; border-spacing:0; border:1px solid #E4E4E4}.view table th, .view table td{ border:1px solid #E4E4E4; padding:5px;}";
    bs.fK = NEJ.C();
    rU = bs.fK.bu(bs.st);
    cLs = bs.fK.cE;
    rU.hk = function() {
        this.hy()
    };
    rU.bF = function(Y) {
        this.bI(Y);
        this.vB = NEJ.X(dx.eduEditor_options || {},
        Y || {});
        this.nC = this.vB.height || 200;
        this.cgU = this.vB.content;
        this.bgD = this.vB.focus || false;
        this.XK = this.vB.showCmds;
        this.cLn();
        this.cLl();
        this.fq.ready(function(dlk) {
            this.bqB(this.nC);
            if (this.cgU) this.ho(this.cgU);
            if (this.bgD) this.blc()
        }.Z(this))
    };
    rU.bL = function() {
        if ( !! this.bRk) {
            this.bRk = bs.btZ.bg(this.bRk)
        }
        this.fq.fireEvent("destroy");
        this.bRo.innerHTML = "";
        for (var cgS in this.fq) {
            if (this.fq.hasOwnProperty(cgS)) {
                delete this.fq[cgS]
            }
        }
        this.fq = undefined;
        this.bO()
    };
    rU.bU = function() {
        this.dv = cF;
        this.bW = bm.bY(dn)
    };
    rU.bP = function() {
        this.bQ();
        this.cLi = bm.bc(this.bb, "j-toolbar")[0];
        this.bRo = bm.bc(this.bb, "j-area")[0]
    };
    rU.cLn = function() {
        var cLh = {
            UEDITOR_HOME_URL: "/",
            iframeCssUrl: undefined,
            initialStyle: cLr,
            initialFrameWidth: "100%"
        };
        this.cLg = NEJ.X(cLh, this.vB.coreOptions || {});
        this.fq = new UE.Editor(this.cLg);
        var cLf = dx.baidu.editor.utils;
        cLf.domReady(function() {
            if (this.btM) {
                clearInterval(this.btM)
            }
            this.btM = setInterval(function() {
                if ( !! this.bRo.offsetWidth) {
                    if (this.btM) {
                        clearInterval(this.btM)
                    }
                    this.fq.render(this.bRo)
                }
            }.Z(this), 10)
        }.Z(this))
    };
    rU.cLl = function() {
        this.bRk = bs.btZ.bh({
            parent: this.cLi,
            editor: this.fq,
            showCmds: this.XK
        })
    };
    rU.blc = function() {
        return this.fq.focus()
    };
    rU.cc = function() {
        return this.fq.getContent().replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g, "")
    };
    rU.dll = function() {
        return this.fq.getContentTxt().replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g, "")
    };
    rU.ho = function(da) {
        this.fq.setContent(da);
        return this
    };
    rU.bqB = function(iL) {
        this.fq.setHeight(iL);
        return this
    };
    rU.gI = function() {
        this.bb.style.display = "";
        return this
    };
    rU.fs = function() {
        this.bb.style.display = "none";
        return this
    };
    rU.zZ = function() {
        var hI = function(bo) {
            if (bo.id != 0) this.bRG.push(bo.id + "@" + bo.src)
        };
        return function() {
            this.bRG = [];
            var cgR = [],
            da = this.fq.getContent(),
            yA = document.createElement("div");
            yA.innerHTML = da;
            var yY = bm.bM(yA),
            bH = yY.getElementsByTagName("img");
            bE.bA(bH, hI, this);
            var cLc = this.bRG.length;
            for (var i = 0; i < cLc; i++) {
                cgR.push(this.bRG[i])
            }
            return cgR
        }
    } ()
})(); (function() {
    var XRegExp;
    if (XRegExp) {
        throw Error("can't load XRegExp twice in the same frame")
    } (function(undefined) {
        XRegExp = function(pattern, flags) {
            var output = [],
            currScope = XRegExp.OUTSIDE_CLASS,
            pos = 0,
            context,
            tokenResult,
            match,
            chr,
            regex;
            if (XRegExp.isRegExp(pattern)) {
                if (flags !== undefined) throw TypeError("can't supply flags when constructing one RegExp from another");
                return clone(pattern)
            }
            if (isInsideConstructor) throw Error("can't call the XRegExp constructor within token definition functions");
            flags = flags || "";
            context = {
                hasNamedCapture: false,
                captureNames: [],
                hasFlag: function(flag) {
                    return flags.indexOf(flag) > -1
                },
                setFlag: function(flag) {
                    flags += flag
                }
            };
            while (pos < pattern.length) {
                tokenResult = runTokens(pattern, pos, currScope, context);
                if (tokenResult) {
                    output.push(tokenResult.output);
                    pos += tokenResult.match[0].length || 1
                } else {
                    if (match = nativ.exec.call(nativeTokens[currScope], pattern.slice(pos))) {
                        output.push(match[0]);
                        pos += match[0].length
                    } else {
                        chr = pattern.charAt(pos);
                        if (chr === "[") currScope = XRegExp.INSIDE_CLASS;
                        else if (chr === "]") currScope = XRegExp.OUTSIDE_CLASS;
                        output.push(chr);
                        pos++
                    }
                }
            }
            regex = RegExp(output.join(""), nativ.replace.call(flags, flagClip, ""));
            regex.SP = {
                source: pattern,
                captureNames: context.hasNamedCapture ? context.captureNames: null
            };
            return regex
        };
        XRegExp.version = "1.5.1";
        XRegExp.INSIDE_CLASS = 1;
        XRegExp.OUTSIDE_CLASS = 2;
        var replacementToken = /\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,
        flagClip = /[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,
        quantifier = /^(?:[?*+]|{\d+(?:,\d*)?})\??/,
        isInsideConstructor = false,
        tokens = [],
        nativ = {
            exec: RegExp.prototype.exec,
            test: RegExp.prototype.test,
            match: String.prototype.match,
            replace: String.prototype.replace,
            split: String.prototype.split
        },
        compliantExecNpcg = nativ.exec.call(/()??/, "")[1] === undefined,
        compliantLastIndexIncrement = function() {
            var x = /^/g;
            nativ.test.call(x, "");
            return ! x.lastIndex
        } (),
        hasNativeY = RegExp.prototype.sticky !== undefined,
        nativeTokens = {};
        nativeTokens[XRegExp.INSIDE_CLASS] = /^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/;
        nativeTokens[XRegExp.OUTSIDE_CLASS] = /^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/;
        XRegExp.addToken = function(regex, handler, scope, trigger) {
            tokens.push({
                pattern: clone(regex, "g" + (hasNativeY ? "y": "")),
                handler: handler,
                scope: scope || XRegExp.OUTSIDE_CLASS,
                trigger: trigger || null
            })
        };
        XRegExp.cache = function(pattern, flags) {
            var key = pattern + "/" + (flags || "");
            return XRegExp.cache[key] || (XRegExp.cache[key] = XRegExp(pattern, flags))
        };
        XRegExp.copyAsGlobal = function(regex) {
            return clone(regex, "g")
        };
        XRegExp.escape = function(str) {
            return str.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&")
        };
        XRegExp.execAt = function(str, regex, pos, anchored) {
            var r2 = clone(regex, "g" + (anchored && hasNativeY ? "y": "")),
            match;
            r2.lastIndex = pos = pos || 0;
            match = r2.exec(str);
            if (anchored && match && match.index !== pos) match = null;
            if (regex.global) regex.lastIndex = match ? r2.lastIndex: 0;
            return match
        };
        XRegExp.freezeTokens = function() {
            XRegExp.addToken = function() {
                throw Error("can't run addToken after freezeTokens")
            }
        };
        XRegExp.isRegExp = function(o) {
            return Object.prototype.toString.call(o) === "[object RegExp]"
        };
        XRegExp.iterate = function(str, regex, callback, context) {
            var r2 = clone(regex, "g"),
            i = -1,
            match;
            while (match = r2.exec(str)) {
                if (regex.global) regex.lastIndex = r2.lastIndex;
                callback.call(context, match, ++i, str, regex);
                if (r2.lastIndex === match.index) r2.lastIndex++
            }
            if (regex.global) regex.lastIndex = 0
        };
        XRegExp.matchChain = function(str, chain) {
            return function recurseChain(values, level) {
                var item = chain[level].regex ? chain[level] : {
                    regex: chain[level]
                },
                regex = clone(item.regex, "g"),
                matches = [],
                i;
                for (i = 0; i < values.length; i++) {
                    XRegExp.iterate(values[i], regex,
                    function(match) {
                        matches.push(item.backref ? match[item.backref] || "": match[0])
                    })
                }
                return level === chain.length - 1 || !matches.length ? matches: recurseChain(matches, level + 1)
            } ([str], 0)
        };
        RegExp.prototype.apply = function(context, args) {
            return this.exec(args[0])
        };
        RegExp.prototype.call = function(context, str) {
            return this.exec(str)
        };
        RegExp.prototype.exec = function(str) {
            var match, name, r2, origLastIndex;
            if (!this.global) origLastIndex = this.lastIndex;
            match = nativ.exec.apply(this, arguments);
            if (match) {
                if (!compliantExecNpcg && match.length > 1 && indexOf(match, "") > -1) {
                    r2 = RegExp(this.source, nativ.replace.call(getNativeFlags(this), "g", ""));
                    nativ.replace.call((str + "").slice(match.index), r2,
                    function() {
                        for (var i = 1; i < arguments.length - 2; i++) {
                            if (arguments[i] === undefined) match[i] = undefined
                        }
                    })
                }
                if (this.SP && this.SP.captureNames) {
                    for (var i = 1; i < match.length; i++) {
                        name = this.SP.captureNames[i - 1];
                        if (name) match[name] = match[i]
                    }
                }
                if (!compliantLastIndexIncrement && this.global && !match[0].length && this.lastIndex > match.index) this.lastIndex--
            }
            if (!this.global) this.lastIndex = origLastIndex;
            return match
        };
        RegExp.prototype.test = function(str) {
            var match, origLastIndex;
            if (!this.global) origLastIndex = this.lastIndex;
            match = nativ.exec.call(this, str);
            if (match && !compliantLastIndexIncrement && this.global && !match[0].length && this.lastIndex > match.index) this.lastIndex--;
            if (!this.global) this.lastIndex = origLastIndex;
            return !! match
        };
        String.prototype.match = function(regex) {
            if (!XRegExp.isRegExp(regex)) regex = RegExp(regex);
            if (regex.global) {
                var result = nativ.match.apply(this, arguments);
                regex.lastIndex = 0;
                return result
            }
            return regex.exec(this)
        };
        String.prototype.replace = function(search, replacement) {
            var isRegex = XRegExp.isRegExp(search),
            captureNames,
            result,
            str,
            origLastIndex;
            if (isRegex) {
                if (search.SP) captureNames = search.SP.captureNames;
                if (!search.global) origLastIndex = search.lastIndex
            } else {
                search = search + ""
            }
            if (Object.prototype.toString.call(replacement) === "[object Function]") {
                result = nativ.replace.call(this + "", search,
                function() {
                    if (captureNames) {
                        arguments[0] = new String(arguments[0]);
                        for (var i = 0; i < captureNames.length; i++) {
                            if (captureNames[i]) arguments[0][captureNames[i]] = arguments[i + 1]
                        }
                    }
                    if (isRegex && search.global) search.lastIndex = arguments[arguments.length - 2] + arguments[0].length;
                    return replacement.apply(null, arguments)
                })
            } else {
                str = this + "";
                result = nativ.replace.call(str, search,
                function() {
                    var args = arguments;
                    return nativ.replace.call(replacement + "", replacementToken,
                    function($0, $1, $2) {
                        if ($1) {
                            switch ($1) {
                            case "$":
                                return "$";
                            case "&":
                                return args[0];
                            case "`":
                                return args[args.length - 1].slice(0, args[args.length - 2]);
                            case "'":
                                return args[args.length - 1].slice(args[args.length - 2] + args[0].length);
                            default:
                                var literalNumbers = "";
                                $1 = +$1;
                                if (!$1) return $0;
                                while ($1 > args.length - 3) {
                                    literalNumbers = String.prototype.slice.call($1, -1) + literalNumbers;
                                    $1 = Math.floor($1 / 10)
                                }
                                return ($1 ? args[$1] || "": "$") + literalNumbers
                            }
                        } else {
                            var n = +$2;
                            if (n <= args.length - 3) return args[n];
                            n = captureNames ? indexOf(captureNames, $2) : -1;
                            return n > -1 ? args[n + 1] : $0
                        }
                    })
                })
            }
            if (isRegex) {
                if (search.global) search.lastIndex = 0;
                else search.lastIndex = origLastIndex
            }
            return result
        };
        String.prototype.split = function(s, limit) {
            if (!XRegExp.isRegExp(s)) return nativ.split.apply(this, arguments);
            var str = this + "",
            output = [],
            lastLastIndex = 0,
            match,
            lastLength;
            if (limit === undefined || +limit < 0) {
                limit = Infinity
            } else {
                limit = Math.floor( + limit);
                if (!limit) return []
            }
            s = XRegExp.copyAsGlobal(s);
            while (match = s.exec(str)) {
                if (s.lastIndex > lastLastIndex) {
                    output.push(str.slice(lastLastIndex, match.index));
                    if (match.length > 1 && match.index < str.length) Array.prototype.push.apply(output, match.slice(1));
                    lastLength = match[0].length;
                    lastLastIndex = s.lastIndex;
                    if (output.length >= limit) break
                }
                if (s.lastIndex === match.index) s.lastIndex++
            }
            if (lastLastIndex === str.length) {
                if (!nativ.test.call(s, "") || lastLength) output.push("")
            } else {
                output.push(str.slice(lastLastIndex))
            }
            return output.length > limit ? output.slice(0, limit) : output
        };
        function clone(regex, additionalFlags) {
            if (!XRegExp.isRegExp(regex)) throw TypeError("type RegExp expected");
            var x = regex.SP;
            regex = XRegExp(regex.source, getNativeFlags(regex) + (additionalFlags || ""));
            if (x) {
                regex.SP = {
                    source: x.source,
                    captureNames: x.captureNames ? x.captureNames.slice(0) : null
                }
            }
            return regex
        }
        function getNativeFlags(regex) {
            return (regex.global ? "g": "") + (regex.ignoreCase ? "i": "") + (regex.multiline ? "m": "") + (regex.extended ? "x": "") + (regex.sticky ? "y": "")
        }
        function runTokens(pattern, index, scope, context) {
            var i = tokens.length,
            result, match, t;
            isInsideConstructor = true;
            try {
                while (i--) {
                    t = tokens[i];
                    if (scope & t.scope && (!t.trigger || t.trigger.call(context))) {
                        t.pattern.lastIndex = index;
                        match = t.pattern.exec(pattern);
                        if (match && match.index === index) {
                            result = {
                                output: t.handler.call(context, match, scope),
                                match: match
                            };
                            break
                        }
                    }
                }
            } catch(err) {
                throw err
            } finally {
                isInsideConstructor = false
            }
            return result
        }
        function indexOf(array, item, from) {
            if (Array.prototype.indexOf) return array.indexOf(item, from);
            for (var i = from || 0; i < array.length; i++) {
                if (array[i] === item) return i
            }
            return - 1
        }
        XRegExp.addToken(/\(\?#[^)]*\)/,
        function(match) {
            return nativ.test.call(quantifier, match.input.slice(match.index + match[0].length)) ? "": "(?:)"
        });
        XRegExp.addToken(/\((?!\?)/,
        function() {
            this.captureNames.push(null);
            return "("
        });
        XRegExp.addToken(/\(\?<([$\w]+)>/,
        function(match) {
            this.captureNames.push(match[1]);
            this.hasNamedCapture = true;
            return "("
        });
        XRegExp.addToken(/\\k<([\w$]+)>/,
        function(match) {
            var index = indexOf(this.captureNames, match[1]);
            return index > -1 ? "\\" + (index + 1) + (isNaN(match.input.charAt(match.index + match[0].length)) ? "": "(?:)") : match[0]
        });
        XRegExp.addToken(/\[\^?]/,
        function(match) {
            return match[0] === "[]" ? "\\b\\B": "[\\s\\S]"
        });
        XRegExp.addToken(/^\(\?([imsx]+)\)/,
        function(match) {
            this.setFlag(match[1]);
            return ""
        });
        XRegExp.addToken(/(?:\s+|#.*)+/,
        function(match) {
            return nativ.test.call(quantifier, match.input.slice(match.index + match[0].length)) ? "": "(?:)"
        },
        XRegExp.OUTSIDE_CLASS,
        function() {
            return this.hasFlag("x")
        });
        XRegExp.addToken(/\./,
        function() {
            return "[\\s\\S]"
        },
        XRegExp.OUTSIDE_CLASS,
        function() {
            return this.hasFlag("s")
        })
    })();
    if (typeof SyntaxHighlighter == "undefined") var SyntaxHighlighter = function() {
        if (typeof require != "undefined" && typeof XRegExp == "undefined") {
            XRegExp = require("XRegExp").XRegExp
        }
        var sh = {
            defaults: {
                "class-name": "",
                "first-line": 1,
                "pad-line-numbers": false,
                highlight: false,
                title: null,
                "smart-tabs": true,
                "tab-size": 4,
                gutter: true,
                toolbar: true,
                "quick-code": false,
                collapse: false,
                "auto-links": false,
                light: false,
                unindent: true,
                "html-script": false
            },
            config: {
                space: "&nbsp;",
                useScriptTags: true,
                bloggerMode: false,
                stripBrs: false,
                tagName: "code",
                strings: {
                    expandSource: "expand source",
                    help: "?",
                    alert: "SyntaxHighlighter\n\n",
                    noBrush: "Can't find brush for: ",
                    brushNotHtmlScript: "Brush wasn't configured for html-script option: ",
                    aboutDialog: "@ABOUT@"
                }
            },
            vars: {
                discoveredBrushes: null,
                highlighters: {}
            },
            brushes: {},
            regexLib: {
                multiLineCComments: /\/\*[\s\S]*?\*\//gm,
                singleLineCComments: /\/\/.*$/gm,
                singleLinePerlComments: /#.*$/gm,
                doubleQuotedString: /"([^\\"\n]|\\.)*"/g,
                singleQuotedString: /'([^\\'\n]|\\.)*'/g,
                multiLineDoubleQuotedString: new XRegExp('"([^\\\\"]|\\\\.)*"', "gs"),
                multiLineSingleQuotedString: new XRegExp("'([^\\\\']|\\\\.)*'", "gs"),
                xmlComments: /(&lt;|<)!--[\s\S]*?--(&gt;|>)/gm,
                url: /\w+:\/\/[\w-.\/?%&=:@;#]*/g,
                phpScriptTags: {
                    left: /(&lt;|<)\?(?:=|php)?/g,
                    right: /\?(&gt;|>)/g,
                    eof: true
                },
                aspScriptTags: {
                    left: /(&lt;|<)%=?/g,
                    right: /%(&gt;|>)/g
                },
                scriptScriptTags: {
                    left: /(&lt;|<)\s*script.*?(&gt;|>)/gi,
                    right: /(&lt;|<)\/\s*script\s*(&gt;|>)/gi
                }
            },
            toolbar: {
                getHtml: function(highlighter) {
                    var html = '<div class="toolbar">',
                    items = sh.toolbar.items,
                    list = items.list;
                    function defaultGetHtml(highlighter, name) {
                        return sh.toolbar.getButtonHtml(highlighter, name, sh.config.strings[name])
                    }
                    for (var i = 0; i < list.length; i++) html += (items[list[i]].getHtml || defaultGetHtml)(highlighter, list[i]);
                    html += "</div>";
                    return html
                },
                getButtonHtml: function(highlighter, commandName, label) {
                    return '<span><a href="#" class="toolbar_item' + " command_" + commandName + " " + commandName + '">' + label + "</a></span>"
                },
                handler: function(e) {
                    var target = e.target,
                    className = target.className || "";
                    function getValue(name) {
                        var r = new RegExp(name + "_(\\w+)"),
                        match = r.exec(className);
                        return match ? match[1] : null
                    }
                    var highlighter = getHighlighterById(findParentElement(target, ".syntaxhighlighter").id),
                    commandName = getValue("command");
                    if (highlighter && commandName) sh.toolbar.items[commandName].execute(highlighter);
                    e.preventDefault()
                },
                items: {
                    list: ["expandSource", "help"],
                    expandSource: {
                        getHtml: function(highlighter) {
                            if (highlighter.getParam("collapse") != true) return "";
                            var title = highlighter.getParam("title");
                            return sh.toolbar.getButtonHtml(highlighter, "expandSource", title ? title: sh.config.strings.expandSource)
                        },
                        execute: function(highlighter) {
                            var div = getHighlighterDivById(highlighter.id);
                            removeClass(div, "collapsed")
                        }
                    },
                    help: {
                        execute: function(highlighter) {
                            var wnd = popup("", "_blank", 500, 250, "scrollbars=0"),
                            doc = wnd.document;
                            doc.write(sh.config.strings.aboutDialog);
                            doc.close();
                            wnd.focus()
                        }
                    }
                }
            },
            findElements: function(globalParams, element) {
                var elements = element ? [element] : toArray(document.getElementsByTagName(sh.config.tagName)),
                conf = sh.config,
                result = [];
                if (conf.useScriptTags) elements = elements.concat(getSyntaxHighlighterScriptTags());
                if (elements.length === 0) return result;
                for (var i = 0; i < elements.length; i++) {
                    var item = {
                        target: elements[i],
                        params: !!globalParams ? merge(globalParams, parseParams(elements[i].className)) : parseParams(elements[i].className)
                    };
                    if (item.params["brush"] == null) continue;
                    result.push(item)
                }
                return result
            },
            highlight: function(globalParams, element) {
                var elements = this.findElements(globalParams, element),
                propertyName = "innerHTML",
                highlighter = null,
                conf = sh.config;
                if (elements.length === 0) return;
                for (var i = 0; i < elements.length; i++) {
                    var element = elements[i],
                    target = element.target,
                    params = element.params,
                    brushName = params.brush,
                    code;
                    if (brushName == null) continue;
                    if (params["html-script"] == "true" || sh.defaults["html-script"] == true) {
                        highlighter = new sh.HtmlScript(brushName);
                        brushName = "htmlscript"
                    } else {
                        var brush = findBrush(brushName);
                        if (brush) highlighter = new brush;
                        else continue
                    }
                    code = target[propertyName];
                    if (conf.useScriptTags) code = stripCData(code);
                    if ((target.title || "") != "") params.title = target.title;
                    params["brush"] = brushName;
                    highlighter.init(params);
                    element = highlighter.getDiv(code);
                    if ((target.id || "") != "") element.id = target.id;
                    var tmp = element.firstChild.firstChild;
                    tmp.className = element.firstChild.className;
                    target.parentNode.replaceChild(tmp, target)
                }
            },
            all: function(params) {
                attachEvent(window, "load",
                function() {
                    sh.highlight(params)
                })
            }
        };
        function hasClass(target, className) {
            return target.className.indexOf(className) != -1
        }
        function addClass(target, className) {
            if (!hasClass(target, className)) target.className += " " + className
        }
        function removeClass(target, className) {
            target.className = target.className.replace(className, "")
        }
        function toArray(source) {
            var result = [];
            for (var i = 0; i < source.length; i++) result.push(source[i]);
            return result
        }
        function splitLines(block) {
            function isIE78() {
                if (typeof navigator != "undefined" && navigator.userAgent && navigator.userAgent.match(/MSIE/)) {
                    return navigator.userAgent.split(";")[1].toLowerCase().indexOf("msie 7.0") == "-1" && navigator.userAgent.split(";")[1].toLowerCase().indexOf("msie 8.0") == "-1" ? false: true
                }
                return false
            }
            var ie78Bool = block.match("^(&nbsp;)*<span(.*)>([wW]*)");
            if (isIE78() && !ie78Bool) {
                return block.split(/\r?\n?\s/)
            } else {
                return block.split(/\r?\n/)
            }
        }
        function getHighlighterId(id) {
            var prefix = "highlighter_";
            return id.indexOf(prefix) == 0 ? id: prefix + id
        }
        function getHighlighterById(id) {
            return sh.vars.highlighters[getHighlighterId(id)]
        }
        function getHighlighterDivById(id) {
            return document.getElementById(getHighlighterId(id))
        }
        function storeHighlighter(highlighter) {
            sh.vars.highlighters[getHighlighterId(highlighter.id)] = highlighter
        }
        function findElement(target, search, reverse) {
            if (target == null) return null;
            var nodes = reverse != true ? target.childNodes: [target.parentNode],
            propertyToFind = {
                "#": "id",
                ".": "className"
            } [search.substr(0, 1)] || "nodeName",
            expectedValue,
            found;
            expectedValue = propertyToFind != "nodeName" ? search.substr(1) : search.toUpperCase();
            if ((target[propertyToFind] || "").indexOf(expectedValue) != -1) return target;
            for (var i = 0; nodes && i < nodes.length && found == null; i++) found = findElement(nodes[i], search, reverse);
            return found
        }
        function findParentElement(target, className) {
            return findElement(target, className, true)
        }
        function indexOf(array, searchElement, fromIndex) {
            fromIndex = Math.max(fromIndex || 0, 0);
            for (var i = fromIndex; i < array.length; i++) if (array[i] == searchElement) return i;
            return - 1
        }
        function guid(prefix) {
            return (prefix || "") + Math.round(Math.random() * 1e6).toString()
        }
        function merge(obj1, obj2) {
            var result = {},
            name;
            for (name in obj1) result[name] = obj1[name];
            for (name in obj2) result[name] = obj2[name];
            return result
        }
        function toBoolean(value) {
            var result = {
                "true": true,
                "false": false
            } [value];
            return result == null ? value: result
        }
        function popup(url, name, width, height, options) {
            var x = (screen.width - width) / 2,
            y = (screen.height - height) / 2;
            options += ", left=" + x + ", top=" + y + ", width=" + width + ", height=" + height;
            options = options.replace(/^,/, "");
            var win = window.open(url, name, options);
            win.focus();
            return win
        }
        function attachEvent(obj, type, func, scope) {
            function handler(e) {
                e = e || window.event;
                if (!e.target) {
                    e.target = e.srcElement;
                    e.preventDefault = function() {
                        this.returnValue = false
                    }
                }
                func.call(scope || window, e)
            }
            if (obj.attachEvent) {
                obj.attachEvent("on" + type, handler)
            } else {
                obj.addEventListener(type, handler, false)
            }
        }
        function alert(str) {
            window.alert(sh.config.strings.alert + str)
        }
        function findBrush(alias, showAlert) {
            var brushes = sh.vars.discoveredBrushes,
            result = null;
            if (brushes == null) {
                brushes = {};
                for (var brush in sh.brushes) {
                    var info = sh.brushes[brush],
                    aliases = info.aliases;
                    if (aliases == null) continue;
                    info.brushName = brush.toLowerCase();
                    for (var i = 0; i < aliases.length; i++) brushes[aliases[i]] = brush
                }
                sh.vars.discoveredBrushes = brushes
            }
            result = sh.brushes[brushes[alias]];
            if (result == null && showAlert) alert(sh.config.strings.noBrush + alias);
            return result
        }
        function eachLine(str, callback) {
            var lines = splitLines(str);
            for (var i = 0; i < lines.length; i++) lines[i] = callback(lines[i], i);
            return lines.join("\r\n")
        }
        function trimFirstAndLastLines(str) {
            return str.replace(/^[ ]*[\n]+|[\n]*[ ]*$/g, "")
        }
        function parseParams(str) {
            var match, result = {},
            arrayRegex = new XRegExp("^\\[(?<values>(.*?))\\]$"),
            regex = new XRegExp("(?<name>[\\w-]+)" + "\\s*:\\s*" + "(?<value>" + "[\\w-%#]+|" + "\\[.*?\\]|" + '".*?"|' + "'.*?'" + ")\\s*;?", "g");
            while ((match = regex.exec(str)) != null) {
                var value = match.value.replace(/^['"]|['"]$/g, "");
                if (value != null && arrayRegex.test(value)) {
                    var m = arrayRegex.exec(value);
                    value = m.values.length > 0 ? m.values.split(/\s*,\s*/) : []
                }
                result[match.name] = value
            }
            return result
        }
        function wrapLinesWithCode(str, css) {
            if (str == null || str.length == 0 || str == "\n") return str;
            str = str.replace(/</g, "&lt;");
            str = str.replace(/ {2,}/g,
            function(m) {
                var spaces = "";
                for (var i = 0; i < m.length - 1; i++) spaces += sh.config.space;
                return spaces + " "
            });
            if (css != null) str = eachLine(str,
            function(line) {
                if (line.length == 0) return "";
                var spaces = "";
                line = line.replace(/^(&nbsp;| )+/,
                function(s) {
                    spaces = s;
                    return ""
                });
                if (line.length == 0) return spaces;
                return spaces + '<span class="' + css + '">' + line + "</span>"
            });
            return str
        }
        function padNumber(number, length) {
            var result = number.toString();
            while (result.length < length) result = "0" + result;
            return result
        }
        function processTabs(code, tabSize) {
            var tab = "";
            for (var i = 0; i < tabSize; i++) tab += " ";
            return code.replace(/\t/g, tab)
        }
        function processSmartTabs(code, tabSize) {
            var lines = splitLines(code),
            tab = "\t",
            spaces = "";
            for (var i = 0; i < 50; i++) spaces += "                    ";
            function insertSpaces(line, pos, count) {
                return line.substr(0, pos) + spaces.substr(0, count) + line.substr(pos + 1, line.length)
            }
            code = eachLine(code,
            function(line) {
                if (line.indexOf(tab) == -1) return line;
                var pos = 0;
                while ((pos = line.indexOf(tab)) != -1) {
                    var spaces = tabSize - pos % tabSize;
                    line = insertSpaces(line, pos, spaces)
                }
                return line
            });
            return code
        }
        function fixInputString(str) {
            var br = /<br\s*\/?>|&lt;br\s*\/?&gt;/gi;
            if (sh.config.bloggerMode == true) str = str.replace(br, "\n");
            if (sh.config.stripBrs == true) str = str.replace(br, "");
            return str
        }
        function trim(str) {
            return str.replace(/^\s+|\s+$/g, "")
        }
        function unindent(str) {
            var lines = splitLines(fixInputString(str)),
            indents = new Array,
            regex = /^\s*/,
            min = 1e3;
            for (var i = 0; i < lines.length && min > 0; i++) {
                var line = lines[i];
                if (trim(line).length == 0) continue;
                var matches = regex.exec(line);
                if (matches == null) return str;
                min = Math.min(matches[0].length, min)
            }
            if (min > 0) for (var i = 0; i < lines.length; i++) lines[i] = lines[i].substr(min);
            return lines.join("\n")
        }
        function matchesSortCallback(m1, m2) {
            if (m1.index < m2.index) return - 1;
            else if (m1.index > m2.index) return 1;
            else {
                if (m1.length < m2.length) return - 1;
                else if (m1.length > m2.length) return 1
            }
            return 0
        }
        function getMatches(code, regexInfo) {
            function defaultAdd(match, regexInfo) {
                return match[0]
            }
            var index = 0,
            match = null,
            matches = [],
            func = regexInfo.func ? regexInfo.func: defaultAdd;
            while ((match = regexInfo.regex.exec(code)) != null) {
                var resultMatch = func(match, regexInfo);
                if (typeof resultMatch == "string") resultMatch = [new sh.Match(resultMatch, match.index, regexInfo.css)];
                matches = matches.concat(resultMatch)
            }
            return matches
        }
        function processUrls(code) {
            var gt = /(.*)((&gt;|&lt;).*)/;
            return code.replace(sh.regexLib.url,
            function(m) {
                var suffix = "",
                match = null;
                if (match = gt.exec(m)) {
                    m = match[1];
                    suffix = match[2]
                }
                return '<a href="' + m + '">' + m + "</a>" + suffix
            })
        }
        function getSyntaxHighlighterScriptTags() {
            var tags = document.getElementsByTagName("script"),
            result = [];
            for (var i = 0; i < tags.length; i++) if (tags[i].type == "syntaxhighlighter") result.push(tags[i]);
            return result
        }
        function stripCData(original) {
            var left = "<![CDATA[",
            right = "]]>",
            copy = trim(original),
            changed = false,
            leftLength = left.length,
            rightLength = right.length;
            if (copy.indexOf(left) == 0) {
                copy = copy.substring(leftLength);
                changed = true
            }
            var copyLength = copy.length;
            if (copy.indexOf(right) != -1 && copy.indexOf(right) == copyLength - rightLength) {
                copy = copy.substring(0, copyLength - rightLength);
                changed = true
            }
            return changed ? copy: original
        }
        function quickCodeHandler(e) {
            var target = e.target,
            highlighterDiv = findParentElement(target, ".syntaxhighlighter"),
            container = findParentElement(target, ".container"),
            textarea = document.createElement("textarea"),
            highlighter;
            if (!container || !highlighterDiv || findElement(container, "textarea")) return;
            highlighter = getHighlighterById(highlighterDiv.id);
            addClass(highlighterDiv, "source");
            var lines = container.childNodes,
            code = [];
            for (var i = 0; i < lines.length; i++) code.push(lines[i].innerText || lines[i].textContent);
            code = code.join("\r");
            code = code.replace(/\u00a0/g, " ");
            textarea.appendChild(document.createTextNode(code));
            container.appendChild(textarea);
            textarea.focus();
            textarea.select();
            attachEvent(textarea, "blur",
            function(e) {
                textarea.parentNode.removeChild(textarea);
                removeClass(highlighterDiv, "source")
            })
        }
        sh.Match = function(value, index, css) {
            this.value = value;
            this.index = index;
            this.length = value.length;
            this.css = css;
            this.brushName = null
        };
        sh.Match.prototype.toString = function() {
            return this.value
        };
        sh.HtmlScript = function(scriptBrushName) {
            var brushClass = findBrush(scriptBrushName),
            scriptBrush,
            xmlBrush = new sh.brushes.Xml,
            bracketsRegex = null,
            ref = this,
            methodsToExpose = "getDiv getHtml init".split(" ");
            if (brushClass == null) return;
            scriptBrush = new brushClass;
            for (var i = 0; i < methodsToExpose.length; i++)(function() {
                var name = methodsToExpose[i];
                ref[name] = function() {
                    return xmlBrush[name].apply(xmlBrush, arguments)
                }
            })();
            if (scriptBrush.htmlScript == null) {
                alert(sh.config.strings.brushNotHtmlScript + scriptBrushName);
                return
            }
            xmlBrush.regexList.push({
                regex: scriptBrush.htmlScript.code,
                func: process
            });
            function offsetMatches(matches, offset) {
                for (var j = 0; j < matches.length; j++) matches[j].index += offset
            }
            function process(match, info) {
                var code = match.code,
                matches = [],
                regexList = scriptBrush.regexList,
                offset = match.index + match.left.length,
                htmlScript = scriptBrush.htmlScript,
                result;
                for (var i = 0; i < regexList.length; i++) {
                    result = getMatches(code, regexList[i]);
                    offsetMatches(result, offset);
                    matches = matches.concat(result)
                }
                if (htmlScript.left != null && match.left != null) {
                    result = getMatches(match.left, htmlScript.left);
                    offsetMatches(result, match.index);
                    matches = matches.concat(result)
                }
                if (htmlScript.right != null && match.right != null) {
                    result = getMatches(match.right, htmlScript.right);
                    offsetMatches(result, match.index + match[0].lastIndexOf(match.right));
                    matches = matches.concat(result)
                }
                for (var j = 0; j < matches.length; j++) matches[j].brushName = brushClass.brushName;
                return matches
            }
        };
        sh.Highlighter = function() {};
        sh.Highlighter.prototype = {
            getParam: function(name, defaultValue) {
                var result = this.params[name];
                return toBoolean(result == null ? defaultValue: result)
            },
            create: function(name) {
                return document.createElement(name)
            },
            findMatches: function(regexList, code) {
                var result = [];
                if (regexList != null) for (var i = 0; i < regexList.length; i++) if (typeof regexList[i] == "object") result = result.concat(getMatches(code, regexList[i]));
                return this.removeNestedMatches(result.sort(matchesSortCallback))
            },
            removeNestedMatches: function(matches) {
                for (var i = 0; i < matches.length; i++) {
                    if (matches[i] === null) continue;
                    var itemI = matches[i],
                    itemIEndPos = itemI.index + itemI.length;
                    for (var j = i + 1; j < matches.length && matches[i] !== null; j++) {
                        var itemJ = matches[j];
                        if (itemJ === null) continue;
                        else if (itemJ.index > itemIEndPos) break;
                        else if (itemJ.index == itemI.index && itemJ.length > itemI.length) matches[i] = null;
                        else if (itemJ.index >= itemI.index && itemJ.index < itemIEndPos) matches[j] = null
                    }
                }
                return matches
            },
            figureOutLineNumbers: function(code) {
                var lines = [],
                firstLine = parseInt(this.getParam("first-line"));
                eachLine(code,
                function(line, index) {
                    lines.push(index + firstLine)
                });
                return lines
            },
            isLineHighlighted: function(lineNumber) {
                var list = this.getParam("highlight", []);
                if (typeof list != "object" && list.push == null) list = [list];
                return indexOf(list, lineNumber.toString()) != -1
            },
            getLineHtml: function(lineIndex, lineNumber, code) {
                var classes = ["line", "number" + lineNumber, "index" + lineIndex, "alt" + (lineNumber % 2 == 0 ? 1 : 2).toString()];
                if (this.isLineHighlighted(lineNumber)) classes.push("highlighted");
                if (lineNumber == 0) classes.push("break");
                return '<li class="' + classes.join(" ") + '">' + code + "</li>"
            },
            getLineNumbersHtml: function(code, lineNumbers) {
                var html = "",
                count = splitLines(code).length,
                firstLine = parseInt(this.getParam("first-line")),
                pad = this.getParam("pad-line-numbers");
                if (pad == true) pad = (firstLine + count - 1).toString().length;
                else if (isNaN(pad) == true) pad = 0;
                for (var i = 0; i < count; i++) {
                    var lineNumber = lineNumbers ? lineNumbers[i] : firstLine + i,
                    code = lineNumber == 0 ? sh.config.space: padNumber(lineNumber, pad);
                    html += this.getLineHtml(i, lineNumber, code)
                }
                return html
            },
            getCodeLinesHtml: function(html, lineNumbers) {
                html = trim(html);
                var lines = splitLines(html),
                padLength = this.getParam("pad-line-numbers"),
                firstLine = parseInt(this.getParam("first-line")),
                html = "",
                brushName = this.getParam("brush");
                for (var i = 0; i < lines.length; i++) {
                    var line = lines[i],
                    indent = /^(&nbsp;|\s)+/.exec(line),
                    spaces = null,
                    lineNumber = lineNumbers ? lineNumbers[i] : firstLine + i;
                    if (indent != null) {
                        spaces = indent[0].toString();
                        line = line.substr(spaces.length);
                        spaces = spaces.replace(" ", sh.config.space)
                    }
                    line = trim(line);
                    if (line.length == 0) line = sh.config.space;
                    html += this.getLineHtml(i, lineNumber, (spaces != null ? '<span class="' + brushName + ' spaces">' + spaces + "</span>": "") + line)
                }
                return html
            },
            getTitleHtml: function(title) {
                return title ? "<caption>" + title + "</caption>": ""
            },
            getMatchesHtml: function(code, matches) {
                var pos = 0,
                result = "",
                brushName = this.getParam("brush", "");
                function getBrushNameCss(match) {
                    var result = match ? match.brushName || brushName: brushName;
                    return result ? result + " ": ""
                }
                for (var i = 0; i < matches.length; i++) {
                    var match = matches[i],
                    matchBrushName;
                    if (match === null || match.length === 0) continue;
                    matchBrushName = getBrushNameCss(match);
                    result += wrapLinesWithCode(code.substr(pos, match.index - pos), matchBrushName + "plain") + wrapLinesWithCode(match.value, matchBrushName + match.css);
                    pos = match.index + match.length + (match.offset || 0)
                }
                result += wrapLinesWithCode(code.substr(pos), getBrushNameCss() + "plain");
                return result
            },
            getHtml: function(code) {
                var html = "",
                classes = ["syntaxhighlighter"],
                tabSize,
                matches,
                lineNumbers;
                if (this.getParam("light") == true) this.params.toolbar = this.params.gutter = false;
                className = "syntaxhighlighter";
                if (this.getParam("collapse") == true) classes.push("collapsed");
                if ((gutter = this.getParam("gutter")) == false) classes.push("nogutter");
                classes.push(this.getParam("class-name"));
                classes.push(this.getParam("brush"));
                code = trimFirstAndLastLines(code).replace(/\r/g, " ");
                tabSize = this.getParam("tab-size");
                code = this.getParam("smart-tabs") == true ? processSmartTabs(code, tabSize) : processTabs(code, tabSize);
                if (this.getParam("unindent")) code = unindent(code);
                if (gutter) lineNumbers = this.figureOutLineNumbers(code);
                matches = this.findMatches(this.regexList, code);
                html = this.getMatchesHtml(code, matches);
                html = this.getCodeLinesHtml(html, lineNumbers);
                if (this.getParam("auto-links")) html = processUrls(html);
                if (typeof navigator != "undefined" && navigator.userAgent && navigator.userAgent.match(/MSIE/)) classes.push("ie");
                html = '<div id="' + getHighlighterId(this.id) + '" class="' + classes.join(" ") + '">' + (this.getParam("toolbar") ? sh.toolbar.getHtml(this) : "") + "<div>" + this.getTitleHtml(this.getParam("title")) + "<ol>" + html + "</ol>" + "</div>" + "</div>";
                return html
            },
            getDiv: function(code) {
                if (code === null) code = "";
                this.code = code;
                var div = this.create("div");
                div.innerHTML = this.getHtml(code);
                if (this.getParam("toolbar")) attachEvent(findElement(div, ".toolbar"), "click", sh.toolbar.handler);
                if (this.getParam("quick-code")) attachEvent(findElement(div, ".code"), "dblclick", quickCodeHandler);
                return div
            },
            init: function(params) {
                this.id = guid();
                storeHighlighter(this);
                this.params = merge(sh.defaults, params || {});
                if (this.getParam("light") == true) this.params.toolbar = this.params.gutter = false
            },
            getKeywords: function(str) {
                str = str.replace(/^\s+|\s+$/g, "").replace(/\s+/g, "|");
                return "\\b(?:" + str + ")\\b"
            },
            forHtmlScript: function(regexGroup) {
                var regex = {
                    end: regexGroup.right.source
                };
                if (regexGroup.eof) regex.end = "(?:(?:" + regex.end + ")|$)";
                this.htmlScript = {
                    left: {
                        regex: regexGroup.left,
                        css: "script"
                    },
                    right: {
                        regex: regexGroup.right,
                        css: "script"
                    },
                    code: new XRegExp("(?<left>" + regexGroup.left.source + ")" + "(?<code>.*?)" + "(?<right>" + regex.end + ")", "sgi")
                }
            }
        };
        return sh
    } ();
    typeof exports != "undefined" ? exports.SyntaxHighlighter = SyntaxHighlighter: null; (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var inits = "class interface function package";
            var keywords = "-Infinity ...rest Array as AS3 Boolean break case catch const continue Date decodeURI " + "decodeURIComponent default delete do dynamic each else encodeURI encodeURIComponent escape " + "extends false final finally flash_proxy for get if implements import in include Infinity " + "instanceof int internal is isFinite isNaN isXMLName label namespace NaN native new null " + "Null Number Object object_proxy override parseFloat parseInt private protected public " + "return set static String super switch this throw true try typeof uint undefined unescape " + "use void while with";
            this.regexList = [{
                regex: SyntaxHighlighter.regexLib.singleLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.multiLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: /\b([\d]+(\.[\d]+)?|0x[a-f0-9]+)\b/gi,
                css: "value"
            },
            {
                regex: new RegExp(this.getKeywords(inits), "gm"),
                css: "color3"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            },
            {
                regex: new RegExp("var", "gm"),
                css: "variable"
            },
            {
                regex: new RegExp("trace", "gm"),
                css: "color1"
            }];
            this.forHtmlScript(SyntaxHighlighter.regexLib.scriptScriptTags)
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["actionscript3", "as3"];
        SyntaxHighlighter.brushes.AS3 = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "after before beginning continue copy each end every from return get global in local named of set some that the then times to where whose with without";
            var ordinals = "first second third fourth fifth sixth seventh eighth ninth tenth last front back middle";
            var specials = "activate add alias AppleScript ask attachment boolean class constant delete duplicate empty exists false id integer list make message modal modified new no paragraph pi properties quit real record remove rest result reveal reverse run running save string true word yes";
            this.regexList = [{
                regex: /(--|#).*$/gm,
                css: "comments"
            },
            {
                regex: /\(\*(?:[\s\S]*?\(\*[\s\S]*?\*\))*[\s\S]*?\*\)/gm,
                css: "comments"
            },
            {
                regex: /"[\s\S]*?"/gm,
                css: "string"
            },
            {
                regex: /(?:,|:|¬|'s\b|\(|\)|\{|\}|«|\b\w*»)/g,
                css: "color1"
            },
            {
                regex: /(-)?(\d)+(\.(\d)?)?(E\+(\d)+)?/g,
                css: "color1"
            },
            {
                regex: /(?:&(amp;|gt;|lt;)?|=|� |>|<|≥|>=|≤|<=|\*|\+|-|\/|÷|\^)/g,
                css: "color2"
            },
            {
                regex: /\b(?:and|as|div|mod|not|or|return(?!\s&)(ing)?|equals|(is(n't| not)? )?equal( to)?|does(n't| not) equal|(is(n't| not)? )?(greater|less) than( or equal( to)?)?|(comes|does(n't| not) come) (after|before)|is(n't| not)?( in)? (back|front) of|is(n't| not)? behind|is(n't| not)?( (in|contained by))?|does(n't| not) contain|contain(s)?|(start|begin|end)(s)? with|((but|end) )?(consider|ignor)ing|prop(erty)?|(a )?ref(erence)?( to)?|repeat (until|while|with)|((end|exit) )?repeat|((else|end) )?if|else|(end )?(script|tell|try)|(on )?error|(put )?into|(of )?(it|me)|its|my|with (timeout( of)?|transaction)|end (timeout|transaction))\b/g,
                css: "keyword"
            },
            {
                regex: /\b\d+(st|nd|rd|th)\b/g,
                css: "keyword"
            },
            {
                regex: /\b(?:about|above|against|around|at|below|beneath|beside|between|by|(apart|aside) from|(instead|out) of|into|on(to)?|over|since|thr(ough|u)|under)\b/g,
                css: "color3"
            },
            {
                regex: /\b(?:adding folder items to|after receiving|choose( ((remote )?application|color|folder|from list|URL))?|clipboard info|set the clipboard to|(the )?clipboard|entire contents|display(ing| (alert|dialog|mode))?|document( (edited|file|nib name))?|file( (name|type))?|(info )?for|giving up after|(name )?extension|quoted form|return(ed)?|second(?! item)(s)?|list (disks|folder)|text item(s| delimiters)?|(Unicode )?text|(disk )?item(s)?|((current|list) )?view|((container|key) )?window|with (data|icon( (caution|note|stop))?|parameter(s)?|prompt|properties|seed|title)|case|diacriticals|hyphens|numeric strings|punctuation|white space|folder creation|application(s( folder)?| (processes|scripts position|support))?|((desktop )?(pictures )?|(documents|downloads|favorites|home|keychain|library|movies|music|public|scripts|sites|system|users|utilities|workflows) )folder|desktop|Folder Action scripts|font(s| panel)?|help|internet plugins|modem scripts|(system )?preferences|printer descriptions|scripting (additions|components)|shared (documents|libraries)|startup (disk|items)|temporary items|trash|on server|in AppleTalk zone|((as|long|short) )?user name|user (ID|locale)|(with )?password|in (bundle( with identifier)?|directory)|(close|open for) access|read|write( permission)?|(g|s)et eof|using( delimiters)?|starting at|default (answer|button|color|country code|entr(y|ies)|identifiers|items|name|location|script editor)|hidden( answer)?|open(ed| (location|untitled))?|error (handling|reporting)|(do( shell)?|load|run|store) script|administrator privileges|altering line endings|get volume settings|(alert|boot|input|mount|output|set) volume|output muted|(fax|random )?number|round(ing)?|up|down|toward zero|to nearest|as taught in school|system (attribute|info)|((AppleScript( Studio)?|system) )?version|(home )?directory|(IPv4|primary Ethernet) address|CPU (type|speed)|physical memory|time (stamp|to GMT)|replacing|ASCII (character|number)|localized string|from table|offset|summarize|beep|delay|say|(empty|multiple) selections allowed|(of|preferred) type|invisibles|showing( package contents)?|editable URL|(File|FTP|News|Media|Web) [Ss]ervers|Telnet hosts|Directory services|Remote applications|waiting until completion|saving( (in|to))?|path (for|to( (((current|frontmost) )?application|resource))?)|POSIX (file|path)|(background|RGB) color|(OK|cancel) button name|cancel button|button(s)?|cubic ((centi)?met(re|er)s|yards|feet|inches)|square ((kilo)?met(re|er)s|miles|yards|feet)|(centi|kilo)?met(re|er)s|miles|yards|feet|inches|lit(re|er)s|gallons|quarts|(kilo)?grams|ounces|pounds|degrees (Celsius|Fahrenheit|Kelvin)|print( (dialog|settings))?|clos(e(able)?|ing)|(de)?miniaturized|miniaturizable|zoom(ed|able)|attribute run|action (method|property|title)|phone|email|((start|end)ing|home) page|((birth|creation|current|custom|modification) )?date|((((phonetic )?(first|last|middle))|computer|host|maiden|related) |nick)?name|aim|icq|jabber|msn|yahoo|address(es)?|save addressbook|should enable action|city|country( code)?|formatte(r|d address)|(palette )?label|state|street|zip|AIM [Hh]andle(s)?|my card|select(ion| all)?|unsaved|(alpha )?value|entr(y|ies)|group|(ICQ|Jabber|MSN) handle|person|people|company|department|icon image|job title|note|organization|suffix|vcard|url|copies|collating|pages (across|down)|request print time|target( printer)?|((GUI Scripting|Script menu) )?enabled|show Computer scripts|(de)?activated|awake from nib|became (key|main)|call method|of (class|object)|center|clicked toolbar item|closed|for document|exposed|(can )?hide|idle|keyboard (down|up)|event( (number|type))?|launch(ed)?|load (image|movie|nib|sound)|owner|log|mouse (down|dragged|entered|exited|moved|up)|move|column|localization|resource|script|register|drag (info|types)|resigned (active|key|main)|resiz(e(d)?|able)|right mouse (down|dragged|up)|scroll wheel|(at )?index|should (close|open( untitled)?|quit( after last window closed)?|zoom)|((proposed|screen) )?bounds|show(n)?|behind|in front of|size (mode|to fit)|update(d| toolbar item)?|was (hidden|miniaturized)|will (become active|close|finish launching|hide|miniaturize|move|open|quit|(resign )?active|((maximum|minimum|proposed) )?size|show|zoom)|bundle|data source|movie|pasteboard|sound|tool(bar| tip)|(color|open|save) panel|coordinate system|frontmost|main( (bundle|menu|window))?|((services|(excluded from )?windows) )?menu|((executable|frameworks|resource|scripts|shared (frameworks|support)) )?path|(selected item )?identifier|data|content(s| view)?|character(s)?|click count|(command|control|option|shift) key down|context|delta (x|y|z)|key( code)?|location|pressure|unmodified characters|types|(first )?responder|playing|(allowed|selectable) identifiers|allows customization|(auto saves )?configuration|visible|image( name)?|menu form representation|tag|user(-| )defaults|associated file name|(auto|needs) display|current field editor|floating|has (resize indicator|shadow)|hides when deactivated|level|minimized (image|title)|opaque|position|release when closed|sheet|title(d)?)\b/g,
                css: "color3"
            },
            {
                regex: new RegExp(this.getKeywords(specials), "gm"),
                css: "color3"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            },
            {
                regex: new RegExp(this.getKeywords(ordinals), "gm"),
                css: "keyword"
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["applescript"];
        SyntaxHighlighter.brushes.AppleScript = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "if fi then elif else for do done until while break continue case esac function return in eq ne ge le";
            var commands = "alias apropos awk basename bash bc bg builtin bzip2 cal cat cd cfdisk chgrp chmod chown chroot" + "cksum clear cmp comm command cp cron crontab csplit cut date dc dd ddrescue declare df " + "diff diff3 dig dir dircolors dirname dirs du echo egrep eject enable env ethtool eval " + "exec exit expand export expr false fdformat fdisk fg fgrep file find fmt fold format " + "free fsck ftp gawk getopts grep groups gzip hash head history hostname id ifconfig " + "import install join kill less let ln local locate logname logout look lpc lpr lprint " + "lprintd lprintq lprm ls lsof make man mkdir mkfifo mkisofs mknod more mount mtools " + "mv netstat nice nl nohup nslookup open op passwd paste pathchk ping popd pr printcap " + "printenv printf ps pushd pwd quota quotacheck quotactl ram rcp read readonly renice " + "remsync rm rmdir rsync screen scp sdiff sed select seq set sftp shift shopt shutdown " + "sleep sort source split ssh strace su sudo sum symlink sync tail tar tee test time " + "times touch top traceroute trap tr true tsort tty type ulimit umask umount unalias " + "uname unexpand uniq units unset unshar useradd usermod users uuencode uudecode v vdir " + "vi watch wc whereis which who whoami Wget xargs yes";
            this.regexList = [{
                regex: /^#!.*$/gm,
                css: "preprocessor bold"
            },
            {
                regex: /\/[\w-\/]+/gm,
                css: "plain"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleLinePerlComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            },
            {
                regex: new RegExp(this.getKeywords(commands), "gm"),
                css: "functions"
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["bash", "shell", "sh"];
        SyntaxHighlighter.brushes.Bash = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var funcs = "Abs ACos AddSOAPRequestHeader AddSOAPResponseHeader AjaxLink AjaxOnLoad ArrayAppend ArrayAvg ArrayClear ArrayDeleteAt " + "ArrayInsertAt ArrayIsDefined ArrayIsEmpty ArrayLen ArrayMax ArrayMin ArraySet ArraySort ArraySum ArraySwap ArrayToList " + "Asc ASin Atn BinaryDecode BinaryEncode BitAnd BitMaskClear BitMaskRead BitMaskSet BitNot BitOr BitSHLN BitSHRN BitXor " + "Ceiling CharsetDecode CharsetEncode Chr CJustify Compare CompareNoCase Cos CreateDate CreateDateTime CreateObject " + "CreateODBCDate CreateODBCDateTime CreateODBCTime CreateTime CreateTimeSpan CreateUUID DateAdd DateCompare DateConvert " + "DateDiff DateFormat DatePart Day DayOfWeek DayOfWeekAsString DayOfYear DaysInMonth DaysInYear DE DecimalFormat DecrementValue " + "Decrypt DecryptBinary DeleteClientVariable DeserializeJSON DirectoryExists DollarFormat DotNetToCFType Duplicate Encrypt " + "EncryptBinary Evaluate Exp ExpandPath FileClose FileCopy FileDelete FileExists FileIsEOF FileMove FileOpen FileRead " + "FileReadBinary FileReadLine FileSetAccessMode FileSetAttribute FileSetLastModified FileWrite Find FindNoCase FindOneOf " + "FirstDayOfMonth Fix FormatBaseN GenerateSecretKey GetAuthUser GetBaseTagData GetBaseTagList GetBaseTemplatePath " + "GetClientVariablesList GetComponentMetaData GetContextRoot GetCurrentTemplatePath GetDirectoryFromPath GetEncoding " + "GetException GetFileFromPath GetFileInfo GetFunctionList GetGatewayHelper GetHttpRequestData GetHttpTimeString " + "GetK2ServerDocCount GetK2ServerDocCountLimit GetLocale GetLocaleDisplayName GetLocalHostIP GetMetaData GetMetricData " + "GetPageContext GetPrinterInfo GetProfileSections GetProfileString GetReadableImageFormats GetSOAPRequest GetSOAPRequestHeader " + "GetSOAPResponse GetSOAPResponseHeader GetTempDirectory GetTempFile GetTemplatePath GetTickCount GetTimeZoneInfo GetToken " + "GetUserRoles GetWriteableImageFormats Hash Hour HTMLCodeFormat HTMLEditFormat IIf ImageAddBorder ImageBlur ImageClearRect " + "ImageCopy ImageCrop ImageDrawArc ImageDrawBeveledRect ImageDrawCubicCurve ImageDrawLine ImageDrawLines ImageDrawOval " + "ImageDrawPoint ImageDrawQuadraticCurve ImageDrawRect ImageDrawRoundRect ImageDrawText ImageFlip ImageGetBlob ImageGetBufferedImage " + "ImageGetEXIFTag ImageGetHeight ImageGetIPTCTag ImageGetWidth ImageGrayscale ImageInfo ImageNegative ImageNew ImageOverlay ImagePaste " + "ImageRead ImageReadBase64 ImageResize ImageRotate ImageRotateDrawingAxis ImageScaleToFit ImageSetAntialiasing ImageSetBackgroundColor " + "ImageSetDrawingColor ImageSetDrawingStroke ImageSetDrawingTransparency ImageSharpen ImageShear ImageShearDrawingAxis ImageTranslate " + "ImageTranslateDrawingAxis ImageWrite ImageWriteBase64 ImageXORDrawingMode IncrementValue InputBaseN Insert Int IsArray IsBinary " + "IsBoolean IsCustomFunction IsDate IsDDX IsDebugMode IsDefined IsImage IsImageFile IsInstanceOf IsJSON IsLeapYear IsLocalHost " + "IsNumeric IsNumericDate IsObject IsPDFFile IsPDFObject IsQuery IsSimpleValue IsSOAPRequest IsStruct IsUserInAnyRole IsUserInRole " + "IsUserLoggedIn IsValid IsWDDX IsXML IsXmlAttribute IsXmlDoc IsXmlElem IsXmlNode IsXmlRoot JavaCast JSStringFormat LCase Left Len " + "ListAppend ListChangeDelims ListContains ListContainsNoCase ListDeleteAt ListFind ListFindNoCase ListFirst ListGetAt ListInsertAt " + "ListLast ListLen ListPrepend ListQualify ListRest ListSetAt ListSort ListToArray ListValueCount ListValueCountNoCase LJustify Log " + "Log10 LSCurrencyFormat LSDateFormat LSEuroCurrencyFormat LSIsCurrency LSIsDate LSIsNumeric LSNumberFormat LSParseCurrency LSParseDateTime " + "LSParseEuroCurrency LSParseNumber LSTimeFormat LTrim Max Mid Min Minute Month MonthAsString Now NumberFormat ParagraphFormat ParseDateTime " + "Pi PrecisionEvaluate PreserveSingleQuotes Quarter QueryAddColumn QueryAddRow QueryConvertForGrid QueryNew QuerySetCell QuotedValueList Rand " + "Randomize RandRange REFind REFindNoCase ReleaseComObject REMatch REMatchNoCase RemoveChars RepeatString Replace ReplaceList ReplaceNoCase " + "REReplace REReplaceNoCase Reverse Right RJustify Round RTrim Second SendGatewayMessage SerializeJSON SetEncoding SetLocale SetProfileString " + "SetVariable Sgn Sin Sleep SpanExcluding SpanIncluding Sqr StripCR StructAppend StructClear StructCopy StructCount StructDelete StructFind " + "StructFindKey StructFindValue StructGet StructInsert StructIsEmpty StructKeyArray StructKeyExists StructKeyList StructKeyList StructNew " + "StructSort StructUpdate Tan TimeFormat ToBase64 ToBinary ToScript ToString Trim UCase URLDecode URLEncodedFormat URLSessionFormat Val " + "ValueList VerifyClient Week Wrap Wrap WriteOutput XmlChildPos XmlElemNew XmlFormat XmlGetNodeType XmlNew XmlParse XmlSearch XmlTransform " + "XmlValidate Year YesNoFormat";
            var keywords = "cfabort cfajaximport cfajaxproxy cfapplet cfapplication cfargument cfassociate cfbreak cfcache cfcalendar " + "cfcase cfcatch cfchart cfchartdata cfchartseries cfcol cfcollection cfcomponent cfcontent cfcookie cfdbinfo " + "cfdefaultcase cfdirectory cfdiv cfdocument cfdocumentitem cfdocumentsection cfdump cfelse cfelseif cferror " + "cfexchangecalendar cfexchangeconnection cfexchangecontact cfexchangefilter cfexchangemail cfexchangetask " + "cfexecute cfexit cffeed cffile cfflush cfform cfformgroup cfformitem cfftp cffunction cfgrid cfgridcolumn " + "cfgridrow cfgridupdate cfheader cfhtmlhead cfhttp cfhttpparam cfif cfimage cfimport cfinclude cfindex " + "cfinput cfinsert cfinterface cfinvoke cfinvokeargument cflayout cflayoutarea cfldap cflocation cflock cflog " + "cflogin cfloginuser cflogout cfloop cfmail cfmailparam cfmailpart cfmenu cfmenuitem cfmodule cfNTauthenticate " + "cfobject cfobjectcache cfoutput cfparam cfpdf cfpdfform cfpdfformparam cfpdfparam cfpdfsubform cfpod cfpop " + "cfpresentation cfpresentationslide cfpresenter cfprint cfprocessingdirective cfprocparam cfprocresult " + "cfproperty cfquery cfqueryparam cfregistry cfreport cfreportparam cfrethrow cfreturn cfsavecontent cfschedule " + "cfscript cfsearch cfselect cfset cfsetting cfsilent cfslider cfsprydataset cfstoredproc cfswitch cftable " + "cftextarea cfthread cfthrow cftimer cftooltip cftrace cftransaction cftree cftreeitem cftry cfupdate cfwddx " + "cfwindow cfxml cfzip cfzipparam";
            var operators = "all and any between cross in join like not null or outer some";
            this.regexList = [{
                regex: new RegExp("--(.*)$", "gm"),
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.xmlComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: new RegExp(this.getKeywords(funcs), "gmi"),
                css: "functions"
            },
            {
                regex: new RegExp(this.getKeywords(operators), "gmi"),
                css: "color1"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gmi"),
                css: "keyword"
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["coldfusion", "cf"];
        SyntaxHighlighter.brushes.ColdFusion = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var datatypes = "ATOM BOOL BOOLEAN BYTE CHAR COLORREF DWORD DWORDLONG DWORD_PTR " + "DWORD32 DWORD64 FLOAT HACCEL HALF_PTR HANDLE HBITMAP HBRUSH " + "HCOLORSPACE HCONV HCONVLIST HCURSOR HDC HDDEDATA HDESK HDROP HDWP " + "HENHMETAFILE HFILE HFONT HGDIOBJ HGLOBAL HHOOK HICON HINSTANCE HKEY " + "HKL HLOCAL HMENU HMETAFILE HMODULE HMONITOR HPALETTE HPEN HRESULT " + "HRGN HRSRC HSZ HWINSTA HWND INT INT_PTR INT32 INT64 LANGID LCID LCTYPE " + "LGRPID LONG LONGLONG LONG_PTR LONG32 LONG64 LPARAM LPBOOL LPBYTE LPCOLORREF " + "LPCSTR LPCTSTR LPCVOID LPCWSTR LPDWORD LPHANDLE LPINT LPLONG LPSTR LPTSTR " + "LPVOID LPWORD LPWSTR LRESULT PBOOL PBOOLEAN PBYTE PCHAR PCSTR PCTSTR PCWSTR " + "PDWORDLONG PDWORD_PTR PDWORD32 PDWORD64 PFLOAT PHALF_PTR PHANDLE PHKEY PINT " + "PINT_PTR PINT32 PINT64 PLCID PLONG PLONGLONG PLONG_PTR PLONG32 PLONG64 POINTER_32 " + "POINTER_64 PSHORT PSIZE_T PSSIZE_T PSTR PTBYTE PTCHAR PTSTR PUCHAR PUHALF_PTR " + "PUINT PUINT_PTR PUINT32 PUINT64 PULONG PULONGLONG PULONG_PTR PULONG32 PULONG64 " + "PUSHORT PVOID PWCHAR PWORD PWSTR SC_HANDLE SC_LOCK SERVICE_STATUS_HANDLE SHORT " + "SIZE_T SSIZE_T TBYTE TCHAR UCHAR UHALF_PTR UINT UINT_PTR UINT32 UINT64 ULONG " + "ULONGLONG ULONG_PTR ULONG32 ULONG64 USHORT USN VOID WCHAR WORD WPARAM WPARAM WPARAM " + "char bool short int __int32 __int64 __int8 __int16 long float double __wchar_t " + "clock_t _complex _dev_t _diskfree_t div_t ldiv_t _exception _EXCEPTION_POINTERS " + "FILE _finddata_t _finddatai64_t _wfinddata_t _wfinddatai64_t __finddata64_t " + "__wfinddata64_t _FPIEEE_RECORD fpos_t _HEAPINFO _HFILE lconv intptr_t " + "jmp_buf mbstate_t _off_t _onexit_t _PNH ptrdiff_t _purecall_handler " + "sig_atomic_t size_t _stat __stat64 _stati64 terminate_function " + "time_t __time64_t _timeb __timeb64 tm uintptr_t _utimbuf " + "va_list wchar_t wctrans_t wctype_t wint_t signed";
            var keywords = "auto break case catch class const decltype __finally __exception __try " + "const_cast continue private public protected __declspec " + "default delete deprecated dllexport dllimport do dynamic_cast " + "else enum explicit extern if for friend goto inline " + "mutable naked namespace new noinline noreturn nothrow " + "register reinterpret_cast return selectany " + "sizeof static static_cast struct switch template this " + "thread throw true false try typedef typeid typename union " + "using uuid virtual void volatile whcar_t while";
            var functions = "assert isalnum isalpha iscntrl isdigit isgraph islower isprint" + "ispunct isspace isupper isxdigit tolower toupper errno localeconv " + "setlocale acos asin atan atan2 ceil cos cosh exp fabs floor fmod " + "frexp ldexp log log10 modf pow sin sinh sqrt tan tanh jmp_buf " + "longjmp setjmp raise signal sig_atomic_t va_arg va_end va_start " + "clearerr fclose feof ferror fflush fgetc fgetpos fgets fopen " + "fprintf fputc fputs fread freopen fscanf fseek fsetpos ftell " + "fwrite getc getchar gets perror printf putc putchar puts remove " + "rename rewind scanf setbuf setvbuf sprintf sscanf tmpfile tmpnam " + "ungetc vfprintf vprintf vsprintf abort abs atexit atof atoi atol " + "bsearch calloc div exit free getenv labs ldiv malloc mblen mbstowcs " + "mbtowc qsort rand realloc srand strtod strtol strtoul system " + "wcstombs wctomb memchr memcmp memcpy memmove memset strcat strchr " + "strcmp strcoll strcpy strcspn strerror strlen strncat strncmp " + "strncpy strpbrk strrchr strspn strstr strtok strxfrm asctime " + "clock ctime difftime gmtime localtime mktime strftime time";
            this.regexList = [{
                regex: SyntaxHighlighter.regexLib.singleLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.multiLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: /^ *#.*/gm,
                css: "preprocessor"
            },
            {
                regex: new RegExp(this.getKeywords(datatypes), "gm"),
                css: "color1 bold"
            },
            {
                regex: new RegExp(this.getKeywords(functions), "gm"),
                css: "functions bold"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword bold"
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["cpp", "c"];
        SyntaxHighlighter.brushes.Cpp = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "abstract as base bool break byte case catch char checked class const " + "continue decimal default delegate do double else enum event explicit volatile " + "extern false finally fixed float for foreach get goto if implicit in int " + "interface internal is lock long namespace new null object operator out " + "override params private protected public readonly ref return sbyte sealed set " + "short sizeof stackalloc static string struct switch this throw true try " + "typeof uint ulong unchecked unsafe ushort using virtual void while var " + "from group by into select let where orderby join on equals ascending descending";
            function fixComments(match, regexInfo) {
                var css = match[0].indexOf("///") == 0 ? "color1": "comments";
                return [new SyntaxHighlighter.Match(match[0], match.index, css)]
            }
            this.regexList = [{
                regex: SyntaxHighlighter.regexLib.singleLineCComments,
                func: fixComments
            },
            {
                regex: SyntaxHighlighter.regexLib.multiLineCComments,
                css: "comments"
            },
            {
                regex: /@"(?:[^"]|"")*"/g,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: /^\s*#.*/gm,
                css: "preprocessor"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            },
            {
                regex: /\bpartial(?=\s+(?:class|interface|struct)\b)/g,
                css: "keyword"
            },
            {
                regex: /\byield(?=\s+(?:return|break)\b)/g,
                css: "keyword"
            }];
            this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["c#", "c-sharp", "csharp"];
        SyntaxHighlighter.brushes.CSharp = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            function getKeywordsCSS(str) {
                return "\\b([a-z_]|)" + str.replace(/ /g, "(?=:)\\b|\\b([a-z_\\*]|\\*|)") + "(?=:)\\b"
            }
            function getValuesCSS(str) {
                return "\\b" + str.replace(/ /g, "(?!-)(?!:)\\b|\\b()") + ":\\b"
            }
            var keywords = "ascent azimuth background-attachment background-color background-image background-position " + "background-repeat background baseline bbox border-collapse border-color border-spacing border-style border-top " + "border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color " + "border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width " + "border-bottom-width border-left-width border-width border bottom cap-height caption-side centerline clear clip color " + "content counter-increment counter-reset cue-after cue-before cue cursor definition-src descent direction display " + "elevation empty-cells float font-size-adjust font-family font-size font-stretch font-style font-variant font-weight font " + "height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-top " + "margin-right margin-bottom margin-left margin marker-offset marks mathline max-height max-width min-height min-width orphans " + "outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page " + "page-break-after page-break-before page-break-inside pause pause-after pause-before pitch pitch-range play-during position " + "quotes right richness size slope src speak-header speak-numeral speak-punctuation speak speech-rate stemh stemv stress " + "table-layout text-align top text-decoration text-indent text-shadow text-transform unicode-bidi unicode-range units-per-em " + "vertical-align visibility voice-family volume white-space widows width widths word-spacing x-height z-index";
            var values = "above absolute all always aqua armenian attr aural auto avoid baseline behind below bidi-override black blink block blue bold bolder " + "both bottom braille capitalize caption center center-left center-right circle close-quote code collapse compact condensed " + "continuous counter counters crop cross crosshair cursive dashed decimal decimal-leading-zero default digits disc dotted double " + "embed embossed e-resize expanded extra-condensed extra-expanded fantasy far-left far-right fast faster fixed format fuchsia " + "gray green groove handheld hebrew help hidden hide high higher icon inline-table inline inset inside invert italic " + "justify landscape large larger left-side left leftwards level lighter lime line-through list-item local loud lower-alpha " + "lowercase lower-greek lower-latin lower-roman lower low ltr marker maroon medium message-box middle mix move narrower " + "navy ne-resize no-close-quote none no-open-quote no-repeat normal nowrap n-resize nw-resize oblique olive once open-quote outset " + "outside overline pointer portrait pre print projection purple red relative repeat repeat-x repeat-y rgb ridge right right-side " + "rightwards rtl run-in screen scroll semi-condensed semi-expanded separate se-resize show silent silver slower slow " + "small small-caps small-caption smaller soft solid speech spell-out square s-resize static status-bar sub super sw-resize " + "table-caption table-cell table-column table-column-group table-footer-group table-header-group table-row table-row-group teal " + "text-bottom text-top thick thin top transparent tty tv ultra-condensed ultra-expanded underline upper-alpha uppercase upper-latin " + "upper-roman url visible wait white wider w-resize x-fast x-high x-large x-loud x-low x-slow x-small x-soft xx-large xx-small yellow";
            var fonts = "[mM]onospace [tT]ahoma [vV]erdana [aA]rial [hH]elvetica [sS]ans-serif [sS]erif [cC]ourier mono sans serif";
            this.regexList = [{
                regex: SyntaxHighlighter.regexLib.multiLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: /\#[a-fA-F0-9]{3,6}/g,
                css: "value"
            },
            {
                regex: /(-?\d+)(\.\d+)?(px|em|pt|\:|\%|)/g,
                css: "value"
            },
            {
                regex: /!important/g,
                css: "color3"
            },
            {
                regex: new RegExp(getKeywordsCSS(keywords), "gm"),
                css: "keyword"
            },
            {
                regex: new RegExp(getValuesCSS(values), "g"),
                css: "value"
            },
            {
                regex: new RegExp(this.getKeywords(fonts), "g"),
                css: "color1"
            }];
            this.forHtmlScript({
                left: /(&lt;|<)\s*style.*?(&gt;|>)/gi,
                right: /(&lt;|<)\/\s*style\s*(&gt;|>)/gi
            })
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["css"];
        SyntaxHighlighter.brushes.CSS = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "abs addr and ansichar ansistring array as asm begin boolean byte cardinal " + "case char class comp const constructor currency destructor div do double " + "downto else end except exports extended false file finalization finally " + "for function goto if implementation in inherited int64 initialization " + "integer interface is label library longint longword mod nil not object " + "of on or packed pansichar pansistring pchar pcurrency pdatetime pextended " + "pint64 pointer private procedure program property pshortstring pstring " + "pvariant pwidechar pwidestring protected public published raise real real48 " + "record repeat set shl shortint shortstring shr single smallint string then " + "threadvar to true try type unit until uses val var varirnt while widechar " + "widestring with word write writeln xor";
            this.regexList = [{
                regex: /\(\*[\s\S]*?\*\)/gm,
                css: "comments"
            },
            {
                regex: /{(?!\$)[\s\S]*?}/gm,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: /\{\$[a-zA-Z]+ .+\}/g,
                css: "color1"
            },
            {
                regex: /\b[\d\.]+\b/g,
                css: "value"
            },
            {
                regex: /\$[a-zA-Z0-9]+\b/g,
                css: "value"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gmi"),
                css: "keyword"
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["delphi", "pascal", "pas"];
        SyntaxHighlighter.brushes.Delphi = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            this.regexList = [{
                regex: /^\+\+\+ .*$/gm,
                css: "color2"
            },
            {
                regex: /^\-\-\- .*$/gm,
                css: "color2"
            },
            {
                regex: /^\s.*$/gm,
                css: "color1"
            },
            {
                regex: /^@@.*@@.*$/gm,
                css: "variable"
            },
            {
                regex: /^\+.*$/gm,
                css: "string"
            },
            {
                regex: /^\-.*$/gm,
                css: "color3"
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["diff", "patch"];
        SyntaxHighlighter.brushes.Diff = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "after and andalso band begin bnot bor bsl bsr bxor " + "case catch cond div end fun if let not of or orelse " + "query receive rem try when xor" + " module export import define";
            this.regexList = [{
                regex: new RegExp("[A-Z][A-Za-z0-9_]+", "g"),
                css: "constants"
            },
            {
                regex: new RegExp("\\%.+", "gm"),
                css: "comments"
            },
            {
                regex: new RegExp("\\?[A-Za-z0-9_]+", "g"),
                css: "preprocessor"
            },
            {
                regex: new RegExp("[a-z0-9_]+:[a-z0-9_]+", "g"),
                css: "functions"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["erl", "erlang"];
        SyntaxHighlighter.brushes.Erland = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "as assert break case catch class continue def default do else extends finally " + "if in implements import instanceof interface new package property return switch " + "throw throws try while public protected private static";
            var types = "void boolean byte char short int long float double";
            var constants = "null";
            var methods = "allProperties count get size " + "collect each eachProperty eachPropertyName eachWithIndex find findAll " + "findIndexOf grep inject max min reverseEach sort " + "asImmutable asSynchronized flatten intersect join pop reverse subMap toList " + "padRight padLeft contains eachMatch toCharacter toLong toUrl tokenize " + "eachFile eachFileRecurse eachB yte eachLine readBytes readLine getText " + "splitEachLine withReader append encodeBase64 decodeBase64 filterLine " + "transformChar transformLine withOutputStream withPrintWriter withStream " + "withStreams withWriter withWriterAppend write writeLine " + "dump inspect invokeMethod print println step times upto use waitForOrKill " + "getText";
            this.regexList = [{
                regex: SyntaxHighlighter.regexLib.singleLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.multiLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: /""".*"""/g,
                css: "string"
            },
            {
                regex: new RegExp("\\b([\\d]+(\\.[\\d]+)?|0x[a-f0-9]+)\\b", "gi"),
                css: "value"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            },
            {
                regex: new RegExp(this.getKeywords(types), "gm"),
                css: "color1"
            },
            {
                regex: new RegExp(this.getKeywords(constants), "gm"),
                css: "constants"
            },
            {
                regex: new RegExp(this.getKeywords(methods), "gm"),
                css: "functions"
            }];
            this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["groovy"];
        SyntaxHighlighter.brushes.Groovy = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "abstract assert boolean break byte case catch char class const " + "continue default do double else enum extends " + "false final finally float for goto if implements import " + "instanceof int interface long native new null " + "package private protected public return " + "short static strictfp super switch synchronized this throw throws true " + "transient try void volatile while";
            this.regexList = [{
                regex: SyntaxHighlighter.regexLib.singleLineCComments,
                css: "comments"
            },
            {
                regex: /\/\*([^\*][\s\S]*)?\*\//gm,
                css: "comments"
            },
            {
                regex: /\/\*(?!\*\/)\*[\s\S]*?\*\//gm,
                css: "preprocessor"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: /\b([\d]+(\.[\d]+)?|0x[a-f0-9]+)\b/gi,
                css: "value"
            },
            {
                regex: /(?!\@interface\b)\@[\$\w]+\b/g,
                css: "color1"
            },
            {
                regex: /\@interface\b/g,
                css: "color2"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            }];
            this.forHtmlScript({
                left: /(&lt;|<)%[@!=]?/g,
                right: /%(&gt;|>)/g
            })
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["java"];
        SyntaxHighlighter.brushes.Java = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var datatypes = "Boolean Byte Character Double Duration " + "Float Integer Long Number Short String Void";
            var keywords = "abstract after and as assert at before bind bound break catch class " + "continue def delete else exclusive extends false finally first for from " + "function if import in indexof init insert instanceof into inverse last " + "lazy mixin mod nativearray new not null on or override package postinit " + "protected public public-init public-read replace return reverse sizeof " + "step super then this throw true try tween typeof var where while with " + "attribute let private readonly static trigger";
            this.regexList = [{
                regex: SyntaxHighlighter.regexLib.singleLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.multiLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: /(-?\.?)(\b(\d*\.?\d+|\d+\.?\d*)(e[+-]?\d+)?|0x[a-f\d]+)\b\.?/gi,
                css: "color2"
            },
            {
                regex: new RegExp(this.getKeywords(datatypes), "gm"),
                css: "variable"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            }];
            this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["jfx", "javafx"];
        SyntaxHighlighter.brushes.JavaFX = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "break case catch continue " + "default delete do else false  " + "for function if in instanceof " + "new null return super switch " + "this throw true try typeof var while with";
            var r = SyntaxHighlighter.regexLib;
            this.regexList = [{
                regex: r.multiLineDoubleQuotedString,
                css: "string"
            },
            {
                regex: r.multiLineSingleQuotedString,
                css: "string"
            },
            {
                regex: r.singleLineCComments,
                css: "comments"
            },
            {
                regex: r.multiLineCComments,
                css: "comments"
            },
            {
                regex: /\s*#.*/gm,
                css: "preprocessor"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            }];
            this.forHtmlScript(r.scriptScriptTags)
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["js", "jscript", "javascript"];
        SyntaxHighlighter.brushes.JScript = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var funcs = "abs accept alarm atan2 bind binmode chdir chmod chomp chop chown chr " + "chroot close closedir connect cos crypt defined delete each endgrent " + "endhostent endnetent endprotoent endpwent endservent eof exec exists " + "exp fcntl fileno flock fork format formline getc getgrent getgrgid " + "getgrnam gethostbyaddr gethostbyname gethostent getlogin getnetbyaddr " + "getnetbyname getnetent getpeername getpgrp getppid getpriority " + "getprotobyname getprotobynumber getprotoent getpwent getpwnam getpwuid " + "getservbyname getservbyport getservent getsockname getsockopt glob " + "gmtime grep hex index int ioctl join keys kill lc lcfirst length link " + "listen localtime lock log lstat map mkdir msgctl msgget msgrcv msgsnd " + "oct open opendir ord pack pipe pop pos print printf prototype push " + "quotemeta rand read readdir readline readlink readpipe recv rename " + "reset reverse rewinddir rindex rmdir scalar seek seekdir select semctl " + "semget semop send setgrent sethostent setnetent setpgrp setpriority " + "setprotoent setpwent setservent setsockopt shift shmctl shmget shmread " + "shmwrite shutdown sin sleep socket socketpair sort splice split sprintf " + "sqrt srand stat study substr symlink syscall sysopen sysread sysseek " + "system syswrite tell telldir time times tr truncate uc ucfirst umask " + "undef unlink unpack unshift utime values vec wait waitpid warn write " + "say";
            var keywords = "bless caller continue dbmclose dbmopen die do dump else elsif eval exit " + "for foreach goto if import last local my next no our package redo ref " + "require return sub tie tied unless untie until use wantarray while " + "given when default " + "try catch finally " + "has extends with before after around override augment";
            this.regexList = [{
                regex: /(<<|&lt;&lt;)((\w+)|(['"])(.+?)\4)[\s\S]+?\n\3\5\n/g,
                css: "string"
            },
            {
                regex: /#.*$/gm,
                css: "comments"
            },
            {
                regex: /^#!.*\n/g,
                css: "preprocessor"
            },
            {
                regex: /-?\w+(?=\s*=(>|&gt;))/g,
                css: "string"
            },
            {
                regex: /\bq[qwxr]?\([\s\S]*?\)/g,
                css: "string"
            },
            {
                regex: /\bq[qwxr]?\{[\s\S]*?\}/g,
                css: "string"
            },
            {
                regex: /\bq[qwxr]?\[[\s\S]*?\]/g,
                css: "string"
            },
            {
                regex: /\bq[qwxr]?(<|&lt;)[\s\S]*?(>|&gt;)/g,
                css: "string"
            },
            {
                regex: /\bq[qwxr]?([^\w({<[])[\s\S]*?\1/g,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: /(?:&amp;|[$@%*]|\$#)[a-zA-Z_](\w+|::)*/g,
                css: "variable"
            },
            {
                regex: /\b__(?:END|DATA)__\b[\s\S]*$/g,
                css: "comments"
            },
            {
                regex: /(^|\n)=\w[\s\S]*?(\n=cut\s*\n|$)/g,
                css: "comments"
            },
            {
                regex: new RegExp(this.getKeywords(funcs), "gm"),
                css: "functions"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            }];
            this.forHtmlScript(SyntaxHighlighter.regexLib.phpScriptTags)
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["perl", "Perl", "pl"];
        SyntaxHighlighter.brushes.Perl = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var funcs = "abs acos acosh addcslashes addslashes " + "array_change_key_case array_chunk array_combine array_count_values array_diff " + "array_diff_assoc array_diff_key array_diff_uassoc array_diff_ukey array_fill " + "array_filter array_flip array_intersect array_intersect_assoc array_intersect_key " + "array_intersect_uassoc array_intersect_ukey array_key_exists array_keys array_map " + "array_merge array_merge_recursive array_multisort array_pad array_pop array_product " + "array_push array_rand array_reduce array_reverse array_search array_shift " + "array_slice array_splice array_sum array_udiff array_udiff_assoc " + "array_udiff_uassoc array_uintersect array_uintersect_assoc " + "array_uintersect_uassoc array_unique array_unshift array_values array_walk " + "array_walk_recursive atan atan2 atanh base64_decode base64_encode base_convert " + "basename bcadd bccomp bcdiv bcmod bcmul bindec bindtextdomain bzclose bzcompress " + "bzdecompress bzerrno bzerror bzerrstr bzflush bzopen bzread bzwrite ceil chdir " + "checkdate checkdnsrr chgrp chmod chop chown chr chroot chunk_split class_exists " + "closedir closelog copy cos cosh count count_chars date decbin dechex decoct " + "deg2rad delete ebcdic2ascii echo empty end ereg ereg_replace eregi eregi_replace error_log " + "error_reporting escapeshellarg escapeshellcmd eval exec exit exp explode extension_loaded " + "feof fflush fgetc fgetcsv fgets fgetss file_exists file_get_contents file_put_contents " + "fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype " + "floatval flock floor flush fmod fnmatch fopen fpassthru fprintf fputcsv fputs fread fscanf " + "fseek fsockopen fstat ftell ftok getallheaders getcwd getdate getenv gethostbyaddr gethostbyname " + "gethostbynamel getimagesize getlastmod getmxrr getmygid getmyinode getmypid getmyuid getopt " + "getprotobyname getprotobynumber getrandmax getrusage getservbyname getservbyport gettext " + "gettimeofday gettype glob gmdate gmmktime ini_alter ini_get ini_get_all ini_restore ini_set " + "interface_exists intval ip2long is_a is_array is_bool is_callable is_dir is_double " + "is_executable is_file is_finite is_float is_infinite is_int is_integer is_link is_long " + "is_nan is_null is_numeric is_object is_readable is_real is_resource is_scalar is_soap_fault " + "is_string is_subclass_of is_uploaded_file is_writable is_writeable mkdir mktime nl2br " + "parse_ini_file parse_str parse_url passthru pathinfo print readlink realpath rewind rewinddir rmdir " + "round str_ireplace str_pad str_repeat str_replace str_rot13 str_shuffle str_split " + "str_word_count strcasecmp strchr strcmp strcoll strcspn strftime strip_tags stripcslashes " + "stripos stripslashes stristr strlen strnatcasecmp strnatcmp strncasecmp strncmp strpbrk " + "strpos strptime strrchr strrev strripos strrpos strspn strstr strtok strtolower strtotime " + "strtoupper strtr strval substr substr_compare";
            var keywords = "abstract and array as break case catch cfunction class clone const continue declare default die do " + "else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach " + "function global goto if implements include include_once interface instanceof insteadof namespace new " + "old_function or private protected public return require require_once static switch " + "trait throw try use var while xor ";
            var constants = "__FILE__ __LINE__ __METHOD__ __FUNCTION__ __CLASS__";
            this.regexList = [{
                regex: SyntaxHighlighter.regexLib.singleLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.multiLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: /\$\w+/g,
                css: "variable"
            },
            {
                regex: new RegExp(this.getKeywords(funcs), "gmi"),
                css: "functions"
            },
            {
                regex: new RegExp(this.getKeywords(constants), "gmi"),
                css: "constants"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            }];
            this.forHtmlScript(SyntaxHighlighter.regexLib.phpScriptTags)
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["php"];
        SyntaxHighlighter.brushes.Php = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {}
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["text", "plain"];
        SyntaxHighlighter.brushes.Plain = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "while validateset validaterange validatepattern validatelength validatecount " + "until trap switch return ref process param parameter in if global: " + "function foreach for finally filter end elseif else dynamicparam do default " + "continue cmdletbinding break begin alias \\? % #script #private #local #global " + "mandatory parametersetname position valuefrompipeline " + "valuefrompipelinebypropertyname valuefromremainingarguments helpmessage ";
            var operators = " and as band bnot bor bxor casesensitive ccontains ceq cge cgt cle " + "clike clt cmatch cne cnotcontains cnotlike cnotmatch contains " + "creplace eq exact f file ge gt icontains ieq ige igt ile ilike ilt " + "imatch ine inotcontains inotlike inotmatch ireplace is isnot le like " + "lt match ne not notcontains notlike notmatch or regex replace wildcard";
            var verbs = "write where wait use update unregister undo trace test tee take suspend " + "stop start split sort skip show set send select scroll resume restore " + "restart resolve resize reset rename remove register receive read push " + "pop ping out new move measure limit join invoke import group get format " + "foreach export expand exit enter enable disconnect disable debug cxnew " + "copy convertto convertfrom convert connect complete compare clear " + "checkpoint aggregate add";
            var commenthelp = " component description example externalhelp forwardhelpcategory forwardhelptargetname forwardhelptargetname functionality inputs link notes outputs parameter remotehelprunspace role synopsis";
            this.regexList = [{
                regex: new RegExp("^\\s*#[#\\s]*\\.(" + this.getKeywords(commenthelp) + ").*$", "gim"),
                css: "preprocessor help bold"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleLinePerlComments,
                css: "comments"
            },
            {
                regex: /(&lt;|<)#[\s\S]*?#(&gt;|>)/gm,
                css: "comments here"
            },
            {
                regex: new RegExp('@"\\n[\\s\\S]*?\\n"@', "gm"),
                css: "script string here"
            },
            {
                regex: new RegExp("@'\\n[\\s\\S]*?\\n'@", "gm"),
                css: "script string single here"
            },
            {
                regex: new RegExp('"(?:\\$\\([^\\)]*\\)|[^"]|`"|"")*[^`]"', "g"),
                css: "string"
            },
            {
                regex: new RegExp("'(?:[^']|'')*'", "g"),
                css: "string single"
            },
            {
                regex: new RegExp("[\\$|@|@@](?:(?:global|script|private|env):)?[A-Z0-9_]+", "gi"),
                css: "variable"
            },
            {
                regex: new RegExp("(?:\\b" + verbs.replace(/ /g, "\\b|\\b") + ")-[a-zA-Z_][a-zA-Z0-9_]*", "gmi"),
                css: "functions"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gmi"),
                css: "keyword"
            },
            {
                regex: new RegExp("-" + this.getKeywords(operators), "gmi"),
                css: "operator value"
            },
            {
                regex: new RegExp("\\[[A-Z_\\[][A-Z0-9_. `,\\[\\]]*\\]", "gi"),
                css: "constants"
            },
            {
                regex: new RegExp("\\s+-(?!" + this.getKeywords(operators) + ")[a-zA-Z_][a-zA-Z0-9_]*", "gmi"),
                css: "color1"
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["powershell", "ps", "posh"];
        SyntaxHighlighter.brushes.PowerShell = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "and assert break class continue def del elif else " + "except exec finally for from global if import in is " + "lambda not or pass print raise return try yield while";
            var funcs = "__import__ abs all any apply basestring bin bool buffer callable " + "chr classmethod cmp coerce compile complex delattr dict dir " + "divmod enumerate eval execfile file filter float format frozenset " + "getattr globals hasattr hash help hex id input int intern " + "isinstance issubclass iter len list locals long map max min next " + "object oct open ord pow print property range raw_input reduce " + "reload repr reversed round set setattr slice sorted staticmethod " + "str sum super tuple type type unichr unicode vars xrange zip";
            var special = "None True False self cls class_";
            this.regexList = [{
                regex: SyntaxHighlighter.regexLib.singleLinePerlComments,
                css: "comments"
            },
            {
                regex: /^\s*@\w+/gm,
                css: "decorator"
            },
            {
                regex: /(['\"]{3})([^\1])*?\1/gm,
                css: "comments"
            },
            {
                regex: /"(?!")(?:\.|\\\"|[^\""\n])*"/gm,
                css: "string"
            },
            {
                regex: /'(?!')(?:\.|(\\\')|[^\''\n])*'/gm,
                css: "string"
            },
            {
                regex: /\+|\-|\*|\/|\%|=|==/gm,
                css: "keyword"
            },
            {
                regex: /\b\d+\.?\w*/g,
                css: "value"
            },
            {
                regex: new RegExp(this.getKeywords(funcs), "gmi"),
                css: "functions"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            },
            {
                regex: new RegExp(this.getKeywords(special), "gm"),
                css: "color1"
            }];
            this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["py", "python"];
        SyntaxHighlighter.brushes.Python = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "alias and BEGIN begin break case class def define_method defined do each else elsif " + "END end ensure false for if in module new next nil not or raise redo rescue retry return " + "self super then throw true undef unless until when while yield";
            var builtins = "Array Bignum Binding Class Continuation Dir Exception FalseClass File::Stat File Fixnum Fload " + "Hash Integer IO MatchData Method Module NilClass Numeric Object Proc Range Regexp String Struct::TMS Symbol " + "ThreadGroup Thread Time TrueClass";
            this.regexList = [{
                regex: SyntaxHighlighter.regexLib.singleLinePerlComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: /\b[A-Z0-9_]+\b/g,
                css: "constants"
            },
            {
                regex: /:[a-z][A-Za-z0-9_]*/g,
                css: "color2"
            },
            {
                regex: /(\$|@@|@)\w+/g,
                css: "variable bold"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            },
            {
                regex: new RegExp(this.getKeywords(builtins), "gm"),
                css: "color1"
            }];
            this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["ruby", "rails", "ror", "rb"];
        SyntaxHighlighter.brushes.Ruby = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            function getKeywordsCSS(str) {
                return "\\b([a-z_]|)" + str.replace(/ /g, "(?=:)\\b|\\b([a-z_\\*]|\\*|)") + "(?=:)\\b"
            }
            function getValuesCSS(str) {
                return "\\b" + str.replace(/ /g, "(?!-)(?!:)\\b|\\b()") + ":\\b"
            }
            var keywords = "ascent azimuth background-attachment background-color background-image background-position " + "background-repeat background baseline bbox border-collapse border-color border-spacing border-style border-top " + "border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color " + "border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width " + "border-bottom-width border-left-width border-width border bottom cap-height caption-side centerline clear clip color " + "content counter-increment counter-reset cue-after cue-before cue cursor definition-src descent direction display " + "elevation empty-cells float font-size-adjust font-family font-size font-stretch font-style font-variant font-weight font " + "height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-top " + "margin-right margin-bottom margin-left margin marker-offset marks mathline max-height max-width min-height min-width orphans " + "outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page " + "page-break-after page-break-before page-break-inside pause pause-after pause-before pitch pitch-range play-during position " + "quotes right richness size slope src speak-header speak-numeral speak-punctuation speak speech-rate stemh stemv stress " + "table-layout text-align top text-decoration text-indent text-shadow text-transform unicode-bidi unicode-range units-per-em " + "vertical-align visibility voice-family volume white-space widows width widths word-spacing x-height z-index";
            var values = "above absolute all always aqua armenian attr aural auto avoid baseline behind below bidi-override black blink block blue bold bolder " + "both bottom braille capitalize caption center center-left center-right circle close-quote code collapse compact condensed " + "continuous counter counters crop cross crosshair cursive dashed decimal decimal-leading-zero digits disc dotted double " + "embed embossed e-resize expanded extra-condensed extra-expanded fantasy far-left far-right fast faster fixed format fuchsia " + "gray green groove handheld hebrew help hidden hide high higher icon inline-table inline inset inside invert italic " + "justify landscape large larger left-side left leftwards level lighter lime line-through list-item local loud lower-alpha " + "lowercase lower-greek lower-latin lower-roman lower low ltr marker maroon medium message-box middle mix move narrower " + "navy ne-resize no-close-quote none no-open-quote no-repeat normal nowrap n-resize nw-resize oblique olive once open-quote outset " + "outside overline pointer portrait pre print projection purple red relative repeat repeat-x repeat-y rgb ridge right right-side " + "rightwards rtl run-in screen scroll semi-condensed semi-expanded separate se-resize show silent silver slower slow " + "small small-caps small-caption smaller soft solid speech spell-out square s-resize static status-bar sub super sw-resize " + "table-caption table-cell table-column table-column-group table-footer-group table-header-group table-row table-row-group teal " + "text-bottom text-top thick thin top transparent tty tv ultra-condensed ultra-expanded underline upper-alpha uppercase upper-latin " + "upper-roman url visible wait white wider w-resize x-fast x-high x-large x-loud x-low x-slow x-small x-soft xx-large xx-small yellow";
            var fonts = "[mM]onospace [tT]ahoma [vV]erdana [aA]rial [hH]elvetica [sS]ans-serif [sS]erif [cC]ourier mono sans serif";
            var statements = "!important !default";
            var preprocessor = "@import @extend @debug @warn @if @for @while @mixin @include";
            var r = SyntaxHighlighter.regexLib;
            this.regexList = [{
                regex: r.multiLineCComments,
                css: "comments"
            },
            {
                regex: r.singleLineCComments,
                css: "comments"
            },
            {
                regex: r.doubleQuotedString,
                css: "string"
            },
            {
                regex: r.singleQuotedString,
                css: "string"
            },
            {
                regex: /\#[a-fA-F0-9]{3,6}/g,
                css: "value"
            },
            {
                regex: /\b(-?\d+)(\.\d+)?(px|em|pt|\:|\%|)\b/g,
                css: "value"
            },
            {
                regex: /\$\w+/g,
                css: "variable"
            },
            {
                regex: new RegExp(this.getKeywords(statements), "g"),
                css: "color3"
            },
            {
                regex: new RegExp(this.getKeywords(preprocessor), "g"),
                css: "preprocessor"
            },
            {
                regex: new RegExp(getKeywordsCSS(keywords), "gm"),
                css: "keyword"
            },
            {
                regex: new RegExp(getValuesCSS(values), "g"),
                css: "value"
            },
            {
                regex: new RegExp(this.getKeywords(fonts), "g"),
                css: "color1"
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["sass", "scss"];
        SyntaxHighlighter.brushes.Sass = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "val sealed case def true trait implicit forSome import match object null finally super " + "override try lazy for var catch throw type extends class while with new final yield abstract " + "else do if return protected private this package false";
            var keyops = "[_:=><%#@]+";
            this.regexList = [{
                regex: SyntaxHighlighter.regexLib.singleLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.multiLineCComments,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.multiLineSingleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.multiLineDoubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.singleQuotedString,
                css: "string"
            },
            {
                regex: /0x[a-f0-9]+|\d+(\.\d+)?/gi,
                css: "value"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            },
            {
                regex: new RegExp(keyops, "gm"),
                css: "keyword"
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["scala"];
        SyntaxHighlighter.brushes.Scala = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var funcs = "abs avg case cast coalesce convert count current_timestamp " + "current_user day isnull left lower month nullif replace right " + "session_user space substring sum system_user upper user year";
            var keywords = "absolute action add after alter as asc at authorization begin bigint " + "binary bit by cascade char character check checkpoint close collate " + "column commit committed connect connection constraint contains continue " + "create cube current current_date current_time cursor database date " + "deallocate dec decimal declare default delete desc distinct double drop " + "dynamic else end end-exec escape except exec execute false fetch first " + "float for force foreign forward free from full function global goto grant " + "group grouping having hour ignore index inner insensitive insert instead " + "int integer intersect into is isolation key last level load local max min " + "minute modify move name national nchar next no numeric of off on only " + "open option order out output partial password precision prepare primary " + "prior privileges procedure public read real references relative repeatable " + "restrict return returns revoke rollback rollup rows rule schema scroll " + "second section select sequence serializable set size smallint static " + "statistics table temp temporary then time timestamp to top transaction " + "translation trigger true truncate uncommitted union unique update values " + "varchar varying view when where with work";
            var operators = "all and any between cross in join like not null or outer some";
            this.regexList = [{
                regex: /--(.*)$/gm,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.multiLineDoubleQuotedString,
                css: "string"
            },
            {
                regex: SyntaxHighlighter.regexLib.multiLineSingleQuotedString,
                css: "string"
            },
            {
                regex: new RegExp(this.getKeywords(funcs), "gmi"),
                css: "color2"
            },
            {
                regex: new RegExp(this.getKeywords(operators), "gmi"),
                css: "color1"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gmi"),
                css: "keyword"
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["sql"];
        SyntaxHighlighter.brushes.Sql = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            var keywords = "AddHandler AddressOf AndAlso Alias And Ansi As Assembly Auto " + "Boolean ByRef Byte ByVal Call Case Catch CBool CByte CChar CDate " + "CDec CDbl Char CInt Class CLng CObj Const CShort CSng CStr CType " + "Date Decimal Declare Default Delegate Dim DirectCast Do Double Each " + "Else ElseIf End Enum Erase Error Event Exit False Finally For Friend " + "Function Get GetType GoSub GoTo Handles If Implements Imports In " + "Inherits Integer Interface Is Let Lib Like Long Loop Me Mod Module " + "MustInherit MustOverride MyBase MyClass Namespace New Next Not Nothing " + "NotInheritable NotOverridable Object On Option Optional Or OrElse " + "Overloads Overridable Overrides ParamArray Preserve Private Property " + "Protected Public RaiseEvent ReadOnly ReDim REM RemoveHandler Resume " + "Return Select Set Shadows Shared Short Single Static Step Stop String " + "Structure Sub SyncLock Then Throw To True Try TypeOf Unicode Until " + "Variant When While With WithEvents WriteOnly Xor";
            this.regexList = [{
                regex: /'.*$/gm,
                css: "comments"
            },
            {
                regex: SyntaxHighlighter.regexLib.doubleQuotedString,
                css: "string"
            },
            {
                regex: /^\s*#.*$/gm,
                css: "preprocessor"
            },
            {
                regex: new RegExp(this.getKeywords(keywords), "gm"),
                css: "keyword"
            }];
            this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["vb", "vbnet"];
        SyntaxHighlighter.brushes.Vb = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })(); (function() {
        SyntaxHighlighter = SyntaxHighlighter || (typeof require !== "undefined" ? require("shCore").SyntaxHighlighter: null);
        function Brush() {
            function process(match, regexInfo) {
                var constructor = SyntaxHighlighter.Match,
                code = match[0],
                tag = (new XRegExp("(&lt;|<)[\\s\\/\\?]*(?<name>[:\\w-\\.]+)", "xg")).exec(code),
                result = [];
                if (match.attributes != null) {
                    var attributes, regex = new XRegExp("(?<name> [\\w:\\-\\.]+)" + "\\s*=\\s*" + "(?<value> \".*?\"|'.*?'|\\w+)", "xg");
                    while ((attributes = regex.exec(code)) != null) {
                        result.push(new constructor(attributes.name, match.index + attributes.index, "color1"));
                        result.push(new constructor(attributes.value, match.index + attributes.index + attributes[0].indexOf(attributes.value), "string"))
                    }
                }
                if (tag != null) result.push(new constructor(tag.name, match.index + tag[0].indexOf(tag.name), "keyword"));
                return result
            }
            this.regexList = [{
                regex: new XRegExp("(\\&lt;|<)\\!\\[[\\w\\s]*?\\[(.|\\s)*?\\]\\](\\&gt;|>)", "gm"),
                css: "color2"
            },
            {
                regex: SyntaxHighlighter.regexLib.xmlComments,
                css: "comments"
            },
            {
                regex: new XRegExp("(&lt;|<)[\\s\\/\\?]*(\\w+)(?<attributes>.*?)[\\s\\/\\?]*(&gt;|>)", "sg"),
                func: process
            }]
        }
        Brush.prototype = new SyntaxHighlighter.Highlighter;
        Brush.aliases = ["xml", "xhtml", "xslt", "html"];
        SyntaxHighlighter.brushes.Xml = Brush;
        typeof exports != "undefined" ? exports.Brush = Brush: null
    })();
    window.SyntaxHighlighter = SyntaxHighlighter
})(); (function() { (function() {
        UE = window.UE || {};
        var isIE = !!window.ActiveXObject;
        var utils = {
            removeLastbs: function(url) {
                return url.replace(/\/$/, "")
            },
            extend: function(t, s) {
                var a = arguments,
                notCover = this.isBoolean(a[a.length - 1]) ? a[a.length - 1] : false,
                len = this.isBoolean(a[a.length - 1]) ? a.length - 1 : a.length;
                for (var i = 1; i < len; i++) {
                    var x = a[i];
                    for (var k in x) {
                        if (!notCover || !t.hasOwnProperty(k)) {
                            t[k] = x[k]
                        }
                    }
                }
                return t
            },
            isIE: isIE,
            cssRule: isIE ?
            function(key, style, doc) {
                var indexList, index;
                doc = doc || document;
                if (doc.indexList) {
                    indexList = doc.indexList
                } else {
                    indexList = doc.indexList = {}
                }
                var sheetStyle;
                if (!indexList[key]) {
                    if (style === undefined) {
                        return ""
                    }
                    sheetStyle = doc.createStyleSheet("", index = doc.styleSheets.length);
                    indexList[key] = index
                } else {
                    sheetStyle = doc.styleSheets[indexList[key]]
                }
                if (style === undefined) {
                    return sheetStyle.cssText
                }
                sheetStyle.cssText = sheetStyle.cssText + "\n" + (style || "")
            }: function(key, style, doc) {
                doc = doc || document;
                var head = doc.getElementsByTagName("head")[0],
                node;
                if (! (node = doc.getElementById(key))) {
                    if (style === undefined) {
                        return ""
                    }
                    node = doc.createElement("style");
                    node.id = key;
                    head.appendChild(node)
                }
                if (style === undefined) {
                    return node.innerHTML
                }
                if (style !== "") {
                    node.innerHTML = node.innerHTML + "\n" + style
                } else {
                    head.removeChild(node)
                }
            },
            domReady: function(onready) {
                var doc = window.document;
                if (doc.readyState === "complete") {
                    onready()
                } else {
                    if (isIE) { (function() {
                            if (doc.isReady) return;
                            try {
                                doc.documentElement.doScroll("left")
                            } catch(error) {
                                setTimeout(arguments.callee, 0);
                                return
                            }
                            onready()
                        })();
                        window.attachEvent("onload",
                        function() {
                            onready()
                        })
                    } else {
                        doc.addEventListener("DOMContentLoaded",
                        function() {
                            doc.removeEventListener("DOMContentLoaded", arguments.callee, false);
                            onready()
                        },
                        false);
                        window.addEventListener("load",
                        function() {
                            onready()
                        },
                        false)
                    }
                }
            },
            each: function(obj, iterator, context) {
                if (obj == null) return;
                if (obj.length === +obj.length) {
                    for (var i = 0,
                    l = obj.length; i < l; i++) {
                        if (iterator.call(context, obj[i], i, obj) === false) return false
                    }
                } else {
                    for (var key in obj) {
                        if (obj.hasOwnProperty(key)) {
                            if (iterator.call(context, obj[key], key, obj) === false) return false
                        }
                    }
                }
            },
            inArray: function(arr, item) {
                var index = -1;
                this.each(arr,
                function(v, i) {
                    if (v === item) {
                        index = i;
                        return false
                    }
                });
                return index
            },
            pushItem: function(arr, item) {
                if (this.inArray(arr, item) == -1) {
                    arr.push(item)
                }
            },
            trim: function(str) {
                return str.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g, "")
            },
            indexOf: function(array, item, start) {
                var index = -1;
                start = this.isNumber(start) ? start: 0;
                this.each(array,
                function(v, i) {
                    if (i >= start && v === item) {
                        index = i;
                        return false
                    }
                });
                return index
            },
            hasClass: function(element, className) {
                className = className.replace(/(^[ ]+)|([ ]+$)/g, "").replace(/[ ]{2,}/g, " ").split(" ");
                for (var i = 0,
                ci, cls = element.className; ci = className[i++];) {
                    if (! (new RegExp("\\b" + ci + "\\b", "i")).test(cls)) {
                        return false
                    }
                }
                return i - 1 == className.length
            },
            addClass: function(elm, classNames) {
                if (!elm) return;
                classNames = this.trim(classNames).replace(/[ ]{2,}/g, " ").split(" ");
                for (var i = 0,
                ci, cls = elm.className; ci = classNames[i++];) {
                    if (! (new RegExp("\\b" + ci + "\\b")).test(cls)) {
                        cls += " " + ci
                    }
                }
                elm.className = utils.trim(cls)
            },
            removeClass: function(elm, classNames) {
                classNames = this.isArray(classNames) ? classNames: this.trim(classNames).replace(/[ ]{2,}/g, " ").split(" ");
                for (var i = 0,
                ci, cls = elm.className; ci = classNames[i++];) {
                    cls = cls.replace(new RegExp("\\b" + ci + "\\b"), "")
                }
                cls = this.trim(cls).replace(/[ ]{2,}/g, " ");
                elm.className = cls; ! cls && elm.removeAttribute("className")
            },
            on: function(element, type, handler) {
                var types = this.isArray(type) ? type: type.split(/\s+/),
                k = types.length;
                if (k) while (k--) {
                    type = types[k];
                    if (element.addEventListener) {
                        element.addEventListener(type, handler, false)
                    } else {
                        if (!handler.cC) {
                            handler.cC = {
                                els: []
                            }
                        }
                        var key = type + handler.toString(),
                        index = utils.indexOf(handler.cC.els, element);
                        if (!handler.cC[key] || index == -1) {
                            if (index == -1) {
                                handler.cC.els.push(element)
                            }
                            if (!handler.cC[key]) {
                                handler.cC[key] = function(evt) {
                                    return handler.call(evt.srcElement, evt || window.event)
                                }
                            }
                            element.attachEvent("on" + type, handler.cC[key])
                        }
                    }
                }
                element = null
            },
            off: function(element, type, handler) {
                var types = this.isArray(type) ? type: type.split(/\s+/),
                k = types.length;
                if (k) while (k--) {
                    type = types[k];
                    if (element.removeEventListener) {
                        element.removeEventListener(type, handler, false)
                    } else {
                        var key = type + handler.toString();
                        try {
                            element.detachEvent("on" + type, handler.cC ? handler.cC[key] : handler)
                        } catch(e) {}
                        if (handler.cC && handler.cC[key]) {
                            var index = utils.indexOf(handler.cC.els, element);
                            if (index != -1) {
                                handler.cC.els.splice(index, 1)
                            }
                            handler.cC.els.length == 0 && delete handler.cC[key]
                        }
                    }
                }
            },
            loadFile: function() {
                var tmpList = [];
                function getItem(doc, obj) {
                    try {
                        for (var i = 0,
                        ci; ci = tmpList[i++];) {
                            if (ci.doc === doc && ci.url == (obj.src || obj.href)) {
                                return ci
                            }
                        }
                    } catch(e) {
                        return null
                    }
                }
                return function(doc, obj, fn) {
                    var item = getItem(doc, obj);
                    if (item) {
                        if (item.ready) {
                            fn && fn()
                        } else {
                            item.funs.push(fn)
                        }
                        return
                    }
                    tmpList.push({
                        doc: doc,
                        url: obj.src || obj.href,
                        funs: [fn]
                    });
                    if (!doc.body) {
                        var html = [];
                        for (var p in obj) {
                            if (p == "tag") continue;
                            html.push(p + '="' + obj[p] + '"')
                        }
                        doc.write("<" + obj.tag + " " + html.join(" ") + " ></" + obj.tag + ">");
                        return
                    }
                    if (obj.id && doc.getElementById(obj.id)) {
                        return
                    }
                    var element = doc.createElement(obj.tag);
                    delete obj.tag;
                    for (var p in obj) {
                        element.setAttribute(p, obj[p])
                    }
                    element.onload = element.onreadystatechange = function() {
                        if (!this.readyState || /loaded|complete/.test(this.readyState)) {
                            item = getItem(doc, obj);
                            if (item.funs.length > 0) {
                                item.ready = 1;
                                for (var fi; fi = item.funs.pop();) {
                                    fi()
                                }
                            }
                            element.onload = element.onreadystatechange = null
                        }
                    };
                    element.onerror = function() {
                        throw Error("The load " + (obj.href || obj.src) + " fails,check the url")
                    };
                    doc.getElementsByTagName("head")[0].appendChild(element)
                }
            } ()
        };
        utils.each(["String", "Function", "Array", "Number", "RegExp", "Object", "Boolean"],
        function(v) {
            utils["is" + v] = function(obj) {
                return Object.prototype.toString.apply(obj) == "[object " + v + "]"
            }
        });
        var parselist = {};
        UE.parse = {
            register: function(parseName, fn) {
                parselist[parseName] = fn
            },
            load: function(opt) {
                utils.each(parselist,
                function(v) {
                    v.call(opt, utils)
                })
            }
        };
        uParse = function(selector, opt) {
            utils.domReady(function() {
                var contents;
                if (document.querySelectorAll) {
                    contents = document.querySelectorAll(selector)
                } else {
                    if (/^#/.test(selector)) {
                        contents = [document.getElementById(selector.replace(/^#/, ""))]
                    } else if (/^\./.test(selector)) {
                        var contents = [];
                        utils.each(document.getElementsByTagName("*"),
                        function(node) {
                            if (node.className && (new RegExp("\\b" + selector.replace(/^\./, "") + "\\b", "i")).test(node.className)) {
                                contents.push(node)
                            }
                        })
                    } else {
                        contents = document.getElementsByTagName(selector)
                    }
                }
                utils.each(contents,
                function(v) {
                    UE.parse.load(utils.extend({
                        root: v,
                        selector: selector
                    },
                    opt))
                })
            })
        };
        uParse2 = function(content, selector, opt) {
            var contents = [content];
            utils.each(contents,
            function(v) {
                UE.parse.load(utils.extend({
                    root: v,
                    selector: selector
                },
                opt))
            })
        }
    })();
    Function.prototype.bind = function() {
        var cs = arguments,
        jj = arguments[0],
        bhv = this;
        return function() {
            var xJ = [].slice.call(cs, 1); [].push.apply(xJ, arguments);
            return bhv.apply(jj || window, xJ)
        }
    };
    UE.parse.register("insertcode",
    function(utils) {
        var codeNodes = this.root.getElementsByTagName("code");
        if (codeNodes.length && !!window.SyntaxHighlighter) {
            var ja = this.root;
            function p() {
                var bH = ja.getElementsByTagName("code");
                utils.each(bH,
                function(pi) {
                    if ( !! bH[0] && /brush/i.test(bH[0].className)) {
                        SyntaxHighlighter.highlight(null, bH[0])
                    }
                }.bind(this))
            }
            if ( !! ja.parentNode) {
                p()
            }
        }
    });
    UE.parse.register("background",
    function(utils) {
        var me = this,
        root = me.root,
        p = root.getElementsByTagName("p"),
        styles;
        for (var i = 0,
        ci; ci = p[i++];) {
            styles = ci.getAttribute("data-background");
            if (styles) {
                ci.parentNode.removeChild(ci)
            }
        }
        styles && utils.cssRule("ueditor_background", me.selector + "{" + styles + "}", document)
    });
    UE.parse.register("list",
    function(utils) {
        var customCss = [],
        customStyle = {
            cn: "cn-1-",
            cn1: "cn-2-",
            cn2: "cn-3-",
            num: "num-1-",
            num1: "num-2-",
            num2: "num-3-",
            dash: "dash",
            dot: "dot"
        };
        utils.extend(this, {
            liiconpath: "http://bs.baidu.com/listicon/",
            listDefaultPaddingLeft: "20"
        });
        var root = this.root,
        ols = root.getElementsByTagName("ol"),
        uls = root.getElementsByTagName("ul"),
        selector = this.selector;
        if (ols.length) {
            applyStyle.call(this, ols)
        }
        if (uls.length) {
            applyStyle.call(this, uls)
        }
        if (ols.length || uls.length) {
            customCss.push(selector + " .list-paddingleft-1{padding-left:0}");
            customCss.push(selector + " .list-paddingleft-2{padding-left:" + this.listDefaultPaddingLeft + "px}");
            customCss.push(selector + " .list-paddingleft-3{padding-left:" + this.listDefaultPaddingLeft * 2 + "px}");
            utils.cssRule("list", selector + " ol," + selector + " ul{margin:0;padding:0;}" + customCss.join("\n"), document)
        }
        function applyStyle(nodes) {
            var T = this;
            utils.each(nodes,
            function(list) {
                if (list.className && /custom_/i.test(list.className)) {
                    var listStyle = list.className.match(/custom_(\w+)/)[1];
                    if (listStyle == "dash" || listStyle == "dot") {
                        utils.pushItem(customCss, selector + " li.list-" + customStyle[listStyle] + "{background-image:url(" + T.liiconpath + customStyle[listStyle] + ".gif)}");
                        utils.pushItem(customCss, selector + " ul.custom_" + listStyle + "{list-style:none;} " + selector + " ul.custom_" + listStyle + " li{background-position:0 3px;background-repeat:no-repeat}")
                    } else {
                        var index = 1;
                        utils.each(list.childNodes,
                        function(li) {
                            if (li.tagName == "LI") {
                                utils.pushItem(customCss, selector + " li.list-" + customStyle[listStyle] + index + "{background-image:url(" + T.liiconpath + "list-" + customStyle[listStyle] + index + ".gif)}");
                                index++
                            }
                        });
                        utils.pushItem(customCss, selector + " ol.custom_" + listStyle + "{list-style:none;}" + selector + " ol.custom_" + listStyle + " li{background-position:0 3px;background-repeat:no-repeat}")
                    }
                    switch (listStyle) {
                    case "cn":
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-1{padding-left:25px}");
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-2{padding-left:40px}");
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-3{padding-left:55px}");
                        break;
                    case "cn1":
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-1{padding-left:30px}");
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-2{padding-left:40px}");
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-3{padding-left:55px}");
                        break;
                    case "cn2":
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-1{padding-left:40px}");
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-2{padding-left:55px}");
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-3{padding-left:68px}");
                        break;
                    case "num":
                    case "num1":
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-1{padding-left:25px}");
                        break;
                    case "num2":
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-1{padding-left:35px}");
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft-2{padding-left:40px}");
                        break;
                    case "dash":
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft{padding-left:35px}");
                        break;
                    case "dot":
                        utils.pushItem(customCss, selector + " li.list-" + listStyle + "-paddingleft{padding-left:20px}")
                    }
                }
            })
        }
    })
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    dx = window,
    fL = bq("nej.c"),
    bm = bq("nej.e"),
    bE = bq("nej.u");
    bE.jE = function() {
        if (!dx.uParse) {
            return null
        }
        var cLb = 0;
        return function(Xn, cgQ) {
            if (!Xn) {
                return
            }
            if ( !! cgQ) {
                Xn.innerHTML = cgQ
            }
            var mT;
            if (Xn.id) {
                mT = "#" + Xn.id
            } else {
                mT = "edueditor_styleclass_" + cLb++;
                bm.bJ(Xn, mT);
                mT = "." + mT
            }
            dx.uParse2(Xn, mT)
        }
    } ();
    bm.bX = bm.bX.fD(dk,
    function(bj) {
        var bB = bm.iN(bj.value),
        bRW = bm.bc(bB, "f-richEditorText"),
        bRY = bm.rF("div");
        if (!bRW || bRW.length <= 0) {
            return bj
        }
        try {
            bE.bA(bRW,
            function(bo) {
                bE.jE(bo)
            });
            bRY.appendChild(bB);
            bj.value = bRY.innerHTML;
            delete bB;
            delete bRY;
            return bj
        } catch(_error) {
            return bj
        }
    })
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    gw,
    mO = "ck-CertCache";
    p.mN = NEJ.C();
    gw = p.mN.bu(p.hA);
    gw.Mh = function(cd, bz) {
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.getCertBaseInfo",
            param: [cd, bz],
            onload: this.IB.Z(this)
        })
    };
    gw.IB = function(W) {
        this.bn("onGetCertBaseInfo", W)
    };
    gw.cgP = function(cd, bz, da) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.saveCertBaseInfo",
            param: [cd, bz, da],
            onload: this.bkT.Z(this)
        })
    };
    gw.bkT = function(W) {
        this.bn("onSaveCertBaseInfo", W)
    };
    gw.ZT = function(cd, bz, SL) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.saveCertBaseInfoCertWishes",
            param: [cd, bz, SL],
            onload: this.cKY.Z(this)
        })
    };
    gw.cKY = function(W) {
        this.bn("onSaveCertBaseInfoCertWishes", W)
    };
    gw.cKX = function(cd) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocScoreManagerBean.confirmTermScore",
            param: [cd],
            onload: this.cKW.Z(this)
        })
    };
    gw.cKW = function(W) {
        this.bn("onDoConfirm", W)
    };
    gw.cKV = function(cd) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocScoreManagerBean.tryConfirmAchievement",
            param: [cd],
            onload: this.cKU.Z(this)
        })
    };
    gw.cKU = function(W) {
        this.bn("onTryConfirmAchievement", W)
    };
    gw.cgN = function(cd) {
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.getTermCertInfo",
            param: [cd],
            onload: this.cKR.Z(this)
        })
    };
    gw.cKR = function(W) {
        this.bn("onGetTermCertInfo", W)
    };
    gw.Bt = function(cd, bz, bs, rO, fJ) {
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.getCertOwnerListPagination",
            param: [cd, bz, bs, rO, fJ, 0],
            onload: this.cKO.Z(this)
        })
    };
    gw.cKO = function(W) {
        this.bn("onGetCertOwnerListPagination", W)
    };
    gw.cgK = function(cd, bz) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.sendAllCert",
            param: [cd, bz],
            onload: this.cKK.Z(this)
        })
    };
    gw.cKK = function(W) {
        this.bn("onSendAllCert", W)
    };
    gw.dlm = function(cd) {
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.getCertInfoByTermId",
            param: [cd],
            onload: this.cKI.Z(this)
        })
    };
    gw.cKI = function(W) {
        this.bn("onGetCertInfoByTermId", W)
    };
    gw.cgJ = function(cd, cKG, cKF) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.sendOneCert",
            param: [cd, cKG, cKF],
            onload: this.cKE.Z(this)
        })
    };
    gw.cKE = function(W) {
        this.bn("onSendOneCert", W)
    };
    gw.cKD = function(cd, zL, ws) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.saveChargeCertSetting",
            param: [cd, zL, ws],
            onload: this.bTp.Z(this)
        })
    };
    gw.bTp = function(W) {
        this.bn("onSaveChargeCertSetting", W)
    };
    gw.cKC = function(cd) {
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.getChargeCertSetting",
            param: [cd],
            onload: this.bTu.Z(this)
        })
    };
    gw.bTu = function(W) {
        this.bn("onGetChargeCertSetting", W)
    };
    gw.bTw = function(bs, rO, cd, bz, bcs) {
        this.bK({
            key: mO + bD,
            url: "MocOrderBean.getPaginationCertOrderList",
            param: [bs, rO, cd, bz, bcs],
            onload: this.cKB.Z(this)
        })
    };
    gw.cKB = function(W) {
        this.bn("onGetPaginationCertOrderList", W)
    };
    gw.bTD = function(cKx, DE, It, cKv) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocOrderBean.updateOrderMemberAuthDto",
            param: [cKx, DE, It, cKv],
            onload: this.cKp.Z(this)
        })
    };
    gw.cKp = function(W) {
        this.bn("onUpdateOrderMemberAuthDto", W)
    };
    gw.dlo = function(cd) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocOrderBean.confirmedCertOrder",
            param: [cd],
            onload: this.cKl.Z(this)
        })
    };
    gw.cKl = function(W) {
        this.bn("onConfirmedCertOrder", W)
    };
    gw.cKk = function(cd) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocOrderBean.batchUpdateOrderValidateStatus",
            param: [cd],
            onload: this.cKj.Z(this)
        })
    };
    gw.cKj = function(W) {
        this.bn("onBatchUpdateOrderValidateStatus", W)
    };
    gw.dlp = function(It, cKg) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocOrderBean.saveEmsNum",
            param: [It, cKg],
            onload: this.cKf.Z(this)
        })
    };
    gw.cKf = function(W) {
        this.bn("onSaveEmsNum", W)
    };
    gw.cKd = function(It) {
        if (!eu.dM()) return;
        this.bK({
            key: mO + bD,
            url: "MocOrderBean.cancleValidateStatus",
            param: [It],
            onload: this.cKb.Z(this)
        })
    };
    gw.cKb = function(W) {
        this.bn("onCancleValidateStatus", W)
    };
    gw.cKa = function(cd, cl, bz) {
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.searchRecordByNickOrRealName",
            param: [cd, cl, bz],
            onload: this.cJW.Z(this)
        })
    };
    gw.cJW = function(W) {
        this.bn("onSearchRecordByNickOrRealName", W)
    };
    gw.cJV = function(cd, bz) {
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.asyncZipCertPics",
            param: [cd, bz],
            onload: this.cJU.Z(this)
        })
    };
    gw.cJU = function(W) {
        this.bn("onAsyncZipCertPics", W)
    };
    gw.WX = function(bvX) {
        this.bK({
            key: mO + bD,
            url: "CommonBean.getThreadStatusByThreadId",
            param: [bvX],
            onload: this.bfC.Z(this)
        })
    };
    gw.bfC = function(W) {
        this.bn("onGetThreadStatusByThreadId", W)
    };
    gw.cJT = function(cd, bz) {
        this.bK({
            key: mO + bD,
            url: "MocCertManagerBean.getOldCertUrl",
            param: [cd, bz],
            onload: this.cJR.Z(this)
        })
    };
    gw.cJR = function(W) {
        this.bn("onGetOldCertUrl", W)
    };
    gw.cJO = function(It, cJN, cJJ) {
        this.bK({
            key: mO + bD,
            url: "MocOrderBean.updateEms",
            param: [It, cJN, cJJ],
            onload: this.cJI.Z(this)
        })
    };
    gw.cJI = function(W) {
        this.bn("onUpdateEms", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    Lf,
    cgz = [{
        width: 230,
        height: 80
    },
    {
        width: 750,
        height: 250
    }];
    var cF = e.dD(".#<uispace> {width: 400px;height: 270px;padding:20px;}.#<uispace> .imgArea{width: 450px;height: 58px;}.#<uispace> .imgArea img{width: 135px;height: 45px;border:1px solid #ddd;margin:0 12px 0 0;}.#<uispace> .imgArea .replacePicBtn{margin:8px 0 0;}.#<uispace> .row{margin:25px 0 0;}.#<uispace> .row .lb{display:block;width:68px;height:30px;line-height:30px;margin:0 10px 0 0;float:left;}.#<uispace> .row .ipt{width:302px;height:35px;}.#<uispace> .btns{padding:0 11px 0 0;}.#<uispace> .cancelBtn{margin:6px 8px 0 0;}");
    var dn = e.bY('<div class="u-lectorEditDialog f-cb"><div class="imgArea f-cb"><img src="" alt="老师签名" class="j-signPic f-fl"><a class="u-btn u-btn-default replacePicBtn j-uploadTxBtn f-fl">点击替换</a></div><p class="info f-fc9">支持jpg、gif、png或bmp格式的图片，图片需大于<span class="j-size">750*250</span>像素，小于20M</p><div class="row f-cb"><label class="lb">学校信息：</label><div class="j-uni f-fl ipt"></div></div><div class="row f-cb"><label class="lb">老师信息：</label><div class="j-pro f-fl ipt"></div></div><div class="b-20"></div><div class="btns f-cb"><a class="u-btn u-btn-default j-saveBtn f-fr">保存</a><a class="j-cancelBtn cancelBtn f-fr">取消</a><div class="j-fb f-fl"></div></div></div>');
    eu.btE = NEJ.C();
    Lf = eu.btE.bu(eu.hq, true);
    eu.btE.bT = function(Y) {
        var fV = eu.btE.bh(Y);
        fV.gI()
    };
    Lf.bU = function() {
        this.bW = dn;
        this.dv = cF
    };
    Lf.bP = function() {
        this.bQ();
        this.cgy = e.bc(this.bb, "j-signPic")[0];
        this.cJA = e.bc(this.bb, "j-uni")[0];
        this.cJy = e.bc(this.bb, "j-pro")[0];
        this.Im = e.bc(this.bb, "j-uploadTxBtn")[0];
        this.kJ = e.bc(this.bb, "j-saveBtn")[0];
        this.qz = e.bc(this.bb, "j-cancelBtn")[0];
        this.Ik = e.bc(this.bb, "j-fb")[0];
        this.cJv = e.bc(this.bb, "j-size")[0];
        v.bf(this.Im, "click", this.Ij.Z(this));
        v.bf(this.kJ, "click", this.cJs.Z(this));
        v.bf(this.qz, "click",
        function() {
            this.fs()
        }.Z(this))
    };
    Lf.cJs = function(bj) {
        v.dK(bj);
        this.FK.schoolName = this.WI.cc().trim();
        this.FK.lectorTitle = this.WE.cc().trim();
        if (!this.FK.lectorSignPic) {
            this.dQ.ey("请上传老师签名", true);
            return
        }
        if (this.FK.schoolName == "" || this.WI.gD() > 26) {
            this.dQ.ey("学校信息为必填项，并将字数控制在13字以内。", true);
            return
        }
        if (this.FK.lectorTitle == "" || this.WE.gD() > 26) {
            this.dQ.ey("老师信息为必填项，并将字数控制在13字以内。", true);
            return
        }
        this.bn("onSaveLector", this.sc, this.FK);
        this.fs()
    };
    Lf.Ij = function() {
        eu.ub.bT({
            uploadConfig: {
                uW: this.bhZ.width,
                uH: this.bhZ.height,
                pW: 200,
                pH: 69,
                dW: 306,
                dH: 106
            },
            onComplete: this.Ii.Z(this)
        })
    };
    Lf.Ii = function(W) {
        this.FK.lectorSignPic = this.cgy.src = W.picUrl
    };
    Lf.bF = function(Y) {
        Y.title = " ";
        Y.maskClickNotHidden = true;
        this.FK = eu.Bg(Y.lectorDto || {});
        this.sc = Y.position;
        this.bI(Y);
        this.cgy.src = this.FK.lectorSignPic || g.imageUrlMap.img_default_signature;
        this.WI = eu.eh.bh({
            parent: this.cJA,
            critical: 13,
            labelText: "请输入大学名称",
            height: 30,
            width: 300
        });
        this.WI.cX(this.FK.schoolName || "");
        this.WE = eu.eh.bh({
            parent: this.cJy,
            critical: 13,
            labelText: "请输入老师职称",
            height: 30,
            width: 300
        });
        this.WE.cX(this.FK.lectorTitle || "");
        this.dQ = eu.cv.bh({
            parent: this.Ik
        });
        this.dQ.ce();
        if ( !! Y.charge) {
            this.bhZ = cgz[1]
        } else {
            this.bhZ = cgz[0]
        }
        this.cJv.innerText = this.bhZ.width + "*" + this.bhZ.height
    };
    Lf.bL = function() {
        if ( !! this.WE) {
            this.WE = eu.eh.bg(this.WE)
        }
        if ( !! this.WI) {
            this.WI = eu.eh.bg(this.WI)
        }
        if ( !! this.dQ) {
            this.dQ = eu.cv.bg(this.dQ)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    FY;
    var cF = e.dD(".#<uispace> {width: 610px;height: 200px;text-align:center;font-size:12px;color:#666;}.#<uispace> .lector,.#<uispace> .addLector{width: 156px;height:96px;margin:0 0 0 47px;}.#<uispace> .lector .delBtn{display:none;top:2px;right:2px;z-index:2;cursor:pointer;}.#<uispace> .lector .mask{display:none;width:153px;height: 96px;top:0;left:0;border:1px solid #ddd;}.#<uispace> .lector .mask .editBtn{display:block;width:43px;height: 20px;margin:30px auto;font-size:17px;font-weight:bold;}.#<uispace> .lector:hover .mask{display:block;background-color:rgba(0,0,0,0.6);}.#<uispace> .lector img{width:153px;height:53px;border-bottom:1px solid #ddd;margin:0 0 5px;}.#<uispace> .lector:hover .delBtn{display:inline-block;font-size:14px;color:#fff;}.#<uispace> .addLector .sinfo{margin:10px 0 0 ;}.#<uispace>.readonly .lector:hover .mask{display:none;}.#<uispace>.readonly .lector:hover .delBtn{display:none;}");
    var dn = e.ee('<div class="u-lectorList f-cb"><div class="j-addLector addLector f-fr f-pr"><a class="u-btn u-btn-default j-addBtn">+增加签名</a><p class="sinfo">(最多可添加2位老师)</p></div></div>'),
    cJr = e.ee('<div class="lector j-lector f-pr f-fr"><img src="{if !!data.lectorSignPic}${data.lectorSignPic}{else}${imageUrlMap.img_default_signature}{/if}" alt="老师签名" class="j-signPic"><p class="j-uni f-thide">${data.schoolName|escape}</p><p class="j-pro f-thide">${data.lectorTitle|escape}</p>{if deletable}<span class="j-delBtn f-pa delBtn f-icon"></span>{/if}<div class="mask f-pa"><a class="editBtn j-editBtn">编 辑</a></div></div>');
    eu.bim = NEJ.C();
    FY = eu.bim.bu(eu.cq, true);
    FY.bU = function() {
        this.bW = e.bY(e.bX(dn));
        this.dv = cF
    };
    FY.bP = function() {
        this.bQ();
        this.bwN = e.bc(this.bb, "j-addLector")[0];
        this.hm = e.bc(this.bb, "j-addBtn")[0];
        v.bf(this.hm, "click", this.cgv.Z(this, -1))
    };
    FY.bF = function(Y) {
        this.bI(Y);
        this.btB = Y.lectorList || [];
        this.cJo = Y.charge || false;
        this.Su = [];
        u.bA(this.btB,
        function(cJn, bd) {
            this.cgt( - 1, cJn, bd == 0 ? "first": "")
        }.Z(this));
        this.zx(false)
    };
    FY.cgt = function(lP, W, cN) {
        var bB = e.iN(e.bX(cJr, {
            data: W,
            deletable: cN != "first"
        }));
        var cJh = e.bc(bB, "j-delBtn")[0];
        var cJc = e.bc(bB, "j-editBtn")[0];
        var cgq = lP == -1 ? this.Su.length: lP;
        this.hd([[cJh, "click", this.cIV.Z(this, cgq, bB)], [cJc, "click", this.cgv.Z(this, cgq, W)]]);
        this.cIU = e.bc(this.bb, "j-lector");
        if (lP == -1) {
            this.bb.insertBefore(bB, this.bwN);
            this.Su.push(W)
        } else {
            this.bb.replaceChild(bB, this.cIU[lP]);
            this.Su[lP] = W
        }
    };
    FY.zx = function(cN, W) {
        eu.cZ(this.bwN, this.Su.length < 3 && cN);
        eu.EL(!cN, this.bb, "readonly")
    };
    FY.cgv = function(lP, W) {
        eu.btE.bT({
            lectorDto: lP == -1 ? {}: W,
            position: lP,
            charge: this.cJo,
            onSaveLector: function(lP, W) {
                this.cgt(lP, W);
                if (lP == -1) {
                    eu.cZ(this.bwN, this.Su.length < 3)
                }
            }.Z(this)
        })
    };
    FY.cIV = function(lP, bB) {
        this.Su.splice(lP, 1);
        this.bb.removeChild(bB)
    };
    FY.cgn = function() {
        return this.Su
    };
    FY.bL = function() {
        var btz = e.bc(this.bb, "j-lector");
        u.bA(btz,
        function(bo) {
            this.bb.removeChild(bo)
        }.Z(this));
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    BJ;
    var cF = e.dD('.#<uispace> {width: 720px;height: 1099px;padding:25px;border:15px solid #a8abaf;font-family:"微软雅黑";}.#<uispace> .midCtn{width: 700px;height: 1081px; padding:8px;border:3px solid #404e5f;}.#<uispace> .innerCtn{background: url("http://img0.ph.126.net/y7FLm6W0kxgJCWOPVbGHiQ==/6619438231212290010.jpg") right 0 no-repeat;width: 690px;height: 1071px;line-height: normal;border:5px solid #c7a682;}.#<uispace> .uniPic{width:155px;height:155px;border-radius:115px;top:265px;left:31px;}.#<uispace> .mainCtn{width:509px;height:325px;padding-top:294px;margin:0 0 0 181px;text-align:center;}.#<uispace> .mainCtn h3{font-size:43px;color:#333;padding:0 8px 0 0;margin: 15px 0 35px;}.#<uispace> .mainCtn .txt{font-size:24px;color:#333;}.#<uispace> .mainCtn .courseSN{color:#333;font-size: 21px;margin:0 0 50px;}.#<uispace> .mainCtn .cName{font-size:36px;color:#333;padding:0 5px;}.#<uispace> .lectors{width:650px;height:242px;margin:90px auto 0;line-height: 21px;}.#<uispace> .foot{width: 240px;height:160px;margin:0 auto;color:#333;}.#<uispace> .foot img{width:230px;height:80px;border-bottom:1px solid #ddd;margin:0 0 5px;}.#<uispace> .foot .uni{height:18px;overflow:hidden;}.#<uispace> .foot .professor{height:18px;overflow:hidden;}.#<uispace> .foot .editorBox{width:490px;margin:19px 0 0 -243px;}.#<uispace> .foot .editorBox{width:490px;margin:19px 0 0 -243px;}.#<uispace> .foot .uploadTxBtn{display: block;width: 60px;height: 20px;right:242px;bottom:45px;color:#61A500;}.#<uispace> .foot .editorBox .u-tipinput{float:left;margin:0 15px 0 0;}.#<uispace> .bottom{width: 670px;height:100px;margin:0 auto;}.#<uispace> .bottom .qrImg{width: 73px;height:90px;text-align:center;background-color:#e9e8e8;padding:6px;margin:0 15px 0 0;}.#<uispace> .bottom .qrImg p{color:#333;font-size:14px;height:23px;line-height:23px;}.#<uispace> .bottom .courseInfo{width:565px;bottom:20px;left:105px;}.#<uispace> .bottom .courseInfo .des{word-wrap: break-word;color:#808183;}.#<uispace> .bottom .certNO{bottom:0;left:105px;color:#333;font-size:14px;}');
    var dn = e.ee('<div class="u-certificateSample"><div class="midCtn f-cb f-pr"><div class="innerCtn f-cb f-pr"><div class="mainCtn f-cb"><h3 class="f-cb">柳夫虎</h3><h2><span class="txt">完成</span><span class="j-cName cName"></h2><p class="txt courseSN j-courseSN"></p><p class="txt j-type">课程的学习，成绩合格（优秀）。</p></div><div class="lectors j-lectors"></div><img src="" alt="大学logo" class="j-uniPic uniPic f-pa"><div class="bottom f-pr"><div class="qrImg"><img src="http://img0.ph.126.net/KFhrcpFbfWc09YIOhCRgBQ==/6608559663166664928.jpg" alt="大学logo"><p>证书查询</p></div><div class="courseInfo f-pa"><h5 class="j-cName des"></h5><div class="j-des des">简介</div><div class="j-desEditor"></div></div><p class="certNO f-pa">证书编号：XXXXXX &nbsp;&nbsp;&nbsp;发证日期：XXXX年XX月XX日</p></div></div></div></div>');
    eu.WA = NEJ.C();
    BJ = eu.WA.bu(eu.cq, true);
    BJ.bU = function() {
        this.bW = e.bY(e.bX(dn));
        this.dv = cF
    };
    BJ.bP = function() {
        this.bQ();
        this.cIR = e.bc(this.bb, "j-uniPic")[0];
        this.cgm = e.bc(this.bb, "j-cName");
        this.uA = e.bc(this.bb, "j-type")[0];
        this.bxt = e.bc(this.bb, "j-lectors")[0];
        this.cgk = e.bc(this.bb, "j-courseSN")[0];
        this.bkG = e.bc(this.bb, "j-des")[0];
        this.bkH = e.bc(this.bb, "j-desEditor")[0];
        this.fT = new p.iv
    };
    BJ.bF = function(Y) {
        this.bI(Y);
        this.ht = Y.certDto;
        this.zx(false)
    };
    BJ.zx = function(cN, W) {
        eu.cZ(this.bkG, !cN);
        eu.cZ(this.bkH, cN);
        this.wb = cN;
        if ( !! this.wy) {
            this.wy.zx(cN, W)
        }
        if (cN) {
            this.jW = eu.eh.bh({
                parent: this.bkH,
                critical: 150,
                labelText: "此处请简要概述该课程的主要内容、课程优势等；字数请控制在150字以内，超过字数将无法生成证书。",
                height: 47,
                width: 490
            });
            if ( !! this.ht) {
                this.jW.cX(this.ht.certIntro || "")
            }
        } else { !! W && (this.ht = W);
            if ( !! this.ht) this.Ie(this.ht)
        }
    };
    BJ.ZX = function(fm, bz) {
        if (!fm && !this.ht) return;
        this.ht = fm;
        if ( !! bz) {
            this.ht.type = bz
        }
        switch (this.ht.type) {
        case - 2 : this.uA.innerText = "课程的学习，成绩合格/优秀。";
            break;
        case eu.CONST.CERT_TYPE_CHARGE_NORMAL:
            this.uA.innerText = "课程的学习，成绩合格。";
            break;
        case eu.CONST.CERT_TYPE_CHARGE_OUTSTANDING:
            this.uA.innerText = "课程的学习，成绩优秀。";
            break
        }
        this.Ie(this.ht)
    };
    BJ.Ie = function(W) {
        this.dy();
        this.wy = eu.bim.bh({
            parent: this.bxt,
            lectorList: W.lectorJsonObjects,
            charge: true
        });
        this.cIR.src = W.schoolLogoPic || g.imageUrlMap.img_default_unviersity_cert;
        this.cgm[0].innerText = this.cgm[1].innerText = W.courseName || "";
        this.cgk.innerText = "（" + (W.shortName || "") + "）";
        this.bkG.innerText = W.certIntro || "此处请简要概述该课程的主要内容、课程优势等；字数请控制在150字以内，超过字数将无法生成证书。"
    };
    BJ.bxH = function() {
        var eA = "",
        il = true,
        ccount = null,
        ucount = null,
        tcount = null,
        Ic;
        if (this.wb) {
            Ic = this.bay()
        } else {
            Ic = this.ht
        }
        ccount = this.fT.ir(Ic.certIntro);
        if (ccount == 0) {
            eA = "<b>请输入完整的课程介绍。</p>";
            il = false
        }
        if (ccount > 300) {
            eA = "<b>课程介绍超过限定字数，无法生成证书</b><p>证书内的课程介绍需控制在150字以内，请重新输入。</p>";
            il = false
        }
        if (!il) {
            eu.cp.bT({
                type: 1,
                message: eA
            });
            return il
        }
        return Ic
    };
    BJ.bay = function() {
        var Sq = eu.Bg(this.ht);
        Sq.lectorJsonObjects = this.wy.cgn();
        Sq.certIntro = this.jW.cc();
        return Sq
    };
    BJ.dy = function() {
        if ( !! this.wy) {
            this.wy = eu.bim.bg(this.wy)
        }
        if ( !! this.jW) {
            this.jW = eu.eh.bg(this.jW)
        }
    };
    BJ.bL = function() {
        this.dy();
        this.bO()
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    lr = NEJ.R,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    bs = bq("nej.ui"),
    bN,
    cF,
    bxN;
    if ( !! bs.bxO) return;
    bs.bxO = NEJ.C();
    bN = bs.bxO.bu(bs.st);
    bN.bF = function(Y) {
        this.btv = NEJ.X({},
        Y);
        this.qP = NEJ.X({},
        Y);
        delete this.btv.onchange;
        this.qP.onchange = this.jv.Z(this);
        this.bI(Y);
        this.cIL({
            number: Y.number,
            label: Y.label || de
        })
    };
    bN.bL = function() {
        if ( !! this.wE) {
            this.wE.bg();
            delete this.wE
        }
        this.bO();
        delete this.btv;
        delete this.qP;
        this.cIK();
        this.bb.innerHTML = "&nbsp;"
    };
    bN.bU = function() {
        this.dv = cF
    };
    bN.cIL = function(W) {
        bm.dfK(this.bb, bxN, W);
        var jO = bm.dfN();
        this.qP.list = bm.bc(this.bb, "js-i-" + jO);
        this.qP.pbtn = (bm.bc(this.bb, "js-p-" + jO) || lr)[0];
        this.qP.nbtn = (bm.bc(this.bb, "js-n-" + jO) || lr)[0]
    };
    bN.bP = function() {
        this.bQ()
    };
    bN.dlu = function(W) {
        return bm.bX(bxN, W)
    };
    bN.jv = function(bj) {
        if (this.cgh) return;
        var bd = bj.index,
        fS = bj.total;
        this.cgh = !0;
        this.Sn(bd, fS);
        bE.bA(this.bts,
        function(Wr) {
            Wr.Sn(bd, fS)
        });
        this.cgh = !1;
        this.bn("onchange", bj)
    };
    bN.Z = function(dO) {
        dO = bm.bM(dO);
        if (!dO) return this;
        var wB = NEJ.X({},
        this.btv);
        wB.parent = dO;
        wB.index = this.beo();
        wB.total = this.bbo();
        var Wr = this.constructor.bh(wB);
        Wr.Yj("onchange", this.qP.onchange);
        if (!this.bts) this.bts = [];
        this.bts.push(Wr);
        return this
    };
    bN.cIK = function() {
        var cID = function(Wr, bd, bH) {
            Wr.bg();
            bH.splice(bd, 1)
        };
        return function() {
            bE.od(this.bts, cID)
        }
    } ();
    bN.pZ = function(bd) {
        if (!this.wE) return;
        this.wE.pZ(bd)
    };
    bN.beo = function() {
        if (!this.wE) return 1;
        return this.wE.beo()
    };
    bN.bbo = function() {
        if (!this.wE) return 1;
        return this.wE.bbo()
    };
    bN.Sn = function(bd, fS) {
        if (!this.wE) return;
        this.wE.Sn(bd, fS)
    };
    bN.btr = function(fS) {
        if (!this.wE) return;
        this.wE.btr(fS)
    };
    cF = bm.dD(".#<uispace>{font-size:12px;line-height:160%;}.#<uispace> a{margin:0 2px;padding:2px 8px;color:#333;border:1px solid #aaa;text-decoration:none;}.#<uispace> .js-disabled{cursor:default;}.#<uispace> .js-selected{cursor:default;background:#bbb;}");
    bxN = bm.ee('{trim}{if !defined("noprv")||!noprv}<a href="#" class="zbtn zprv ${\'js-p-\'|seed}">${label.prev||"上一页"}</a>{/if}{list 1..number as x}<a href="#" class="zpgi zpg${x} ${\'js-i-\'|seed}"></a>{/list}{if !defined("nonxt")||!nonxt}<a href="#" class="zbtn znxt ${\'js-n-\'|seed}">${label.next||"下一页"}</a>{/if}{/trim}')
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.btq) return;
    bs.btq = NEJ.C();
    bN = bs.btq.bu(bs.hS);
    bN.bF = function(Y) {
        this.bI(Y);
        this.bto = Y.pbtn;
        this.btl = Y.nbtn;
        this.btk = Y.sbtn;
        this.btj = Y.ebtn;
        this.gj = Y.event || "click";
        this.or = Y.selected || "js-selected";
        this.kZ = Y.disabled || "js-disabled";
        this.cIC(Y.list);
        this.Wn = Y.limit || Infinity;
        this.Sn(Y.index || 1, Y.total || 1)
    };
    bN.bL = function() {
        this.bO();
        delete this.dw;
        delete this.gj;
        delete this.bto;
        delete this.btl;
        delete this.btk;
        delete this.btj;
        delete this.cgg;
        delete this.mV;
        delete this.dg;
        delete this.bti;
        delete this.or;
        delete this.kZ
    };
    bN.cIC = function() {
        var bDp = function(bB) {
            this.dw.push(bB);
            this.hd([[bB, this.gj, this.kW.Ja(this, 0)]])
        };
        return function(bH) {
            this.dw = [];
            this.hd([[this.bto, "click", this.kW.Ja(this, -1)], [this.btl, "click", this.kW.Ja(this, 1)], [this.btk, "click", this.kW.Ja(this, -2)], [this.btj, "click", this.kW.Ja(this, 2)]]);
            bE.bA(bH, bDp, this)
        }
    } ();
    bN.Sl = function(bB, bd) {
        if (bd == null) {
            bB.innerText = "";
            bm.ev(bB, "display", "none");
            bm.bZ(bB, this.or)
        } else {
            bB.innerText = bd;
            bm.ev(bB, "display", "");
            bd == this.dg ? bm.bJ(bB, this.or) : bm.bZ(bB, this.or)
        }
    };
    bN.byN = function() {
        if (this.dg <= 1) {
            bm.bJ(this.bto, this.kZ);
            bm.bJ(this.btk, this.kZ)
        } else {
            bm.bZ(this.bto, this.kZ);
            bm.bZ(this.btk, this.kZ)
        }
        if (this.dg >= this.mV) {
            bm.bJ(this.btl, this.kZ);
            bm.bJ(this.btj, this.kZ)
        } else {
            bm.bZ(this.btl, this.kZ);
            bm.bZ(this.btj, this.kZ)
        }
    };
    bN.btg = dk;
    bN.byQ = function() {
        this.btg();
        this.byN();
        this.bn("onchange", {
            last: this.cgg,
            total: this.mV,
            index: this.dg,
            ext: this.bti
        })
    };
    bN.cgf = function(bd) {
        bd = parseInt(bd);
        if (isNaN(bd) || this.mV == null) return ! 1;
        bd = Math.max(1, Math.min(bd, this.mV));
        this.cgg = this.dg;
        this.dg = bd;
        return ! 0
    };
    bN.byS = function(fS) {
        fS = parseInt(fS);
        if (isNaN(fS) || fS < 1) return ! 1;
        this.mV = Math.min(fS, this.Wn);
        return ! 0
    };
    bN.kW = function(bj, cN) {
        ch.YI(bj);
        var bC = ch.eP(bj);
        if (!bC || bm.hJ(bC, this.or) || bm.hJ(bC, this.kZ)) return;
        var bd = bC.innerText;
        switch (cN) {
        case 1:
        case - 1 : bd = this.dg + cN;
            break;
        case 2:
            bd = this.mV;
            break;
        case - 2 : bd = 1;
            break
        }
        this.pZ(bd)
    };
    bN.beo = function() {
        return this.dg
    };
    bN.pZ = function(bd) {
        var cIw = this.dg;
        this.cgf(bd);
        if (cIw != this.dg) this.byQ();
        return this
    };
    bN.bbo = function() {
        return this.mV
    };
    bN.byV = function(fS) {
        if (this.byS(fS) && this.dg != null) {
            this.dg = 1;
            this.byQ()
        }
        return this
    };
    bN.btr = function(fS) {
        if (this.byS(fS)) {
            this.btg();
            this.byN()
        }
        return this
    };
    bN.Sn = function(bd, fS) {
        if (!this.byS(fS) || !this.cgf(bd)) return this;
        this.byQ();
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    ej = bq("nej.x"),
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.bcv) return;
    bs.bcv = NEJ.C();
    bN = bs.bcv.bu(bs.btq);
    bN.hk = function() {
        this.byZ = [];
        this.hy()
    };
    bN.bL = function() {
        this.bO();
        this.cge()
    };
    bN.cge = function() {
        var ES = function(bB, bd, bH) {
            bm.sE(bB);
            bH.splice(bd, 1)
        };
        return function() {
            bE.od(this.byZ, ES)
        }
    } ();
    bN.btg = function() {
        this.bti = {
            last: !1,
            first: !1,
            list: this.dw
        };
        this.cge();
        this.Sl(this.dw[0], 1);
        var pk = 1,
        eL = this.dw.length;
        if (this.mV < eL) {
            for (var uq; pk < eL; pk++) {
                uq = pk + 1;
                this.Sl(this.dw[pk], uq > this.mV ? null: uq)
            }
            return
        }
        if (this.dg > 1) {
            var dR = Math.floor((eL - 2) / 2),
            cIt = this.mV - eL + 2,
            md = Math.max(2, this.dg - dR);
            if (this.mV >= eL) {
                md = Math.min(md, cIt)
            }
            if (md > 2) {
                var bB = bm.rF("span", "zdot");
                this.byZ.push(bB);
                bB.innerText = "...";
                this.dw[0].insertAdjacentElement("afterEnd", bB);
                this.bti.first = !0
            }
            for (var bd;; pk++) {
                bd = md + pk - 1;
                if (bd > this.dg) break;
                this.Sl(this.dw[pk], bd)
            }
        }
        if (this.dg < this.mV) {
            var bd, md = this.dg + 1;
            for (var i = 0,
            l = eL - 2;; i++, pk++) {
                bd = md + i;
                if (pk > l || bd > this.mV) break;
                this.Sl(this.dw[pk], bd)
            }
            if (bd < this.mV) {
                var bB = bm.rF("span", "zdot");
                this.byZ.push(bB);
                bB.innerText = "...";
                this.dw[pk].insertAdjacentElement("beforeBegin", bB);
                this.bti.last = !0
            }
            if (bd <= this.mV) {
                this.Sl(this.dw[pk++], this.mV)
            }
        }
        for (; pk < eL; pk++) {
            this.Sl(this.dw[pk])
        }
    };
    bm.coG = ej.coG = function(dO, Y) {
        var ca = bm.mt(dO);
        if (!ca) return null;
        if (!bs.blB(ca, bs.bcv)) {
            Y = Y || {};
            var bH = !Y.clazz ? bm.cS(ca) : bm.bc(ca, Y.clazz);
            Y.pbtn = bH.shift();
            Y.nbtn = bH.pop();
            Y.list = bH;
            delete Y.clazz
        }
        return bs.blB(ca, bs.bcv, Y || de)
    };
    ej.isChange = !0
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    lr = NEJ.R,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    bN,
    sk,
    dj;
    if ( !! bs.ha) return;
    bs.ha = NEJ.C();
    bN = bs.ha.bu(bs.bxO);
    sk = bs.ha.cE;
    bN.bF = function(Y) {
        Y.number = parseInt(Y.number) || 9;
        this.bI(Y);
        this.wE = eO.bcv.bh(this.qP)
    };
    bN.jv = function(bj) {
        if ( !! this.btv.noend) {
            var bTS = bj.ext || de,
            bH = bTS.list || lr;
            if (bTS.last) {
                bm.ev(bH[bH.length - 1], "display", "none")
            }
        }
        sk.jv.apply(this, arguments)
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.bzg) return;
    bs.bzg = NEJ.C();
    bN = bs.bzg.bu(bs.hS);
    bN.bF = function(Y) {
        this.bI(Y);
        this.btf = Y.to || de;
        this.bdt = Y.from || {};
        this.cIp = Math.max(0, parseInt(Y.delay) || 0)
    };
    bN.bL = function() {
        this.bO();
        this.dK();
        if ( !! this.bdy) {
            window.clearTimeout(this.bdy);
            delete this.bdy
        }
        delete this.btf;
        delete this.bdt
    };
    bN.cgc = function(cV) {
        if (!this.bdt) return;
        if (("" + cV).indexOf(".") >= 0) cV = +(new Date);
        if (this.cgb(cV)) {
            this.dK();
            return
        }
        this.gp = requestAnimationFrame(this.cgc.Z(this))
    };
    bN.cgb = dk;
    bN.wJ = function() {
        var cIm = function() {
            this.bdy = window.clearTimeout(this.bdy);
            this.bdt.time = +(new Date);
            this.gp = requestAnimationFrame(this.cgc.Z(this))
        };
        return function() {
            this.bdy = window.setTimeout(cIm.Z(this), this.cIp);
            return this
        }
    } ();
    bN.dK = function() {
        this.gp = cancelRequestAnimationFrame(this.gp);
        this.bn("onstop", arguments);
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bE = bq("nej.u"),
    bs = bq("nej.ut"),
    bN,
    sk;
    if ( !! bs.bdE) return;
    bs.bdE = NEJ.C();
    bN = bs.bdE.bu(bs.bzg);
    sk = bs.bdE.cE;
    bN.bF = function(Y) {
        this.bI(Y);
        this.bzw = Y.duration || 200;
        this.cIl = 1 / (200 * this.bzw);
        this.cIk(Y.timing);
        this.cIi()
    };
    bN.bL = function() {
        this.bO();
        delete this.Wf;
        delete this.bzB
    };
    bN.cIk = function() {
        var ng = /^cubic\-bezier\((.*?)\)$/i,
        wl = /\s*,\s*/i,
        cga = {
            linear: [0, 0, 1, 1],
            ease: [.25, .1, .25, 1],
            easein: [.42, 0, 1, 1],
            easeout: [0, 0, .58, 1],
            easeinout: [0, 0, .58, 1]
        };
        var cIg = function(bG, bd, bH) {
            bH[bd] = parseFloat(bG)
        };
        return function(bta) {
            bta = (bta || "").toLowerCase();
            this.Wf = cga[bta];
            if (ng.test(bta)) {
                this.Wf = RegExp.$1.split(wl);
                bE.bA(this.Wf, cIg)
            }
            if ( !! this.Wf) return;
            this.Wf = cga.ease
        }
    } ();
    bN.cIi = function() {
        var Wc = this.Wf,
        bzM = 3 * Wc[0],
        cfZ = 3 * (Wc[2] - Wc[0]) - bzM,
        cIb = 1 - bzM - cfZ,
        bzR = 3 * Wc[1],
        cfX = 3 * (Wc[3] - Wc[1]) - bzR,
        cHZ = 1 - bzR - cfX;
        this.bzB = {
            ax: cIb,
            ay: cHZ,
            bx: cfZ,
            by: cfX,
            cx: bzM,
            cy: bzR
        }
    };
    bN.cHY = function() {
        var cfW = function(cV, uk) {
            return ((uk.ax * cV + uk.bx) * cV + uk.cx) * cV
        };
        var cHW = function(cV, uk) {
            return ((uk.ay * cV + uk.by) * cV + uk.cy) * cV
        };
        var cHV = function(cV, uk) {
            return (3 * uk.ax * cV + 2 * uk.bx) * cV + uk.cx
        };
        var cHU = function(cV, cfV, uk) {
            var t0, t1, t2, x2, d2, i;
            for (t2 = cV, i = 0; i < 8; i++) {
                x2 = cfW(t2, uk) - cV;
                if (Math.abs(x2) < cfV) return t2;
                d2 = cHV(t2, uk);
                if (Math.abs(d2) < 1e-6) break;
                t2 = t2 - x2 / d2
            }
            t0 = 0;
            t1 = 1;
            t2 = cV;
            if (t2 < t0) return t0;
            if (t2 > t1) return t1;
            while (t0 < t1) {
                x2 = cfW(t2, uk);
                if (Math.abs(x2 - cV) < cfV) return t2;
                if (cV > x2) t0 = t2;
                else t1 = t2;
                t2 = (t1 - t0) * .5 + t0
            }
            return t2
        };
        return function(gu) {
            return cHW(cHU(gu / this.bzw, this.cIl, this.bzB), this.bzB)
        }
    } ();
    bN.cgb = function(cV) {
        var gu = cV - this.bdt.time,
        cfU = this.cHY(gu),
        gG = bE.bRV(this.bdt.offset * (1 - cfU) + this.btf.offset * cfU, 2),
        cfT = !1;
        if (gu >= this.bzw) {
            gG = this.btf.offset;
            cfT = !0
        }
        this.bn("onupdate", {
            offset: 1 * gG
        });
        return cfT
    };
    bN.dK = function() {
        this.bn("onupdate", {
            offset: this.btf.offset
        });
        sk.dK.apply(this, arguments);
        return this
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    ui = NEJ.P("nej.ui"),
    mc,
    dn = '<div class="m-basepool f-cb"><div class="j-list"><div class="m-data-lists f-cb f-pr j-data-list"></div><div class="u-pager f-pr j-data-pager"></div></div><div class="j-none empty" style="display:none"><span class="f-f0 f-fc9 j-none-txt f-ib"></span></div></div>';
    var cF = e.dD(".#<uispace> .item-highlight{background:#E0F2E2;}.#<uispace> .m-data-lists{position:relative;z-index:100;}.#<uispace> .u-pager{position:relative;z-index:99;}");
    p.BZ = NEJ.C();
    mc = p.BZ.bu(eu.cq, true);
    mc.bU = function() {
        this.dv = cF;
        this.bW = e.bY(dn)
    };
    mc.bL = function() {
        this.cfS();
        this.bO()
    };
    mc.cfS = function() {
        if ( !! this.ef) {
            for (var i in this.ef) {
                var cY = this.ef[i];
                this.bsY(i, 0);
                cY = this.Ca(cY)
            }
            this.ef = {}
        }
    };
    mc.cHP = function() {
        this.ef = {};
        if ( !! this.DO && !!this.DO.list) {
            var Sd = this.DO.list;
            for (var i = 0; i < Sd.length; i++) {
                this.bgl(Sd[i])
            }
        } else {
            this.cfQ()
        }
    };
    mc.dlv = function() {
        if ( !! this.DO && !!this.DO.list) {
            return this.DO.list
        } else {
            return null
        }
    };
    mc.bgl = function(fA, Sb) {
        var bsX = this.cHL;
        if ( !! this.ef[fA.id]) {
            this.cHK(this.ef[fA.id], fA);
            return
        }
        if ( !! Sb) {
            this.cHJ = (this.yx || []).length + 101
        }
        var cY = this.Ce(fA);
        cY.bf("onDelSubItem", this.bgW.Z(this));
        if ( !! cY) {
            this.ef[fA.id] = cY;
            var cfP = bsX.firstChild;
            if ( !! cfP && !!Sb) {
                cY.fB = bsX;
                bsX.insertBefore(cY.kf(), cfP);
                this.bsY(fA.id, 1)
            } else {
                cY.bqi(bsX);
                this.bsY(fA.id, 2)
            }
        }
        return cY
    };
    mc.cHK = function(cY, fA) {
        if ( !! this.DO && !!this.DO.list && !!fA) {
            var Sd = this.DO.list;
            for (var i = 0; i < Sd.length; i++) {
                var bo = Sd[i];
                if (fA.id == bo.id) {
                    Sd.splice(i, 1);
                    Sd.splice(i, 0, fA);
                    break
                }
            }
        }
    };
    mc.Ca = f;
    mc.Ce = f;
    mc.bgW = function(fA) {
        var ca = fA.id;
        this.bsY(ca, 0);
        this.ef[ca] = null;
        delete this.ef[ca];
        this.bn("onDelItem");
        if (!this.cfO()) {
            this.bsV(true)
        }
    };
    mc.dlw = function(fA) {
        this.bn("onEditItem", fA)
    };
    mc.bsY = function(HO, bz) {
        this.yx = this.yx || [];
        HO = "" + HO;
        switch (bz) {
        case 0:
            var bd = u.oa(this.yx, HO);
            if (bd >= 0) {
                this.yx.splice(bd, 1)
            }
            break;
        case 1:
            this.yx.splice(0, 0, HO);
            break;
        case 2:
            this.yx.push(HO);
            break;
        default:
            break
        }
        this.cfQ()
    };
    mc.cfO = function() {
        this.yx = this.yx || [];
        return this.yx.length >= 1
    };
    mc.cfQ = function() {
        if ( !! this.bBd) {
            e.bZ(this.bBd.kf(), "first");
            this.bBd = null
        }
        if ( !! this.bBe) {
            e.bZ(this.bBe.kf(), "last");
            this.bBe = null
        }
        if (this.cfO()) {
            var cfL = this.ef[this.yx[0]];
            var cfK = this.ef[this.yx[this.yx.length - 1]];
            e.bJ(cfL.kf(), "first");
            e.bJ(cfK.kf(), "last");
            this.bBd = cfL;
            this.bBe = cfK;
            this.bsV(false)
        } else {
            eu.bt(this.gi)
        }
    };
    mc.bP = function() {
        this.bQ();
        this.cHL = e.bc(this.bb, "j-data-list")[0];
        this.Kn = e.bc(this.bb, "j-data-pager")[0];
        this.gi = e.bc(this.bb, "j-list")[0];
        this.bBl = e.bc(this.bb, "j-none")[0];
        this.cfJ = e.bc(this.bb, "j-none-txt")[0];
        if ( !! this.yt) {
            eu.bw(this.Kn);
            this.fN = 1;
            this.dL = ui.ha.bh({
                parent: this.Kn,
                onchange: this.yp.Z(this),
                index: 1,
                total: 1
            })
        } else {
            eu.bt(this.Kn)
        }
    };
    mc.yp = f;
    mc.sr = function(dU) {
        if ( !! dU && !!dU.list && dU.list.length > 0) {
            this.bsV(false);
            this.cHJ = (dU && dU.list ? dU.list.length: 0) + 100;
            this.DO = dU;
            this.cHx(this.DO);
            this.cfS();
            this.cHP()
        } else {
            this.bsV(true)
        }
    };
    mc.bsV = function(cU) {
        if (cU) {
            eu.bt(this.gi);
            eu.bw(this.bBl);
            if (!this.cfJ.innerText) {
                eu.bt(this.bBl)
            }
        } else {
            eu.bt(this.bBl);
            eu.bw(this.gi)
        }
    };
    mc.bF = function(Y) {
        this.bI(Y);
        this.ef = {};
        if ( !! Y.noneTxt) {
            this.cfJ.innerText = Y.noneTxt
        }
        if ( !! this.Kn) {
            eu.bt(this.Kn)
        }
        if ( !! Y.dataMaps) {
            this.sr(Y.dataMaps)
        } else if (!Y.notGetData) {
            this.cfI(1)
        }
    };
    mc.bBD = function(ca) {
        if (!ca || !this.ef[ca]) {
            return null
        } else {
            return this.ef[ca]
        }
    };
    mc.cfI = function(hu) {
        if ( !! this.yt) {
            this.fN = -1;
            this.dL.Sn(hu, hu)
        }
    };
    mc.cHx = function(dU) {
        if ( !! dU) {
            var fS = 1;
            var bd = 1;
            if ( !! dU.totlePageCount && dU.totlePageCount > 0) {
                fS = dU.totlePageCount
            }
            if ( !! dU.currentPageNo && dU.currentPageNo > 0) {
                bd = dU.currentPageNo
            }
            this.fN = bd;
            if ( !! this.Kn) {
                if (fS > 1 && !!this.yt) {
                    eu.bw(this.Kn);
                    this.dL.Sn(bd, fS)
                } else {
                    eu.bt(this.Kn)
                }
            }
        }
    };
    mc.dlx = function(ca, jB) {
        if (!ca || !this.ef[ca]) {
            return
        }
        var HL = this.ef[ca].kf();
        var gG = e.rx(HL);
        jB = !!jB ? jB: 0;
        window.scrollTo(gG.x, gG.y - jB);
        var Ci = 0;
        var eO = g.setInterval(function() {
            if (e.hJ(HL, "item-highlight")) {
                e.bZ(HL, "item-highlight")
            } else {
                e.bJ(HL, "item-highlight")
            }
            Ci += 300;
            if (Ci > 1e3) {
                g.clearInterval(eO);
                e.bZ(HL, "item-highlight")
            }
        },
        300)
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    ch = bq("nej.v"),
    bm = bq("nej.e"),
    bs = bq("nej.ui"),
    bN;
    if ( !! bs.bBL) return;
    var cF = bm.dD(".#<uispace>{position:absolute;background:#fff;}");
    bs.bBL = NEJ.C();
    bN = bs.bBL.bu(bs.bhH);
    bN.bF = function(Y) {
        this.bI(Y);
        this.hd([[document, "click", this.cHu.Z(this)]]);
        this.cHs = !!Y.nostop;
        this.sc = {
            top: Y.top,
            left: Y.left
        }
    };
    bN.bL = function() {
        delete this.cfG;
        delete this.bBQ;
        delete this.vK;
        delete this.cfF;
        delete this.bsR;
        delete this.sc;
        this.bO()
    };
    bN.bU = function() {
        this.dv = cF
    };
    bN.bP = function() {
        this.bQ();
        this.bhk = this.bb;
        ch.bf(this.bb, "click", this.cHo.Z(this))
    };
    bN.cHu = function(bj) {
        if (bj.button != 2) this.fs()
    };
    bN.cHo = function(bj) {
        if (this.cHs) return;
        ch.nS(bj);
        var bC = ch.eP(bj);
        if (bC.tagName == "A") ch.YI(bj)
    };
    bN.cHm = function() {
        var ep = /\s+/i;
        return function(qX) {
            qX = (qX || "").trim().toLowerCase().split(ep);
            qX[0] = qX[0] || "bottom";
            qX[1] = qX[1] || "left";
            this.vK = qX
        }
    } ();
    bN.cGZ = function(qX) {
        var cL = {},
        pS = this.bBQ,
        dlz = bm.wR(),
        hE = this.bb.offsetWidth,
        iL = this.bb.offsetHeight;
        switch (qX[0]) {
        case "top":
            cL.top = pS.top - iL;
            cL.left = qX[1] == "right" ? pS.left + pS.width - hE: pS.left;
            break;
        case "left":
            cL.left = pS.left - hE;
            cL.top = qX[1] == "bottom" ? pS.top + pS.height - iL: pS.top;
            break;
        case "right":
            cL.left = pS.left + pS.width;
            cL.top = qX[1] == "bottom" ? pS.top + pS.height - iL: pS.top;
            break;
        default:
            cL.top = pS.top + pS.height;
            cL.left = qX[1] == "right" ? pS.left + pS.width - hE: pS.left;
            break
        }
        return cL
    };
    bN.bPT = function() {
        if (!this.cfF) {
            this.vr(this.sc);
            return
        }
        if ( !! this.bsR) {
            this.vr(this.cfG);
            return
        }
        if ( !! this.bBQ) this.vr(this.cGZ(this.vK))
    };
    bN.cGT = function(bC, gu, bj) {
        gu = gu || de;
        var bjj = bm.wR(),
        ej = ch.TU(bj) + (gu.left || 0),
        jB = ch.TT(bj) + (gu.top || 0),
        hE = bC.offsetWidth + (gu.right || 0),
        iL = bC.offsetHeight + (gu.bottom || 0),
        Vn = bjj.scrollWidth,
        bCf = bjj.scrollHeight,
        bCg = ej + hE,
        bCj = jB + iL;
        switch (this.vK[0]) {
        case "top":
            jB = bCj > bCf ? jB - iL: jB;
            if (this.vK[1] == "right") {
                ej = ej - hE < 0 ? 0 : ej - hE
            } else {
                ej = bCg > Vn ? Vn - hE: ej
            }
            break;
        case "left":
            ej = bCg > Vn ? Vn - hE: ej;
            if (this.vK[1] == "top") {
                jB = bCj > bCf ? jB - iL: jB
            } else {
                jB = jB - iL < 0 ? jB: jB - iL
            }
            break;
        case "right":
            ej = ej - hE < 0 ? 0 : ej - hE;
            if (this.vK[1] == "top") {
                jB = bCj > bCf ? jB - iL: jB
            } else {
                jB = jB - iL < 0 ? jB: jB - iL
            }
            break;
        default:
            jB = jB - iL < 0 ? jB: jB - iL;
            if (this.vK[1] == "left") {
                ej = bCg > Vn ? Vn - hE: ej
            } else {
                ej = ej - hE < 0 ? 0 : ej - hE
            }
            break
        }
        return {
            top: jB,
            left: ej
        }
    };
    bN.bCk = function() {
        var cGR = function(bC, gu) {
            bC = bm.bM(bC);
            if (!bC) return;
            gu = gu || de;
            var gG = bm.rx(bC);
            return {
                top: gG.y - (gu.top || 0),
                left: gG.x - (gu.left || 0),
                width: bC.offsetWidth + (gu.right || 0),
                height: bC.offsetHeight + (gu.bottom || 0)
            }
        };
        return function(Y) {
            Y = Y || de;
            this.bsR = Y.event;
            this.cHm(Y.align);
            if ( !! this.bsR) this.cfG = this.cGT(Y.target, Y.delta, this.bsR);
            this.bBQ = cGR(Y.target, Y.delta);
            this.cfF = !!Y.fitable;
            this.gI();
            return this
        }
    } ()
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    bs = bq("nej.ui"),
    bN,
    sk;
    if ( !! bs.Vf) return;
    bs.Vf = NEJ.C();
    bN = bs.Vf.bu(bs.bsW);
    sk = bs.Vf.cE;
    bs.Vf.dlA = function() {
        var cGP = function(bj, ca, eI, wT, bjC) {
            var dz, bS = ca + "-i",
            cP = eI.HC,
            cfB = !!wT.noclear,
            cfA = !!wT.toggled;
            if (bE.mb(wT.onbeforeclick)) {
                var boU = wT.noclear,
                cGM = wT.toggled;
                try {
                    wT.onbeforeclick(wT)
                } catch(e) {}
                cfB = !!wT.noclear;
                cfA = !!wT.toggled;
                wT.toggled = cGM;
                wT.noclear = boU
            }
            var AS = cP[bS];
            if (cfA && !!AS) {
                AS.fs();
                return
            }
            ch.dK(bj);
            if (!cfB) {
                ch.bn(document, "click");
                dz = eI.bh(wT)
            } else {
                dz = eI.AN(wT, !0)
            }
            cP[bS] = dz;
            dz.Yj("onbeforerecycle",
            function() {
                delete cP[bS]
            });
            dz.bCk(bjC)
        };
        return function(bB, Y) {
            bB = bm.bM(bB);
            if (!bB) return this;
            if (!this.HC) this.HC = {};
            var ca = bm.mt(bB);
            if ( !! this.HC[ca]) return this;
            Y = NEJ.X({},
            Y);
            var bjC = NEJ.EX({
                align: "",
                delta: null,
                fitable: !1
            },
            Y);
            bjC.target = ca;
            Y.destroyable = !0;
            if (!Y.fixed) {
                bjC.fitable = !0;
                Y.parent = document.body
            }
            this.HC[ca] = [ca, Y.event || "click", cGP.Ja(null, ca, this, Y, bjC)];
            ch.bf.apply(ch, this.HC[ca]);
            return this
        }
    } ();
    bs.Vf.dlB = function(bB) {
        if (!this.HC) return this;
        var ca = bm.mt(bB),
        bj = this.HC[ca];
        if (!bj) return this;
        delete this.HC[ca];
        ch.vw.apply(ch, bj);
        var dz = this.HC[ca + "-i"];
        if ( !! dz) dz.fs();
        return this
    };
    bN.bQk = function() {
        return bs.bBL.bh(this.vu)
    };
    bN.bgr = function() {
        sk.bgr.apply(this, arguments);
        this.vu.top = null;
        this.vu.left = null;
        this.vu.nostop = !1
    };
    bN.bCk = function(Y) {
        if ( !! this.HR) this.HR.bCk(Y);
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    bs = bq("nej.ut"),
    uZ;
    if ( !! bs.bCG) return;
    bs.bCG = NEJ.C();
    uZ = bs.bCG.bu(bs.hS);
    uZ.bF = function(Y) {
        this.bI(Y);
        this.hd([[Y.mprv, "click", this.cfy.Z(this, -1)], [Y.mnxt, "click", this.cfy.Z(this, 1)], [Y.yprv, "click", this.cfx.Z(this, -1)], [Y.ynxt, "click", this.cfx.Z(this, 1)], [Y.wprv, "click", this.cfw.Z(this, -1)], [Y.wnxt, "click", this.cfw.Z(this, 1)], [Y.wprv, "click", this.cfv.Z(this, -1)], [Y.wnxt, "click", this.cfv.Z(this, 1)]]);
        this.BQ = Y.offset || 0;
        this.bCR = bm.bM(Y.year);
        this.bCT = bm.bM(Y.month);
        this.or = Y.selected || "js-selected";
        this.bCU = Y.extended || "js-extended";
        this.kZ = Y.disabled || "js-disabled";
        this.cGF(Y.range);
        this.cGD(Y.list);
        this.lA(Y.date || new Date)
    };
    uZ.bL = function() {
        this.bO();
        delete this.dw;
        delete this.pa;
        delete this.bCR;
        delete this.bCT
    };
    uZ.cGF = function(sB) {
        this.pa = sB || [];
        var bG = this.pa[0];
        this.pa[0] = bE.bhK(bG) ? +bG: bG || 0;
        var bG = this.pa[1];
        this.pa[1] = bE.bhK(bG) ? +bG: bG || 0
    };
    uZ.cGD = function() {
        var bym = function(bB) {
            this.dw.push(bB);
            this.hd([[bB, "click", this.bDd.Z(this)]])
        };
        return function(bH) {
            this.dw = [];
            bE.bA(bH, bym, this)
        }
    } ();
    uZ.bDg = function() {
        var EU = function(sB, cV) {
            var kY = sB[0],
            iB = sB[1];
            return cV < kY || !!iB && cV > iB
        };
        return function(bB, iQ, jC, ft) {
            bm.df(bB, "y", iQ);
            bm.df(bB, "m", jC);
            bm.df(bB, "d", ft);
            bB.innerText = ft;
            if (iQ == this.Ld && jC == this.zI && ft == this.bDj) {
                bm.bJ(bB, this.or)
            } else {
                bm.bZ(bB, this.or)
            }
            EU(this.pa, +(new Date(iQ, jC - 1, ft))) ? bm.bJ(bB, this.kZ) : bm.bZ(bB, this.kZ)
        }
    } ();
    uZ.bsN = function() {
        var Nd = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        var bAb = function(iQ) {
            return ! (iQ % 400) || !(iQ % 4) && !!(iQ % 100)
        };
        var buW = function(iQ, jC) {
            return jC == 2 && bAb(iQ) ? 29 : Nd[jC - 1]
        };
        return function() {
            var iQ = this.Ld,
            jC = this.zI,
            ft = new Date(iQ, jC - 1, 1),
            GL = (7 + ft.getDay() - this.BQ) % 7,
            lJ = Math.min(this.dw.length, GL + buW(iQ, jC));
            if ( !! this.bCR) {
                this.bCR.innerText = this.Ld
            }
            if ( !! this.bCT) {
                this.bCT.innerText = this.zI
            }
            for (var i = GL,
            bB; i < lJ; i++) {
                bB = this.dw[i];
                this.bDg(bB, iQ, jC, i - GL + 1);
                bm.bZ(bB, this.bCU)
            }
            if (GL > 0) {
                var ft = new Date(iQ, jC - 2 || 0, 1);
                var bsM = ft.getFullYear();
                var bsL = ft.getMonth() + 1;
                var Ao = buW(bsM, bsL);
                for (var i = GL - 1,
                bB; i >= 0; i--) {
                    bB = this.dw[i];
                    this.bDg(bB, bsM, bsL, Ao--);
                    bm.bJ(bB, this.bCU)
                }
            }
            var eL = this.dw.length;
            if (lJ < eL - 1) {
                var ft = new Date(iQ, jC, 1);
                var bsM = ft.getFullYear();
                var bsL = ft.getMonth() + 1;
                for (var i = lJ,
                k = 1; i < eL; i++) {
                    bB = this.dw[i];
                    this.bDg(bB, bsM, bsL, k++);
                    bm.bJ(bB, this.bCU)
                }
            }
        }
    } ();
    uZ.cfx = function(cN) {
        this.Ld += cN;
        this.bsN();
        this.bn("onchange", this.iM())
    };
    uZ.cfy = function(cN) {
        this.zI += cN;
        if (this.zI < 1) {
            this.Ld--;
            this.zI += 12
        }
        if (this.zI > 12) {
            this.Ld += Math.floor(this.zI / 12);
            this.zI = (this.zI - 1) % 12 + 1
        }
        this.bsN();
        this.bn("onchange", this.iM())
    };
    uZ.bDd = function(bj) {
        var bC = ch.eP(bj);
        if (bm.hJ(bC, this.kZ)) return;
        this.Ld = parseInt(bm.df(bC, "y"));
        this.zI = parseInt(bm.df(bC, "m"));
        this.bDj = parseInt(bm.df(bC, "d"));
        this.bsN();
        this.bn("onselect", this.iM())
    };
    uZ.cfw = function(cN) {};
    uZ.cfv = function(cN) {};
    uZ.lA = function(ft) {
        ft = bE.bQh(ft);
        this.Ld = ft.getFullYear();
        this.zI = ft.getMonth() + 1;
        this.bDj = ft.getDate();
        this.bsN();
        return this
    };
    uZ.iM = function() {
        return new Date(this.Ld, this.zI - 1, this.bDj)
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    bs = bq("nej.ui"),
    bN,
    sk;
    if ( !! bs.bkJ) return;
    var cF, dj, cfu, cft = bE.bev();
    bs.bkJ = NEJ.C();
    bN = bs.bkJ.bu(bs.Vf);
    sk = bs.bkJ.cE;
    bN.hk = function() {
        this.Es = {
            onselect: this.bDd.Z(this)
        };
        this.hy()
    };
    bN.bF = function(Y) {
        this.bI(Y);
        this.Es.range = Y.range;
        this.bsK = eO.bCG.bh(this.Es);
        this.lA(Y.date || new Date)
    };
    bN.bL = function() {
        this.bO();
        delete this.Es.range;
        var cfs = this.bsK;
        if ( !! cfs) {
            delete this.bsK;
            cfs.bg()
        }
    };
    bN.bU = function() {
        this.dv = cF;
        this.bW = dj
    };
    bN.bP = function() {
        this.bQ();
        var bH = bm.cS(this.bb);
        this.Es.list = bm.bc(bH[1], "js-ztag");
        bH = bm.cS(bH[0]);
        this.Es.yprv = bH[0];
        this.Es.mprv = bH[1];
        this.Es.ynxt = bH[2];
        this.Es.mnxt = bH[3];
        this.Es.year = bH[4];
        this.Es.month = bH[5]
    };
    bN.ZS = function() {
        dj = bm.bY('<div class="' + cF + ' zcard">' + bm.bmI(cft) + bm.bX(cfu) + "</div>");
        this.bW = dj
    };
    bN.bDd = function(ft) {
        try {
            this.bn("onchange", ft)
        } catch(e) {}
        this.fs()
    };
    bN.lA = function(ft) {
        ft = bE.bQh(ft);
        this.bsK.lA(ft);
        return this
    };
    bN.iM = function() {
        return this.bsK.iM()
    };
    cF = bm.dD(".#<uispace>{width:210px;border:1px solid #aaa;font-size:14px;text-align:center;}.#<uispace> .zact{line-height:30px;overflow:hidden;zoom:1;}.#<uispace> .zact .zfl{float:left;}.#<uispace> .zact .zfr{float:right;}.#<uispace> .zact .zbtn{padding:0 5px;cursor:pointer;}.#<uispace> .zact .ztxt{margin-left:10px;}.#<uispace> .zday{table-layout:fixed;border-collapse:collapse;width:100%;}.#<uispace> .zday th{font-weight:normal;}.#<uispace> .zday a{display:block;height:22px;line-height:22px;color:#333;text-decoration:none;}.#<uispace> .zday a:hover{background:#eee;}.#<uispace> .zday a.js-extended{color:#aaa;}.#<uispace> .zday a.js-selected,.#<uispace> .zday a.js-selected:hover{background:#DAE4E7;}.#<uispace> .zday a.js-disabled,.#<uispace> .zday a.js-disabled:hover{background:#fff;color:#eee;cursor:default;}");
    cfu = bm.ee('<table class="zday"><tr>{list ["日","一","二","三","四","五","六"] as x}<th>${x}</th>{/list}</tr>{list 1..6 as x}<tr>{list 1..7 as y}<td><a href="javascript:void(0);" class="js-ztag"></a></td>{/list}</tr>{/list}</table>');
    bm.bkR(cft, '<div class="zact"><span class="zbtn zfl" title="上一年">&lt;&lt;</span><span class="zbtn zfl" title="上一月">&lt;</span><span class="zbtn zfr" title="下一年">&gt;&gt;</span><span class="zbtn zfr" title="下一月">&gt;</span><span class="ztxt"></span>年<span class="ztxt"></span>月</div>')
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    ui = NEJ.P("nej.ui"),
    tV,
    cGv = ["00:00", "00:30", "01:00", "01:30", "02:00", "02:30", "03:00", "03:30", "04:00", "04:30", "05:00", "05:30", "06:00", "06:30", "07:00", "07:30", "08:00", "08:30", "09:00", "09:30", "10:00", "10:30", "11:00", "11:30", "12:00", "12:30", "13:00", "13:30", "14:00", "14:30", "15:00", "15:30", "16:00", "16:30", "17:00", "17:30", "18:00", "18:30", "19:00", "19:30", "20:00", "20:30", "21:00", "21:30", "22:00", "22:30", "23:00", "23:30"];
    var cF = e.dD(".#<uispace> .disable{color:#aaa;}.#<uispace> .dateDay,.dateMin{border:1px solid #ccc;width:70px;height:18px;padding:4px 3px;margin:2px 5px 0 0;cursor:pointer;background-color:#fff;text-align:center;}.#<uispace> .dateMin{width:50px;margin-right:10px;background-position:41px -197px;}.#<uispace> .dateDayLayer{top:26px;left:1px;z-index:10001;}.#<uispace> .dateMinLayer{z-index:10001;top:26px;left:83px;width:57px;height:165px;background-color:#FFF;border:1px solid #ddd;box-shadow:0px 0px 4px 0px #DDD;overflow-y:scroll;font-size:13px;}.#<uispace> .dateMinLayer span{display:block;height:22px;line-height:22px;color:#999;padding:0 0 0 3px;cursor:pointer;}.#<uispace> .dateMinLayer span:hover{background-color:#ececee;}.#<uispace> .dateDayLayer .zcard{box-shadow:0px 0px 4px 0px #DDD;border:1px solid #ddd;}.#<uispace> .dateDayLayer .zact{font-size:12px;color:#333;font-family:sans-serif;}.#<uispace> .dateDayLayer .zbtn{color:#747474;}.#<uispace> .dateDayLayer .zday .js-extended{color:#ccc;}.#<uispace> .dateDayLayer .zday th{font-size: 12px;font-family: sans-serif;text-align:center;color:#333;}.#<uispace> .dateDayLayer .zday td{font-size: 12px;font-family: sans-serif;text-align:center;color:#333;}.#<uispace> .dateDayLayer .zday a{font-size:10px;font-family:sans-serif;color:#666;}.#<uispace> .dateDayLayer .zday a.js-selected{background-color:#83b600;color:#fff;}.#<uispace> .dateDayLayer .zday a.js-disabled{color:#eee;}");
    var eg = e.bY('<div class="u-datePick"><div class="f-fl dateDay j-dateDay">日期</div><div class="f-pa dateDayLayer j-dateDayLayer"></div><div class="f-fl dateMin j-dateMin">时刻</div><div class="f-pa f-dn dateMinLayer j-dateMinLayer"></div></div>');
    eu.ic = NEJ.C();
    tV = eu.ic.bu(eu.cq, true);
    tV.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    tV.bP = function() {
        this.bQ();
        this.xc = e.bc(this.bb, "j-dateDay")[0];
        this.qN = e.bc(this.bb, "j-dateMin")[0];
        this.cGt = e.bc(this.bb, "j-dateDayLayer")[0];
        this.Ev = e.bc(this.bb, "j-dateMinLayer")[0]
    };
    tV.bF = function(Y) {
        this.bI(Y);
        this.cfq = Y.notShowHM;
        this.pa = Y.range || null;
        this.bDQ(Y.date || null);
        this.cfp()
    };
    tV.cfp = function() {
        v.dY(this.xc, "click");
        v.dY(this.qN, "click");
        v.bf(this.xc, "click", this.cGq.Z(this));
        v.bf(this.qN, "click", this.bDW.Z(this));
        v.bf(document, "click",
        function() {
            e.bJ(this.Ev, "f-dn")
        }.Z(this, null));
        this.Ev.innerHTML = "";
        u.bA(cGv,
        function(Rt, bd) {
            this.Ev.innerHTML += "<span>" + Rt + "</span>"
        }.Z(this));
        var cGp = e.cS(this.Ev);
        u.bA(cGp,
        function(bo, bd) {
            v.bf(bo, "click",
            function() {
                this.qN.innerText = bo.innerText;
                var cfo = bo.innerText.split(":");
                this.bat = Number(cfo[0]) * 36e5 + Number(cfo[1]) * 6e4;
                this.bDW()
            }.Z(this))
        }.Z(this));
        if ( !! this.cfq) {
            eu.bt(this.qN);
            eu.bt(this.Ev)
        }
    };
    tV.bDQ = function(bEe) {
        if ( !! bEe) {
            var ki = new Date;
            ki.setTime(bEe);
            var jY = ki.getHours(),
            kj = ki.getMinutes();
            this.xc.innerText = ki.getFullYear() + "-" + (ki.getMonth() + 1) + "-" + ki.getDate();
            this.qN.innerText = (jY < 10 ? "0" + jY: jY) + ":" + (kj < 10 ? "0" + kj: kj);
            this.bat = jY * 36e5 + kj * 6e4;
            this.bsH = bEe - this.bat
        } else {
            if ( !! this.cfq) {
                this.xc.innerText = "选择日期"
            } else {
                this.xc.innerText = "日期"
            }
            this.qN.innerText = "时刻";
            this.bsH = 0;
            this.bat = 0
        }
    };
    tV.cGq = function(bj) {
        if ( !! bj) v.dK(bj);
        this.bn("onClick");
        this.bn("onDateClick");
        this.bDW();
        if (!this.tR) {
            e.bJ(this.xc, "selected");
            this.tR = ui.bkJ.bh({
                parent: this.cGt,
                range: this.pa
            });
            this.tR.bf("onchange",
            function(W) {
                this.xc.innerText = W.getFullYear() + "-" + (W.getMonth() + 1) + "-" + W.getDate();
                this.bsH = Date.parse(W)
            }.Z(this))
        }
    };
    tV.bDW = function(bj) {
        if ( !! bj) {
            v.nS(bj);
            if (e.hJ(this.qN, "selected")) {
                e.bZ(this.qN, "selected");
                e.bJ(this.Ev, "f-dn")
            } else {
                e.bJ(this.qN, "selected");
                e.bZ(this.Ev, "f-dn")
            }
            this.bn("onClick");
            this.bn("onMinClick")
        } else {
            e.bZ(this.qN, "selected");
            e.bJ(this.Ev, "f-dn")
        }
        if ( !! this.tR) {
            e.bZ(this.xc, "selected");
            this.tR = ui.bkJ.bg(this.tR)
        }
    };
    tV.iM = function() {
        var cGk = {
            day: this.bsH,
            hour: this.bat,
            totalData: this.bsH + this.bat
        };
        return cGk
    };
    tV.lA = function(ft) {
        this.bDQ(ft)
    };
    tV.sz = function() {
        v.dY(this.xc, "click");
        v.dY(this.qN, "click");
        e.bJ(this.xc, "disable");
        e.bJ(this.qN, "disable")
    };
    tV.pj = function() {
        e.bZ(this.xc, "disable");
        e.bZ(this.qN, "disable");
        this.bDQ(null);
        this.cfp()
    };
    tV.baK = function() {
        e.bJ(this.Ev, "f-dn");
        e.bZ(this.qN, "selected")
    };
    tV.EB = function() {
        this.baK();
        if ( !! this.tR) {
            this.tR.fs()
        }
    };
    tV.bL = function() {
        e.bZ(this.xc, "disable");
        e.bZ(this.qN, "disable");
        e.bZ(this.qN, "selected");
        e.bJ(this.Ev, "f-dn");
        v.dY(this.xc, "click");
        v.dY(this.qN, "click");
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    gq,
    fz = "ck-courseCreateCache";
    p.qY = NEJ.C();
    gq = p.qY.bu(p.hA);
    gq.cGh = function(cd) {
        this.bK({
            key: fz + bD,
            url: "TermDraftBean.getTermContent",
            param: [cd],
            onload: this.bEt.Z(this)
        })
    };
    gq.bEt = function(W) {
        this.bn("onGetTermDto", W)
    };
    gq.cfl = function(cd, cGe) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "TermDraftBean.publishChapter",
            param: [cd, cGe],
            onload: this.cGc.Z(this)
        })
    };
    gq.cGc = function(W) {
        this.bn("onPublishChapter", W)
    };
    gq.bsD = function(rc, Rm) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "MocAdminQuizBean.publishTest",
            param: [rc, Rm],
            onload: this.cGb.Z(this)
        })
    };
    gq.cGb = function(W) {
        this.bn("onPublishTest", W)
    };
    gq.cFZ = function(cFY) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "TermDraftBean.appendChapterInfo",
            param: [cFY],
            onload: this.cFX.Z(this)
        })
    };
    gq.cFX = function(W) {
        this.bn("onAppendChapterInfo", W)
    };
    gq.cFV = function(EJ) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "TermDraftBean.updateChapterInfo",
            param: [EJ],
            onload: this.bbz.Z(this)
        })
    };
    gq.bbz = function(W) {
        this.bn("onUpdateChapterInfo", W)
    };
    gq.cFU = function(EJ) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "TermDraftBean.deleteChapterInfo",
            param: [EJ],
            onload: this.bEZ.Z(this)
        })
    };
    gq.bEZ = function(W) {
        this.bn("onDeleteChapterInfo", W)
    };
    gq.cFT = function(rc) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "TermDraftBean.appendLessonInfo",
            param: [rc],
            onload: this.cFS.Z(this)
        })
    };
    gq.cFS = function(W) {
        this.bn("onAppendLessonInfo", W)
    };
    gq.cFR = function(rc) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "TermDraftBean.updateLessonInfo",
            param: [rc],
            onload: this.cFQ.Z(this)
        })
    };
    gq.cFQ = function(W) {
        this.bn("onUpdateLessonInfo", W)
    };
    gq.cFP = function(cd, cFO, fa) {
        this.bK({
            key: fz + bD,
            url: "CourseBean.getLessonInfo",
            param: [cd, cFO, fa],
            onload: this.bFu.Z(this)
        })
    };
    gq.bFu = function(W) {
        this.bn("ongetLessonUnits", W)
    };
    gq.cfj = function(rc) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "TermDraftBean.deleteLessonInfo",
            param: [rc],
            onload: this.cFL.Z(this)
        })
    };
    gq.cFL = function(W) {
        this.bn("onDeleteLessonInfo", W)
    };
    gq.bFD = function(lp, bsA) {
        if (!eu.dM()) return;
        var cJ = "TermDraftBean." + ( !! lp.id ? "updateLessonUnit": "appendLessonUnit");
        this.bK({
            key: fz + bD,
            url: cJ,
            param: [lp],
            onload: this.bFH.Z(this, lp, bsA)
        })
    };
    gq.bFH = function(lp, bsA, W) {
        if (bsA == "name") {
            this.bn("onappendLessonUnit", W, lp)
        } else if (bsA == "content") {
            this.bn("onupdateLessonUnitContent", W, lp)
        } else {
            this.bn("onupdateLessonUnitJsonContent", W, lp)
        }
    };
    gq.cFK = function(lp) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "TermDraftBean.deleteLessonUnit",
            param: [lp],
            onload: this.bFJ.Z(this, lp)
        })
    };
    gq.bFJ = function(W) {
        this.bn("ondeleteLessonUnit", W)
    };
    gq.cFI = function(lp, ia) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "TermDraftBean.moveLessonUnit",
            param: [lp, ia],
            onload: this.cFH.Z(this)
        })
    };
    gq.cFH = function(lp, W) {
        this.bn("onmoveLessonUnit", W)
    };
    gq.bsz = function(xo, bFQ) {
        this.bK({
            key: fz + bD,
            url: "CourseBean.getLessonUnitPreviewVo",
            param: [xo, bFQ],
            onload: this.cFF.Z(this)
        })
    };
    gq.cFF = function(W) {
        this.bn("ongetLessonUnitPreviewVo", W)
    };
    gq.bFV = function(tH) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "MocResourceBean.saveContentForResource",
            param: [tH],
            onload: this.MI.Z(this, tH.type)
        })
    };
    gq.MI = function(bcu, W) {
        this.bn("onsaveResource", W, bcu)
    };
    gq.cFE = function(bcx) {
        if (!eu.dM()) return;
        this.bK({
            key: fz + bD,
            url: "MocAdminQuizBean.generateLessonUnitTest",
            param: [bcx],
            onload: this.bsx.Z(this)
        })
    };
    gq.bsx = function(W) {
        this.bn("onGenerateLessonUnitTest", W)
    };
    gq.cFz = function(cd) {
        this.bK({
            key: fz + bD,
            url: "MocSettingBean.getTermTutorialDto",
            param: [cd],
            onload: this.cFx.Z(this)
        })
    };
    gq.cFx = function(W) {
        this.bn("onGetTermGuideData", W)
    };
    gq.bGi = function(cd, bz) {
        this.bK({
            key: fz + bD,
            url: "TermDraftBean.getOnlineReleaseTime",
            param: [cd, bz],
            onload: this.Re.Z(this)
        })
    };
    gq.Re = function(W) {
        this.bn("onGetOnlineReleaseTime", W)
    };
    gq.cFw = function(cd) {
        this.bK({
            key: fz + bD,
            url: "TermCopyBean.getTermsForCopy",
            param: [cd],
            onload: this.cFv.Z(this)
        })
    };
    gq.cFv = function(W) {
        this.bn("onGetTermsForCopy", W)
    };
    gq.cFt = function(fh) {
        this.bK({
            key: fz + bD,
            url: "TermCopyBean.getAllTermsOfCourse",
            param: [fh],
            onload: this.cFq.Z(this)
        })
    };
    gq.cFq = function(W) {
        this.bn("onGetAllTermsOfCourse", W)
    };
    gq.cFo = function(sC, bGA) {
        this.bK({
            key: fz + bD,
            url: "TermCopyBean.copyTerm",
            param: [sC, bGA],
            onload: this.cFl.Z(this)
        })
    };
    gq.cFl = function(W) {
        this.bn("onCopyTerm", W)
    };
    gq.cFj = function(sC, bGA) {
        this.bK({
            key: fz + bD,
            url: "TermCopyBean.copySpocTerm",
            param: [sC, bGA],
            onload: this.cFi.Z(this)
        })
    };
    gq.cFi = function(W) {
        this.bn("onCopySpocTerm", W)
    };
    gq.bst = function(cd) {
        this.bK({
            key: fz + bD,
            url: "TermCopyBean.watchCopyTermStatus",
            param: [cd],
            notShowLoading: true,
            onload: this.cFh.Z(this)
        })
    };
    gq.cFh = function(W) {
        this.bn("onWatchCopyTermStatus", W)
    };
    gq.cFg = function(cd, CL) {
        this.bK({
            key: fz + bD,
            url: "CourseBean.validateTermPassword",
            param: [cd, CL],
            onload: this.cFe.Z(this)
        })
    };
    gq.cFe = function(W) {
        this.bn("onValidateTermPassword", W)
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    GT,
    bss = "ck-mocResourceCache";
    p.Uf = NEJ.C();
    GT = p.Uf.bu(p.hA);
    GT.bFV = function(tH, fh) {
        if (!eu.dM()) return;
        this.bK({
            key: bss + bD,
            url: "MocResourceBean.saveContentForResource",
            param: [tH, fh],
            onload: this.MI.Z(this, tH.type)
        })
    };
    GT.MI = function(bcu, W) {
        this.bn("onsaveResource", W, bcu)
    };
    GT.cfe = function(cd, bGT) {
        this.bK({
            key: bss + bD,
            url: "MocResourceBean.getAllVideoResourcePagination",
            param: [cd, bGT],
            onload: this.cFb.Z(this)
        })
    };
    GT.cFb = function(W) {
        this.bn("ongetVideoResource", W)
    };
    GT.cEY = function(cd) {
        this.bK({
            key: bss + bD,
            url: "MocResourceBean.getRecentUnusedVideos",
            param: [cd],
            onload: this.cEX.Z(this)
        })
    };
    GT.cEX = function(W) {
        this.bn("ongetRecentUnusedVideos", W)
    };
    GT.cET = function(cER, fh, cd) {
        if (!eu.dM()) return;
        this.bK({
            key: bss + bD,
            url: "MocResourceBean.deleteTargetVideo",
            param: [cER, fh, cd],
            onload: this.cEQ.Z(this)
        })
    };
    GT.cEQ = function(W) {
        this.bn("ondeleteTargetVideo", W)
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    bD = u.eW(),
    bHd,
    cEO = "ck-uploadCache";
    d.bsr = NEJ.C();
    bHd = d.bsr.bu(d.hA);
    bHd.cfc = function(cEF, cEE) {
        switch (cEF) {
        case 1:
            var cJ = "FileUploaderBean.getUploaderTokenByType";
            var jr = [cEE];
            break;
        case 2:
            var cJ = "FileUploaderBean.getUploaderTokenAndPublicBucket";
            var jr = [];
            break;
        case 3:
            var cJ = "FileUploaderBean.getUploaderTokenWithNoLogon";
            var jr = [];
            break
        }
        this.bK({
            key: cEO + bD,
            url: cJ,
            param: jr,
            onload: this.ZO.Z(this)
        })
    };
    bHd.ZO = function(W) {
        this.bn("ongetToken", W)
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    dx = NEJ.P("nej.g"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    d = NEJ.P("edu.d"),
    j = NEJ.P("nej.j"),
    xs;
    var du = e.ee('<div class="u-upload"><form class="j-uploadForm" action="" enctype="multipart/form-data"><div class="upload f-ib"><a class="j-upload showIpt u-btn u-btn-default" ><span class="j-txt">+上传</span><input name="file" type="file" class="j-upload realIpt" title=""></a></div></form></div>');
    eu.oC = NEJ.C();
    xs = eu.oC.bu(eu.cq, true);
    xs.bU = function() {
        this.bW = e.bY(e.bX(du));
    };
    xs.bP = function() {
        this.bQ();
        this.QT = e.bc(this.bb, "j-upload");
        this.bew = this.QT[0];
        this.GO = e.bc(this.bb, "j-txt")[0];
        this.bsq = e.bc(this.bb, "j-uploadForm")[0];
        this.Nw = new d.bsr;
        this.Nw.bf("ongetToken", this.ZO.Z(this))
    };
    xs.ceW = function() {
        this.Nw.cfc(this.cEC, this.cEB)
    };
    xs.ZO = function(W) {
        if ( !! W) {
            this.bsp = W.token;
            if (!this.NB) {
                this.NB = W.bucket
            }
            this.bso()
        }
    };
    xs.beY = function() {
        this.bew.innerHTML = '<span class="j-txt">' + this.bfc + '</span><input name="file" type="file" class="j-upload realIpt" title="">';
        this.GM = e.cS(this.bew)[1];
        this.hd([[this.GM, "change", this.ceW.Z(this)]])
    };
    xs.rt = function() {
        if (eu.cjc() && !!this.QR) {
            eu.cSv(this.QP)
        } else {
            j.rt(this.QP)
        }
        this.QP = null;
        this.beY()
    };
    xs.ceU = function(W) {
        if ( !! W) {
            if ( !! this.QP) {
                W.reqId = this.QP
            }
            W.initOffset = W.initOffset || 0;
            this.bn("onupdateProgress", W)
        } else {}
    };
    xs.xt = function(W) {
        if ( !! W) {
            if (!W.retSuc && W.errorCode == 40) {
                this.ceW();
                return
            }
            W.name = this.YY;
            W.bucket = this.NB;
            this.beY();
            this.bn("onFinishUpload", W)
        }
    };
    xs.ceT = function(W) {
        if ( !! W) {
            W.name = this.YY;
            this.beY();
            this.bn("onUploadError", W)
        }
    };
    xs.bso = function() {
        var jq = this.GM.value;
        while (jq.indexOf("\\") != -1) {
            jq = jq.slice(jq.lastIndexOf("\\") + 1)
        }
        if ( !! this.sF && !this.sF(jq)) {
            this.beY();
            return
        }
        this.YY = jq;
        var W = {
            name: this.YY,
            curTime: (new Date).getTime()
        };
        if ( !! this.YY) {
            this.bn("beginUpload", W)
        }
        if (eu.cjc() && !!this.QR) {
            this.QP = eu.cSK({
                file: this.GM.files[0],
                onuploading: this.ceU.Z(this),
                onload: this.xt.Z(this),
                onerror: this.ceT.Z(this),
                form: this.bsq,
                token: this.bsp,
                bucket: this.NB
            });
            return
        }
        var Y = {
            type: "json",
            mode: this.ih,
            method: "POST",
            cookie: true,
            onuploading: this.ceU.Z(this),
            onload: this.xt.Z(this),
            onerror: this.ceT.Z(this)
        };
        this.bsq.action = this.ceS + (this.ceS.indexOf("?") >= 0 ? "&": "?") + "_upload_mth_=sync_parse&token=" + encodeURIComponent(this.bsp) + "&bucket=" + encodeURIComponent(this.NB);
        this.QP = j.cmZ(this.bsq, Y)
    };
    xs.bF = function(Y) {
        this.bI(Y);
        this.QP = null;
        this.bfc = this.GO.innerText = Y.txt || "+上传";
        this.ih = Y.mode || 0;
        this.ceS = this.bsq.action = g.uploadHost + (Y.action || "/file/multipartUpload.htm");
        this.bb.title = Y.title || "";
        this.QR = Y.supportAnchor == false ? false: true;
        this.sF = Y.verifyFile;
        this.cEC = Y.needAuth || 1;
        this.cEB = Y.tokenType;
        this.NB = Y.bucket;
        this.beY()
    };
    xs.bL = function() {
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    b = NEJ.P("nej.p"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    j = NEJ.P("nej.j"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    lu,
    cEw;
    eu.bsn = NEJ.C();
    lu = eu.bsn.bu(eu.cq, true);
    cEw = eu.bsn.cE;
    lu.bP = function() {
        this.Bh = u.eW(2);
        this.ne = NEJ.P("edu.u.FlashVideoPlayer" + this.Bh);
        this.bQ();
        this.SW()
    };
    lu.SW = function() {
        this.ne.playEndHandle = this.cEr.Z(this);
        this.ne.anchorHandle = this.bIw.Z(this);
        this.ne.changeVolume = this.cEj.Z(this);
        this.ne.changeMute = this.cEi.Z(this);
        this.ne.seek = this.cEh.Z(this);
        this.ne.selectResolution = this.cEg.Z(this);
        this.ne.logInfo = this.cEd.Z(this);
        this.ne.trackPlayClick = this.cEc.Z(this);
        this.ne.trackConnectTime = this.cDZ.Z(this);
        this.ne.onCutComplete = this.cDX.Z(this);
        this.ne.onCutError = this.cDW.Z(this);
        this.ne.onCutProgress = this.cDV.Z(this)
    };
    lu.dlG = function(cI) {
        this.dlH(function() {
            if (!cI) {
                return
            }
            this.FA = cI;
            this.lO.cutVideo({
                onComplete: "onCutComplete",
                onError: "onCutError",
                onProgress: "onCutProgress",
                uploadUrl: cI.uploadUrl || "http://upload.photo.163.com/anony/web/upload/userdefinesize?sitefrom=imooc&responsetype=xml&userdefinesize=600x400x0;"
            })
        }.Z(this))
    };
    lu.cDX = function(W) {
        if ( !! this.FA && this.FA.onComplete) {
            this.FA.onComplete(W)
        }
    };
    lu.cDW = function(W) {
        if ( !! this.FA && this.FA.onError) {
            this.FA.onError(W)
        }
    };
    lu.cDV = function(W) {
        if ( !! this.FA && this.FA.onProgress) {
            this.FA.onProgress(W)
        }
    };
    lu.cEc = function() {
        this.bn("onPlay")
    };
    lu.cDZ = function(bsh) {
        this.bn("onWait", bsh)
    };
    lu.cEg = function(FC) {
        this.bn("onChangeQuality", FC)
    };
    lu.cEj = function(FD) {
        this.bn("onChangeVolume", FD)
    };
    lu.cEi = function(bgF) {
        this.bn("onChangeMute", bgF)
    };
    lu.cEh = function(gK) {
        this.bn("onSeek", gK)
    };
    lu.cEd = function(eK) {
        eu.eE("video", "error", eK);
        if ( !! console && !!console.log) {
            console.log(eK)
        }
    };
    lu.cEr = function() {
        this.bn("onPlayEnd")
    };
    lu.bIw = function(W) {
        this.bn("onAnchorPoint", W)
    };
    lu.dK = function() {
        this.lO && this.lO.nejstop()
    };
    lu.ceK = function() {
        this.lO && this.lO.pause()
    };
    lu.wJ = function() {
        this.lO && this.lO.nejplay()
    };
    lu.bcO = function() {
        return !! this.lO ? this.lO.getPosition() : null
    };
    lu.ceJ = function(bgK) {
        this.lO && this.lO.seekTime(bgK)
    };
    lu.bgL = function() {
        return this.lO.getState()
    };
    lu.bL = function() {
        delete this.lO;
        delete this.FA;
        this.bO()
    };
    lu.bF = function(Y) {
        var yn = Y.videoInfo;
        e.Gp({
            src: g.imageUrlMap.image_video_swf,
            width: "100%",
            height: "100%",
            parent: Y.parent,
            params: {
                wmode: "transparent",
                allowscriptaccess: "always",
                allowFullScreen: !Y.notAllowFullScreen,
                flashvars: "namespace=edu.u.FlashVideoPlayer" + this.Bh + "&host=" + location.protocol + "//" + location.host + "&staticHost=http://" + g.moocStaticHost + "&isAutoPlay=" + yn.autoStart + "&volume=" + yn.videoVolume + "&mute=" + !yn.hasVolume
            },
            onready: function(lR) {
                this.lO = lR;
                this.bn("onLoad")
            }.Z(this)
        });
        this.bI(Y)
    };
    lu.UA = function(yn) {
        this.lO && this.lO.load(yn)
    }
})(); (function() {
    var fX = window.eduPlayer || {};
    fX.u = {};
    fX.u.f = function() {};
    fX.u.log = function(str) {
        var logNode = document.getElementById("eventLog");
        if (logNode) logNode.innerHTML = logNode.innerHTML + str + "<br/>"
    };
    fX.u.toString = Object.prototype.toString;
    fX.u.trim = function(str) {
        return (str || "").replace(/(^\s*)|(\s*$)/g, "")
    };
    fX.u.isFunction = function(fn) {
        return fX.u.toString.call(fn) === "[object Function]"
    };
    fX.u.slice = Array.prototype.slice;
    fX.u.hasOwnProperty = Object.prototype.hasOwnProperty;
    fX.u.stringify = function(Object) {
        return JSON.stringify(Object)
    };
    fX.u.isEmpty = function(obj) {
        for (var p in obj) {
            if (p !== undefined && fX.u.hasOwnProperty.call(obj, p)) {
                return false
            }
        }
        return true
    };
    fX.u.extend = function(obj1, obj2) {
        if (!obj2) return obj1;
        for (var p in obj2) {
            if (fX.u.hasOwnProperty.call(obj2, p)) {
                obj1[p] = obj2[p]
            }
        }
        return obj1
    };
    fX.u.extend(Function.prototype,
    function() {
        function bind(context) {
            if (arguments[0] === undefined) return this;
            if (!fX.u.isFunction(this)) {
                throw new TypeError("Context must be function")
            }
            var CJ = this;
            var args = fX.u.slice.call(arguments, 1);
            var returnFn = function() {
                var a = args.contact(arguments);
                return CJ.apply(context, a)
            };
            var f = function() {};
            f.prototype = this.prototype;
            returnFn.prototype = new f;
            return returnFn
        }
        return {
            bind: bind
        }
    });
    fX.u.C = function() {
        var eI = function() {
            return this.kg.apply(this, arguments)
        };
        eI.pro = eI.prototype;
        eI.extend = function(superClass) {
            if (!fX.u.isFunction(superClass)) {
                throw new TypeError("SuperClass must be a function")
            }
            var ceI = function() {};
            ceI.prototype = superClass.prototype;
            this.prototype = new ceI;
            var yo = this.prototype;
            yo.constructor = this;
            if (yo.kg === undefined) {
                yo.kg = fX.u.f
            }
            this.prototype.ry = superClass.prototype;
            this.superClass = superClass;
            return yo
        };
        return eI
    };
    fX.u.createEl = function(tagName, attrs) {
        var el = document.createElement(tagName || "div");
        if (attrs) {
            for (var p in attrs) {
                if (fX.u.hasOwnProperty.call(attrs, p)) {
                    el[p] = attrs[p]
                }
            }
        }
        return el
    };
    fX.u.T = function(tag, ele) {
        ele = !!ele[0] ? ele[0] : ele || document;
        return ! tag ? null: ele.getElementsByTagName(tag)
    };
    fX.u.each = function(obj, fn, context) {
        var length = obj.length,
        isObj, name;
        isObj = length === undefined || fX.u.isFunction(obj);
        if (isObj) {
            for (name in obj) {
                if (fn.call(context || this, name, obj[name]) === false) {
                    break
                }
            }
        } else {
            for (var i = 0; i < length; i++) {
                if (fn.call(context || this, i, obj[i]) === false) {
                    break
                }
            }
        }
        return obj
    };
    fX.u.getById = function(id) {
        return document.getElementById(id) || null
    };
    fX.u.getByClassName = function(classname, ele, tag) {
        var returns = [];
        ele = ele || document;
        tag = tag || "*";
        if (ele.getElementsByClassName) {
            var eles = ele.getElementsByClassName(classname);
            if (tag != "*") {
                for (var i = 0,
                l = eles.length; i < l; i++) {
                    if (eles[i].tagName.toLowerCase() == tag.toLowerCase()) {
                        returns.push(eles[i])
                    }
                }
            } else {
                returns = eles
            }
        } else {
            var classname = this.trim(classname);
            var eles = fX.u.T(tag, ele);
            var reg = new RegExp("(^|\\b)" + classname + "(\\b|$)");
            for (var i = 0,
            l = eles.length; i < l; i++) {
                var tagclass = eles[i].className;
                reg.test(tagclass) && returns.push(eles[i])
            }
        }
        return returns
    };
    fX.u.before = function(targetEle, newEle) {
        if (targetEle.nodeType && targetEle.parentNode) targetEle.parentNode.insertBefore(newEle, targetEle)
    };
    fX.u.after = function(targetEle, newEle) {
        var parent = targetEle.parentNode;
        if (parent.lastChild == targetEle) {
            parent.appendChild(newEle)
        } else {
            parent.insertBefore(newEle, targetEle.nextSibling)
        }
    };
    fX.u.hasClassName = function(ele, className) {
        var classes = ele.className;
        if (!classes) return false;
        if (classes == className) return true;
        return ele.className.search("\\b" + className + "\\b") != -1
    };
    fX.u.addClassName = function(ele, className) {
        if (this.hasClassName(ele, className)) return;
        if (ele.className || ele.className == "") {
            className = " " + className;
            ele.className = this.trim(ele.className) + className
        }
    };
    fX.u.delClassName = function(ele, className) {
        if (typeof ele == "string") {
            ele = document.getElementById(ele)
        }
        ele.className = ele.className.replace(new RegExp("\\b" + className + "\\b\\s*"), "")
    };
    fX.u.getChildren = function(ele) {
        if (typeof ele == "string") {
            ele = document.getElementById(ele)
        }
        if (ele.children) {
            return this.slice.call(ele.children, 0)
        } else {
            var bH = [];
            for (var i = 0; i < bC.childNodes; i++) {
                if (bC.childNodes[i].nodeType == 1) {
                    bH.push(bC.childNodes[i])
                }
            }
            return bH
        }
    };
    fX.u.on = function(ele, event, handler) {
        if (ele.addEventListener) {
            ele.addEventListener(event, handler, false)
        } else if (ele.attachEvent) {
            ele.attachEvent("on" + event, handler)
        }
    };
    fX.u.off = function(ele, event, handler) {
        if (ele.removeEventListener) {
            ele.removeEventListener(event, handler, false)
        } else if (ele.detachEvent) {
            ele.detachEvent("on" + event, handler)
        }
    };
    fX.u.getEvent = function(event) {
        if (document.all) return window.event;
        var func = this.getEvent.caller;
        while (func != null) {
            var arg0 = func.arguments[0];
            if (arg0) {
                if (arg0.constructor == Event || arg0.constructor == MouseEvent || typeof arg0 == "object" && arg0.preventDefault && arg0.stopPropagation) {
                    return arg0
                }
            }
            func = func.caller
        }
        return null
    };
    fX.u.stopEvent = function(e, preventDefault, stopPropagation) {
        var preventDefault = preventDefault == undefined ? true: preventDefault;
        var stopPropagation = stopPropagation == undefined ? true: stopPropagation;
        var e = e || window.event;
        if (!e) {
            e = getEvent()
        }
        if (!e) {
            return null
        }
        if (preventDefault) {
            if (e.preventDefault) {
                e.preventDefault()
            } else {
                e.returnValue = false
            }
        }
        if (stopPropagation) {
            if (e.stopPropagation) {
                e.stopPropagation()
            } else {
                e.cancelBubble = true
            }
        }
        return e
    };
    fX.u.getMousePos = function(e) {
        if (!e) {
            e = getEvent()
        }
        if (e.pageX || e.pageY) {
            return {
                x: e.pageX,
                y: e.pageY
            }
        }
        if (document.documentElement && document.documentElement.scrollTop) {
            return {
                x: e.clientX + document.documentElement.scrollLeft - document.documentElement.clientLeft,
                y: e.clientY + document.documentElement.scrollTop - document.documentElement.clientTop
            }
        }
        if (document.body) {
            return {
                x: e.clientX + document.body.scrollLeft - document.body.clientLeft,
                y: e.clientY + document.body.scrollTop - document.body.clientTop
            }
        }
    };
    fX.u.getScrollX = function() {
        if (typeof window.pageXOffset == "number") {
            return window.pageXOffset
        }
        var d = document.documentElement;
        if (d && typeof d.scrollLeft == "number") {
            return d.scrollLeft
        }
        var b = document.body;
        if (b && typeof b.scrollLeft == "number") {
            return b.scrollLeft
        }
        return 0
    };
    fX.u.getScrollY = function() {
        if (typeof window.pageYOffset == "number") {
            return window.pageYOffset
        }
        var d = document.documentElement;
        if (d && typeof d.scrollTop == "number") {
            return d.scrollTop
        }
        var b = document.body;
        if (b && typeof b.scrollTop == "number") {
            return b.scrollTop
        }
        return 0
    };
    fX.u.getStyle = function(ele, sty) {
        var cDM = window.getComputedStyle(ele, null) || ele.currentStyle;
        return cDM[sty]
    };
    fX.u.setStyle = function(ele, sty, value) {
        ele.style[sty] = value
    };
    fX.u.getElePos = function() {
        if (document.documentElement.getBoundingClientRect) {
            return function(ele) {
                var box = ele.getBoundingClientRect();
                return {
                    x: box.left + fX.u.getScrollX(),
                    y: box.top + fX.u.getScrollY()
                }
            }
        } else {
            return function(ele) {
                var x = 0,
                y = 0;
                if ( !! window.opera) {
                    do {
                        x += ele.offsetLeft;
                        y += ele.offsetTop
                    } while ( ele = ele . offsetParent )
                } else {
                    do {
                        x += ele.offsetLeft + parseInt(getStyle(ele, "border-left-width"));
                        y += ele.offsetTop + parseInt(getStyle(ele, "border-top-width"))
                    } while ( ele = ele . offsetParent )
                }
                return {
                    x: x,
                    y: y
                }
            }
        }
    } ();
    fX.u.offset = function(elem) {
        var box = {
            top: 0,
            left: 0
        },
        doc = elem && elem.ownerDocument,
        docElem = doc.documentElement;
        if (elem.getBoundingClientRect) {
            box = elem.getBoundingClientRect()
        }
        return {
            top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || 0),
            left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || 0)
        }
    };
    fX.u.loadImg = function(url, callback) {
        var img = new Image;
        img.src = url;
        if (img.complete) {
            callback(img, img.width, img.height);
            return
        }
        img.onload = function() {
            img.onload = null;
            callback(img, img.width, img.height)
        }
    };
    fX.u.isTypeOf = function(W, bz) {
        bz = bz.toLowerCase();
        if (W === null) return bz == "null";
        if (W === undefined) return bz == "undefined";
        return this.toString.call(W).toLowerCase() == "[object " + bz + "]"
    };
    fX.u.ajax = function(conf) {
        var type = conf.type;
        var url = conf.url;
        var data = conf.data;
        var dataType = conf.dataType;
        var success = conf.success;
        var createAjax = function() {
            var xhr = null;
            try {
                xhr = new ActiveXObject("microsoft.xmlhttp")
            } catch(e1) {
                try {
                    xhr = new XMLHttpRequest
                } catch(e2) {
                    window.alert("您的浏览器不支持ajax，请更换！")
                }
            }
            return xhr
        };
        if (type == null) {
            type = "get"
        }
        if (dataType == null) {
            dataType = "text"
        }
        var xhr = createAjax();
        xhr.open(type, url, true);
        if (type == "GET" || type == "get") {
            xhr.send(null)
        } else if (type == "POST" || type == "post") {
            xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");
            xhr.send(data)
        }
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4 && xhr.status == 200) {
                if (dataType == "text" || dataType == "TEXT") {
                    if (success != null) {
                        success(xhr.responseText)
                    }
                } else if (dataType == "xml" || dataType == "XML") {
                    if (success != null) {
                        success(xhr.responseXML)
                    }
                } else if (dataType == "json" || dataType == "JSON") {
                    if (success != null) {
                        success(eval("(" + xhr.responseText + ")"))
                    }
                }
            }
        }
    };
    fX.u.formatTime = function(lX) {
        var hour, min, sec;
        sec = Math.floor(lX % 60);
        sec = sec >= 10 ? sec: "0" + sec;
        min = Math.floor(lX / 60);
        min = min >= 10 ? min: "0" + min;
        hour = Math.floor(lX / 3600);
        if (hour == 0) {
            return min + " : " + sec
        } else {
            hour = hour >= 10 ? hour: "0" + hour;
            return hour + " : " + min + " : " + sec
        }
    };
    window.eduPlayer = fX
})(); (function() {
    var cr = eduPlayer;
    var cDK = window.logConfig || {};
    var bsg = function(cDJ) {
        return !! cDK[cDJ] && !!console
    };
    var eK = function(cQ) {
        if (!bsg("info")) return;
        console.log("[INFO]" + cQ)
    };
    var cDI = function(cQ) {
        if (!bsg("warn")) return;
        console.log("[WARN]" + cQ)
    };
    var jT = function(cQ) {
        if (!bsg("error")) return;
        console.log("[ERROR]" + cQ)
    };
    var cDE = function(cQ, cI) {
        if (!bsg("infoObj") || !console.table) return;
        if (cI != undefined) {
            console.log("[INFO]" + cQ);
            console.table(cI)
        } else {
            console.table(cQ)
        }
    };
    cr.logUtil = {
        info: eK,
        warn: cDI,
        error: jT,
        infoObj: cDE
    }
})(); (function() {
    var cr = eduPlayer;
    cr.defaultPlayerConfig = {
        autoPlay: true,
        volume: .8,
        mute: false,
        videoRetio: 16 / 9,
        qualityList: {
            SD: "标清",
            HD: "高清",
            SHD: "超清"
        }
    };
    cr.CONST = {
        SUBTITLE_CN: "中文",
        SUBTITLE_OTHER: "外文"
    };
    window.logConfig = {
        info: true,
        warn: true,
        error: true,
        infoObj: true
    }
})(); (function() {
    eduPlayer.dispatcher = eduPlayer.u.C();
    var dpro = eduPlayer.dispatcher.pro;
    dpro.kg = function() {
        this.pU = {};
        return this
    };
    dpro.qd = function() {
        if ( !! this.rM) {
            this.rM.style.display = "block"
        }
        return this
    };
    dpro.cDD = function() {
        if ( !! this.rM) {
            this.rM.style.display = "none"
        }
        return this
    };
    dpro.kI = function(event, handler) {
        if (!eduPlayer.u.isFunction(handler)) {
            throw new TypeError("Event handler must be a function")
        }
        this.pU[event] = handler;
        return this
    };
    dpro.dlI = function(event, handler) {
        this.kI(event,
        function(e) {
            handler.call(this, e);
            this.cDB(event, arguments.callee)
        });
        return this
    };
    dpro.dlJ = function(event) {
        if (event === undefined) {
            return ! eduPlayer.isEmpty(this.pU)
        } else {
            var e = this.pU[event];
            return e !== undefined
        }
    };
    dpro.cDB = function(event, handler) {
        eduPlayer.each(this.pU,
        function(eventName, fn) {
            if (eventName === event) {
                if (handler !== undefined && handler == fn) {
                    this.pU[eventName] = undefined;
                    delete this.pU[eventName]
                }
            }
        },
        this);
        return this
    };
    dpro.cDy = function() {
        this.pU = {}
    };
    dpro.gO = function(event, data) {
        var handler = this.pU[event];
        if (handler !== undefined) {
            var e = {
                type: event,
                data: data === null || data === undefined ? {}: data
            };
            return handler.call(this, e)
        } else {
            return
        }
    }
})(); (function() {
    var cr = eduPlayer;
    cr.stringUtil = {
        formatTime: function(rC) {
            rC = rC || 0;
            var kj = parseInt(rC / 60);
            var CR = parseInt(rC % 60);
            return (kj < 10 ? "0" + kj: kj) + ":" + (CR < 10 ? "0" + CR: CR)
        }
    }
})(); (function() {
    var cr = eduPlayer;
    cr.controlBar = cr.u.C();
    var vpro = cr.controlBar.extend(cr.dispatcher);
    vpro.kg = function() {
        this.ry.kg.apply(this, arguments);
        if (!arguments[0]) return;
        this.fo = arguments[0];
        this.ly = arguments[1];
        this.bhF();
        this.Gn();
        this.KN = true;
        this.ceF = false;
        this.bsc = 0
    };
    vpro.bhF = function() {
        this.Gl = cr.u.getByClassName("j-controlBar-progressBar", this.fo)[0];
        this.bhQ = cr.u.getByClassName("j-controlBar-selectTime", this.fo)[0];
        this.cDv = cr.u.getByClassName("j-controlBar-bufferBar", this.fo)[0];
        this.bKG = cr.u.getByClassName("j-controlBar-timeBar", this.fo)[0];
        this.bKL = cr.u.getByClassName("j-controlBar-timeIcon", this.fo)[0];
        this.ceE = cr.u.getByClassName("j-controlBar-optArea", this.fo)[0];
        this.xM = cr.u.getByClassName("j-controlBar-playBtn", this.fo)[0];
        this.XI = cr.u.getByClassName("j-controlBar-pauseBtn", this.fo)[0];
        this.ceD = cr.u.getByClassName("j-controlBar-time", this.fo)[0];
        this.cDs = cr.u.getByClassName("j-controlBar-totalTime", this.fo)[0];
        this.dlK = cr.u.getByClassName("j-controlBar-volume", this.fo)[0];
        this.bii = cr.u.getByClassName("j-controlBar-volume-mute", this.fo)[0];
        this.bsa = cr.u.getByClassName("j-controlBar-volume-slide", this.fo)[0];
        this.bip = cr.u.getByClassName("j-controlBar-volume-total", this.fo)[0];
        this.ceA = cr.u.getByClassName("j-controlBar-volume-icon", this.fo)[0];
        this.cey = cr.u.getByClassName("j-controlBar-volume-current", this.fo)[0];
        this.bLn = cr.u.getByClassName("j-controlBar-fullScreenBtn", this.fo)[0];
        this.biy = cr.u.getByClassName("j-controlBar-quality", this.fo)[0];
        this.cex = cr.u.getByClassName("j-controlBar-qualityBtn", this.fo)[0];
        this.cew = cr.u.getByClassName("j-controlBar-quality-other", this.fo)[0];
        this.cev = cr.u.getByClassName("j-controlBar-rate", this.fo)[0];
        this.bLG = cr.u.getByClassName("j-controlBar-rateBtn", this.fo)[0];
        this.brZ = cr.u.getByClassName("j-controlBar-rate-items", this.fo);
        this.ceu = cr.u.getByClassName("j-controlBar-subtitle", this.fo)[0];
        this.brY = cr.u.getByClassName("j-controlBar-subtitleBtn", this.fo)[0];
        this.bLK = cr.u.getByClassName("j-controlBar-subtitle-other", this.fo)[0];
        this.XI.style.display = "none"
    };
    vpro.Gn = function() {
        cr.u.on(this.fo, "mouseenter", this.biO.bind(this, true));
        cr.u.on(this.fo, "mouseleave", this.biO.bind(this, false));
        cr.u.on(this.fo, "mousemove", this.cCZ.bind(this));
        cr.u.on(this.Gl, "click", this.cCU.bind(this));
        cr.u.on(this.Gl, "mouseenter", this.bLS.bind(this, true));
        cr.u.on(this.Gl, "mousemove", this.bLS.bind(this, true));
        cr.u.on(this.Gl, "mouseleave", this.bLS.bind(this, false));
        this.cCT();
        cr.u.on(this.xM, "click", this.brX.bind(this));
        cr.u.on(this.XI, "click", this.cCS.bind(this));
        cr.u.on(this.bii, "click", this.cCF.bind(this));
        cr.u.on(this.bLn, "click", this.cCE.bind(this));
        cr.u.on(this.biy, "mouseenter", this.Xu.bind(this, true));
        cr.u.on(this.biy, "mouseleave", this.Xu.bind(this, false));
        cr.u.on(this.cev, "mouseenter", this.Xu.bind(this, true));
        cr.u.on(this.cev, "mouseleave", this.Xu.bind(this, false));
        cr.u.each(this.brZ,
        function(cO, bB) {
            cr.u.on(bB, "click", this.cer.bind(this, cO))
        }.bind(this));
        cr.u.on(this.ceu, "mouseenter", this.Xu.bind(this, true));
        cr.u.on(this.ceu, "mouseleave", this.Xu.bind(this, false))
    };
    vpro.cCZ = function() {
        if (!this.bMb) {
            this.bMb = true;
            this.biO(true)
        }
    };
    vpro.biO = function(FV) {
        this.gO(cr.viewEvent.VIEW_TOGGLE_CONTROLBAR, FV);
        if ( !! this.bMd) {
            this.bMd = clearTimeout(this.bMd)
        }
        if (FV) {
            cr.u.delClassName(this.fo, "noCover");
            cr.u.delClassName(this.ceE, "over");
            this.bMd = window.setTimeout(function() {
                this.biO(false);
                if ( !! this.bMb) {
                    this.bMb = false
                }
            }.bind(this), 1e4)
        } else {
            cr.u.addClassName(this.fo, "noCover");
            cr.u.addClassName(this.ceE, "over");
            cr.u.addClassName(this.bhQ, "hide")
        }
    };
    vpro.cCU = function(e) {
        if (!this.KN) return;
        var Df = cr.u.getMousePos(e).x - cr.u.getElePos(this.Gl).x;
        if (Df >= 0) {
            this.bKG.style.width = Df + "px";
            this.bKL.style.left = Df + "px";
            var bs = Math.floor(Df / this.Gl.offsetWidth * this.Ci);
            this.gO(cr.viewEvent.VIEW_SEEK, {
                position: bs
            })
        }
    };
    vpro.bLS = function(cU, e) {
        if (!this.KN) return;
        e.stopPropagation();
        var Df = cr.u.getMousePos(e).x - cr.u.getElePos(this.Gl).x,
        bMg = this.Gl.offsetWidth;
        if (cU && !!this.Ci) {
            if (Df >= 0) {
                var bs = Math.ceil(Df / bMg * this.Ci);
                cr.u.delClassName(this.bhQ, "hide");
                this.bhQ.innerText = cr.u.formatTime(bs);
                var lP = Df - 22 > 0 ? bMg - Df < 47 ? bMg - 47 : Df - 22 : Df;
                cr.u.setStyle(this.bhQ, "left", lP + "px")
            }
        } else {
            cr.u.addClassName(this.bhQ, "hide")
        }
    };
    vpro.brX = function(e) {
        if (!this.KN) return;
        this.gO(cr.viewEvent.VIEW_PLAY)
    };
    vpro.cCS = function(e) {
        if (!this.KN) return;
        this.gO(cr.viewEvent.VIEW_PAUSE)
    };
    vpro.cCF = function(e) {
        if (this.ly.volume == 0) {
            if ( !! this.bMh && this.bMh > 0) {
                this.setVolume(this.bMh);
                this.bii.innerHTML = ""
            }
        } else {
            this.bMh = this.ly.volume;
            this.setVolume(0);
            this.bii.innerHTML = ""
        }
    };
    vpro.setVolume = function(val, isInit) {
        val = val < 0 ? 0 : val;
        val = val > 1 ? 1 : val;
        this.ly.volume = val;
        if (this.ly.volume == 0) {
            this.bii.innerHTML = ""
        } else {
            this.bii.innerHTML = ""
        }
        if (!isInit) {
            this.gO(cr.viewEvent.VIEW_VOLUME, {
                volume: val
            })
        }
        this.cCB(val)
    };
    vpro.cCB = function(nm) {
        var bMm = cr.u.getStyle(this.bip, "height").split("px")[0],
        bMn = bMm - bMm * nm,
        brW = 0;
        brW = cr.u.getStyle(this.ceA, "height").split("px")[0];
        brW = Math.round(bMn - brW / 2);
        cr.u.setStyle(this.ceA, "top", brW + "px");
        cr.u.setStyle(this.cey, "height", bMm - bMn + "px");
        cr.u.setStyle(this.cey, "top", bMn + "px")
    };
    vpro.cCT = function() {
        var bMs = false,
        nm = null,
        FV = false;
        var bip = this.bip;
        var ceq = function(e) {
            var bMC = cr.u.offset(bip),
            cep = cr.u.getStyle(bip, "height").split("px")[0],
            cCu = e.pageY - bMC.top;
            nm = (cep - cCu) / cep;
            if (bMC.top === 0 || bMC.left === 0) {
                return
            }
            nm = Math.max(0, nm);
            nm = Math.min(nm, 1)
        };
        cr.u.on(document, "mousemove",
        function(e) {
            e.stopPropagation();
            if (bMs) {
                ceq(e);
                this.setVolume(nm)
            }
        }.bind(this));
        cr.u.on(this.bsa, "mousedown",
        function(e) {
            bMs = true;
            ceq(e);
            this.setVolume(nm)
        }.bind(this));
        cr.u.on(this.bsa, "mouseup",
        function(e) {
            bMs = false
        });
        cr.u.on(this.bsa, "mouseenter",
        function(e) {
            FV = true
        });
        cr.u.on(this.bsa, "mouseleave",
        function(e) {
            FV = false
        });
        cr.u.on(document, "keydown",
        function(e) {
            e.stopPropagation();
            var ceo = e.keyCode;
            if ( !! FV) {
                var nm = this.ly.volume;
                switch (ceo) {
                case 38:
                    nm += .1;
                    break;
                case 40:
                    nm = nm - .1;
                    break;
                default:
                    return true
                }
                nm = Math.max(0, nm);
                nm = Math.min(nm, 1);
                this.setVolume(nm);
                return false
            }
            var gK = null;
            switch (ceo) {
            case 37:
                gK -= 5;
                break;
            case 39:
                gK += 5;
                break;
            case 32:
                this.gO(cr.viewEvent.VIEW_TOGGLEPLAY);
                break;
            default:
                return true
            }
            if ( !! gK) {
                gK = gK + this.gK;
                gK = Math.max(0, gK);
                gK = Math.min(gK, this.Ci);
                this.gO(cr.viewEvent.VIEW_SEEK, {
                    position: gK
                })
            }
            return false
        }.bind(this))
    };
    vpro.cCE = function(e) {
        this.gO(cr.viewEvent.VIEW_FULLSCREEN)
    };
    vpro.Xu = function(cU, bj) {
        if (!this.KN) return;
        bj.stopPropagation();
        if (cU) {
            cr.u.addClassName(bj.currentTarget, "unfold")
        } else {
            cr.u.delClassName(bj.currentTarget, "unfold")
        }
    };
    vpro.cCs = function(cO) {
        var bB = this.bMM[cO];
        this.cex.innerHTML = bB.innerHTML;
        cr.u.each(this.bMM,
        function(cO, bB) {
            cr.u.delClassName(bB, "selected")
        }.bind(this));
        cr.u.addClassName(bB, "selected");
        this.gO(cr.viewEvent.VIEW_QUALITY_CHANGE, bB.getAttribute("type"))
    };
    vpro.cer = function(cO) {
        var bB = this.brZ[cO];
        this.bLG.innerHTML = bB.getAttribute("rate") + "x";
        cr.u.each(this.brZ,
        function(cO, bB) {
            cr.u.delClassName(bB, "selected")
        }.bind(this));
        cr.u.addClassName(bB, "selected");
        this.gO(cr.viewEvent.VIEW_RATE_CHANGE, bB.getAttribute("rate"))
    };
    vpro.setRate = function(qM) {
        cr.u.each(this.brZ,
        function(cO, bB) {
            if (bB.getAttribute("rate") == qM) {
                this.cer(cO)
            }
        }.bind(this))
    };
    vpro.cCr = function(bd, bj) {
        if (!this.KN) return;
        bj.stopPropagation();
        if (cr.u.hasClassName(this.bjG[bd], "selected")) {
            cr.u.delClassName(this.bjG[bd], "selected")
        } else {
            cr.u.addClassName(this.bjG[bd], "selected")
        }
        this.gO(cr.viewEvent.VIEW_TRACK_CHANGE, this.bjG[bd].getAttribute("type"))
    };
    vpro.setTrackList = function(fU) {
        if ( !! fU.trackFiles && fU.trackFiles.length > 0) {
            var dE = "",
            cl = "";
            for (var cO in fU.trackFiles) {
                if ( !! fU.trackFiles[cO].url) {
                    if (fU.trackFiles[cO].name == cr.CONST.SUBTITLE_CN) {
                        cl = "中文"
                    } else if (fU.trackFiles[cO].name == cr.CONST.SUBTITLE_OTHER) {
                        cl = "外文"
                    }
                    dE += '<li type="' + fU.trackFiles[cO].name + '" class="selected"><span>&#149; </span>' + cl + "</li>"
                }
            }
            this.bLK.innerHTML = dE;
            this.bjG = cr.u.getChildren(this.bLK);
            cr.u.each(this.bjG,
            function(cO, bB) {
                cr.u.on(bB, "click", this.cCr.bind(this, cO))
            }.bind(this));
            this.toggleTrackSwitch(true)
        } else {
            this.bLK.innerHTML = "";
            this.toggleTrackSwitch(false)
        }
    };
    vpro.toggleTrackSwitch = function(cN) {
        if ( !! cN) {
            this.cen = true;
            cr.u.delClassName(this.brY, "disable")
        } else {
            this.cen = false;
            cr.u.addClassName(this.brY, "disable")
        }
    };
    vpro.setState = function(isPlay) {
        if ( !! isPlay) {
            this.xM.style.display = "none";
            this.XI.style.display = "block"
        } else {
            this.xM.style.display = "block";
            this.XI.style.display = "none"
        }
    };
    vpro.updateTime = function(position) {
        this.gK = position;
        if ( !! this.Ci && this.Ci > 0) {
            this.ceD.innerHTML = cr.stringUtil.formatTime(position).replace(/:/, " : ");
            var QA = position / this.Ci;
            this.bKG.style.width = QA * 100 + "%";
            this.bKL.style.left = QA * 100 + "%"
        } else {
            this.ceD.innerHTML = cr.stringUtil.formatTime(0);
            this.bKG.style.width = 0;
            this.bKL.style.left = 0
        }
    };
    vpro.setTotalTime = function(time, fU) {
        this.Ci = time;
        this.cDs.innerHTML = cr.stringUtil.formatTime(time).replace(/:/, " : ");
        if ( !! fU && !!fU.anchorList && !!fU.anchorList.length) {
            this.cCp(fU.anchorList)
        }
    };
    vpro.updateBuffer = function(bufferPercent) {
        var QA = bufferPercent;
        this.cDv.style.width = QA * 100 + "%"
    };
    vpro.changeFullScreenMode = function() {
        if (!this.cem) {
            this.bLn.innerHTML = "";
            this.cem = true;
            this.biO(true)
        } else {
            this.bLn.innerHTML = "";
            this.cem = false
        }
    };
    vpro.enableControlBar = function() {
        this.KN = true;
        cr.u.delClassName(this.xM, "disable");
        cr.u.delClassName(this.XI, "disable");
        cr.u.delClassName(this.bLG, "disable");
        if (this.cen) {
            cr.u.delClassName(this.brY, "disable")
        }
        if (this.bsc != 1) {
            cr.u.delClassName(this.biy, "disable")
        }
    };
    vpro.disableControlBar = function() {
        this.KN = false;
        cr.u.addClassName(this.xM, "disable");
        cr.u.addClassName(this.XI, "disable");
        cr.u.addClassName(this.bLG, "disable");
        cr.u.addClassName(this.biy, "disable");
        cr.u.addClassName(this.brY, "disable")
    };
    vpro.setQualityList = function(fU) {
        if (!fU || !fU.movieList) return;
        this.cex.innerHTML = cr.defaultPlayerConfig.qualityList[fU.defaultQuality];
        var dE = "";
        this.bsc = 0;
        for (var cO in fU.movieList) {
            if ( !! fU.movieList[cO].urls[0]) {
                this.bsc++;
                var eI = fU.defaultQuality == cO ? 'class="selected"': "";
                dE += '<li type="' + cO + '" ' + eI + ">" + cr.defaultPlayerConfig.qualityList[cO] + "</li>"
            }
        }
        this.cew.innerHTML = dE;
        if (this.bsc == 1) {
            cr.u.addClassName(this.biy, "disable")
        }
        this.bMM = cr.u.getChildren(this.cew);
        cr.u.each(this.bMM,
        function(cO, bB) {
            cr.u.on(bB, "click", this.cCs.bind(this, cO))
        }.bind(this))
    };
    vpro.cCp = function(anchorList) {
        if (this.ceF) return;
        this.ceF = true;
        var dE = "";
        cr.u.each(anchorList,
        function(index, obj) {
            dE += '<span class="anchor f-pa" style="left:' + obj.time / this.Ci * 100 + '%"></span>'
        }.bind(this));
        var yA = cr.u.createEl("div");
        yA.innerHTML = dE;
        this.Gl.appendChild(yA)
    }
})(); (function() {
    eduPlayer.playerStates = {
        IDLE: "IDLE",
        PLAYING: "PLAYING",
        BUFFERING: "BUFFERING",
        PAUSE: "PAUSED"
    }
})(); (function() {
    var bm = eduPlayer;
    bm.player = bm.u.C();
    var ppro = bm.player.extend(bm.dispatcher);
    ppro.kg = function() {
        this.ry.kg.apply(this, arguments);
        this.fo = arguments[0];
        this.jS = bm.u.getByClassName("j-mediaNode", this.fo)[0];
        this.ly = arguments[1];
        this.cel = 0;
        this.cek = 0;
        this.bNb = -1;
        this.brS = !this.ly.beforePlay
    };
    ppro.Gn = function() {
        this.gY.kI(bm.playerStateEvent.PLAYER_STATE, this.bNe.bind(this));
        bm.u.each(bm.mediaEvent,
        function(index, item) {
            this.gY.kI(item, this.bNg.bind(this))
        },
        this)
    };
    ppro.bNg = function(e) {
        if (e.type == bm.mediaEvent.MEDIA_QUALITY_CHANGE && this.brS) {
            e.data = this.bkh
        }
        this.gO(e.type, e.data);
        if (e.type == bm.mediaEvent.MEDIA_TIME && this.brS) {
            if (this.bNb != e.data.currentTime) {
                this.bNb = e.data.currentTime
            } else {
                return
            }
            this.cCj(e)
        }
    };
    ppro.bNe = function(e) {
        this.gO(e.type, e.data)
    };
    ppro.setMediaData = function(mediaData) {
        this.fU = mediaData;
        this.brQ = false;
        this.cei = false;
        this.destroy();
        if (this.fU.mediaType == "video") {
            var cCe = new bm.html5VideoMedia(this.jS);
            this.gY = cCe
        } else if (this.fU.mediaType == "audio") {
            var cCd = new bm.html5AudioMedia(this.jS);
            this.gY = cCd
        } else {
            this.gO(bm.playerEvent.PLAYER_ERROR, {
                msg: "不支持的媒体类型"
            });
            return
        }
        this.Gn();
        this.gY.bulid(this.ly)
    };
    ppro.load = function(ad) {
        if (this.gY && this.fU) {
            if (this.fU.mediaType == "video") {
                this.loadMovie()
            } else if (this.fU.mediaType == "audio") {
                this.loadAudio()
            } else {
                return
            }
        }
    };
    ppro.loadMovie = function(quality) {
        if (this.gY && this.fU) {
            this.brQ = true;
            if (!quality) {
                quality = {
                    type: this.fU.defaultQuality,
                    start: this.fU.start
                }
            }
            this.bkh = quality.type;
            var cef = this.fU.movieList[this.bkh];
            cef.start = quality.start;
            if ( !! this.cei) {
                this.gY.pause()
            } else {
                this.gY.stop()
            }
            this.gY.load(cef);
            if ( !! this.cee) {
                this.changeRate(this.cee)
            }
        }
    };
    ppro.changeQuality = function(quality) {
        if (this.bkh == quality.type) {
            return
        }
        this.cei = true;
        this.bkh = quality.type;
        this.loadMovie(quality)
    };
    ppro.changeRate = function(rate) {
        if (this.gY) {
            this.cee = rate;
            this.gY.rate(rate)
        }
    };
    ppro.loadAudio = function() {
        if (this.gY && this.fU) {
            this.brQ = true;
            this.gY.stop();
            this.gY.load(this.fU.audioList)
        }
    };
    ppro.showPoster = function() {
        if ( !! this.gY && this.fU.mediaType == "video") {
            this.gY.setPoster(this.fU.posterUrl)
        }
    };
    ppro.play = function() {
        if (this.gY) {
            if (!this.brQ) {
                this.load()
            } else {
                this.gY.play()
            }
        }
    };
    ppro.pause = function() {
        if (this.gY) this.gY.pause()
    };
    ppro.togglePlay = function() {
        if (this.gY) {
            if (!this.brQ) {
                this.load()
            } else {
                this.gY.togglePlay()
            }
        }
    };
    ppro.stop = function() {
        if (this.gY) this.gY.stop()
    };
    ppro.seek = function(pos) {
        if (this.gY) this.gY.seek(pos)
    };
    ppro.volume = function(val) {
        if (this.gY) {
            this.gY.volume(val);
            if (val == 0) {
                this.gO(bm.exportEvent.CHANGE_MUTE, true)
            } else {
                this.gO(bm.exportEvent.CHANGE_VOLUME, val)
            }
        }
    };
    ppro.mute = function(mute) {
        if (this.gY) {
            this.gY.mute(mute);
            if (!muted) {
                this.gO(bm.exportEvent.CHANGE_MUTE, true)
            }
        }
    };
    ppro.getState = function() {
        if (this.gY) return this.gY.state()
    };
    ppro.getTime = function() {
        return this.bNb
    };
    ppro.handlerMovie = function() {
        if (this.gY) {
            if ( !! this.ly.beforePlay && !!this.fU.beforeadMovie && !!this.fU.beforeadMovie[this.cel]) {
                this.gY.load(this.fU.beforeadMovie[this.cel++])
            } else {
                if (!this.brS) {
                    this.brS = true;
                    this.gY.load(this.fU.movieList[this.bkh])
                } else {
                    if ( !! this.fU.afteradMovie) {
                        if ( !! this.fU.afteradMovie[this.cek]) {
                            this.gY.load(this.fU.afteradMovie[this.cek++])
                        }
                    }
                }
            }
        }
    };
    ppro.fullScreenHandler = function(e) {
        if ( !! this.brP) {
            this.bNF()
        } else {
            this.cBU()
        }
    };
    ppro.mobileMode = function() {
        this.gY.mobileMode()
    };
    ppro.destroy = function() {
        if ( !! this.gY) {
            this.gY.stop();
            this.gY.remove();
            this.gY = null;
            bm.logUtil.info("destroy")
        }
    };
    ppro.cBU = function() {
        this.brP = true;
        if (!this.cBT) {
            document.onfullscreenchange = this.bNR.bind(this);
            document.onwebkitfullscreenchange = this.bNR.bind(this);
            document.onmozfullscreenchange = this.bNR.bind(this);
            this.cBT = true
        }
        if (bm.u.isFunction(this.fo.requestFullScreen)) {
            this.fo.requestFullScreen()
        } else if (bm.u.isFunction(this.fo.webkitRequestFullScreen)) {
            this.fo.webkitRequestFullScreen()
        } else if (bm.u.isFunction(this.fo.mozRequestFullScreen)) {
            this.fo.mozRequestFullScreen()
        } else {
            this.cBS()
        }
    };
    ppro.bNF = function() {
        this.brP = false;
        if (bm.u.isFunction(document.exitFullscreen)) {
            document.exitFullscreen()
        } else if (bm.u.isFunction(document.webkitCancelFullScreen)) {
            document.webkitCancelFullScreen()
        } else if (bm.u.isFunction(document.mozCancelFullScreen)) {
            document.mozCancelFullScreen()
        } else {
            this.cBO()
        }
    };
    ppro.cBS = function() {
        bm.u.on(document, "keydown", this.ced.bind(this));
        bm.u.addClassName(document.body, "player-body-fullWindow");
        bm.u.addClassName(this.fo, "player-player-fullWindow");
        this.gO(bm.playerEvent.FULLSCREEN_CHANGE)
    };
    ppro.cBO = function() {
        bm.u.off(document, "keydown", this.ced.bind(this));
        bm.u.delClassName(document.body, "player-body-fullWindow");
        bm.u.delClassName(this.fo, "player-player-fullWindow");
        this.gO(bm.playerEvent.FULLSCREEN_CHANGE)
    };
    ppro.bNR = function(event) {
        this.gO(bm.playerEvent.FULLSCREEN_CHANGE)
    };
    ppro.ced = function(event) {
        event = bm.u.getEvent(event);
        if (event.keyCode === 27) {
            if (this.brP == true) {
                this.bNF()
            }
        }
    };
    ppro.cCj = function(e) {
        if (!this.fU.anchorList || !this.fU.anchorList.length) return;
        this.fU.anchorList.forEach(function(anchorObj, index) {
            if (e.data.currentTime == anchorObj.anchor) {
                this.gO(bm.exportEvent.ANCHOR_TRIGGER, anchorObj);
                if (this.gY) {
                    this.gY.pause();
                    if (this.brP == true) {
                        this.bNF()
                    }
                }
            }
        }.bind(this))
    }
})(); (function() {
    var bm = eduPlayer;
    bm.playerEvent = {
        PLAYER_ERROR: "playerError",
        FULLSCREEN_CHANGE: "fullScreenChange"
    }
})(); (function() {
    var bm = eduPlayer;
    bm.playerStateEvent = {
        PLAYER_STATE: "playerState"
    }
})(); (function() {
    var bm = eduPlayer;
    bm.exportEvent = {
        ANCHOR_TRIGGER: "onAnchor",
        NOT_SUPPORT: "onNotSupport",
        PLAY_END: "onPlayEnd",
        SEEK: "onSeek",
        CHANGE_MUTE: "onChangeMute",
        CHANGE_VOLUME: "onChangeVolume",
        CHANGE_QUALITY: "onChangeQuality",
        CHANGE_RATE: "onChangeRate",
        PLAY: "onPlay"
    }
})(); (function(hjv) {
    var bm = eduPlayer;
    bm.mediaEvent = {
        MEDIA_META: "mediaMeta",
        MEDIA_BEFORE_PLAY: "mediaBeforePlay",
        MEDIA_QUALITY_CHANGE: "mediaQualityChange",
        MEDIA_RATE_CHANGE: "mediaRateChange",
        MEDIA_BUFFER: "mediaBuffer",
        MEDIA_BUFFER_FULL: "mediaBufferFull",
        MEDIA_TIME: "mediaTime",
        MEDIA_ERROR: "mediaError",
        MEDIA_COMPLETE: "mediaComplete",
        MEDIA_VOLUME: "mediaVolume",
        MEDIA_SEEK: "mediaSeek",
        MEDIA_AUTO_SEEK: "mediaSeek",
        MEDIA_PLAY: "mediaPlay"
    }
})(); (function() {
    var cr = eduPlayer;
    cr.centralController = cr.u.C();
    var cpro = cr.centralController.extend(cr.dispatcher);
    cpro.kg = function() {
        this.ry.kg.apply(this, arguments);
        if (!arguments[0]) return;
        this.is = arguments[0];
        this.oU = arguments[1];
        this.FG = 0;
        this.cBM();
        this.bOh()
    };
    cpro.cBM = function() {
        this.is.kI(cr.playerStateEvent.PLAYER_STATE, this.bNe.bind(this));
        this.is.kI(cr.playerEvent.FULLSCREEN_CHANGE, this.cBL.bind(this));
        cr.u.each(cr.mediaEvent,
        function(index, item) {
            this.is.kI(item, this.bNg.bind(this))
        },
        this)
    };
    cpro.bOh = function() {
        cr.u.each(cr.viewEvent,
        function(index, item) {
            this.oU.kI(item, this.WD.bind(this))
        },
        this)
    };
    cpro.bNe = function(e) {
        var newState = e.data.newState;
        var oldState = e.data.oldState;
        switch (newState) {
        case cr.playerStates.IDLE:
            this.oU.showIdle();
            break;
        case cr.playerStates.PLAYING:
            this.oU.setPlayerState(true, this.Qh);
            break;
        case cr.playerStates.BUFFERING:
            this.oU.showLoading();
            break;
        case cr.playerStates.PAUSE:
            this.oU.setPlayerState(false);
            break
        }
    };
    cpro.cBL = function(e) {
        switch (e.type) {
        case cr.playerEvent.FULLSCREEN_CHANGE:
            this.oU.changeFullScreenMode();
            break
        }
    };
    cpro.bNg = function(e) {
        switch (e.type) {
        case cr.mediaEvent.MEDIA_BEFORE_PLAY:
            this.is.handlerMovie();
            break;
        case cr.mediaEvent.MEDIA_QUALITY_CHANGE:
            this.gO(cr.exportEvent.CHANGE_QUALITY, e.data);
            break;
        case cr.mediaEvent.MEDIA_META:
            this.Qh = e.data.isAdMovie;
            this.cec = e.data.adLink; ! this.Qh && this.oU.setTotalTime(e.data.duration);
            break;
        case cr.mediaEvent.MEDIA_TIME:
            !this.Qh && this.oU.updateTime(e.data.currentTime);
            this.FG = e.data.currentTime;
            break;
        case cr.mediaEvent.MEDIA_BUFFER:
            !this.Qh && this.oU.updateBuffer(e.data.bufferPercent);
            break;
        case cr.mediaEvent.MEDIA_BUFFER_FULL:
            break;
        case cr.mediaEvent.MEDIA_ERROR:
            cr.u.log('[MediaEvent type="' + e.type + '" data="' + cr.u.stringify(e.data) + '"]');
            break;
        case cr.mediaEvent.MEDIA_COMPLETE:
            this.is.handlerMovie();
            this.oU.setPlayEndState(this.Qh);
            this.Qh = false;
            this.gO(cr.exportEvent.PLAY_END);
            break;
        case cr.mediaEvent.MEDIA_VOLUME:
            this.oU.setVolume(e.data.volume, e.data.isInit);
            break;
        case cr.mediaEvent.MEDIA_PLAY:
            this.gO(cr.exportEvent.PLAY);
            break;
        case cr.mediaEvent.MEDIA_RATE_CHANGE:
            this.gO(cr.exportEvent.CHANGE_RATE, e.data);
            break
        }
    };
    cpro.WD = function(e) {
        if (!this.Qh) {
            switch (e.type) {
            case cr.viewEvent.VIEW_PLAY:
                this.is.play();
                break;
            case cr.viewEvent.VIEW_PAUSE:
                this.is.pause();
                break;
            case cr.viewEvent.VIEW_TOGGLEPLAY:
                this.is.togglePlay();
                break;
            case cr.viewEvent.VIEW_SEEK:
                this.is.seek(e.data.position);
                this.gO(cr.exportEvent.SEEK, e.data.position);
                break;
            case cr.viewEvent.VIEW_VOLUME:
                this.is.volume(e.data.volume);
                break;
            case cr.viewEvent.VIEW_FULLSCREEN:
                this.is.fullScreenHandler();
                break;
            case cr.viewEvent.VIEW_QUALITY_CHANGE:
                this.is.changeQuality({
                    type:
                    e.data,
                    start: this.FG
                });
                break;
            case cr.viewEvent.VIEW_RATE_CHANGE:
                this.is.changeRate(e.data);
                break;
            case cr.viewEvent.VIEW_TRACK_CHANGE:
                this.oU.toggleTrackChange(e.data);
            case cr.viewEvent.VIEW_TOGGLE_CONTROLBAR:
                this.oU.toggleTrackStyle(e.data);
                break
            }
        } else {
            switch (e.type) {
            case cr.viewEvent.VIEW_OPENADLINK:
                if ( !! this.cec) {
                    window.open(this.cec, "_blank")
                }
                break;
            case cr.viewEvent.VIEW_VOLUME:
                this.is.volume(e.data.volume);
                break;
            case cr.viewEvent.VIEW_FULLSCREEN:
                this.is.fullScreenHandler();
                break
            }
        }
    }
})(); (function() {
    var bR = eduPlayer;
    bR.display = bR.u.C();
    var vpro = bR.display.extend(bR.dispatcher);
    vpro.kg = function() {
        this.ry.kg.apply(this, arguments);
        if (!arguments[0]) return;
        this.fo = arguments[0];
        this.bhF();
        this.Gn()
    };
    vpro.bhF = function() {
        this.cBH = bR.u.getByClassName("j-display", this.fo)[0];
        this.xM = bR.u.getByClassName("j-display-playBtn", this.fo)[0];
        this.dlN = bR.u.getByClassName("j-display-playIcon", this.fo)[0];
        this.brO = bR.u.getByClassName("j-display-replayBtn", this.fo)[0];
        this.dlO = bR.u.getByClassName("j-display-replayIcon", this.fo)[0];
        this.Qd = bR.u.getByClassName("j-display-loading", this.fo)[0]
    };
    vpro.Gn = function() {
        bR.u.on(this.cBH, "click", this.cBD.bind(this));
        bR.u.on(this.xM, "click", this.brX.bind(this));
        bR.u.on(this.brO, "click", this.brX.bind(this))
    };
    vpro.cBD = function(e) {
        this.gO(bR.viewEvent.VIEW_TOGGLEPLAY);
        this.gO(bR.viewEvent.VIEW_OPENADLINK)
    };
    vpro.brX = function(e) {
        bR.u.stopEvent(e);
        this.xM.style.display = "none";
        this.brO.style.display = "none";
        this.gO(bR.viewEvent.VIEW_PLAY)
    };
    vpro.showLoading = function() {
        this.xM.style.display = "none";
        this.Qd.style.display = "block"
    };
    vpro.hideLoading = function() {
        this.Qd.style.display = "none";
        this.xM.style.display = "none"
    };
    vpro.showPlayState = function(isPlay) {
        this.Qd.style.display = "none";
        if ( !! isPlay) {
            this.xM.style.display = "none";
            this.brO.style.display = "none"
        } else {
            this.xM.style.display = "block"
        }
    };
    vpro.showPlayEndState = function() {
        this.brO.style.display = "block";
        this.xM.style.display = "none"
    }
})(); (function() {
    var bm = eduPlayer;
    bm.viewEvent = {
        VIEW_PLAY: "viewPlay",
        VIEW_PAUSE: "viewPause",
        VIEW_FULLSCREEN: "viewFullScreen",
        VIEW_TOGGLEPLAY: "viewTogglePlay",
        VIEW_SEEK: "viewSeek",
        VIEW_VOLUME: "viewVolume",
        VIEW_QUALITY_CHANGE: "viewQualityChange",
        VIEW_RATE_CHANGE: "viewRateChange",
        VIEW_TRACK_CHANGE: "viewTrackChange",
        VIEW_OPENADLINK: "viewOpenAdLink",
        VIEW_TOGGLE_CONTROLBAR: "viewToggleControlBar"
    }
})(); (function() {
    var cr = eduPlayer;
    var cBC = function(W) {
        var dc = [{
            begin: 0,
            text: ""
        }];
        W = W.replace(/^\s+/, "").replace(/\s+$/, "");
        var lst = W.split("\r\n\r\n");
        if (lst.length == 1) {
            lst = W.split("\n\n")
        }
        for (var i = 0; i < lst.length; i++) {
            var cI = cBB(lst[i]);
            if (cI["text"]) {
                dc.push(cI);
                if (cI["end"]) {
                    dc.push({
                        begin: cI["end"],
                        text: ""
                    });
                    delete cI["end"]
                }
            }
        }
        return dc
    };
    var cBB = function(cQ) {
        var cI = {};
        var dc = cQ.split("\r\n");
        if (dc.length == 1) {
            dc = cQ.split("\n")
        }
        try {
            var PZ = dc[1].indexOf(" --> ");
            if (PZ > 0) {
                cI["begin"] = cdX(dc[1].substr(0, PZ));
                cI["end"] = cdX(dc[1].substr(PZ + 5))
            }
            if (dc[2]) {
                cI["text"] = dc[2];
                for (var cO = 3; cO < dc.length; cO++) {
                    cI["text"] += "\n" + dc[cO]
                }
            }
        } catch(err) {}
        return cI
    };
    var cdX = function(cQ) {
        cQ = cQ.replace(",", ".");
        var dc = cQ.split(":");
        var lX = 0;
        if (cQ.substr( - 2).toLocaleLowerCase() == "ms") {
            lX = Number(cQ.substr(0, cQ.length - 2)) / 1e3
        } else if (cQ.substr( - 1).toLocaleLowerCase() == "s") {
            lX = Number(cQ.substr(0, cQ.length - 1))
        } else if (cQ.substr( - 1).toLocaleLowerCase() == "m") {
            lX = Number(cQ.substr(0, cQ.length - 1)) * 60
        } else if (cQ.substr( - 1).toLocaleLowerCase() == "h") {
            lX = Number(cQ.substr(0, cQ.length - 1)) * 3600
        } else if (dc.length > 1) {
            lX = Number(dc[dc.length - 1]);
            lX += Number(dc[dc.length - 2]) * 60;
            if (dc.length == 3) {
                lX += Number(dc[dc.length - 3]) * 3600
            }
        } else {
            lX = Number(cQ)
        }
        return lX
    };
    cr.srtParseUtil = {
        parseSrt: cBC
    }
})(); (function() {
    var cr = eduPlayer;
    cr.track = cr.u.C();
    var vpro = cr.track.extend(cr.dispatcher);
    var cBr = cr.srtParseUtil;
    vpro.kg = function() {
        this.ry.kg.apply(this, arguments);
        if (!arguments[0]) return;
        this.fo = arguments[0];
        this.ly = arguments[1];
        this.PY = [];
        this.cdW = [];
        this.bhF()
    };
    vpro.bhF = function() {
        this.rM = cr.u.getByClassName("j-trackBar", this.fo)[0];
        this.brN = cr.u.getByClassName("j-trackBar-track1", this.fo)[0];
        this.brM = cr.u.getByClassName("j-trackBar-track2", this.fo)[0]
    };
    vpro.setMediaData = function(mediaData) {
        this.fU = mediaData;
        this.cBn(this.fU.trackFiles)
    };
    vpro.toggleTrackChange = function(bz) {
        if (bz != undefined) {
            this.cBl(bz);
            this.qd()
        } else {
            this.cDD()
        }
    };
    vpro.cBl = function(bz) {
        switch (bz) {
        case cr.CONST.SUBTITLE_CN:
            if (this.brN.style.display == "block") {
                this.brN.style.display = "none"
            } else {
                this.brN.style.display = "block"
            }
            break;
        case cr.CONST.SUBTITLE_OTHER:
            if (this.brM.style.display == "block") {
                this.brM.style.display = "none"
            } else {
                this.brM.style.display = "block"
            }
            break
        }
    };
    vpro.toggleTrackStyle = function(FV) {
        if (FV) {
            cr.u.delClassName(this.rM, "over")
        } else {
            cr.u.addClassName(this.rM, "over")
        }
    };
    vpro.currentType = function() {
        return this.cdW
    };
    vpro.cBn = function(brL) {
        try {
            if (cr.u.isTypeOf(brL, "Array")) {
                cr.u.each(brL,
                function(cO, gx) {
                    this.cdV(gx);
                    if (gx.name != undefined) {
                        this.cdW.push(gx.name)
                    }
                },
                this)
            } else if (cr.u.isTypeOf(brL, "string")) {
                this.cdV({
                    url: brL,
                    name: cr.CONST.SUBTITLE_CN
                })
            }
        } catch(e) {}
    };
    vpro.setPosition = function(gK) {
        if (!this.PY) return;
        if (gK > 0) {
            var PQ = this.cBj(gK);
            if ( !! PQ && PQ.length > 0) {
                for (var cO = 0; cO < PQ.length; cO++) {
                    if (PQ[cO].name == cr.CONST.SUBTITLE_CN) {
                        this.brN.innerHTML = PQ[cO].text
                    }
                    if (PQ[cO].name == cr.CONST.SUBTITLE_OTHER) {
                        this.brM.innerHTML = PQ[cO].text
                    }
                }
            }
        }
    };
    vpro.cBi = function(cl, GF) {
        if (!GF) return;
        var cdU = {};
        try {
            cdU = {
                text: cBr.parseSrt(GF),
                name: cl
            };
            this.PY.push(cdU)
        } catch(e) {}
    };
    vpro.cdV = function(Mz) {
        cr.u.ajax({
            url: Mz.url,
            success: this.cBi.bind(this, Mz.name),
            error: function() {},
            context: this
        })
    };
    vpro.cBj = function(gK) {
        if (!this.PY || this.PY.length <= 0) return;
        var cdT = [],
        brI = [];
        for (var cO = 0,
        eG = this.PY.length; cO <= eG - 1; cO++) {
            var baT = this.PY[cO].text;
            brI[cO] = -1;
            for (var fY = 0,
            bQM = baT.length; fY <= bQM - 1; fY++) {
                var cBf = baT[fY];
                if (cBf["begin"] <= gK && (fY >= baT.length - 1 || baT[fY + 1]["begin"] >= gK)) {
                    brI[cO] = fY;
                    break
                }
            }
            cdT[cO] = {
                text: brI[cO] >= 0 ? baT[brI[cO]]["text"] : "",
                name: this.PY[cO].name
            }
        }
        return cdT
    }
})(); (function() {
    var cr = eduPlayer;
    cr.viewContainer = cr.u.C();
    var vpro = cr.viewContainer.extend(cr.dispatcher);
    vpro.kg = function() {
        this.ry.kg.apply(this, arguments);
        if (!arguments[0]) return;
        this.fo = arguments[0];
        this.ly = arguments[1];
        this.cBe();
        this.bOh()
    };
    vpro.cBe = function() {
        this.sR = new cr.controlBar(this.fo, this.ly);
        this.GI = new cr.display(this.fo, this.ly);
        this.GF = new cr.track(this.fo, this.ly)
    };
    vpro.resetCfg = function() {
        this.setVolume(this.ly.volume);
        this.setRate(this.ly.rate)
    };
    vpro.bOh = function() {
        cr.u.each(cr.viewEvent,
        function(index, item) {
            this.sR.kI(item, this.WD.bind(this))
        },
        this);
        this.GI.kI(cr.viewEvent.VIEW_PLAY, this.WD.bind(this));
        this.GI.kI(cr.viewEvent.VIEW_TOGGLEPLAY, this.WD.bind(this));
        this.GI.kI(cr.viewEvent.VIEW_OPENADLINK, this.WD.bind(this))
    };
    vpro.WD = function(e) {
        this.gO(e.type, e.data)
    };
    vpro.setPlayerState = function(isPlay, isAd) {
        this.GI.showPlayState(isPlay);
        if ( !! isAd) {
            this.sR.setState(!isPlay);
            this.disableControlBar()
        } else {
            this.sR.setState(isPlay);
            this.enableControlBar()
        }
    };
    vpro.setPlayerAdState = function(isPlay) {
        this.GI.showPlayState(isPlay);
        this.sR.setState(!isPlay)
    };
    vpro.setPlayEndState = function(cBd) {
        this.sR.setState(false); ! cBd && this.GI.showPlayEndState()
    };
    vpro.setMediaData = function(fU) {
        this.fU = fU;
        this.GF.setMediaData(fU);
        this.sR.setTrackList(fU);
        this.sR.setQualityList(fU)
    };
    vpro.showLoading = function() {
        this.GI.showLoading()
    };
    vpro.hideLoading = function() {
        this.GI.hideLoading()
    };
    vpro.showIdle = function() {
        this.GI.hideLoading();
        this.sR.setState(false);
        this.setTotalTime(0);
        this.updateTime(0);
        this.updateBuffer(0)
    };
    vpro.setTotalTime = function(position) {
        this.sR.setTotalTime(position, this.fU)
    };
    vpro.updateTime = function(time) {
        this.sR.updateTime(time);
        if ( !! this.GF.currentType() && this.GF.currentType().length > 0) {
            this.GF.setPosition(time)
        }
    };
    vpro.updateBuffer = function(percent) {
        this.sR.updateBuffer(percent)
    };
    vpro.setVolume = function(val) {
        this.sR.setVolume(val)
    };
    vpro.setRate = function(rate) {
        this.sR.setRate(rate)
    };
    vpro.changeFullScreenMode = function() {
        this.sR.changeFullScreenMode()
    };
    vpro.enableControlBar = function() {
        this.sR.enableControlBar()
    };
    vpro.disableControlBar = function() {
        this.sR.disableControlBar()
    };
    vpro.toggleTrackChange = function(bz) {
        this.GF.toggleTrackChange(bz)
    };
    vpro.toggleTrackStyle = function(FV) {
        this.GF.toggleTrackStyle(FV)
    }
})(); (function() {
    eduPlayer.support = {
        videoSupport: function() {
            var bbh = document.createElement("video");
            var Vp = !!bbh.canPlayType;
            try {
                bbh.canPlayType("video/mp4")
            } catch(e) {
                Vp = false
            }
            return Vp
        } (),
        audioSupport: function() {
            return !! document.createElement("audio").canPlayType
        } (),
        fullScreenSupport: function() {} ()
    };
    eduPlayer.videoSourceType = {
        mp4: "video/mp4"
    };
    eduPlayer.audioSourceType = {
        mp3: "audio/mpeg",
        wav: "audio/wav",
        ogg: "audio/ogg"
    }
})(); (function() {
    var bm = eduPlayer;
    bm.html5VideoMedia = bm.u.C();
    var mpro = bm.html5VideoMedia.extend(bm.dispatcher);
    mpro.kg = function() {
        this.ry.kg.apply(this, arguments);
        this.cdS = arguments[0];
        this.Fm(bm.playerStates.IDLE);
        this.PM = false;
        this.brH = false;
        this.cdR = false
    };
    mpro.bulid = function(cfg) {
        this.ly = cfg;
        this.gB = bm.u.createEl("video", {
            autoplay: !!this.ly.autoPlay,
            controls: false,
            loop: false
        });
        this.cdS.appendChild(this.gB);
        this.Gn();
        this.cAY(this.ly.videoRetio)
    };
    mpro.Gn = function() {
        if (!this.gB) return;
        bm.u.on(this.gB, "loadstart", this.bbx.bind(this));
        bm.u.on(this.gB, "abort", this.bbx.bind(this));
        bm.u.on(this.gB, "stalled", this.bbx.bind(this));
        bm.u.on(this.gB, "waiting", this.bbx.bind(this));
        bm.u.on(this.gB, "durationchange", this.bbx.bind(this));
        bm.u.on(this.gB, "loadedmetadata", this.cAV.bind(this));
        bm.u.on(this.gB, "ended", this.cAU.bind(this));
        bm.u.on(this.gB, "error", this.Zh.bind(this));
        bm.u.on(this.gB, "pause", this.cAO.bind(this));
        bm.u.on(this.gB, "play", this.cAL.bind(this));
        bm.u.on(this.gB, "playing", this.cAK.bind(this));
        bm.u.on(this.gB, "progress", this.cAJ.bind(this));
        bm.u.on(this.gB, "seeked", this.cAI.bind(this));
        bm.u.on(this.gB, "seeking", this.cAG.bind(this));
        bm.u.on(this.gB, "timeupdate", this.cAD.bind(this));
        bm.u.on(this.gB, "waiting", this.cAC.bind(this))
    };
    mpro.cAY = function(cdM) {};
    mpro.load = function(movieItem) {
        this.bo = movieItem;
        this.Fm(bm.playerStates.BUFFERING);
        this.PM = false;
        this.brH = false;
        this.cAw(this.bo.urls);
        this.cAv(this.bo.subtitles);
        try {
            this.gB.load()
        } catch(e) {
            this.gO(bm.mediaEvent.MEDIA_ERROR, {
                msg: this.gB.error
            })
        }
    };
    mpro.cAw = function(urls) {
        this.gB.innerHTML = "";
        bm.u.each(urls,
        function(index, src) {
            if (!src) return;
            var cAr = src.split(/\?/)[0];
            var brz = cAr.split(".");
            var cAq = brz[brz.length - 1];
            var cdI = bm.videoSourceType[cAq];
            if (!cdI) {
                this.gO(bm.mediaEvent.MEDIA_ERROR, {
                    msg: "不支持的媒体类型"
                });
                return
            }
            var se = bm.u.createEl("source", {
                src: src,
                type: cdI
            });
            this.gB.appendChild(se)
        },
        this);
        this.gO(bm.mediaEvent.MEDIA_QUALITY_CHANGE)
    };
    mpro.cAv = function(subtitles) {
        if (!subtitles || subtitles.length == 0) {
            return
        }
        bm.u.each(subtitles,
        function(index, src) {
            var se = bm.u.createEl("track", {
                src: src,
                kind: "subtitles",
                srclang: "en",
                label: "english"
            });
            this.gB.appendChild(se)
        },
        this)
    };
    mpro.setPoster = function(posterUrl) {
        if ( !! posterUrl && posterUrl != "") {
            this.gB.poster = posterUrl
        }
    };
    mpro.play = function() {
        if ( !! this.gB && !!this.PM) {
            this.gB.play();
            this.Fm(bm.playerStates.PLAYING);
            this.gO(bm.mediaEvent.MEDIA_PLAY)
        }
    };
    mpro.pause = function() {
        if ( !! this.gB && !!this.PM) {
            this.gB.pause();
            this.Fm(bm.playerStates.PAUSE)
        }
    };
    mpro.togglePlay = function() {
        if (this.jb == bm.playerStates.PAUSE) {
            this.play()
        } else {
            this.pause()
        }
    };
    mpro.seek = function(position) {
        if ( !! this.gB && !!this.ws && !!this.PM) {
            position = position > this.ws ? this.ws: position;
            this.gB.currentTime = position
        }
    };
    mpro.volume = function(value) {
        value = value > 1 ? 1 : value < 0 ? 0 : value;
        this.gB.volume = value
    };
    mpro.mute = function(muted) {
        this.gB.muted = muted
    };
    mpro.stop = function() {
        this.pause();
        var sourseNodes = bm.u.T("source", this.gB);
        bm.u.each(sourseNodes,
        function(index, node) {
            this.gB.removeChild(node)
        },
        this);
        this.PM = false;
        this.brH = false;
        this.Fm(bm.playerStates.IDLE)
    };
    mpro.remove = function() {
        this.cDy();
        this.cdS.removeChild(this.gB);
        this.gB = null
    };
    mpro.state = function() {
        return this.jb
    };
    mpro.isCompleted = function() {
        return this.brH
    };
    mpro.rate = function(value) {
        if (this.jb == bm.playerStates.IDLE) {
            this.gB.defaultPlaybackRate = value
        } else {
            this.gB.playbackRate = value
        }
        this.gO(bm.mediaEvent.MEDIA_RATE_CHANGE, value)
    };
    mpro.Fm = function(newState) {
        if (this.jb != newState) {
            this.gO(bm.playerStateEvent.PLAYER_STATE, {
                newState: newState,
                oladState: this.jb
            });
            this.jb = newState
        }
    };
    mpro.bbx = function(e) {
        if ( !! e) bm.logUtil.infoObj(e.type)
    };
    mpro.cAV = function(e) {
        if ( !! this.PM) {
            return
        }
        if (!this.gB) return;
        bm.logUtil.info("mediaProvider has loaded,duration:" + this.gB.duration);
        var cdH = !!this.bo.isAdMovie;
        var data = {
            duration: Math.floor(this.gB.duration),
            isAdMovie: cdH,
            adLink: this.bo.link || ""
        };
        this.ws = data.duration;
        this.PM = true;
        this.gO(bm.mediaEvent.MEDIA_META, data);
        try {
            if ( !! this.ly.beforePlay && !cdH && !this.cdR) {
                this.pause();
                this.cdR = true;
                this.gO(bm.mediaEvent.MEDIA_BEFORE_PLAY)
            } else {
                if (this.bo.start > 0) {
                    this.cAn()
                } else {
                    this.play()
                }
            }
        } catch(error) {
            bm.logUtil.error(error)
        }
    };
    mpro.cAn = function() {
        if (this.bo.start > 0) {
            this.seek(this.bo.start)
        }
    };
    mpro.cAD = function(e) {
        if (!this.gB) return;
        var data = {
            currentTime: Math.floor(this.gB.currentTime),
            duration: Math.floor(this.gB.duration)
        };
        this.gO(bm.mediaEvent.MEDIA_TIME, data)
    };
    mpro.cAJ = function(e) {
        if (!this.gB) return;
        this.gO(bm.mediaEvent.MEDIA_BUFFER, {
            bufferPercent: this.cAm()
        })
    };
    mpro.cAm = function() {
        var buffered = this.gB.buffered,
        end = 0;
        var ba, be;
        if (!buffered || buffered.length < 1) {
            return 0
        } else if (buffered && buffered.length == 1) {
            end = Math.floor(buffered.end(0))
        } else {
            var bs = this.gB.currentTime || 0;
            for (var i = 0,
            l = buffered.length; i < l; i++) {
                ba = Math.floor(buffered.start(i));
                be = Math.floor(buffered.end(i));
                if (bs <= be && bs >= ba) {
                    end = Math.floor(buffered.end(i))
                }
            }
            if (!end) {
                end = Math.floor(buffered.end(buffered.length - 1))
            }
        }
        return this.ws ? end / this.ws: 0
    };
    mpro.cAL = function(e) {
        this.Fm(bm.playerStates.PLAYING)
    };
    mpro.cAK = function(e) {
        this.Fm(bm.playerStates.PLAYING)
    };
    mpro.cAO = function(e) {};
    mpro.cAC = function(e) {
        this.Fm(bm.playerStates.BUFFERING)
    };
    mpro.cAG = function(e) {
        this.Fm(bm.playerStates.BUFFERING)
    };
    mpro.cAI = function(e) {
        if (this.jb == bm.playerStates.PAUSE) {
            this.pause()
        } else {
            this.play()
        }
    };
    mpro.cAU = function(e) {
        this.Fm(bm.playerStates.PAUSE);
        this.brH = true;
        this.gO(bm.mediaEvent.MEDIA_COMPLETE)
    };
    mpro.Zh = function(e) {
        this.gO(bm.mediaEvent.MEDIA_ERROR)
    };
    mpro.mobileMode = function() {}
})(); (function() {
    eduPlayer.playerHtmlTemp = '<div class="player f-f1"><div class="view f-pa"><div class="bg f-pa"></div><div class="videoContainer f-pa j-mediaNode"></div><div class="display f-pa j-display"><div class="start f-pa j-display-playBtn f-cp"><div class="cover f-pa center"></div><div class="icon f-icon j-display-playIcon f-pa center left"></div></div><div class="replay f-pa j-display-replayBtn f-cp"><div class="cover f-pa center"></div><div class="icon f-icon j-display-replayIcon f-pa center"></div></div><div class="loading f-pa j-display-loading"><!--div class="cover f-pa center"></div--><div class="f-pa center image"></div></div></div></div><div class="track f-pa j-trackBar"><div class="j-trackBar-track1 tc f-f0" style="display:block;"></div><div class="j-trackBar-track2 tc tc2 f-f0" style="display:block;"></div></div><div class="control f-pa"><div class="con j-controlBar-optArea f-cb"><div class="playBtn f-fl f-cp j-controlBar-playBtn f-icon" title="播放"></div><div class="pauseBtn f-fl f-cp j-controlBar-pauseBtn f-icon" title="暂停"></div><div class="time f-fl"><span class="j-controlBar-time f-fc go">00 : 00</span>&nbsp/&nbsp<span class="j-controlBar-totalTime total">00 : 00</span></div><!--div class="bottomlogo f-fr j-controlBar-bottomlogo">中国大学MOOC</div--><div class="fullScreenBtn f-fr f-cp j-controlBar-fullScreenBtn f-icon"></div><div class="subtitle f-pr f-fr j-controlBar-subtitle f-cp"><div class="f-cp subtitleBtn j-controlBar-subtitleBtn item disable">字幕</div><ul class="j-controlBar-subtitle-other f-pa"><li data-type="0" class="selected">中文</li><li data-type="1">英文</li></ul></div><div class="quality f-pr f-fr j-controlBar-quality f-cp"><div class="qualityBtn j-controlBar-qualityBtn item">标清</div><ul class="j-controlBar-quality-other f-pa"><li data-type="HD" class="selected">高清</li><li data-type="BD">蓝光</li></ul></div><div class="rate f-pr f-fr f-cp j-controlBar-rate"><div class="rateBtn j-controlBar-rateBtn item">1倍速</div><ul class="f-pa"><li class="j-controlBar-rate-items" rate="2">2倍速</li><li class="j-controlBar-rate-items" rate="1.75">1.75倍速</li><li class="j-controlBar-rate-items" rate="1.5">1.5倍速</li><li class="j-controlBar-rate-items" rate="1.25">1.25倍速</li><li class="j-controlBar-rate-items" rate="1" class="selected">1倍速</li><li class="j-controlBar-rate-items" rate="0.75">0.75倍速</li></ul></div><div class="volume f-fr f-pr f-cp j-controlBar-volume"><div class="icon f-pa f-icon j-controlBar-volume-mute"></div><div class="volumeSlide f-pa j-controlBar-volume-slide"><div class="j-controlBar-volume-total f-pa total"></div><div class="j-controlBar-volume-icon f-pa icon"></div><div class="j-controlBar-volume-current f-pa current"></div></div></div></div><div class="progressBar j-controlBar-progressBar f-pr f-cp"><div class="selectTime j-controlBar-selectTime hide f-pa">00:00</div><div class="bufferBar j-controlBar-bufferBar f-pa"> </div><div class="timeBar j-controlBar-timeBar f-pa"> </div><div class="timeIcon j-controlBar-timeIcon f-pa"></div></div></div></div>'
})(); (function() {
    var cr = eduPlayer;
    cr.container = cr.u.C();
    var pro = cr.container.extend(cr.dispatcher);
    pro.kg = function(option) {
        this.ry.kg.apply(this, arguments);
        if (!option || !option.parent) return;
        this.jS = option.parent;
        this.ly = cr.u.extend(cr.defaultPlayerConfig, option.playerConfig || {});
        this.cAi = option.mediaData;
        this.cAf()
    };
    pro.cAf = function() {
        this.cAb()
    };
    pro.cAb = function() {
        this.jS.innerHTML = cr.playerHtmlTemp;
        this.fo = cr.u.getByClassName("player", this.jS)[0];
        this.is = new cr.player(this.fo, this.ly);
        this.oU = new cr.viewContainer(this.fo, this.ly);
        this.bcf = new cr.centralController(this.is, this.oU);
        this.cdD(this.cAi);
        this.Gn()
    };
    pro.cdD = function(mediaData) {
        if ( !! mediaData) {
            this.is.setMediaData(mediaData);
            this.oU.setMediaData(mediaData);
            this.oU.resetCfg();
            if ( !! this.ly.autoPlay || this.ly.beforePlay) {
                this.is.load()
            } else {
                if (mediaData.mediaType == "video") {
                    this.is.showPoster()
                }
                this.oU.setPlayerState(false)
            }
        } else {
            this.oU.showIdle();
            return
        }
    };
    pro.Gn = function() {
        this.is.kI(cr.exportEvent.ANCHOR_TRIGGER, this.sY.bind(this));
        this.is.kI(cr.exportEvent.CHANGE_MUTE, this.sY.bind(this));
        this.is.kI(cr.exportEvent.CHANGE_VOLUME, this.sY.bind(this));
        this.bcf.kI(cr.exportEvent.PLAY_END, this.sY.bind(this));
        this.bcf.kI(cr.exportEvent.SEEK, this.sY.bind(this));
        this.bcf.kI(cr.exportEvent.CHANGE_QUALITY, this.sY.bind(this));
        this.bcf.kI(cr.exportEvent.CHANGE_RATE, this.sY.bind(this));
        this.bcf.kI(cr.exportEvent.PLAY, this.sY.bind(this))
    };
    pro.sY = function(e) {
        this.gO(e.type, e.data)
    };
    pro.playMedia = function(mediaData) {
        this.cdD(mediaData)
    };
    pro.stop = function() {
        this.is.stop()
    };
    pro.pause = function() {
        this.is.pause()
    };
    pro.play = function() {
        this.is.play()
    };
    pro.seek = function(position) {
        this.is.seek(position)
    };
    pro.volume = function(vol) {
        this.is.setVolume(vol)
    };
    pro.getState = function(vol) {
        return this.is.getState()
    };
    pro.getTime = function(vol) {
        return this.is.getTime()
    };
    pro.mobileMode = function() {
        this.is.mobileMode()
    };
    pro.destroy = function() {
        this.is.destroy()
    };
    window.EduPlayer = eduPlayer.container
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    b = NEJ.P("nej.p"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    j = NEJ.P("nej.j"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    tC,
    czX;
    eu.brx = NEJ.C();
    tC = eu.brx.bu(eu.cq, true);
    czX = eu.brx.cE;
    tC.bP = function() {
        this.bQ()
    };
    tC.bcr = function() {
        this.gJ.kI("onAnchor", this.bIw.bind(this));
        this.gJ.kI("onPlayEnd", this.UG.bind(this));
        this.gJ.kI("onSeek", this.UG.bind(this));
        this.gJ.kI("onChangeMute", this.UG.bind(this));
        this.gJ.kI("onChangeVolume", this.UG.bind(this));
        this.gJ.kI("onChangeQuality", this.czW.bind(this));
        this.gJ.kI("onChangeRate", this.UG.bind(this));
        this.gJ.kI("onPlay", this.UG.bind(this))
    };
    tC.UG = function(W) {
        this.bn(W.type, W.data)
    };
    tC.bIw = function(W) {
        this.bn("onAnchorPoint", W.data)
    };
    tC.czW = function(W) {
        var bz = 0;
        switch (W.data) {
        case "SD":
            bz = 1;
            break;
        case "HD":
            bz = 2;
            break;
        case "SHD":
            bz = 3;
            break
        }
        this.bn("onChangeQuality", bz)
    };
    tC.dK = function() {
        this.gJ.stop()
    };
    tC.ceK = function() {
        this.gJ.pause()
    };
    tC.wJ = function() {
        this.gJ.play()
    };
    tC.bcO = function() {
        return this.gJ.getTime()
    };
    tC.ceJ = function(bgK) {
        this.gJ.seek(bgK)
    };
    tC.bgL = function() {
        return this.gJ.getState()
    };
    tC.dlS = function() {
        this.gJ.mobileMode()
    };
    tC.bF = function(Y) {
        this.bI(Y);
        this.pm = Y.parent;
        this.gJ = new EduPlayer({
            parent: this.pm,
            playerConfig: Y.playerConfig,
            mediaData: Y.mediaData
        });
        this.bcr()
    };
    tC.bL = function() {
        this.gJ.destroy();
        delete this.gJ;
        this.pm.innerHTML = "";
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    b = NEJ.P("nej.p"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    j = NEJ.P("nej.j"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    nF,
    czU;
    eu.He = NEJ.C();
    nF = eu.He.bu(eu.cq, true);
    czU = eu.He.cE;
    nF.bP = function() {
        this.bQ()
    };
    nF.bcr = function() {
        this.mw.bf("onLoad", this.czS.Z(this));
        this.mw.bf("onAnchorPoint",
        function(W) {
            this.bn("onAnchorPoint", W)
        }.Z(this));
        this.mw.bf("onPlayEnd",
        function() {
            eu.eE("video", "complete");
            this.bn("onPlayEnd")
        }.Z(this));
        this.mw.bf("onSeek",
        function(gK) {
            eu.eE("video", "seek", gK);
            this.bn("onSeek", gK)
        }.Z(this));
        this.mw.bf("onChangeMute",
        function(bgF) {
            eu.eE("video", "mute", bgF);
            j.ox("hasVolume", {
                path: "/",
                domain: "." + g.moocHost,
                value: !bgF + "",
                expires: 365
            });
            this.bn("onChangeMute", bgF)
        }.Z(this));
        this.mw.bf("onChangeVolume",
        function(nm) {
            eu.eE("video", "volume", nm);
            j.ox("videoVolume", {
                path: "/",
                domain: "." + g.moocHost,
                value: nm + "",
                expires: 365
            });
            this.bn("onChangeVolume", nm)
        }.Z(this));
        this.mw.bf("onChangeQuality",
        function(FC) {
            eu.eE("video", "quality", "changeToQuality:" + FC);
            j.ox("videoResolutionType", {
                path: "/",
                domain: "." + g.moocHost,
                value: FC + "",
                expires: 365
            });
            this.brw = FC;
            this.bn("onChangeQuality", FC)
        }.Z(this));
        this.mw.bf("onChangeRate",
        function(qM) {
            j.ox("videoRate", {
                path: "/",
                domain: "." + g.moocHost,
                value: qM + "",
                expires: 365
            });
            this.bn("onChangeRate", qM)
        }.Z(this));
        this.mw.bf("onWait",
        function(bsh) {
            eu.eE("video", "waitplay", "" + Math.floor(bsh / 1e3));
            this.bn("onWait", bsh)
        }.Z(this));
        this.mw.bf("onPlay",
        function() {
            eu.eE("video", "play");
            this.bn("onPlay", this.brv())
        }.Z(this))
    };
    nF.czS = function() {
        if (!this.hp) {
            return
        }
        this.mw.UA(this.hp)
    };
    nF.czR = function() {
        return this.brw
    };
    nF.czQ = function() {
        this.mw.dK()
    };
    nF.cdB = function() {
        this.mw.ceK()
    };
    nF.cdA = function() {
        this.mw.wJ()
    };
    nF.brv = function() {
        return this.mw.bcO()
    };
    nF.dlT = function(bgK) {
        this.mw.ceJ(bgK)
    };
    nF.bgL = function() {
        return this.mw.bgL()
    };
    nF.dlV = function() {
        return this.mw.bgL() == "PLAYING"
    };
    nF.czL = function() {
        try {
            var bbh = document.createElement("video");
            var Vp = !!bbh.canPlayType && bbh.canPlayType("video/mp4") != "";
            if (b.Dz.browser == "firefox") {
                Vp = false
            }
        } catch(e) {
            Vp = false
        }
        return Vp
    };
    nF.cdy = function() {
        if ( !! this.hp.resolutions) {
            var FC = j.ox("videoResolutionType");
            var brp = this.Uj && this.wD ? this.hp.mp4Url.sdfile: this.hp.resolutions.sdfile;
            var bdj = this.Uj && this.wD ? this.hp.mp4Url.hdfile: this.hp.resolutions.hdfile;
            var bRU = this.Uj && this.wD ? this.hp.mp4Url.shdfile: this.hp.resolutions.shdfile;
            if (FC == "1" && !!brp) {
                this.brw = 1;
                return {
                    quality: "SD",
                    url: brp,
                    file: brp
                }
            } else if (FC == "2" && !!bdj) {
                this.brw = 2;
                return {
                    quality: "HD",
                    url: bdj,
                    file: bdj
                }
            } else if (FC == "3" && !!bRU) {
                this.brw = 3;
                return {
                    quality: "SHD",
                    url: bRU,
                    file: bRU
                }
            } else {
                return !! bdj ? {
                    quality: "HD",
                    file: bdj
                }: {
                    quality: "SD",
                    file: brp
                }
            }
        }
    };
    nF.czE = function() {
        var FD = j.ox("videoVolume");
        FD = isNaN(FD) || FD == "" ? .8 : FD;
        FD = !!this.hp.videoVolume ? this.hp.videoVolume: !!FD ? FD: .8;
        var Uh = j.ox("hasVolume");
        Uh = Uh == "" ? "true": Uh;
        Uh = this.hp.hasVolume != undefined ? this.hp.hasVolume: Uh == "true";
        return {
            volume: FD,
            hasVolume: Uh
        }
    };
    nF.czD = function() {
        var qM = j.ox("videoRate");
        return isNaN(qM) || qM == "" ? 1 : qM
    };
    nF.czC = function(Y) {
        this.hp = Y.videoInfo;
        this.czz = Y.notAllowFullScreen;
        this.pm = Y.parent;
        this.brm = this.czE();
        this.wD = Y.useHtml5Player === undefined ? true: Y.useHtml5Player;
        this.Uj = this.czL();
        this.czy()
    };
    nF.czy = function() {
        this.bn("playerSelectInfo", {
            supportH5: this.Uj,
            htm5Player: this.wD
        });
        if (this.Uj && this.wD) {
            var czt = {
                start: this.hp.start,
                mediaType: "video",
                posterUrl: this.hp.image,
                defaultQuality: this.cdy().quality,
                movieList: {
                    SD: {
                        urls: [this.hp.mp4Url.sdfile]
                    },
                    HD: {
                        urls: [this.hp.mp4Url.hdfile]
                    },
                    SHD: {
                        urls: [this.hp.mp4Url.shdfile]
                    }
                },
                trackFiles: this.hp.html5caption,
                anchorList: this.hp.cluPointData
            };
            this.mw = eu.brx.bh({
                parent: this.pm,
                playerConfig: {
                    autoPlay: !!this.hp.autoStart,
                    volume: this.brm.volume,
                    mute: !this.brm.hasVolume,
                    rate: this.czD(),
                    beforePlay: false,
                    trackSwitch: true
                },
                mediaData: czt
            })
        } else {
            this.hp.file = this.cdy().file;
            this.hp.videoVolume = this.brm.volume;
            this.hp.hasVolume = this.brm.hasVolume;
            this.mw = eu.bsn.bh({
                parent: this.pm,
                notAllowFullScreen: this.czz,
                videoInfo: this.hp
            })
        }
    };
    nF.bF = function(Y) {
        this.bI(Y);
        if (eu.bxJ()) {
            var cJ = Y.videoInfo.mp4Url.sdfile;
            this.fB.innerHTML = '<video width="100%" height="100%" src=' + cJ + ' controls="controls" autoplay="true">';
            return
        }
        this.czC(Y);
        this.bcr()
    };
    nF.bL = function() {
        this.fj();
        this.bO()
    };
    nF.fj = function() {
        this.czQ();
        if ( !! this.fB) {
            var bH = e.cS(this.fB);
            if ( !! bH) {
                for (var i = 0; i < bH.length; i++) {
                    this.fB.removeChild(bH[i])
                }
            }
        }
        if (this.Uj && this.wD) {
            this.mw = eu.brx.bg(this.mw)
        } else {
            this.mw = eu.bsn.bg(this.mw)
        }
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    zG,
    dj = e.bY('<div class="u-progress"><div class="j-xhrProg f-dn"><div class="f-cb proArea"><div class="j-pro proBg f-fl f-pr"><div class="j-progress progress f-pa"></div></div><span class="j-proNum proNum f-fl"></span><a class="j-cancel cancelBtn f-fr f-fc9">取消</a></div><div class="j-info f-cb info"><span class="f-fl f-ib"></span><span class="f-fr f-ib"></span></div></div><div class="j-hackProg hackProg f-cb f-dn"><div class="f-fl"></div><a class="j-cancel cancelBtn f-fl f-fc9">取消</a></div></div>');
    eu.Hp = NEJ.C();
    zG = eu.Hp.bu(eu.cq, !0);
    zG.bU = function() {
        this.bW = dj
    };
    zG.bP = function() {
        this.bQ();
        this.bSi = e.bc(this.bb, "j-progress")[0];
        this.cdv = e.bc(this.bb, "j-cancel");
        this.bSk = e.bc(this.bb, "j-proNum")[0];
        this.db = e.cS(e.bc(this.bb, "j-info")[0]);
        this.cdt = this.db[0];
        this.bSn = this.db[1];
        this.cds = e.bc(this.bb, "j-xhrProg")[0];
        this.bSq = e.bc(this.bb, "j-hackProg")[0];
        this.czi = e.cS(this.bSq)[0];
        v.bf(this.cdv[0], "click", this.iI.Z(this));
        v.bf(this.cdv[1], "click", this.iI.Z(this))
    };
    zG.bdJ = function(W) {
        var czg = this.WG(parseInt(W.timeStamp.toString().substr(0, 13)) - this.Ps),
        czd = (W.loaded / 1e6).toFixed(1),
        czc = ((W.loaded - W.initOffset) / 1e6).toFixed(1),
        bSA = (czc / czg).toFixed(2),
        cdr = Math.ceil(((W.total - W.loaded) / 1e6).toFixed(2) / (bSA > 0 ? bSA: 1)),
        bSF = W.loaded / W.total * 100,
        cdq = Math.ceil(bSF);
        this.cdt.innerText = "已上传：" + czd + "MB / 速度：" + bSA + "M/s";
        this.bSn.innerText = "剩余时间：" + eu.ckz(cdr <= 0 ? 1 : cdr);
        this.bSk.innerText = (cdq == 100 ? 99 : cdq) + "%";
        this.bSi.style.width = (bSF == 100 ? 99 : bSF) + "%"
    };
    zG.bSL = function(W) {
        this.bSn.innerText = "剩余时间：00:00:00";
        this.bSk.innerText = "100%";
        this.bSi.style.width = "100%"
    };
    zG.cdp = function() {
        this.bSi.style.width = 0;
        this.cdt.innerText = "已上传：0MB /0MB 速度：0M/s";
        this.bSn.innerText = "剩余时间：00:00:00";
        this.bSk.innerText = "0%"
    };
    zG.iI = function() {
        this.bn("abort")
    };
    zG.cyV = function(W) {
        this.es();
        if ("withCredentials" in new XMLHttpRequest) {
            e.bZ(this.cds, "f-dn");
            e.bJ(this.bSq, "f-dn");
            this.Ps = W.curTime
        } else {
            e.bJ(this.cds, "f-dn");
            e.bZ(this.bSq, "f-dn");
            this.gX = eu.cv.bh({
                parent: this.czi
            });
            this.gX.xp("上传中···")
        }
    };
    zG.WG = function(cV) {
        if ( !! cV && cV > 0) {
            return Math.ceil(cV / 1e3) > 0 ? Math.ceil(cV / 1e3) : 1
        } else {
            return 1
        }
    };
    zG.es = function() {
        if ( !! this.gX) {
            this.gX = eu.cv.bg(this.gX)
        }
        this.cdp()
    };
    zG.bF = function(Y) {
        this.bI(Y);
        this.bei = Y.data;
        this.cyV(this.bei)
    };
    zG.bL = function() {
        this.es();
        this.bO()
    }
})(); (function() {
    var bq = NEJ.P,
    bm = bq("nej.e"),
    ch = NEJ.P("nej.v"),
    bE = NEJ.P("nej.u"),
    eu = NEJ.P("edu.u"),
    g = window,
    kD,
    bMS;
    var dj = bm.bY('<div class="u-select"><div class="up j-up f-thide"></div><div class="down f-bg j-list"></div></div>');
    eu.fI = NEJ.C();
    kD = eu.fI.bu(eu.cq, !0);
    bMS = eu.fI.prototype;
    kD.bU = function() {
        this.bW = dj
    };
    kD.bF = function(Y) {
        this.bI(Y);
        if ( !! Y.selectIndex && !!Y.list) {
            this.yR(Y.list[Y.selectIndex - 1])
        } else {
            this.Jb.innerText = Y.defaultName || "请选择下拉列表"
        }
        this.cyQ = Y.selectId || "";
        this.AP = Y.list;
        eu.bt(this.oy);
        this.bNh(Y.list);
        this.hd([[this.Jb, "click",
        function(bj) {
            if (!this.kZ) {
                this.bNi(bj)
            }
        }.Z(this)], [document, "click",
        function(bj) {
            eu.bt(this.oy)
        }.Z(this)]]);
        this.kM(false)
    };
    kD.bNh = function(W) {
        this.oy.innerHTML = "";
        if (!W) {
            return
        }
        var eG = W.length;
        for (var i = 0; i < eG; i++) {
            var To = W[i];
            var bNq = '<div class="f-thide list" title="' + bE.dV(To.name) + '">' + bE.dV(To.name) + "</div>";
            var du = bm.iN(bNq);
            this.hd([[du, "click", this.yR.Z(this, To)]]);
            this.oy.appendChild(du);
            if (To.id == this.cyQ) {
                this.Jb.innerText = To.name;
                this.IZ = To
            }
        }
    };
    kD.bP = function() {
        this.bQ();
        this.Jb = bm.bc(this.bb, "j-up")[0];
        this.oy = bm.bc(this.bb, "j-list")[0]
    };
    kD.kM = function(Tn) {
        if ( !! Tn) {
            bm.bJ(this.bb, "disabled")
        } else {
            bm.bZ(this.bb, "disabled")
        }
        this.kZ = !!Tn
    };
    kD.Eq = function() {
        return this.IZ
    };
    kD.cdm = function(ca) {
        bE.bA(this.AP,
        function(W, bd) {
            if (W.id == ca) {
                this.Jb.innerText = W.name;
                this.IZ = W
            }
        }.Z(this))
    };
    kD.bNi = function(bj) {
        ch.dK(bj);
        if (!eu.zy(this.oy)) {
            eu.bw(this.oy)
        } else {
            eu.bt(this.oy)
        }
    };
    kD.yR = function(W, bj) {
        if ( !! bj) {
            ch.dK(bj)
        }
        this.IZ = W;
        this.Jb.innerText = W.name;
        eu.bt(this.oy);
        this.bn("itemSelect", W)
    };
    kD.dlW = function(fc) {
        this.Jb.innerText = fc;
        this.kM(true)
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    nw,
    xe = "ck-courseTestCache";
    p.nQ = NEJ.C();
    nw = p.nQ.bu(p.hA);
    nw.YK = function(dZ, Rm) {
        this.bK({
            key: xe + bD,
            url: "MocAdminQuizBean.getTestDraft",
            param: [dZ, Rm],
            onload: this.cyM.Z(this)
        })
    };
    nw.cyM = function(W) {
        this.bn("onGetTestDraft", W)
    };
    nw.bTm = function(HB, fw, bTr) {
        if (!eu.dM()) return;
        this.bK({
            key: xe + bD,
            url: "MocAdminQuizBean.manageTestContentDraft",
            param: [HB, fw, bTr],
            onload: this.cyL.Z(this, fw)
        })
    };
    nw.cyL = function(fw, W) {
        this.bn("onManageTestContentDraft", fw, W)
    };
    nw.rG = function(jN, fw) {
        if (!eu.dM()) return;
        this.bK({
            key: xe + bD,
            url: "MocAdminQuizBean.manageQuestionDraft",
            param: [jN, fw],
            onload: this.cyK.Z(this, fw)
        })
    };
    nw.cyK = function(fw, W) {
        this.bn("onManageQuestionDraft", fw, W)
    };
    nw.dlX = function(dZ, bTr, cyH) {
        this.bK({
            key: xe + bD,
            url: "MocAdminQuizBean.validateTestDraft",
            param: [dZ, bTr, cyH],
            onload: this.cyG.Z(this)
        })
    };
    nw.cyG = function(W) {
        this.bn("onValidateTestDraft", W)
    };
    nw.dlZ = function(rc) {
        if (!eu.dM()) return;
        this.bK({
            key: xe + bD,
            url: "MocAdminQuizBean.updateTestReleaseTime",
            param: [rc],
            onload: this.cyE.Z(this)
        })
    };
    nw.cyE = function(W) {
        this.bn("onUpdateTestReleaseTime", W)
    };
    nw.beT = function(jN, bcx, fw, cyD) {
        if (!eu.dM()) return;
        this.bK({
            key: xe + bD,
            url: "MocAdminQuizBean.manageAnchorQuestion",
            param: [jN, bcx, fw, cyD],
            onload: this.cyC.Z(this, fw)
        })
    };
    nw.cyC = function(fw, W) {
        this.bn("onManageAnchorQuestion", fw, W)
    };
    nw.cdj = function(cd, nd) {
        this.bK({
            key: xe + bD,
            url: "MocAdminQuizBean.getEvaluateTrain",
            param: [cd, nd],
            onload: this.cyy.Z(this)
        })
    };
    nw.cyy = function(W) {
        this.bn("onGetEvaluateTrain", W)
    };
    nw.dmb = function(jN, fw) {
        if (!eu.dM()) return;
        this.bK({
            key: xe + bD,
            url: "MocAdminQuizBean.manageEvaluateTrainQuestion",
            param: [jN, fw],
            onload: this.cyw.Z(this, fw)
        })
    };
    nw.cyw = function(fw, W) {
        this.bn("onManageEvaluateTrainQuestion", fw, W)
    };
    nw.cys = function(cd) {
        if (!eu.dM()) return;
        this.bK({
            key: xe + bD,
            url: "MocAdminQuizBean.publishEvaluateTrain",
            param: [cd],
            onload: this.cyr.Z(this)
        })
    };
    nw.cyr = function(W) {
        this.bn("onPublishEvaluateTrain", W)
    };
    nw.brc = function(bvY, cd, bd) {
        if (!eu.dM()) return;
        this.bK({
            key: xe + bD,
            url: "MocAdminQuizBean.getOjCaseTextContentByNoskey",
            param: [bvY, cd],
            onload: this.cyq.Z(this, bd)
        })
    };
    nw.cyq = function(bd, W) {
        W.index = bd;
        this.bn("onGetOjCaseTextContentByNoskey", W)
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    t = NEJ.P("nej.ut"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    ui = NEJ.P("nej.ui"),
    Ck,
    bvC;
    var dj = e.bY('<div class="f-cb u-option"><div class="f-cb top"><div class="f-fl j-index index">1</div><div class="f-fl j-content optContent"></div><div class="f-fl f-cb"><div class="isRight j-isRight"><input type="radio" class="answerradio j-answerradio" /><label class="answerlabel j-answerlabel">正确选项</label><input type="checkbox" class="answerradio j-answerbox" /><label class="answerlabel j-boxlabel">正确选项</label></div><a class="j-delete delete f-icon f-fc6" title="删除"></a></div></div><div class="j-addanaly addanaly f-f1 f-fc6">+添加解析</div><div class="j-analysis analysis"></div></div>');
    var Cj = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N"];
    eu.pp = NEJ.C();
    Ck = eu.pp.bu(eu.cq, true);
    bvC = eu.pp.cE;
    Ck.bU = function() {
        this.bW = dj
    };
    Ck.bP = function() {
        this.bQ();
        this.dg = e.bc(this.bb, "j-index")[0];
        this.cyo = e.bc(this.bb, "j-content")[0];
        this.mE = e.bc(this.bb, "j-analysis")[0];
        this.bvJ = e.bc(this.bb, "j-addanaly")[0];
        this.pz = e.bc(this.bb, "j-delete")[0];
        this.cdg = e.bc(this.bb, "j-isRight")[0];
        this.Ym = e.bc(this.bb, "j-answerradio")[0];
        this.bvO = e.bc(this.bb, "j-answerlabel")[0];
        this.Ye = e.bc(this.bb, "j-answerbox")[0];
        this.bvR = e.bc(this.bb, "j-boxlabel")[0];
        v.bf(this.bvJ, "click", this.cym.Z(this))
    };
    Ck.cym = function() {
        if ( !! this.KC) {
            if ( !! this.Cg) {
                eu.bt(this.mE);
                this.Cg = false
            } else {
                eu.bw(this.mE);
                this.Cg = true
            }
            return
        } else {
            this.Cg = true;
            this.KC = eu.cH.bh({
                parent: this.mE,
                height: 55,
                width: 677
            })
        }
    };
    Ck.pZ = function(bd) {
        if (!this.Cb) {
            this.dg.innerText = bd + 1
        } else {
            this.dg.innerText = Cj[bd]
        }
        this.kq = bd
    };
    Ck.bfI = function() {
        this.yX.content = this.Pj.cc();
        if ( !! this.KC) {
            this.yX.analyse = this.KC.cc()
        }
        if ( !! this.Cb) {
            if (this.bV == eu.CONST.TYPE_OBJECTIVE_SINGLE) {
                this.yX.answer = this.Ym.checked ? true: false
            } else if (this.bV == eu.CONST.TYPE_OBJECTIVE_MULTI) {
                this.yX.answer = this.Ye.checked ? true: false
            }
        }
        return this.yX
    };
    Ck.kw = function(Y) {
        this.Pj = ui.fK.bh({
            parent: this.cyo,
            content: this.yX.content,
            height: 30
        });
        if ( !! this.yX.analyse) {
            this.KC = eu.cH.bh({
                parent: this.mE,
                height: 55,
                width: 677
            });
            this.KC.cX(this.yX.analyse)
        }
        if (Y.indexNum >= 0) {
            this.kq = Y.indexNum;
            if ( !! this.Cb) {
                this.dg.innerText = Cj[parseInt(Y.indexNum)]
            } else {
                this.dg.innerText = parseInt(Y.indexNum) + 1
            }
        }
        if ( !! Y.canDelete) {
            v.bf(this.pz, "click",
            function() {
                this.bn("deleteOption", this.kq)
            }.Z(this));
            eu.bw(this.pz)
        } else {
            eu.bt(this.pz)
        }
        if ( !! this.Cb) {
            if (this.bV == eu.CONST.TYPE_OBJECTIVE_SINGLE) {
                this.Ym.checked = this.yX.answer ? true: false;
                this.Ym.setAttribute("name", this.DM);
                this.Ym.setAttribute("id", this.DM + this.kq);
                this.bvO.setAttribute("for", this.DM + this.kq)
            } else if (this.bV == eu.CONST.TYPE_OBJECTIVE_MULTI) {
                this.Ye.checked = this.yX.answer ? true: false;
                this.Ye.setAttribute("name", this.DM);
                this.Ye.setAttribute("id", this.DM + this.kq);
                this.bvR.setAttribute("for", this.DM + this.kq)
            }
        }
    };
    Ck.bF = function(Y) {
        this.bI(Y);
        this.Cg = false;
        this.yX = Y.optionDto || {};
        this.Cb = Y.isVideoTest || false;
        if ( !! this.Cb) {
            this.bV = Y.questionType;
            this.DM = Y.nameRandom;
            eu.bw(this.cdg);
            eu.bt(this.bvJ);
            if (this.bV == eu.CONST.TYPE_OBJECTIVE_SINGLE) {
                eu.bw(this.Ym);
                eu.bw(this.bvO);
                eu.bt(this.Ye);
                eu.bt(this.bvR)
            } else if (this.bV == eu.CONST.TYPE_OBJECTIVE_MULTI) {
                eu.bt(this.Ym);
                eu.bt(this.bvO);
                eu.bw(this.Ye);
                eu.bw(this.bvR)
            }
        } else {
            eu.bt(this.cdg);
            eu.bw(this.bvJ);
            this.yX.answer = Y.isRightAnswer || false
        }
        this.kw(Y)
    };
    Ck.gS = function() {
        if ( !! this.Pj) {
            this.Pj = ui.fK.bg(this.Pj)
        }
        if ( !! this.KC) {
            this.KC = eu.cH.bg(this.KC)
        }
    };
    Ck.bL = function() {
        this.gS();
        this.bO()
    };
    Ck.bfW = function() {
        eu.bt(this.pz)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    Pi;
    eu.bgd = NEJ.C();
    Pi = eu.bgd.bu(eu.cq, true);
    Pi.bP = function() {
        this.bQ()
    };
    Pi.KL = f;
    Pi.bfW = function() {
        if ( !! this.jz && this.jz.length) {
            for (var i = 0; i < this.jz.length; i++) {
                if ( !! this.jz[i]) {
                    this.jz[i].bfW()
                }
            }
        }
        if ( !! this.jy && this.jy.length) {
            for (var i = 0; i < this.jy.length; i++) {
                if ( !! this.jy[i]) {
                    this.jy[i].bfW()
                }
            }
        }
    };
    Pi.cdf = function() {
        var kL = [],
        pJ = [];
        if ( !! this.ns) {
            var iq = this.ns.zZ();
            if ( !! iq && !!iq.length) {
                for (var j = 0; j < iq.length; j++) {
                    var gf = iq[j].split("@")[0];
                    var cJ = iq[j].split("@")[1];
                    kL.push(cJ);
                    pJ.push(gf)
                }
            }
        }
        if ( !! this.jz && !!this.jz.length) {
            for (var i = 0; i < this.jz.length; i++) {
                var iq = this.jz[i].Pj.zZ();
                if ( !! iq && !!iq.length) {
                    for (var j = 0; j < iq.length; j++) {
                        var gf = iq[j].split("@")[0];
                        var cJ = iq[j].split("@")[1];
                        kL.push(cJ);
                        pJ.push(gf)
                    }
                }
            }
        }
        if ( !! this.jy && !!this.jy.length) {
            for (var i = 0; i < this.jy.length; i++) {
                var iq = this.jy[i].Pj.zZ();
                if ( !! iq && !!iq.length) {
                    for (var j = 0; j < iq.length; j++) {
                        var gf = iq[j].split("@")[0];
                        var cJ = iq[j].split("@")[1];
                        kL.push(cJ);
                        pJ.push(gf)
                    }
                }
            }
        }
        if ( !! this.bwv && !!this.bwv.length) {
            for (var i = 0; i < this.bwv.length; i++) {
                var iq = this.bwv[i].Pj.zZ();
                if ( !! iq && !!iq.length) {
                    for (var j = 0; j < iq.length; j++) {
                        var gf = iq[j].split("@")[0];
                        var cJ = iq[j].split("@")[1];
                        kL.push(cJ);
                        pJ.push(gf)
                    }
                }
            }
        }
        return {
            photoUrls: kL,
            gids: pJ
        }
    };
    Pi.bF = function(Y) {
        this.bI(Y);
        if ( !! this.uw) {
            eu.bt(this.uw.parentNode)
        }
    };
    Pi.bL = function() {
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    t = NEJ.P("nej.ut"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    ui = NEJ.P("nej.ui"),
    yE,
    cyk;
    var cyf = e.ee('<div class="f-cb u-judge"><div class="score j-score f-cb"><span class="scoreinfo j-score f-f0">分值：</span><input type="text" class="j-scoreIpt scoreIpt" disabled value="2"/><label class="scoretext">分</label><a href="" class="j-scorehref" target="_blank">修改题型分值</a></div><div class="testinfo f-cb"><p class="f-f0 tipinfo j-tipinfo">1.请填写问题题干</p><div class="j-content content"></div><p class="f-f0 tipinfo j-tipinfo">2.指定题目答案</p><div class="choice"><input type="radio" name="${fill.name}" id="${fill.id1}" class="j-choiceradio choiceradio" /><label for="${fill.id1}" class="choicelabel j-choicelabel">正确</label><input type="radio" name="${fill.name}" id="${fill.id2}" class="j-choiceradio choiceradio" /><label for="${fill.id2}" class="choicelabel j-choicelabel">错误</label></div><div class="j-addAnaly addanaly">+添加解析</div><div class="j-analysis analysis"></div></div></div>');
    var dj;
    eu.bqU = NEJ.C();
    yE = eu.bqU.bu(eu.bgd, true);
    cyk = eu.bqU.cE;
    yE.ZS = function() {
        var Pe = {};
        Pe.name = u.mz(9),
        Pe.id1 = u.mz(9),
        Pe.id2 = u.mz(9);
        dj = e.bY(e.bX(cyf, {
            fill: Pe
        }));
        this.bW = dj
    };
    yE.bU = function() {
        this.bW = dj
    };
    yE.bP = function() {
        this.bQ();
        this.bgA = e.bc(this.bb, "j-score")[0];
        this.qn = e.bc(this.bb, "j-tipinfo");
        this.fF = e.bc(this.bb, "j-content")[0];
        this.Pd = e.bc(this.bb, "j-addAnaly")[0];
        this.mE = e.bc(this.bb, "j-analysis")[0];
        this.Pc = e.bc(this.bb, "j-choiceradio");
        this.cye = e.bc(this.bb, "j-choicelabel");
        this.uw = e.bc(this.bb, "j-scoreIpt")[0];
        this.Xe = e.bc(this.bb, "j-scorehref")[0];
        v.bf(this.Pd, "click", this.bwK.Z(this))
    };
    yE.bwK = function() {
        if ( !! this.uy) {
            if ( !! this.Cg) {
                eu.bt(this.mE);
                this.Cg = false
            } else {
                eu.bw(this.mE);
                this.Cg = true
            }
        } else {
            this.Cg = true;
            this.uy = eu.cH.bh({
                parent: this.mE,
                height: 55,
                width: 703
            })
        }
    };
    yE.KL = function(cU) {
        this.ck.title = this.ns.cc();
        var bgN = {},
        bgO = {};
        bgN.content = "正确";
        bgO.content = "错误";
        if ( !! this.Pc[0].checked) {
            bgN.answer = true;
            bgO.answer = false
        } else {
            bgN.answer = false;
            bgO.answer = true
        }
        if ( !! this.ck.optionDtos) {
            NEJ.EX(this.ck.optionDtos[0], bgN);
            NEJ.EX(this.ck.optionDtos[1], bgO)
        } else {
            this.ck.optionDtos = [];
            this.ck.optionDtos.push(bgN);
            this.ck.optionDtos.push(bgO)
        }
        if (!this.Cb) {
            this.ck.score = this.uw.value;
            if ( !! this.uy) {
                this.ck.analyse = this.uy.cc()
            }
        }
        if ( !! cU) {
            if ( !! this.rq()) return this.ck;
            else {
                return null
            }
        } else {
            return this.ck
        }
        return this.ck
    };
    yE.rq = function() {
        if (!this.ck.title || this.ck.title == "") {
            eu.showToastTips({
                type: 2,
                content: "题目题干不能为空"
            });
            return false
        }
        return true
    };
    yE.kw = function() {
        this.Xe.href = "#" + eu.umi("termPublishSettingScore");
        this.ns = ui.fK.bh({
            parent: this.fF,
            content: this.ck.title,
            height: 99
        });
        if ( !! this.ck.optionDtos) {
            if ( !! this.ck.optionDtos[0].answer) {
                this.Pc[0].checked = true
            } else {
                this.Pc[1].checked = true
            }
        } else {
            this.Pc[0].checked = true
        }
        if (!this.Cb) {
            if ( !! this.ck.analyse) {
                this.uy = eu.cH.bh({
                    parent: this.mE,
                    content: this.ck.analyse,
                    height: 55,
                    width: 703
                })
            }
            this.uw.value = g.objectiveScore.judge || 2;
            this.uw.disabled = true;
            eu.bw(this.Pd);
            this.qn[1].innerText = "2.填写题目答案及解析"
        } else {
            eu.bt(this.bgA);
            eu.bt(this.Pd);
            this.qn[1].innerText = "2.填写题目答案"
        }
    };
    yE.OX = function() {
        var cl = u.mz(9);
        for (var i = 0; i < this.Pc.length; i++) {
            this.Pc[i].setAttribute("name", cl);
            var dh = u.mz(9);
            this.Pc[i].setAttribute("id", dh);
            this.cye[i].setAttribute("for", dh)
        }
    };
    yE.bF = function(Y) {
        this.bI(Y);
        this.ck = Y.questionDto || {};
        this.ck.type = eu.CONST.TYPE_OBJECTIVE_JUDGE;
        this.Cb = Y.isVideoTest || false;
        this.Cg = false;
        this.kw();
        this.OX()
    };
    yE.gS = function() {
        if ( !! this.ns) {
            this.ns = ui.fK.bg(this.ns)
        }
        if ( !! this.uy) {
            this.uy = eu.cH.bg(this.uy)
        }
    };
    yE.bL = function() {
        this.gS();
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    t = NEJ.P("nej.ut"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    ui = NEJ.P("nej.ui"),
    vF,
    bvC;
    var dj = e.bY('<div class="f-cb u-simoption"><div class="f-cb top"><div class="f-fl j-content content"></div><div class="f-fl f-cb"><a class="j-delete delete f-icon f-fc6" title="删除"></a></div><div class="f-fl tipOr j-topOr">或</div></div></div>');
    var Cj = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N"];
    eu.OV = NEJ.C();
    vF = eu.OV.bu(eu.cq, true);
    bvC = eu.OV.cE;
    vF.bU = function() {
        this.bW = dj
    };
    vF.bP = function() {
        this.bQ();
        this.fF = e.bc(this.bb, "j-content")[0];
        this.pz = e.bc(this.bb, "j-delete")[0];
        this.cde = e.bc(this.bb, "j-topOr")[0]
    };
    vF.bfI = function() {
        if ( !! this.Dn) {
            var Wh = this.Dn.cc()
        }
        return Wh
    };
    vF.kw = function(Y) {
        this.Dn = eu.cH.bh({
            parent: this.fF,
            height: 38,
            width: 553,
            labelText: Y.labelText || "",
            content: Y.content || ""
        });
        if ( !! Y.canDelete) {
            v.bf(this.pz, "click",
            function() {
                this.bn("deleteOption")
            }.Z(this));
            eu.bw(this.pz)
        } else {
            eu.bt(this.pz)
        }
        if ( !! Y.showOrTip) {
            eu.bw(this.cde)
        } else {
            eu.bt(this.cde)
        }
    };
    vF.dme = function(fc) {
        this.Dn.Vx(fc || "")
    };
    vF.bF = function(Y) {
        this.bI(Y);
        this.yX = Y.optionDto || {};
        this.kw(Y)
    };
    vF.gS = function() {
        if ( !! this.Dn) {
            this.Dn = eu.cH.bg(this.Dn)
        }
    };
    vF.mh = function() {
        this.Dn.mh()
    };
    vF.jX = function() {
        this.Dn.jX()
    };
    vF.Vx = function(fc) {
        this.Dn.Vx(fc)
    };
    vF.cX = function(fc) {
        this.Dn.cX(fc || "")
    };
    vF.bL = function() {
        this.gS();
        this.bO()
    };
    vF.bfW = function() {
        eu.bt(this.pz)
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    t = NEJ.P("nej.ut"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    ui = NEJ.P("nej.ui"),
    qk,
    cxV;
    var dj = e.bY('<div class="f-cb u-fillblank"><div class="score j-score f-cb"><span class="scoreinfo f-f0">分值：</span><input type="text" class="j-scoreIpt scoreIpt" disabled value="2"/><label class="scoretext">分</label><a href="" class="j-scorehref" target="_blank">修改题型分值</a></div><div class="testinfo f-cb"><p class="f-f0 tipinfo j-tipinfo">1.请填写问题题干</p><div class="j-content content"></div><p class="f-f0 tipinfo j-tipinfo">2.填写题目答案及解析</p><div class="blank f-cb"><div class="filltype"><span class="filltypeinfo f-f0">答案类型</span><input type="radio" class="j-typeradio typeradio" /><label class="typelabel j-typelabel">数值精确</label><input type="radio" class="j-typeradio typeradio" /><label class="typelabel j-typelabel">文字精确</label><input type="radio" class="j-typeradio typeradio" /><label class="typelabel j-typelabel">数值模糊</label><input type="radio" class="j-typeradio typeradio" /><label class="typelabel j-typelabel">文字模糊</label></div><div class="j-answer answer"><div class="oneAns f-cb"><div class="f-fl left"><input type="radio" class="j-ansradio ansradio"/><label class="j-anslabel anslabel">答案唯一</label></div><div class="f-fl right j-oneAnsIpt"></div></div><div class="moreAns f-cb"><div class="f-fl left"><input type="radio" class="j-ansradio ansradio"/><label class="j-anslabel anslabel">答案不唯一</label></div><div class="f-fl right f-cb"><div class="j-morAnsIpt"></div><div class="j-addAns addAns">+添加答案</div></div></div></div><div class="j-answer answer"></div></div><div class="j-addAnaly addanaly">+添加解析</div><div class="j-analysis analysis"></div></div></div>');
    var bqN = ["请录入一个数字格式的答案，学生答题时必须完全一致，才会被判断答题正确。", "请录入一个文本格式的答案，学生答题时必须完全一致，才会被判断答题正确。", "请录入一个数字区间答案，如：(1,10)、[1,10)、(1,10]、[1,10]，学生答题时只要填入的数值在区间包含内，即会被判断答题正确。", "请录入一个文本格式的关键字答案，学生答题时只要填入的答案包含了这个关键字，即会被判断答题正确。"];
    var bqM = eu.CONST.FILL_BLANK_SPLITCHAR;
    var bxe = "!#$&*%";
    eu.bqJ = NEJ.C();
    qk = eu.bqJ.bu(eu.bgd, true);
    cxV = eu.bqJ.cE;
    qk.bU = function() {
        this.bW = dj
    };
    qk.bP = function() {
        this.bQ();
        this.bgA = e.bc(this.bb, "j-score")[0];
        this.qn = e.bc(this.bb, "j-tipinfo");
        this.fF = e.bc(this.bb, "j-content")[0];
        this.cda = e.bc(this.bb, "j-answer")[0];
        this.bxi = e.bc(this.bb, "j-answer")[1];
        this.Pd = e.bc(this.bb, "j-addAnaly")[0];
        this.mE = e.bc(this.bb, "j-analysis")[0];
        this.iY = e.bc(this.bb, "j-typeradio");
        this.bhy = e.bc(this.bb, "j-typelabel");
        this.uw = e.bc(this.bb, "j-scoreIpt")[0];
        this.Xe = e.bc(this.bb, "j-scorehref")[0];
        this.vn = e.bc(this.bb, "j-ansradio");
        this.cxQ = e.bc(this.bb, "j-anslabel");
        this.cxP = e.bc(this.bb, "j-oneAnsIpt")[0];
        this.bxq = e.bc(this.bb, "j-morAnsIpt")[0];
        this.cxK = e.bc(this.bb, "j-addAns")[0];
        v.bf(this.Pd, "click", this.bwK.Z(this));
        u.bA(this.vn,
        function(bo, bd) {
            v.bf(bo, "click",
            function() {
                this.bhD(bd == 0)
            }.Z(this))
        }.Z(this));
        u.bA(this.iY,
        function(bo, bd) {
            v.bf(bo, "click",
            function() {
                this.ccY(bd)
            }.Z(this))
        }.Z(this));
        v.bf(this.cxK, "click", this.cxH.Z(this))
    };
    qk.bwK = function() {
        if ( !! this.uy) {} else {
            this.Cg = true;
            this.uy = eu.cH.bh({
                parent: this.mE,
                height: 55,
                width: 703
            })
        }
    };
    qk.KL = function(cU) {
        this.ck.title = this.ns.cc();
        for (var i = 0; i < this.iY.length; i++) {
            if ( !! this.iY[i].checked) {
                this.ck.fillblankType = i + 1
            }
        }
        if (!this.Cb) {
            this.ck.score = this.uw.value;
            if ( !! this.uy) {
                this.ck.analyse = this.uy.cc()
            }
        }
        this.cxD();
        if ( !! cU) {
            if ( !! this.rq()) return this.ck;
            else {
                return null
            }
        } else {
            return this.ck
        }
    };
    qk.cxD = function() {
        if (this.ck.fillblankType == 1 || this.ck.fillblankType == 2) {
            if (this.vn[0].checked) {
                this.ck.stdAnswer = this.Lr.cc()
            } else {
                var zP = [];
                for (var i = 0; i < this.nG.length; i++) {
                    if ( !! this.nG[i]) {
                        var Wh = this.nG[i].bfI();
                        Wh = !Wh ? bxe: Wh;
                        zP.push(Wh)
                    }
                }
                this.ck.stdAnswer = zP.join(bqM)
            }
        } else {
            this.ck.stdAnswer = this.VL.cc()
        }
    };
    qk.rq = function() {
        if (!this.ck.title || this.ck.title == "") {
            eu.showToastTips({
                type: 2,
                content: "题目题干不能为空"
            });
            return false
        }
        if (!this.ck.stdAnswer || this.ck.stdAnswer == "") {
            eu.showToastTips({
                type: 2,
                content: "题目答案不能为空"
            });
            return false
        }
        if (this.ck.fillblankType == 1 && this.vn[0].checked) {
            if (!this.ck.stdAnswer.match("^[+-]?\\d+\\.?\\d*$")) {
                eu.showToastTips({
                    type: 2,
                    content: "数值输入格式不匹配"
                });
                return false
            }
        } else if (this.ck.fillblankType == 1 && this.vn[1].checked) {
            var zP = this.ck.stdAnswer.split(bqM);
            for (var i = 0; i < zP.length; i++) {
                if (zP[i] == bxe) {
                    eu.showToastTips({
                        type: 2,
                        content: "第" + (i + 1) + "个答案数值为空"
                    });
                    return false
                } else if (!zP[i].match("^[+-]?\\d+\\.?\\d*$")) {
                    eu.showToastTips({
                        type: 2,
                        content: "第" + (i + 1) + "个答案数值输入格式不匹配"
                    });
                    return false
                }
            }
        } else if (this.ck.fillblankType == 2 && this.vn[0].checked) {
            if (!this.ck.stdAnswer) {
                eu.showToastTips({
                    type: 2,
                    content: "答案内容不能为空"
                });
                return false
            }
        } else if (this.ck.fillblankType == 2 && this.vn[1].checked) {
            var zP = this.ck.stdAnswer.split(bqM);
            for (var i = 0; i < zP.length; i++) {
                if (zP[i] == bxe) {
                    eu.showToastTips({
                        type: 2,
                        content: "第" + (i + 1) + "个答案为空"
                    });
                    return false
                }
            }
        } else if (this.ck.fillblankType == 3) {
            if (!this.ck.stdAnswer.match(/[\[\(]-{0,1}\d+\.{0,1}\d*,-{0,1}\d+\.{0,1}\d*[\]\)]/)) {
                eu.showToastTips({
                    type: 2,
                    content: "数值输入格式不匹配"
                });
                return false
            }
        }
        return true
    };
    qk.cxC = function() {
        this.VL = eu.cH.bh({
            parent: this.bxi,
            labelText: bqN[2],
            width: 703,
            height: 68
        });
        this.Lr = eu.cH.bh({
            parent: this.cxP,
            labelText: bqN[0],
            width: 603,
            height: 48
        });
        for (var i = 0; i < 2; i++) {
            var bhT = eu.OV.bh({
                parent: this.bxq,
                width: 603,
                height: 48,
                labelText: "",
                showOrTip: true
            });
            this.nG.push(bhT)
        }
        if ( !! this.ck.stdAnswer) {
            if (this.ck.fillblankType == 3 || this.ck.fillblankType == 4) {
                this.VL.cX(this.ck.stdAnswer);
                this.vn[0].checked = true;
                this.bhD(true)
            } else {
                var bqE = this.ck.stdAnswer.split(bqM);
                if (bqE.length == 1) {
                    this.vn[0].checked = true;
                    this.Lr.cX(bqE[0]);
                    this.bhD(true)
                } else {
                    this.vn[1].checked = true;
                    u.bA(bqE,
                    function(bo, bd) {
                        if (bd < 2) {
                            this.nG[bd].cX(bo)
                        } else {
                            var bhT = eu.OV.bh({
                                parent: this.bxq,
                                width: 603,
                                height: 48,
                                labelText: "",
                                canDelete: true,
                                content: bqE[bd],
                                deleteOption: this.ccX.Z(this, bd)
                            });
                            this.nG.push(bhT)
                        }
                    }.Z(this));
                    this.bhD(false)
                }
            }
        } else {
            this.vn[0].checked = true;
            this.bhD(true)
        }
    };
    qk.cxH = function() {
        if ( !! this.vn[0].checked) return;
        var bhT = eu.OV.bh({
            parent: this.bxq,
            width: 603,
            height: 48,
            labelText: "",
            content: "",
            canDelete: true,
            deleteOption: this.ccX.Z(this, this.nG.length)
        });
        this.nG.push(bhT)
    };
    qk.ccX = function(bd) {
        if ( !! this.nG[bd]) {
            this.nG[bd] = eu.OV.bg(this.nG[bd])
        }
    };
    qk.bhD = function(cU) {
        if ( !! cU) {
            for (var i = 0; i < this.nG.length; i++) { !! this.nG[i] && this.nG[i].mh()
            }
            this.Lr.jX()
        } else {
            for (var i = 0; i < this.nG.length; i++) { !! this.nG[i] && this.nG[i].jX()
            }
            this.Lr.mh()
        }
    };
    qk.kw = function() {
        this.Xe.href = "#" + eu.umi("termPublishSettingScore");
        this.ns = ui.fK.bh({
            parent: this.fF,
            content: this.ck.title,
            height: 99
        });
        if (!this.Cb) {
            if ( !! this.ck.analyse) {
                this.uy = eu.cH.bh({
                    parent: this.mE,
                    content: this.ck.analyse,
                    height: 55,
                    width: 703
                })
            }
            this.uw.value = g.objectiveScore.blank || 2;
            this.uw.disabled = true;
            eu.bw(this.Pd);
            this.qn[1].innerText = "2.填写题目答案及解析"
        } else {
            eu.bt(this.bgA);
            eu.bt(this.Pd);
            this.qn[1].innerText = "2.填写题目答案"
        }
    };
    qk.OX = function() {
        var cl = u.mz(9);
        for (var i = 0; i < this.iY.length; i++) {
            this.iY[i].setAttribute("name", cl);
            var dh = u.mz(9);
            this.iY[i].setAttribute("id", dh);
            this.bhy[i].setAttribute("for", dh)
        }
        var cl = u.mz(9);
        for (var i = 0; i < this.vn.length; i++) {
            this.vn[i].setAttribute("name", cl);
            var dh = u.mz(9);
            this.vn[i].setAttribute("id", dh);
            this.cxQ[i].setAttribute("for", dh)
        }
    };
    qk.ccY = function(bd) {
        switch (bd) {
        case 0:
        case 1:
            this.iY[bd].checked = true;
            eu.bw(this.cda);
            eu.bt(this.bxi);
            this.ccW(bd);
            break;
        case 2:
        case 3:
            this.iY[bd].checked = true;
            eu.bt(this.cda);
            eu.bw(this.bxi);
            this.ccW(bd);
            break
        }
        this.ck.fillblankType = bd + 1
    };
    qk.ccW = function(bd) {
        if (bd == 0 || bd == 1) {
            this.Lr.Vx(bqN[bd])
        } else {
            this.VL.Vx(bqN[bd])
        }
    };
    qk.bF = function(Y) {
        this.bI(Y);
        this.ck = Y.questionDto || {};
        this.ck.type = eu.CONST.TYPE_OBJECTIVE_FILLBLANK;
        this.ck.fillblankType = this.ck.fillblankType || 1;
        this.nG = [];
        this.Cb = Y.isVideoTest || false;
        this.Cg = false;
        this.cxC();
        this.kw();
        this.OX();
        this.ccY(this.ck.fillblankType - 1)
    };
    qk.gS = function() {
        if ( !! this.ns) {
            this.ns = ui.fK.bg(this.ns)
        }
        if ( !! this.VL) {
            this.VL = eu.cH.bg(this.VL)
        }
        if ( !! this.Lr) {
            this.Lr = eu.cH.bg(this.Lr)
        }
        for (var i = 0; i < this.nG.length; i++) {
            if ( !! this.nG[i]) {
                this.nG[i] = eu.OV.bg(this.nG[i])
            }
        }
        if ( !! this.uy) {
            this.uy = eu.cH.bg(this.uy)
        }
    };
    qk.bL = function() {
        this.gS();
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    u = NEJ.P("nej.u"),
    eu = NEJ.P("edu.u"),
    OR,
    cF = e.dD(".#<uispace> .status{color: #ec681e;}"),
    dj = e.bY('<div class="j-statusall statusall"><p class="j-status status"></p><p class="j-statusinfo statusinfo f-fc9"></p></div>');
    eu.Bx = NEJ.C();
    OR = eu.Bx.bu(eu.cq, true);
    OR.bU = function() {
        this.bW = dj;
        this.dv = cF
    };
    OR.bP = function() {
        this.bQ();
        this.hL = e.bc(this.bb, "j-status")[0];
        this.VI = e.bc(this.bb, "j-statusinfo")[0]
    };
    OR.bF = function(Y) {
        this.bI(Y);
        var fJ = Y.status;
        this.jw(fJ)
    };
    OR.jw = function(fJ) {
        switch (fJ) {
        case eu.CONST.DRAFT_STATUS_CREATE:
            this.hL.innerText = "尚未发布";
            this.VI.innerText = "尚未发布，在前端页面上还不能看到相应信息";
            break;
        case eu.CONST.DRAFT_STATUS_PUBLISHED:
            this.hL.innerText = "已发布";
            this.VI.innerText = "已发布后如果有内容的更新，需要再次点击“发布”进行发布";
            break;
        case eu.CONST.DRAFT_STATUS_MODIFIED:
            this.hL.innerText = "有修改，尚未发布";
            this.VI.innerText = "点击“发布”后才能在前端页面看到你编辑好的内容";
            break;
        case eu.CONST.DRAFT_STATUS_DELETED:
            break;
        default:
            this.hL.innerText = "尚未发布";
            this.VI.innerText = "尚未发布，在前端页面上还不能看到相应信息";
            break
        }
    };
    OR.ccU = function(fJ) {
        switch (fJ) {
        case eu.CONST.TERMSTATUS_UNDECIDED:
            this.hL.innerText = "等待审核";
            this.VI.innerText = "首次发布需要经过高教社编辑审核，审核通过后用户才能看到课程";
            break;
        case eu.CONST.TERMSTATUS_AUDIT_FAIL:
            this.hL.innerText = "审核未通过";
            this.VI.innerText = "首次发布需要经过高教社编辑审核，审核通过后用户才能看到课程";
            break
        }
    };
    OR.bL = function() {
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    gP,
    nb = "ck-ManageStudentCache",
    ji = 20;
    p.vL = NEJ.C();
    gP = p.vL.bu(p.hA);
    gP.ccT = function(cd) {
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.getMocTermDataStatisticDto",
            param: [cd],
            onload: this.cxl.Z(this)
        })
    };
    gP.cxl = function(W) {
        this.bn("onGetMocTermDataStatisticDto", W)
    };
    gP.ccS = function(dZ, EK) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.confirmTestScores",
            param: [dZ, EK],
            onload: this.cxj.Z(this)
        })
    };
    gP.cxj = function(W) {
        this.bn("onConfirmScores", W)
    };
    gP.cxi = function(dZ) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.confirmSubjectScore",
            param: [dZ],
            onload: this.cxh.Z(this)
        })
    };
    gP.cxh = function(W) {
        this.bn("onConfirmSubjectScore", W)
    };
    gP.cxg = function(yc, EK) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.confirmExamScores",
            param: [yc, EK],
            onload: this.cxf.Z(this)
        })
    };
    gP.cxf = function(W) {
        this.bn("onConfirmExamScores", W)
    };
    gP.byd = function(cd, hu, yb, OM, ma) {
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.getStudentScores",
            param: [cd, ji, hu, yb, OM, ma],
            onload: this.cxe.Z(this)
        })
    };
    gP.cxe = function(W) {
        this.bn("onGetStudentScores", W)
    };
    gP.byh = function(dZ, hu, rS, ow) {
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.getStudentTestAggreScores",
            param: [dZ, ji, hu, rS, ow],
            onload: this.cxd.Z(this)
        })
    };
    gP.cxd = function(W) {
        this.bn("onGetStudentTestAggreScores", W)
    };
    gP.byk = function(dZ, hu, rS, ow) {
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.getStudentScoresByTestId",
            param: [dZ, ji, hu, rS, ow],
            onload: this.cwX.Z(this)
        })
    };
    gP.cwX = function(W) {
        this.bn("onGetStudentScoresByTestId", W)
    };
    gP.ccQ = function(yc, hu, rS) {
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.getStudentScoresByExamId",
            param: [yc, hu, ji, rS],
            onload: this.cwU.Z(this)
        })
    };
    gP.cwU = function(W) {
        this.bn("onGetStudentScoresByExamId", W)
    };
    gP.cwT = function(dZ, cwR, fP) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.giveAwardsForStudentOnEffectiveScore",
            param: [dZ, cwR, fP],
            onload: this.cwQ.Z(this)
        })
    };
    gP.cwQ = function(W) {
        this.bn("onGiveAwardsForStudentOnEffectiveScore", W)
    };
    gP.cwP = function(dZ, byu, fP) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.giveAwardsForStudentOnSubjectScore",
            param: [dZ, byu, fP],
            onload: this.cwO.Z(this)
        })
    };
    gP.cwO = function(W) {
        this.bn("onGiveAwardsForStudentOnSubjectScore", W)
    };
    gP.ccO = function(dZ, bz) {
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.showSentMailToast",
            param: [dZ, bz],
            onload: this.cwI.Z(this)
        })
    };
    gP.cwI = function(W) {
        this.bn("onShowSentMailToast", W)
    };
    gP.cwH = function(kx, cd) {
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.getSingleStudentScores",
            param: [kx, cd],
            onload: this.cwE.Z(this)
        })
    };
    gP.cwE = function(W) {
        this.bn("onGetSingleStudentScores", W)
    };
    gP.cwD = function(cd, kx) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.generateFinalScores",
            param: [cd, kx],
            onload: this.cwC.Z(this)
        })
    };
    gP.cwC = function(W) {
        this.bn("onGenerateFinalScores", W)
    };
    gP.byC = function(cd) {
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.getTermSummaryInfo",
            param: [cd],
            onload: this.cwA.Z(this)
        })
    };
    gP.cwA = function(W) {
        this.bn("onGetTermSummaryInfo", W)
    };
    gP.cwz = function(dZ, Rm) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.refreshSingleTest",
            param: [dZ, Rm],
            onload: this.cwy.Z(this)
        })
    };
    gP.cwy = function(W) {
        this.bn("onRefreshSingleTest", W)
    };
    gP.cwv = function(dZ) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.refreshExam",
            param: [dZ],
            onload: this.cwt.Z(this)
        })
    };
    gP.cwt = function(W) {
        this.bn("onRefreshExam", W)
    };
    gP.OD = function(cd) {
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.getMocAchivementDto",
            param: [cd],
            onload: this.cws.Z(this)
        })
    };
    gP.cws = function(W) {
        this.bn("onGetMocAchivementDto", W)
    };
    gP.cwq = function(cd) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.submitTermScoreForReview",
            param: [cd],
            onload: this.cwm.Z(this)
        })
    };
    gP.cwm = function(W) {
        this.bn("onSubmitTermScoreForReview", W)
    };
    gP.cwf = function(cwc) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.updateSummaryScore",
            param: [cwc],
            onload: this.cwb.Z(this)
        })
    };
    gP.cwb = function(W) {
        this.bn("onUpdateSummaryScore", W)
    };
    gP.byW = function(cd, hu, yb, OM, ma) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.getRelatedMoocStudentScores4Spoc",
            param: [cd, ji, hu, yb, OM, ma],
            onload: this.cvZ.Z(this)
        })
    };
    gP.cvZ = function(W) {
        this.bn("onGetRelatedMoocStudentScores4Spoc", W)
    };
    gP.bqt = function(cd, ma) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.getMemberByLikeNickname",
            param: [cd, ma],
            onload: this.bjL.Z(this)
        })
    };
    gP.bjL = function(W) {
        this.bn("onGetMemberByLikeNickname", W)
    };
    gP.ccC = function(cd, hu, cl) {
        if (!eu.dM()) return;
        this.bK({
            key: nb + bD,
            url: "MocScoreManagerBean.getSpocStudentStatisticDataDtoList",
            param: [cd, hu, ji, cl],
            onload: this.cvT.Z(this)
        })
    };
    gP.cvT = function(W) {
        this.bn("onGetSpocStudentStatisticDataDtoList", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    AX;
    var cF = e.dD('.#<uispace> {background: url("/res/images/pages/cert/certBg.jpg");width: 842px;height: 620px;line-height: normal;font-family:"微软雅黑";}.#<uispace> .main{width:550px;height:130px;padding:180px 0 0;margin:0 auto;}.#<uispace> .main h3{font-size:22px;color:#333;padding:0 8px 0 0;height:30px;}.#<uispace> .main .txt{font-size:16px;}.#<uispace> .main .cName{font-size:24px;color:#7da914;height:45px;line-height:45px;padding:0 5px;}.#<uispace> .course{width:753px;height:72px;margin:20px auto 13px;}.#<uispace> .course img{width:136px;height:70px;margin:0 10px 0 0;}.#<uispace> .course .info{width:601px;height:72px;color:#333;}.#<uispace> .course .info .cName{padding:0 5px 0 0;}.#<uispace> .course .info .des{width:606px;height:51px;margin:3px 0 0;color:#666;font-family:"serif";line-height: 17px;word-wrap: break-word;}.#<uispace> .lectors{width:650px;height:150px;margin:0 auto;line-height: 21px;}.#<uispace> .bottom{width: 842px;height:30px;text-align:center;}');
    var dn = e.ee('<div class="u-certificateSample f-cb f-pr"><div class="main f-cb"><h3 class="f-cb">XXX</h3><div><span class="txt">完成</span><span class="j-cName cName"></span><span class="txt j-type">课程的学习，成绩合格（优秀）。</span></div></div><div class="lectors j-lectors"></div><div class="course f-cb"><img src="" alt="课程图片" class="j-img f-fl"><div class="info f-fl"><span class="j-cName cName">课程名称</span> （<span class="j-shortName">编号</span>）<div class="j-des des">简介</div><div class="j-desEditor"></div></div></div><div class="bottom">证书编号：XXXXXX &nbsp;&nbsp;&nbsp;发证日期：XXXX年XX月XX日</div></div>');
    eu.YZ = NEJ.C();
    AX = eu.YZ.bu(eu.cq, true);
    AX.bU = function() {
        this.bW = e.bY(e.bX(dn));
        this.dv = cF
    };
    AX.bP = function() {
        this.bQ();
        this.IS = e.bc(this.bb, "j-img")[0];
        this.ccA = e.bc(this.bb, "j-cName");
        this.cvQ = e.bc(this.bb, "j-shortName")[0];
        this.bkG = e.bc(this.bb, "j-des")[0];
        this.bkH = e.bc(this.bb, "j-desEditor")[0];
        this.uA = e.bc(this.bb, "j-type")[0];
        this.bxt = e.bc(this.bb, "j-lectors")[0];
        this.fT = new p.iv
    };
    AX.bF = function(Y) {
        this.bI(Y);
        this.ht = Y.certDto;
        this.zx(false)
    };
    AX.zx = function(cN, W) {
        eu.cZ(this.bkG, !cN);
        eu.cZ(this.bkH, cN);
        this.wb = cN;
        if ( !! this.wy) {
            this.wy.zx(this.wb, W)
        }
        if (cN) {
            this.jW = eu.eh.bh({
                parent: this.bkH,
                critical: 150,
                labelText: "此处请简要概述该课程的主要内容、课程优势等；字数请控制在150字以内，超过字数将无法生成证书。",
                height: 47,
                width: 490
            });
            if ( !! this.ht) {
                this.jW.cX(this.ht.certIntro || "")
            }
        } else { !! W && (this.ht = W);
            if ( !! this.ht) this.Ie(this.ht)
        }
    };
    AX.ZX = function(fm, bz) {
        if (!fm && !this.ht) return;
        this.ht = fm;
        if ( !! bz) {
            this.ht.type = bz
        }
        switch (this.ht.type) {
        case - 1 : this.uA.innerText = "课程的学习，成绩合格/优秀。";
            break;
        case eu.CONST.CERT_TYPE_FREE_NORMAL:
            this.uA.innerText = "课程的学习，成绩合格。";
            break;
        case eu.CONST.CERT_TYPE_FREE_OUTSTANDING:
            this.uA.innerText = "课程的学习，成绩优秀。";
            break
        }
        this.Ie(this.ht)
    };
    AX.bxH = function() {
        var eA = "",
        il = true,
        ccount = null,
        Ic;
        if (this.wb) {
            Ic = this.bay()
        } else {
            Ic = this.ht
        }
        ccount = this.fT.ir(Ic.certIntro);
        if (ccount == 0) {
            eA = "<b>请输入完整的课程介绍。</p>";
            il = false
        }
        if (ccount > 300) {
            eA = "<b>课程介绍超过限定字数，无法生成证书</b><p>证书内的课程介绍需控制在150字以内，请重新输入。</p>";
            il = false
        }
        if (!il) {
            eu.cp.bT({
                type: 1,
                message: eA
            });
            return il
        }
        return Ic
    };
    AX.bay = function() {
        var Sq = eu.Bg(this.ht);
        Sq.certIntro = this.jW.cc();
        Sq.lectorJsonObjects = this.wy.cgn();
        return Sq
    };
    AX.Ie = function(W) {
        this.dy();
        this.IS.src = W.coursePic || g.imageUrlMap.img_default_course;
        this.cvQ.innerText = W.shortName || "";
        this.ccA[0].innerText = this.ccA[1].innerText = u.dV(W.courseName) || "";
        this.bkG.innerText = W.certIntro || "此处请简要概述该课程的主要内容、课程优势等；字数请控制在150字以内，超过字数将无法生成证书。";
        this.wy = eu.bim.bh({
            parent: this.bxt,
            lectorList: W.lectorJsonObjects,
            charge: false
        })
    };
    AX.dy = function() {
        if ( !! this.jW) {
            this.jW = eu.eh.bg(this.jW)
        }
        if ( !! this.wy) {
            this.wy = eu.bim.bg(this.wy)
        }
    };
    AX.bL = function() {
        this.dy();
        this.bO()
    }
})(); (function() {
    var bq = NEJ.P,
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.nj) return;
    bs.nj = NEJ.C();
    bN = bs.nj.bu(bs.bdE);
    bN.bF = function(Y) {
        Y = NEJ.X({},
        Y);
        Y.timing = "easeout";
        this.bI(Y)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    tp;
    eu.Ox = NEJ.C();
    tp = eu.Ox.bu(eu.cq, !0);
    tp.bU = function() {
        this.bW = dj
    };
    tp.bP = function() {
        this.bQ();
        this.fz = new d.qY;
        this.tq = new d.Uf;
        this.tq.bf("onsaveResource", this.MI.Z(this));
        this.fz.bf("ongetLessonUnitPreviewVo", this.Ot.Z(this))
    };
    tp.Mo = f;
    tp.ccz = f;
    tp.yz = f;
    tp.Ot = f;
    tp.dmj = function() {};
    tp.bqq = function(cN) {
        this.bn("switchEditorNot", cN)
    };
    tp.MI = function(W, bcu) {
        if ( !! W) {
            if (bcu == eu.CONST.LESSONUNIT_VIDEO_SRT) {
                this.Mo(this.fH)
            } else {
                this.tA.id = W.id;
                this.bn("onsaveALU", W)
            }
        }
    };
    tp.cvF = function(W) {
        this.bn("onSaveJsonContent", W)
    };
    tp.Wv = function(W) {
        this.tq.bFV(W, this.hG)
    };
    tp.bzC = function(xo, bz) {
        this.fz.bsz(xo, bz)
    };
    tp.bF = function(Y) {
        this.bI(Y);
        this.fH = Y.data;
        this.hG = Y.courseId;
        this.QR = Y.supportAnchor || false;
        this.tA = {};
        if ( !! this.fH) {
            this.yz( !! this.fH.contentId)
        }
    };
    tp.bL = function() {
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    rn,
    dj = e.bY('<div class="u-srtUpload"><div class="j-srtList list"></div><div class="j-info info f-cb" style="display:none;"><div class="f-fl name"></div><div class="f-fl fb"></div><a class="f-fl cancel">取消</a></div><div class="f-cb"><div class="j-select select f-fl"></div><div class="j-upload upload f-pr f-fl"><div class="j-mask mask f-pa"></div><div class="j-mask-number mask mask-number f-pa"></div></div></div></div>');
    var bih = e.ee('{if defined("xlist")}{list xlist as x}{if !x.url}<div class="f-cb"><div class="f-fl name">${x.name|getName}_${x.lang|getSuffix}.srt</div><a class="f-fl j-del" data-index="${x_index}">删除</a></div>{/if}{/list}{/if}');
    eu.bqn = NEJ.C();
    rn = eu.bqn.bu(eu.cq, !0);
    rn.bU = function() {
        this.bW = dj
    };
    rn.bP = function() {
        this.bQ();
        this.Oq = e.bc(this.bb, "j-select")[0];
        this.pf = e.bc(this.bb, "j-upload")[0];
        this.bzG = e.bc(this.bb, "j-mask")[0];
        this.ccv = e.bc(this.bb, "j-mask-number")[0];
        this.oB = e.bc(this.bb, "j-info")[0];
        this.gi = e.bc(this.bb, "j-srtList")[0];
        this.db = e.cS(this.oB);
        this.gj = this.db[0];
        this.Je = this.db[1];
        this.mA = this.db[2];
        this.bqk = this.db[3];
        v.bf(this.mA, "click", this.iI.Z(this));
        v.bf(this.gi, "click", this.cvC.Z(this));
        v.bf(this.bzG, "click",
        function() {
            eu.showToastTips({
                type: 2,
                content: "请先选择字幕语言",
                minutes: 2e3
            })
        });
        v.bf(this.ccv, "click",
        function() {
            eu.showToastTips({
                type: 2,
                content: "每个视频最多上传2个字幕文件",
                minutes: 2e3
            })
        });
        this.cvB = [{
            id: eu.CONST.SRT_TYPE_CH + 1,
            type: eu.CONST.SRT_TYPE_CH,
            name: "中文"
        },
        {
            id: eu.CONST.SRT_TYPE_EN + 1,
            type: eu.CONST.SRT_TYPE_EN,
            name: "英文"
        }]
    };
    rn.bF = function(Y) {
        this.bI(Y);
        this.Jh = Y.data || [];
        this.Ji(this.Jh);
        this.bvv()
    };
    rn.bvv = function() {
        this.cvy();
        this.vV();
        if ( !! this.gX) {
            this.gX = eu.cv.bg(this.gX)
        }
        this.gX = eu.cv.bh({
            parent: this.Je
        });
        this.gX.ce();
        eu.cZ(this.ccv, !!this.Jh && this.Jh.length >= 2);
        eu.bt(this.oB);
        eu.bw(this.pf);
        eu.bw(this.bzG);
        eu.bw(this.Oq)
    };
    rn.Ji = function(W) {
        this.gi.innerHTML = "";
        var du = e.bX(bih, {
            xlist: W
        },
        {
            getName: this.cct,
            getSuffix: this.ccs
        });
        this.gi.innerHTML = du
    };
    rn.cct = function(cl) {
        return u.dV((cl || "").split(".")[0])
    };
    rn.ccs = function(bz) {
        return bz == eu.CONST.SRT_TYPE_CH ? "中文": "英文"
    };
    rn.cvy = function() {
        if ( !! this.bAe) {
            this.bAe = eu.fI.bg(this.bAe)
        }
        this.bAe = eu.fI.bh({
            parent: this.Oq,
            list: this.cvB,
            defaultName: "请选择字幕语言",
            itemSelect: function(W) {
                eu.bt(this.bzG);
                this.bAh = W.type
            }.Z(this)
        })
    };
    rn.Jm = function(cN, W) {
        if ( !! cN) {
            this.gX.xp("上传中···");
            eu.bw(this.mA)
        } else {
            this.gX.ce();
            eu.bt(this.mA)
        }
        var cvu = this.cct(W.name) + "_" + this.ccs(this.bAh) + ".srt";
        this.gj.innerText = cvu;
        eu.bw(this.oB);
        eu.bt(this.pf);
        eu.bt(this.Oq)
    };
    rn.iI = function() {
        if ( !! this.eU) {
            this.eU.rt()
        }
    };
    rn.xt = function(W) {
        if ( !! W && !!W.retSuc) {
            this.gX.ce();
            if (this.Jh.length < 2 && parseInt(this.bAh) >= 0) {
                var cI = {
                    nosKey: W.nosKey,
                    lang: parseInt(this.bAh)
                };
                this.Jh.push(cI);
                this.bn("onsrtload", this.Jh)
            } else {
                this.bvv()
            }
        } else {
            this.bvv();
            eu.zN((W || {}).errorCode, this.iI.Z(this))
        }
    };
    rn.cvt = function(dI) {
        var bd = e.df(dI, "index");
        this.Jh.splice(bd, 1);
        this.bn("onsrtload", this.Jh.length > 0 ? this.Jh: null)
    };
    rn.cvC = function(bj) {
        v.dK(bj);
        var dI = v.eP(bj, "c:j-del");
        if (!dI) return;
        eu.cp.bT({
            type: 1,
            message: "确认删除？",
            cancelFunc: f,
            okFunc: this.cvt.Z(this, dI)
        })
    };
    rn.sF = function(jq) {
        return eu.SN(null, jq, {
            support: ["srt"]
        })
    };
    rn.vV = function() {
        if ( !! this.eU) {
            this.eU = eu.oC.bg(this.eU)
        }
        this.eU = eu.oC.bh({
            parent: this.pf,
            beginUpload: this.Jm.Z(this, true),
            txt: "上传字幕",
            tokenType: eu.CONST.UPLOAD_TOKEN_TYPE_DEFAULT,
            action: "/file/smallFileUpload.htm?convert2utf8=true",
            supportAnchor: false,
            verifyFile: this.sF.Z(this),
            onFinishUpload: this.xt.Z(this),
            onUploadError: function() {
                this.bvv()
            }.Z(this)
        })
    };
    rn.bL = function() {
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    bD = u.eW(),
    qJ,
    MO = "ck-CourseCtCache";
    d.qG = NEJ.C();
    qJ = d.qG.bu(d.hA);
    qJ.bAr = function(cd) {
        this.bK({
            key: MO + bD,
            url: "CourseBean.getLastLearnedMocTermDto",
            param: [cd],
            onload: this.cvp.Z(this)
        })
    };
    qJ.cvp = function(W) {
        this.bn("onGetChapterList", W)
    };
    qJ.VH = function(cd, fa, bao) {
        this.bK({
            key: MO + bD,
            url: "CourseBean.getMocTermDto",
            param: [cd, fa, bao],
            onload: this.tW.Z(this)
        })
    };
    qJ.tW = function(W) {
        this.bn("onGetChapterList", {
            mocTermDto: W,
            lastLearnUnitId: null
        })
    };
    qJ.ccp = function(xo, bFQ, fa, DD) {
        this.bK({
            key: MO + bD,
            url: "CourseBean.getLessonUnitLearnVo",
            param: [xo, bFQ, fa, DD],
            onload: this.cvl.Z(this)
        })
    };
    qJ.cvl = function(W) {
        this.bn("onGetLessonUnitVo", W)
    };
    qJ.bax = function(cvk) {
        this.bK({
            key: MO + bD,
            url: "CourseBean.saveMocContentLearn",
            notShowLoading: true,
            param: [cvk],
            onload: this.cvj.Z(this)
        })
    };
    qJ.cvj = function(W) {
        this.bn("onSaveLearnInfo", W)
    };
    qJ.bqf = function(fh, cd, HO, nd) {
        this.bK({
            key: MO + bD,
            url: "MocMenuItemBean.getMenuItem",
            param: [fh, cd, HO, nd],
            onload: this.baB.Z(this)
        })
    };
    qJ.baB = function(W) {
        this.bn("onGetMenuItem", W)
    };
    qJ.cvi = function(cd) {
        this.bK({
            key: MO + bD,
            url: "TermBean.getNewestItems",
            param: [cd],
            onload: this.cvh.Z(this)
        })
    };
    qJ.cvh = function(W) {
        this.bn("onGetNewestItems", W)
    };
    qJ.cco = function(cvf) {
        this.bK({
            key: MO + bD,
            url: "MocQuizBean.fetchQuestions",
            param: [cvf],
            onload: this.cve.Z(this)
        })
    };
    qJ.cve = function(W) {
        this.bn("onFetchQuestions", W)
    };
    qJ.Ol = function(cd, fa) {
        this.bK({
            key: MO + bD,
            url: "CourseBean.getEvaluationDescription",
            param: [cd, fa],
            onload: this.bAQ.Z(this)
        })
    };
    qJ.bAQ = function(W) {
        this.bn("onGetEvaluationDescription", W)
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    t = NEJ.P("nej.ut"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    ui = NEJ.P("nej.ui"),
    mk,
    bAS;
    var dj = e.bY('<div class="f-cb u-singleMulti"><div class="testinfo f-cb"><p class="f-f0 tipinfo">1.请填写问题题干</p><div class="j-content content"></div><p class="f-f0 tipinfo">2.填写题目答案</p><div class="f-cb options"><div class="j-optionlist f-cb"></div><a class="j-addOption addOption f-f0 f-fc3">+ 添加答案选项</a></div></div></div>');
    eu.Jv = NEJ.C();
    mk = eu.Jv.bu(eu.bgd, true);
    bAS = eu.Jv.cE;
    mk.bU = function() {
        this.bW = dj
    };
    mk.bP = function() {
        this.bQ();
        this.fF = e.bc(this.bb, "j-content")[0];
        this.bAV = e.bc(this.bb, "j-optionlist")[0];
        this.ccn = e.bc(this.bb, "j-addOption")[0];
        v.bf(this.ccn, "click", this.cvc.Z(this))
    };
    mk.cvc = function() {
        var cvb = u.mz(9);
        var baN = eu.pp.bh({
            parent: this.bAV,
            optionDto: {},
            indexNum: this.Nc,
            canDelete: this.Nc > 3 ? true: false,
            isVideoTest: true,
            questionType: this.Ay,
            nameRandom: this.DM,
            deleteOption: this.yT.Z(this)
        });
        this.pV.push(baN);
        this.Nc++
    };
    mk.Zv = function() {
        this.ns = ui.fK.bh({
            parent: this.fF,
            content: this.ck.title,
            height: 99
        });
        this.Nc = 0;
        this.pV = [];
        this.DM = u.mz(9);
        if ( !! this.bqb && !!this.bqb.length) {
            this.Nc = this.bqb.length;
            u.bA(this.bqb,
            function(bo, bd) {
                var baN = eu.pp.bh({
                    parent: this.bAV,
                    optionDto: bo,
                    indexNum: bd,
                    canDelete: bd > 3 ? true: false,
                    isVideoTest: true,
                    questionType: this.Ay,
                    nameRandom: this.DM,
                    deleteOption: this.yT.Z(this)
                });
                this.pV.push(baN)
            }.Z(this))
        } else {
            this.Nc = 4;
            var cva = [{},
            {},
            {},
            {}];
            u.bA(cva,
            function(bo, bd) {
                var cvb = u.mz(9);
                var baN = eu.pp.bh({
                    parent: this.bAV,
                    optionDto: bo,
                    indexNum: bd,
                    canDelete: bd > 3 ? true: false,
                    isVideoTest: true,
                    questionType: this.Ay,
                    nameRandom: this.DM,
                    deleteOption: this.yT.Z(this)
                });
                this.pV.push(baN)
            }.Z(this))
        }
    };
    mk.yT = function(bd) {
        this.pV[bd] = eu.pp.bg(this.pV[bd]);
        this.Nc = 0;
        for (var i = 0; i < this.pV.length; i++) {
            if ( !! this.pV[i]) {
                this.pV[i].pZ(this.Nc);
                this.Nc++
            }
        }
        for (var i = 0; i < this.pV.length; i++) {
            if (!this.pV[i]) this.pV.splice(i, 1)
        }
    };
    mk.KL = function(cU) {
        this.ck.title = this.ns.cc();
        this.ck.optionDtos = [];
        this.cuZ = 0;
        for (var i = 0; i < this.pV.length; i++) {
            if ( !! this.pV[i]) {
                this.cuZ++;
                var dh = this.pV[i].bfI();
                this.ck.optionDtos.push(dh)
            }
        }
        if ( !! cU) {
            if ( !! this.rq()) return this.ck;
            else {
                return null
            }
        } else {
            return this.ck
        }
    };
    mk.rq = function() {
        if (!this.ck.title || this.ck.title == "") {
            eu.showToastTips({
                type: 2,
                content: "题目题干不能为空"
            });
            return false
        }
        var bBm = 0;
        for (var i = 0; i < this.ck.optionDtos.length; i++) {
            if (!this.ck.optionDtos[i].content) {
                var da = "第" + (i + 1) + "个正确答案题干内容不能为空";
                eu.showToastTips({
                    type: 2,
                    content: da
                });
                return false
            }
            if ( !! this.ck.optionDtos[i].answer) {
                bBm++
            }
        }
        if (!bBm && this.Ay == eu.CONST.TYPE_OBJECTIVE_SINGLE) {
            eu.showToastTips({
                type: 2,
                content: "请设定答案!"
            });
            return false
        }
        if (bBm < 2 && this.Ay == eu.CONST.TYPE_OBJECTIVE_MULTI) {
            eu.showToastTips({
                type: 2,
                content: "多项选择题至少要有2个答案!"
            });
            return false
        }
        return true
    };
    mk.gS = function() {
        if ( !! this.ns) {
            this.ns = ui.fK.bg(this.ns)
        }
        for (var i = 0; i < this.pV.length; i++) {
            if ( !! this.pV[i]) {
                this.pV[i] = eu.pp.bg(this.pV[i])
            }
        }
    };
    mk.bF = function(Y) {
        this.bI(Y);
        this.ck = Y.questionDto || {};
        this.bqb = this.ck.optionDtos || [];
        eu.bt(this.ccn)
    };
    mk.bL = function() {
        this.gS();
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    t = NEJ.P("nej.ut"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    ui = NEJ.P("nej.ui"),
    bBn,
    cuY;
    eu.bBp = NEJ.C();
    bBn = eu.bBp.bu(eu.Jv, true);
    cuY = eu.bBp.cE;
    bBn.bF = function(Y) {
        this.bI(Y);
        this.ck.type = eu.CONST.TYPE_OBJECTIVE_SINGLE;
        this.Ay = eu.CONST.TYPE_OBJECTIVE_SINGLE;
        this.Zv()
    };
    bBn.bL = function() {
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    t = NEJ.P("nej.ut"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    ui = NEJ.P("nej.ui"),
    bBq,
    cuX;
    eu.bBs = NEJ.C();
    bBq = eu.bBs.bu(eu.Jv, true);
    cuX = eu.bBs.cE;
    bBq.bF = function(Y) {
        this.bI(Y);
        this.ck.type = eu.CONST.TYPE_OBJECTIVE_MULTI;
        this.Ay = eu.CONST.TYPE_OBJECTIVE_MULTI;
        this.Zv()
    };
    bBq.bL = function() {
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    Fd;
    var cF = e.dD(".#<uispace> {padding:0px;max-width:800px;min-width:400px;}.#<uispace> .header{border-bottom:1px solid #eee;padding:5px 20px 10px 20px;}.#<uispace> .header .title{font-size:20px;margin-right:10px;}.#<uispace> .header .type{font-size:14px;margin-right:5px;}.#<uispace> .header .score{font-size:14px;}.#<uispace> .footer {padding:10px 20px;font-size:14px;}.#<uispace> .footer .item{margin-bottom:10px;margin-top:10px;}.#<uispace> .footer .item .left{width:18%;}.#<uispace> .footer .item .rightitem{width:81%;word-break: break-word;word-wrap: break-word;}.#<uispace> .footer .item .right{color:#619d26}.#<uispace> .footer .item .wrong{color:#bd4b26}.#<uispace> .opts{padding: 20px 10px; border-top:1px solid #eee;}.#<uispace> .save{margin-right:20px;}.#<uispace> .u-btn{padding:0 4px;height:30px;line-height:30px;}");
    var dn = e.ee('<div class="u-PreviewVideoQuizDialog"><div class="header f-cb"><span class="title f-f0 j-title"></span><span class="type f-f0 j-type"></span></div><div class="footer f-cb"><div class="f-cb item"><div class="left f-fl">题干</div><div class="f-fl j-content rightitem f-richEditorText">题干</div></div><div class="f-cb item"><div class="left right f-fl">正确答案</div><div class="f-fl j-rightAns f-cb rightitem f-richEditorText"></div></div><div class="f-cb item"><div class="left wrong f-fl">错误答案</div><div class="f-fl j-wrongAns f-cb rightitem f-richEditorText"></div></div></div><div class="opts f-cb"><a class="u-btn u-btn-default j-save f-fr">保存</a><a class="u-btn j-cancel f-fr">取消</a></div></div>');
    var vq = 100,
    nJ = 200,
    so = 300;
    eu.bqa = NEJ.C();
    Fd = eu.bqa.bu(eu.hq, true);
    eu.bqa.bT = function(Y) {
        var fV = eu.bqa.bh(Y);
        fV.gI()
    };
    Fd.bU = function() {
        this.bW = e.bY(e.bX(dn));
        this.dv = cF
    };
    Fd.bP = function() {
        this.bQ();
        this.iu = e.bc(this.bb, "j-title")[0];
        this.bV = e.bc(this.bb, "j-type")[0];
        this.fF = e.bc(this.bb, "j-content")[0];
        this.bpY = e.bc(this.bb, "j-rightAns")[0];
        this.bpX = e.bc(this.bb, "j-wrongAns")[0];
        this.gC = e.bc(this.bb, "j-save")[0];
        this.jH = e.bc(this.bb, "j-cancel")[0];
        v.bf(this.gC, "click", this.mQ.Z(this));
        v.bf(this.jH, "click",
        function() {
            this.iR()
        }.Z(this));
        this.ky = new d.nQ;
        this.ky.bf("onManageAnchorQuestion", this.bbp.Z(this, true));
        this.ky.bf("onManageQuestionDraft", this.bbp.Z(this, false))
    };
    Fd.lq = function() {
        var DB = ["单选", "多选", "填空题", "判断题"];
        var Cj = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N"];
        this.iu.innerText = this.bBG;
        this.bV.innerText = DB[this.ck.type - 1];
        this.fF.innerHTML = this.ck.title || "";
        bE.jE(this.fF);
        var Oh = "",
        bbt = "",
        bd = 0;
        if ( !! this.ck.optionDtos && this.ck.optionDtos.length) {
            for (var i = 0; i < this.ck.optionDtos.length; i++) {
                if ( !! this.ck.optionDtos[i]) {
                    if ( !! this.ck.optionDtos[i].answer) {
                        Oh += "<div>" + Cj[bd] + ". " + this.ck.optionDtos[i].content + "</div>";
                        bd++
                    } else {
                        bbt += "<div>" + Cj[bd] + ". " + this.ck.optionDtos[i].content + "</div>";
                        bd++
                    }
                }
            }
        } else if ( !! this.ck.stdAnswer) {
            Oh += this.ck.stdAnswer.replace(eu.CONST.FILL_BLANK_SPLITCHARREG, "&nbsp&nbsp或&nbsp&nbsp")
        }
        this.bpY.innerHTML = Oh;
        this.bpX.innerHTML = bbt;
        bE.jE(this.bpY);
        bE.jE(this.bpX)
    };
    Fd.mQ = function() {
        if ( !! this.bbu) {
            var Al = this.bbu.KL(true);
            var hI = function(bG, bS) {
                if (!bS) return false
            };
            NEJ.X(this.ck, Al)
        }
        if (!this.ck) {
            this.iR();
            return
        }
        this.ck.testId = this.ds;
        if (this.iS === null || this.iS === undefined) {
            if ( !! this.ck.id) {
                this.ky.rG(this.ck, nJ)
            } else {
                this.ky.rG(this.ck, vq)
            }
        } else {
            if ( !! this.ck.id) {
                this.ky.beT(this.ck, this.qa, nJ, this.iS)
            } else {
                this.ky.beT(this.ck, this.qa, vq, this.iS)
            }
        }
    };
    Fd.bbp = function(cU, fw, W) {
        if ( !! W) {
            if (fw == vq) {
                if ( !! cU) {
                    this.ck.id = W
                } else {
                    this.ck = W
                }
                this.bn("onSaveOrUpdate", this.ck)
            } else if (fw == nJ) {
                if ( !! cU) {
                    this.ck.id = W
                } else {
                    this.ck = W
                }
                this.bn("onSaveOrUpdate", this.ck)
            }
            this.iR()
        }
    };
    Fd.iR = function() {
        this.fj();
        this.fs()
    };
    Fd.bL = function() {
        this.fj();
        this.bO()
    };
    Fd.bF = function(Y) {
        Y.title = "题目预览";
        Y.clazz = "u-quizPreviewdialog";
        this.ck = Y.questionDto;
        this.bBG = Y.indextitle;
        this.bbu = Y.createNode;
        this.iS = Y.anchorTime;
        this.qa = Y.unitDto;
        this.ds = Y.testId;
        this.bI(Y);
        this.lq();
        eu.bt(this.gC);
        eu.bt(this.jH)
    };
    Fd.fj = function() {}
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    t = NEJ.P("nej.ut"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    d = NEJ.P("edu.d"),
    ui = NEJ.P("nej.ui"),
    kV,
    cuW;
    var dj = e.bY('<div class="f-cb u-questionItem"><div class="timeNode j-timeNode f-cb"><div class="icons f-fl j-icons"><div class="icon"></div></div><div class="anchorOpt j-anchorTimeShow f-fl"><div class="j-anchortime f-fc3 anchortime f-f0">07:12</div></div><a class="j-editAnchorTime editAnchorTime f-fl">编辑</a><div class="j-anchorOpt anchorOpt"></div></div><div class="brief j-brief f-cb"><div class="questiontitle j-questiontitle f-richEditorText f-fl f-f0">关于中国共产党历史上的重要会议，下列说法不正确的是:(单选)</div><div class="f-fr opt"><a class="j-edit edit f-fc6 f-icon" title="编辑"></a><a class="j-delete delete f-fc6 f-icon" title="删除"></a></div></div><div class="detail j-detail f-cb"><div class="j-title title f-f0">问题1</div><div class="j-type type f-cb"><span class="typeinfo f-f0">类型：</span><input type="radio" class="j-typeradio typeradio" /><label class="typelabel j-typelabel">单选</label><input type="radio" class="j-typeradio typeradio" /><label class="typelabel j-typelabel">多选</label><input type="radio" class="j-typeradio typeradio" /><label class="typelabel j-typelabel">填空题</label><input type="radio" class="j-typeradio typeradio" /><label class="typelabel j-typelabel">判断题</label></div><div class="j-item item"></div><div class="opts f-cb"><a class="u-btn j-showdetail showdetail">预览</a><a class="u-btn u-btn-default j-save save">保存</a><a class="j-cancelOpt cancelOpt">取消</a></div></div></div>');
    var vq = 100,
    nJ = 200,
    so = 300;
    eu.zW = NEJ.C();
    kV = eu.zW.bu(eu.cq, true);
    cuW = eu.zW.cE;
    kV.bU = function() {
        this.bW = dj
    };
    kV.bP = function() {
        this.bQ();
        this.sd = e.bc(this.bb, "j-brief")[0];
        this.km = e.bc(this.bb, "j-timeNode")[0];
        this.Ny = e.bc(this.bb, "j-icons")[0];
        this.ccm = e.bc(this.bb, "j-anchorTimeShow")[0];
        this.Nz = e.bc(this.bb, "j-editAnchorTime")[0];
        this.bCb = e.bc(this.bb, "j-anchorOpt")[0];
        this.ccl = e.bc(this.bb, "j-anchortime")[0];
        this.JO = e.bc(this.bb, "j-questiontitle")[0];
        this.zE = e.bc(this.bb, "j-edit")[0];
        this.pz = e.bc(this.bb, "j-delete")[0];
        this.rJ = e.bc(this.bb, "j-detail")[0];
        this.iu = e.bc(this.bb, "j-title")[0];
        this.iY = e.bc(this.bb, "j-typeradio");
        this.bhy = e.bc(this.bb, "j-typelabel");
        this.qe = e.bc(this.bb, "j-item")[0];
        this.cuS = e.bc(this.bb, "j-showdetail")[0];
        this.gC = e.bc(this.bb, "j-save")[0];
        this.JP = e.bc(this.bb, "j-cancelOpt")[0];
        v.bf(this.zE, "click", this.Ai.Z(this));
        v.bf(this.pz, "click", this.JR.Z(this));
        v.bf(this.cuS, "click", this.cck.Z(this));
        v.bf(this.gC, "click", this.Od.Z(this));
        v.bf(this.JP, "click", this.bCp.Z(this));
        v.bf(this.Nz, "click", this.cuQ.Z(this));
        this.ky = new d.nQ;
        this.ky.bf("onManageAnchorQuestion", this.bbp.Z(this, true));
        this.ky.bf("onManageQuestionDraft", this.bbp.Z(this, false));
        this.hX = new d.oE;
        this.hX.bf("onSaveGidsAndPhotoUrls", this.NK.Z(this));
        this.Ag = [eu.bBp, eu.bBs, eu.bqJ, eu.bqU];
        this.uD = ["单选", "多选", "填空题", "判断题"]
    };
    kV.cuQ = function() {
        this.bcj(true)
    };
    kV.bcj = function(cU) {
        if ( !! cU) {
            eu.bw(this.bCb);
            eu.bt(this.Ny);
            eu.bt(this.ccm);
            eu.bt(this.Nz);
            this.ccj = eu.bpU.bh({
                parent: this.bCb,
                anchorTime: this.iS || 0,
                onSelectTime: this.cuO.Z(this),
                onDeleteTime: this.bCB.Z(this),
                isInEdit: true,
                anchorTime: this.iS
            })
        } else {
            eu.bt(this.bCb);
            eu.bw(this.Ny);
            eu.bw(this.ccm);
            eu.bw(this.Nz);
            this.ccj = eu.bpU.bg(this.ccj)
        }
    };
    kV.cuO = function(cV) {
        this.bn("editIndexNum", cV)
    };
    kV.bCC = function(cU, cV) {
        if ( !! cU) {
            this.iS = cV;
            this.ccl.innerText = this.cch(this.iS);
            this.bCB()
        } else {
            this.bCB()
        }
    };
    kV.bCB = function() {
        this.bcj(false)
    };
    kV.Ai = function() {
        eu.bt(this.sd);
        eu.bw(this.rJ);
        eu.bw(this.Nz);
        e.bJ(this.bb, "widthborder")
    };
    kV.JR = function() {
        eu.cp.bT({
            type: 1,
            message: "确认删除此题目？",
            okFunc: function() {
                if (this.iS === null || this.iS === undefined) {
                    this.ky.rG(this.ck, so)
                } else {
                    this.ky.beT(this.ck, this.qa, so, this.iS)
                }
            }.Z(this)
        })
    };
    kV.bCp = function() {
        if ( !! this.ck && !!this.ck.id) {
            this.gS();
            this.kw();
            eu.bt(this.rJ);
            eu.bw(this.sd);
            this.bcj(false);
            eu.bt(this.Nz);
            e.bZ(this.bb, "widthborder")
        } else {
            e.bZ(this.bb, "widthborder");
            this.bn("deleteQuestion", this.kq)
        }
    };
    kV.Od = function() {
        var kL = this.jZ.cdf();
        if ( !! kL.photoUrls && kL.photoUrls.length) {
            this.hX.Zc(kL.photoUrls, kL.gids)
        } else {
            this.NN()
        }
    };
    kV.NK = function(W) {
        if ( !! W) {
            for (var i = 0; i < W.length; i++) {
                if (!W[i]) {
                    eu.cp.bT({
                        type: 1,
                        message: "图片上传出错"
                    });
                    return false
                }
            }
            this.NN()
        }
    };
    kV.NN = function() {
        this.ck = this.bcp(true);
        if (!this.ck) {
            return
        }
        this.ck.testId = this.ds;
        if (this.iS === null || this.iS === undefined) {
            if ( !! this.ck.id) {
                this.ky.rG(this.ck, nJ)
            } else {
                this.ky.rG(this.ck, vq)
            }
        } else {
            if ( !! this.ck.id) {
                this.ky.beT(this.ck, this.qa, nJ, this.iS)
            } else {
                this.ky.beT(this.ck, this.qa, vq, this.iS)
            }
        }
    };
    kV.bbp = function(cU, fw, W) {
        if ( !! W) {
            if (fw == vq) {
                if ( !! cU) {
                    this.ck.id = W;
                    this.ck.anchorTime = this.iS;
                    this.bn("newQuestion", this.ck)
                } else {
                    this.ck = W
                }
                this.Ae()
            } else if (fw == nJ) {
                if ( !! cU) {
                    this.ck.id = W;
                    this.ck.anchorTime = this.iS;
                    this.bn("newQuestion", this.ck)
                } else {
                    this.ck = W
                }
                this.Ae()
            } else if (fw == so) {
                eu.showToastTips({
                    type: 1,
                    content: "删除成功!"
                });
                this.bn("deleteQuestion", this.kq)
            }
            eu.bt(this.rJ);
            eu.bw(this.sd);
            this.bcj(false);
            eu.bt(this.Nz);
            e.bZ(this.bb, "widthborder")
        }
    };
    kV.cck = function() {
        this.ck = this.bcp(false);
        eu.bqa.bT({
            questionDto: this.ck,
            indextitle: "问题",
            createNode: this.jZ,
            testId: this.ds,
            anchorTime: this.iS,
            unitDto: this.qa,
            testId: this.ds,
            onSaveOrUpdate: function(W) {
                this.ck = W;
                this.Ae();
                eu.bt(this.rJ);
                eu.bw(this.sd);
                e.bZ(this.bb, "widthborder")
            }.Z(this)
        })
    };
    kV.bcp = function(cU) {
        if ( !! this.jZ) {
            var Al = this.jZ.KL(cU);
            var hI = function(bG, bS) {
                if (!bS) return false
            };
            if ( !! Al) {
                if ( !! this.ck) {
                    NEJ.X(this.ck, Al, hI)
                } else {
                    this.ck = Al
                }
                return this.ck
            } else {
                return null
            }
        }
    };
    kV.cch = function(cV) {
        var lX = parseInt(cV) % 60;
        var kY = Math.floor(parseInt(cV) / 60);
        if (lX < 10) {
            lX = "0" + lX
        }
        if (kY < 10) {
            kY = "0" + kY
        }
        return kY + " : " + lX
    };
    kV.kw = function() {
        if (this.iS === null || this.iS === undefined) {
            eu.bt(this.km)
        } else {
            eu.bw(this.km);
            eu.bt(this.iu);
            this.ccl.innerText = this.cch(this.iS)
        }
        if (!this.ck.type) {
            eu.bt(this.sd);
            eu.bw(this.rJ);
            eu.bw(this.Nz);
            e.bJ(this.bb, "widthborder");
            this.iY[0].checked = true;
            this.Zk(true);
            this.jZ = this.Ag[0].bh({
                parent: this.qe,
                isVideoTest: true
            });
            this.uG = 0;
            u.bA(this.iY,
            function(bo, bd) {
                v.bf(bo, "click",
                function() {
                    if (bd != this.uG) {
                        this.jZ = this.Ag[this.uG].bg(this.jZ);
                        this.ck = {};
                        this.jZ = this.Ag[bd].bh({
                            parent: this.qe,
                            isVideoTest: true
                        });
                        this.uG = bd
                    } else {
                        return
                    }
                }.Z(this))
            }.Z(this))
        } else {
            eu.bt(this.rJ);
            eu.bw(this.sd);
            eu.bt(this.Nz);
            e.bZ(this.bb, "widthborder");
            this.Zk(false);
            this.jZ = this.Ag[this.ck.type - 1].bh({
                parent: this.qe,
                questionDto: this.ck,
                isVideoTest: true
            });
            this.Ae()
        }
    };
    kV.Ae = function() {
        this.uG = this.ck.type - 1;
        this.JO.innerHTML = this.ck.title + " (" + this.uD[this.uG] + ") ";
        u.jE(this.JO);
        this.iY[this.ck.type - 1].checked = true;
        this.Zk(false)
    };
    kV.Zk = function(cU) {
        if ( !! cU) {
            for (var i = 0; i < this.iY.length; i++) {
                this.iY[i].removeAttribute("disabled")
            }
        } else {
            for (var i = 0; i < this.iY.length; i++) {
                this.iY[i].setAttribute("disabled", "disabled");
                v.dY(this.iY[i], "click")
            }
        }
    };
    kV.OX = function() {
        var cl = u.mz(9);
        for (var i = 0; i < this.iY.length; i++) {
            this.iY[i].setAttribute("name", cl);
            var dh = u.mz(9);
            this.iY[i].setAttribute("id", dh);
            this.bhy[i].setAttribute("for", dh)
        }
    };
    kV.JV = function(bd) {
        this.kq = bd;
        this.iu.innerText = "问题" + (this.kq + 1)
    };
    kV.bF = function(Y) {
        this.bI(Y);
        this.OX();
        this.ib = Y.chapterId;
        this.ds = Y.testId;
        this.ck = Y.questionDto || {};
        this.iS = Y.anchorTime;
        this.qa = Y.unitDto;
        this.kq = Y.indexNum;
        this.JV(this.kq);
        this.kw()
    };
    kV.gS = function() {
        this.bcj(false);
        this.jZ = this.Ag[this.uG].bg(this.jZ)
    };
    kV.bL = function() {
        this.gS();
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    NT,
    dj = e.bY('<div class="u-anchorTime f-cb"><p class="f-fl settime f-f0">选择提问时间</p><div class="f-fl min j-divmin"></div><p class="f-fl">:</p><div class="f-fl sec j-divsec"></div><a class="j-save save u-btn f-fl u-btn-default">确定</a><a class="j-cancel f-fl cancel">取消</a></div></div>');
    eu.bpU = NEJ.C();
    NT = eu.bpU.bu(eu.cq, !0);
    NT.bU = function() {
        this.bW = dj
    };
    NT.bP = function() {
        this.bQ();
        this.ccg = e.bc(this.bb, "j-divmin")[0];
        this.ccf = e.bc(this.bb, "j-divsec")[0];
        this.gC = e.bc(this.bb, "j-save")[0];
        this.jH = e.bc(this.bb, "j-cancel")[0];
        v.bf(this.gC, "click", this.Od.Z(this));
        v.bf(this.jH, "click", this.bcz.Z(this))
    };
    NT.Od = function() {
        var cV = parseInt(this.bpS.value) * 60 + parseInt(this.bDc.value);
        this.bpS.options[0].selected = true;
        this.bDc.options[0].selected = true;
        this.bn("onSelectTime", cV)
    };
    NT.bcz = function(bd) {
        this.bn("onDeleteTime")
    };
    NT.cuD = function() {
        var bDe = '<select class="j-min min">';
        var bDf = '<select class="j-sec sec">';
        for (var i = 0; i < 60; i++) {
            var dh = i < 10 ? "0" + i: i;
            bDe += '<option value="' + i + '">' + dh + "</option>"
        }
        bDe += "</select>";
        for (var i = 0; i < 60; i++) {
            var dh = i < 10 ? "0" + i: i;
            bDf += '<option value="' + i + '">' + dh + "</option>"
        }
        bDf += "</select>";
        this.ccg.innerHTML = bDe;
        this.ccf.innerHTML = bDf;
        this.bpS = e.bc(this.bb, "j-min")[0];
        this.bDc = e.bc(this.bb, "j-sec")[0];
        for (var i = 0; i < this.bpS.options.length; i++) {
            if (i == Math.floor(this.iS / 60)) {
                this.bpS.options[i].selected = true
            }
            if (i == this.iS % 60) {
                this.bDc.options[i].selected = true
            }
        }
    };
    NT.bF = function(Y) {
        this.bI(Y);
        this.sa = Y.isInEdit || false;
        if ( !! this.sa) {
            eu.bw(this.jH)
        } else {
            eu.bt(this.jH)
        }
        this.iS = Y.anchorTime;
        this.cuD()
    };
    NT.bL = function() {
        this.ccg.innerHTML = "";
        this.ccf.innerHTML = "";
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    zs,
    dj = e.bY('<div class="u-anchorTest"><div class="optanchor f-cb"><p class="tipnfo f-f0 f-cb">+ 添加课间提问</p><div class="f-cb optbottom"><div class="f-fl addAnchor f-fc3 f-f0"><p class="f-fl f-f0 tipleft">使用当前播放时间为提问时间</p><a class="f-fr f-f0 j-addAnchor anchortime u-btn u-btn-default">获取时间</a></div><div class="f-fl j-inputAnchor inputAnchor"></div></div></div><div class="j-anchorlist anchorlist"></div></div></div>');
    eu.bpR = NEJ.C();
    zs = eu.bpR.bu(eu.cq, !0);
    zs.bU = function() {
        this.bW = dj
    };
    zs.bP = function() {
        this.bQ();
        this.cuC = e.bc(this.bb, "j-inputAnchor")[0];
        this.cuy = e.bc(this.bb, "j-addAnchor")[0];
        this.bDl = e.bc(this.bb, "j-anchorlist")[0];
        v.bf(this.cuy, "click", this.cuv.Z(this));
        this.ccc = new d.qG;
        this.ccc.bf("onFetchQuestions", this.cup.Z(this))
    };
    zs.cuv = function() {
        if ( !! this.bDq) {
            this.bDq.cdB();
            var cV = this.bDq.brv();
            cV = Math.round(cV);
            if (this.iS == cV || eu.nu(this.NP, cV)) {
                eu.showToastTips({
                    type: 2,
                    content: "一个提问时间只能添加一道题目"
                })
            } else {
                this.iS = cV;
                var bcQ = eu.zW.bh({
                    parent: this.bDl,
                    questionDto: {},
                    anchorTime: this.iS,
                    unitDto: this.qa,
                    indexNum: this.lf.length,
                    editIndexNum: this.bDu.Z(this, this.lf.length),
                    deleteQuestion: this.vZ.Z(this),
                    newQuestion: function(W) {
                        var cI = {
                            questionId: W.id,
                            anchor: W.anchorTime
                        };
                        this.bn("newQuestion", cI)
                    }.Z(this)
                });
                this.lf.push(bcQ);
                this.NP.push(this.iS)
            }
        }
    };
    zs.vZ = function(bd) {
        this.lf[bd] = eu.zW.bg(this.lf[bd]);
        this.lf.splice(bd, 1);
        this.NP.splice(bd, 1);
        if ( !! this.lf && !!this.lf.length) {
            for (var i = 0; i < this.lf.length; i++) {
                if ( !! this.lf[i]) this.lf[i].JV(i)
            }
        }
    };
    zs.cup = function(W) {
        if ( !! W) {
            if ( !! W.questions && !!W.questions.length) {
                u.bA(W.questions,
                function(bo, bd) {
                    var cuo = bo.id;
                    for (var j = 0; j < this.qa.anchorQuestions.length; j++) {
                        if (this.qa.anchorQuestions[j].questionId == cuo) {
                            var bcQ = eu.zW.bh({
                                parent: this.bDl,
                                questionDto: bo,
                                anchorTime: this.qa.anchorQuestions[j].anchor,
                                unitDto: this.qa,
                                indexNum: bd,
                                editIndexNum: this.bDu.Z(this, bd),
                                deleteQuestion: this.vZ.Z(this),
                                newQuestion: function(W) {
                                    var cI = {
                                        questionId: W.id,
                                        anchor: W.anchorTime
                                    };
                                    this.bn("newQuestion", cI)
                                }.Z(this)
                            });
                            this.NP.push(this.qa.anchorQuestions[j].anchor);
                            this.lf.push(bcQ);
                            break
                        }
                    }
                }.Z(this))
            }
        }
    };
    zs.bDu = function(bd, cV) {
        if (this.NP[bd] == cV) {
            this.lf[bd].bCC(false)
        } else {
            if (eu.nu(this.NP, cV)) {
                eu.showToastTips({
                    type: 2,
                    content: "一个提问时间只能添加一道题目"
                });
                this.lf[bd].bCC(false)
            } else {
                this.lf[bd].bCC(true, cV)
            }
        }
    };
    zs.kw = function() {
        this.bDy = eu.bpU.bh({
            parent: this.cuC,
            onSelectTime: this.cum.Z(this)
        })
    };
    zs.cum = function(cV) {
        if (eu.nu(this.NP, cV)) {
            eu.showToastTips({
                type: 2,
                content: "一个提问时间只能添加一道题目"
            })
        } else {
            this.iS = cV;
            var bcQ = eu.zW.bh({
                parent: this.bDl,
                questionDto: {},
                anchorTime: this.iS,
                unitDto: this.qa,
                indexNum: this.lf.length,
                editIndexNum: this.bDu.Z(this, this.lf.length),
                deleteQuestion: this.vZ.Z(this),
                newQuestion: function(W) {
                    var cI = {
                        questionId: W.id,
                        anchor: W.anchorTime
                    };
                    this.bn("newQuestion", cI)
                }.Z(this)
            });
            this.lf.push(bcQ);
            this.NP.push(this.iS)
        }
    };
    zs.gS = function() {
        if ( !! this.bDy) {
            this.bDy = eu.zW.bg(this.bDy)
        }
        if ( !! this.lf && !!this.lf.length) {
            for (var i = this.lf.length - 1; i >= 0; i--) {
                if ( !! this.lf[i]) {
                    this.lf[i] = eu.zW.bg(this.lf[i])
                }
            }
        }
        this.lf = []
    };
    zs.bF = function(Y) {
        this.bI(Y);
        this.bDq = Y.videoObj;
        this.qa = Y.unitDto;
        this.lf = [];
        this.NP = [];
        this.kw();
        if ( !! this.qa.anchorQuestions && !!this.qa.anchorQuestions.length) {
            this.ccc.cco(this.qa)
        }
    };
    zs.bL = function() {
        this.gS();
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    eu = NEJ.P("edu.u");
    u = NEJ.P("nej.u");
    eu.bDA = function(bDB) {
        var wA = {
            html5: [],
            flash: []
        },
        bDD = "";
        if (!bDB) return wA;
        bDB.sort(function(a, b) {
            return a.lang < b.lang ? -1 : 1
        });
        u.bA(bDB,
        function(Mz) {
            if ( !! Mz && !!Mz.nosUrl) {
                bDD = Mz.lang == eu.CONST.SRT_TYPE_CH ? "中文": "外文";
                wA.html5.push({
                    url: g.urlPrefix.getTextPrefix + "?downloadUrl=" + u.cmC(Mz.nosUrl),
                    name: bDD
                });
                wA.flash.push({
                    url: Mz.nosUrl,
                    name: bDD
                })
            }
        }.Z(this));
        return wA
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    eu = NEJ.P("edu.u"),
    p = NEJ.P("edu.m"),
    d = NEJ.P("edu.d"),
    oV;
    var du = e.bY('<div class="u-videoCreate f-pr"><div class="j-showArea"><h2 class="j-name f-thide"></h2></div><div class="j-showArea f-dn previewArea"><div class="f-cb preTit"><h2 class="j-name f-fl f-thide">filenamefilename.mp4</h2><div class="f-fr del repl"><span>已上传完成,</span><a class="j-replaceVideo">替换视频</a></div></div><div class="j-preview preview"></div></div><div class="j-srtArea srtArea"></div><div class="j-testArea testArea" style="display:none;"></div></div>');
    eu.bpL = NEJ.C();
    oV = eu.bpL.bu(eu.cq, true);
    oV.bU = function() {
        this.bW = du
    };
    oV.bP = function() {
        this.bQ();
        this.cbZ = e.bc(this.bb, "j-showArea");
        this.NH = this.cbZ[0];
        this.Uo = this.cbZ[1];
        this.bdq = e.bc(this.bb, "j-name");
        this.bDM = this.bdq[0];
        this.bDN = this.bdq[1];
        this.le = e.bc(this.bb, "j-preview")[0];
        this.cuj = e.bc(this.bb, "j-replaceVideo")[0];
        this.cbY = e.bc(this.bb, "j-srtArea")[0];
        this.bDT = e.bc(this.bb, "j-testArea")[0];
        v.bf(this.cuj, "click",
        function() {
            this.bn("ontoggleVideoAndPreview", false)
        }.Z(this));
        this.dmr = new p.iv;
        this.hU = new d.qY;
        this.hU.bf("ongetLessonUnitPreviewVo", this.cua.Z(this))
    };
    oV.iI = function() {
        if ( !! this.ctZ) {
            this.ctZ.rt()
        }
        this.bn("refreshStatus")
    };
    oV.cua = function(W) {
        if ( !! W) {
            this.bDN.innerText = eu.BB(W.filename);
            if (W.videoStatus == "publish") {
                this.le.innerHTML = "";
                var yn = {
                    file: W.videoUrl,
                    image: W.videoImgUrl,
                    resolutions: {
                        sdfile: W.videoUrl,
                        hdfile: W.videoHDUrl,
                        shdfile: W.videoSHDUrl
                    },
                    mp4Url: {
                        sdfile: W.sdMp4Url,
                        hdfile: W.hdMp4Url,
                        shdfile: W.shdMp4Url
                    }
                };
                var wA = eu.bDA(W.srtKeys);
                yn.html5caption = wA.html5;
                yn.caption = wA.flash;
                this.gJ = eu.He.bh({
                    parent: this.le,
                    videoInfo: yn
                })
            } else if (W.videoStatus == "fail" || W.videoStatus == "deleted") {
                this.le.innerHTML = "";
                e.bJ(this.le, "preview-without-circle");
                this.Eb = eu.cv.bh({
                    parent: this.le
                });
                this.Eb.cu("很抱歉，你的视频可能存在问题，请校验视频后重新上传")
            } else {
                e.bZ(this.le, "preview-without-circle");
                this.le.innerHTML = "已上传完成，视频还在转码中，转码完成后方可预览"
            }
            u.bA(W.srtKeys,
            function(gx) {
                gx.name = W.filename
            }.Z(this));
            this.ctX(W.srtKeys);
            if ( !! this.QR) {
                this.ctT(this.hp)
            }
        }
    };
    oV.ctQ = function(W) {
        this.es();
        e.bZ(this.NH, "f-dn");
        this.bDM.innerText = eu.BB(W.name);
        this.rW = eu.Hp.bh({
            parent: this.NH,
            needDetail: true,
            data: W,
            abort: this.iI.Z(this)
        });
        this.bn("editing", true)
    };
    oV.bdJ = function(W) {
        if (W.total > eu.CONST.UPLOAD_SIZE_MAX) {
            eu.zN(eu.CONST.UPLOAD_ERROR_LIMITED, this.iI.Z(this));
            return
        }
        if ( !! this.rW) {
            this.rW.bdJ(W)
        }
    };
    oV.ctO = function(W) {
        if ( !! W) {
            if (W.retSuc) {
                if ( !! this.rW) {
                    this.rW.bSL(W)
                }
            } else {
                eu.zN(W.errorCode, this.iI.Z(this));
                this.bn("refreshStatus")
            }
        }
    };
    oV.ctM = function(W) {
        this.qL(W)
    };
    oV.ctJ = function() {
        return this.hp
    };
    oV.ctI = function() {
        if ( !! this.hp.contentId) {
            this.qL(this.hp.contentId)
        }
    };
    oV.qL = function(xo) {
        this.es();
        e.bZ(this.Uo, "f-dn");
        if ( !! xo) {
            this.hU.bsz(xo, this.hp.contentType)
        }
    };
    oV.ctX = function(W) {
        if ( !! this.Xr) {
            this.Xr = eu.bqn.bg(this.Xr)
        }
        this.Xr = eu.bqn.bh({
            parent: this.cbY,
            data: W,
            onsrtload: function(W) {
                this.bn("onsrtload", W)
            }.Z(this)
        })
    };
    oV.ctT = function(bcx) {
        if ( !! this.Xt) {
            this.Xt = eu.bpR.bg(this.Xt)
        }
        this.Xt = eu.bpR.bh({
            parent: this.bDT,
            videoObj: this.gJ,
            unitDto: bcx,
            newQuestion: function(W) {
                if ( !! this.hp.anchorQuestions) {
                    for (var i = 0; i < this.hp.anchorQuestions.length; i++) {
                        if (this.hp.anchorQuestions[i].questionId == W.questionId) {
                            NEJ.X(this.hp.anchorQuestions[i], W);
                            return
                        }
                    }
                    this.hp.anchorQuestions.push(W)
                } else {
                    this.hp.anchorQuestions = [];
                    this.hp.anchorQuestions.push(W)
                }
            }.Z(this)
        })
    };
    oV.dmt = function(W) {
        this.bn("onerror")
    };
    oV.ctG = function() {
        this.rW = eu.Hp.bg(this.rW);
        this.bn("editing", false)
    };
    oV.es = function(cN) {
        if ( !! this.Xr) {
            this.Xr = eu.bqn.bg(this.Xr)
        }
        if ( !! this.gX) {
            this.gX = eu.cv.bg(this.gX)
        }
        if ( !! this.gJ) {
            this.gJ.bL();
            this.gJ = null
        }
        if ( !! this.rW) {
            if (!cN) {
                this.ctG()
            } else {
                this.rW.cdp()
            }
        }
        if ( !! this.Xt) {
            this.Xt = eu.bpR.bg(this.Xt)
        }
        e.bJ(this.NH, "f-dn");
        e.bJ(this.dmu, "f-dn");
        e.bJ(this.Uo, "f-dn");
        e.bJ(this.dmv, "f-dn")
    };
    oV.bF = function(Y) {
        this.bI(Y);
        this.hp = Y.data;
        this.QR = Y.supportAnchor;
        if ( !! this.QR) {
            eu.bw(this.bDT)
        } else {
            eu.bt(this.bDT)
        }
        if ( !! this.hp) {
            if ( !! this.hp.contentId) {
                this.qL(this.hp.contentId)
            }
        }
    };
    oV.bL = function() {
        this.es();
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    No,
    dj = e.bY('<div class="u-videoList"><div class="tip">选择一个视频作为课时内容</div><div class="j-list list"></div><div class="opr f-cb"><div class="j-save save u-btn u-btn-default u-btn-sm f-fr">添加</div><div class="j-fb fb f-fr"></div></div></div>');
    eu.bdP = NEJ.C();
    No = eu.bdP.bu(eu.Ox, !0);
    No.bU = function() {
        this.bW = dj
    };
    No.bP = function() {
        this.bQ();
        this.gi = e.bc(this.bb, "j-list")[0];
        this.kJ = e.bc(this.bb, "j-save")[0];
        this.uo = e.bc(this.bb, "j-fb")[0];
        this.tq = new d.Uf;
        this.tq.bf("ongetRecentUnusedVideos", this.yS.Z(this));
        v.bf(this.gi, "click", this.ctD.Z(this));
        v.bf(this.kJ, "click", this.bdV.Z(this))
    };
    No.ctD = function(bj) {
        v.dK(bj);
        var dI = v.eP(bj);
        if ( !! dI) {
            this.bEw = e.df(dI, "ref");
            var ctC = e.cS(this.gi);
            u.bA(ctC,
            function(bo, bd) {
                var Hz = e.df(bo, "ref");
                if (Hz == this.bEw) {
                    e.bJ(bo, "selected")
                } else {
                    e.bZ(bo, "selected")
                }
            }.Z(this));
            this.iG.ce()
        }
    };
    No.bdV = function() {
        if ( !! this.bEw) {
            this.bn("onsave", this.bEw)
        } else {
            this.iG.cu("请选择需要添加的视频")
        }
    };
    No.yS = function(W) {
        if ( !! W && W.length > 0) {
            u.bA(W,
            function(bo, bd) {
                var bB = e.iN('<div class="u-videoItemUI" data-ref="' + bo.id + '">' + bo.fileName + "</div>");
                this.gi.appendChild(bB)
            }.Z(this))
        } else {
            this.gi.innerHTML = "该课程视频库中暂无视频"
        }
    };
    No.bF = function(Y) {
        this.bI(Y);
        this.tq.cEY(g.termDto.id);
        this.iG = eu.cv.bh({
            parent: this.uo
        });
        this.iG.ce()
    };
    No.bL = function() {
        this.gi.innerHTML = "";
        if ( !! this.iG) {
            this.iG = eu.cv.bg(this.iG)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    rH;
    var du = e.bY('<div class="m-lessonunit-video panel f-pr"><div class="trIcon f-pa"></div><div class="j-handle"><ul class="j-tabs tabs"><li class="f-ib f-f0">上传视频</li><li class="f-ib f-f0">从资料库添加</li></ul><a href="#/tp/toolVideos" class="f-pa manlib" target="_self">管理视频库</a><div class="j-videoBtn videoBtnArea"><div class="j-btn btn"></div><div class="j-tip tip">支持mp4格式，文件最大为800M</div></div></div><div class="j-videoArea"></div></div>');
    eu.beb = NEJ.C();
    rH = eu.beb.bu(eu.Ox, !0);
    rH.bU = function() {
        this.bW = du
    };
    rH.bP = function() {
        this.bQ();
        this.cbR = e.bc(this.bb, "j-handle")[0];
        this.ed = e.cS(e.bc(this.bb, "j-tabs")[0]);
        this.bed = e.bc(this.bb, "j-videoBtn")[0];
        this.ctA = e.bc(this.bed, "j-btn")[0];
        this.bEI = e.bc(this.bed, "j-tip")[0];
        this.Zw = e.bc(this.bb, "j-videoArea")[0];
        this.cbY = e.bc(this.bb, "j-srt")[0];
        u.bA(this.ed,
        function(gx, bd) {
            v.bf(gx, "click", this.bEK.Z(this, bd))
        }.Z(this))
    };
    rH.Mo = function(W) {
        if ( !! this.ue) {
            this.ue.ctM(W.contentId)
        } else {
            this.bEK(0);
            this.yz(true)
        }
    };
    rH.bEK = function(bd) {
        if (bd == 0) {
            e.bJ(this.ed[0], "cur");
            e.bZ(this.ed[1], "cur");
            if ( !! this.Jx) {
                this.Jx = eu.bdP.bg(this.Jx)
            }
            this.vV()
        } else {
            e.bJ(this.ed[1], "cur");
            e.bZ(this.ed[0], "cur");
            if ( !! this.eU) {
                this.eU = eu.oC.bg(this.eU)
            }
            this.ctx()
        }
        eu.bw(this.bed)
    };
    rH.yz = function(cN) {
        this.es();
        if ( !! cN) {
            this.bEQ();
            eu.bw(this.Zw)
        } else {
            this.bEK(0);
            eu.bw(this.cbR)
        }
    };
    rH.ctx = function() {
        eu.bt(this.bEI);
        if ( !! this.Jx) {
            this.Jx = eu.bdP.bg(this.Jx)
        }
        this.Jx = eu.bdP.bh({
            parent: this.bed,
            courseId: this.hG,
            onsave: function(W) {
                var tH = {
                    id: W,
                    type: eu.CONST.LESSONUNIT_VIDEO
                };
                this.MI(tH, eu.CONST.LESSONUNIT_VIDEO)
            }.Z(this)
        })
    };
    rH.sF = function(jq) {
        return eu.SN(eu.CONST.UPLOAD_TOKEN_TYPE_VIDEO, jq)
    };
    rH.ctu = function() {
        var yn = this.ue.ctJ();
        if ( !! yn.contentId) {
            this.fH.contentId = yn.contentId
        }
        if ( !! this.eU) {
            this.eU.rt()
        }
        if ( !! this.fH.contentId) {
            this.ue.ctI();
            eu.bt(this.bed)
        } else {
            this.yz(false)
        }
    };
    rH.ctt = function(W) {
        this.yz(true);
        this.ue.ctQ(W)
    };
    rH.UN = function(W) {
        if ( !! this.ue) {
            this.ue.ctO(W)
        }
        if ( !! W.retSuc) {
            var tH = {
                id: this.fH.contentId,
                filename: W.name,
                noskey: W.nosKey,
                type: eu.CONST.LESSONUNIT_VIDEO
            };
            this.Wv(tH)
        }
    };
    rH.ctp = function(W) {
        var tH = {
            type: eu.CONST.LESSONUNIT_VIDEO_SRT,
            srtKeys: W,
            relId: this.fH.contentId
        };
        this.Wv(tH)
    };
    rH.bEQ = function(W) {
        if ( !! this.ue) {
            this.ue = eu.bpL.bg(this.ue)
        }
        this.ue = eu.bpL.bh({
            parent: this.Zw,
            data: this.fH,
            supportAnchor: this.QR,
            refreshStatus: this.ctu.Z(this),
            onload: this.UN.Z(this),
            ontoggleVideoAndPreview: this.yz.Z(this),
            onsrtload: this.ctp.Z(this),
            editing: this.bqq.Z(this)
        });
        eu.bw(this.bEI)
    };
    rH.vV = function() {
        if ( !! this.eU) {
            this.eU = eu.oC.bg(this.eU)
        }
        this.eU = eu.oC.bh({
            parent: this.ctA,
            verifyFile: this.sF,
            txt: "上传视频",
            tokenType: eu.CONST.UPLOAD_TOKEN_TYPE_VIDEO,
            beginUpload: this.ctt.Z(this),
            onupdateProgress: function(W) {
                if ( !! this.ue) {
                    this.ue.bdJ(W)
                }
            }.Z(this),
            onFinishUpload: this.UN.Z(this)
        });
        eu.bw(this.bEI)
    };
    rH.es = function() {
        if ( !! this.ue) {
            this.ue = eu.bpL.bg(this.ue)
        }
        eu.bt(this.cbR);
        eu.bt(this.Zw)
    };
    rH.bF = function(Y) {
        this.bI(Y)
    };
    rH.bL = function() {
        if ( !! this.eU) {
            this.eU = eu.oC.bg(this.eU)
        }
        if ( !! this.Jx) {
            this.Jx = eu.bdP.bg(this.Jx)
        }
        this.es();
        this.bO()
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.Ju) return;
    bs.Ju = NEJ.C();
    bN = bs.Ju.bu(bs.hS);
    bN.bF = function(Y) {
        this.bI(Y);
        this.bb = bm.bM(Y.body);
        this.eD = bm.bM(Y.input);
        this.or = Y.selected || "js-selected";
        this.dg = 0;
        this.hd([[this.eD, "input", this.bEY.Z(this)], [this.eD, "blur", this.UV.Z(this, "blur")], [this.bb, "mouseover", this.bFa.Z(this)], [this.bb, "click", this.kW.Z(this)], [document, "keydown", this.bFb.Z(this)], [document, "keypress", this.bFc.Z(this)]])
    };
    bN.bL = function() {
        this.bO();
        this.bep();
        delete this.or;
        delete this.eD;
        delete this.bb;
        delete this.bFf
    };
    bN.cto = function(bC) {
        return bC.flag != null
    };
    bN.bep = function() {
        var bFh = function(bB) {
            bE.bpD(bB, "flag")
        };
        return function() {
            bE.bA(this.dw, bFh);
            delete this.dw;
            delete this.dg
        }
    } ();
    bN.UY = function(bd) {
        if (this.dg === bd) return;
        this.dg = bd;
        bm.bJ(this.dw[this.dg], this.or)
    };
    bN.bpA = function(bd) {
        if (this.dg !== bd) return;
        bm.bZ(this.dw[this.dg], this.or);
        delete this.dg
    };
    bN.UV = function(bz) {
        this.bFk = setTimeout(function() {
            if (!this.dw) return;
            var bo = this.dw[this.dg] || this.dw[0],
            bG = bm.df(bo, "value") || bo.innerText;
            this.eD.value = bG;
            this.Dv();
            this.bFf = !0;
            this.bn("onselect", bG, {
                type: bz
            });
            this.bFf = !1
        }.Z(this), bz == "blur" ? 200 : 0)
    };
    bN.bEY = function() {
        var bG = this.eD.value.trim();
        if (!bG) {
            this.Dv()
        } else {
            if (this.bFf) return;
            this.bn("onchange", bG)
        }
    };
    bN.bFa = function(bj) {
        var bC = ch.eP(bj, this.cto);
        if ( !! bC) {
            this.bpA(this.dg);
            this.UY(bC.flag)
        }
    };
    bN.kW = function() {
        if (this.bFk) {
            this.bFk = clearTimeout(this.bFk)
        }
        this.UV("click")
    };
    bN.bFb = function(bj) {
        var cN = 0,
        nz = bj.keyCode;
        if (nz == 38) cN = -1;
        if (nz == 40) cN = 1;
        if (!cN) return;
        ch.dK(bj);
        var bd = Math.max(0, Math.min(this.dg + cN, this.dw.length - 1));
        if (bd === this.dg) return;
        this.bpA(this.dg);
        this.UY(bd)
    };
    bN.bFc = function(bj) {
        var bz = "enter";
        if (bj.keyCode == 13) this.UV(bz)
    };
    bN.Dv = function() {
        var bFm = function(bB, bd) {
            bB.flag = bd
        };
        return function(bH) {
            this.bep();
            if (!bH || !bH.length) {
                this.bb.style.visibility = "hidden";
                return this
            }
            this.dw = bH;
            var bd = bE.oa(this.dw,
            function(bB) {
                return bm.hJ(bB, this.or)
            });
            this.UY(Math.max(0, bd));
            bE.bA(this.dw, bFm);
            this.bb.style.visibility = "visible";
            return this
        }
    } ()
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bm = bq("nej.e"),
    ch = bq("nej.v"),
    bE = bq("nej.u"),
    bs = bq("edu.u"),
    bFn = bq("nej.ut"),
    ua,
    ctl;
    bs.bFs = NEJ.C();
    ua = bs.bFs.bu(bFn.Ju);
    ctl = bs.bFs.cE;
    ua.bF = function(Y) {
        this.bI(Y);
        this.cbL = Y.noInputFill || false;
        this.cbJ({})
    };
    ua.cbJ = function(W) {
        this.coE();
        this.hd([[this.eD, "keyup", this.bEY.Z(this)], [this.eD, "blur", this.bez.Z(this)], [this.bb, "click", this.UV.Z(this, W)], [document, "keydown", this.bFb.Z(this)], [document, "keypress", this.bFc.Ja(this, W)]])
    };
    ua.bL = function() {
        this.bO();
        this.bep();
        delete this.or;
        delete this.eD;
        delete this.bb
    };
    ua.dmw = function(bC) {
        return bC.flag != null
    };
    ua.bep = function() {
        var bFh = function(bB) {
            bE.bpD(bB, "flag")
        };
        return function() {
            bE.bA(this.dw, bFh);
            delete this.dw;
            delete this.dg
        }
    } ();
    ua.UY = function(bd) {
        if (this.dg === bd) return;
        this.dg = bd;
        bm.bJ(this.dw[this.dg], this.or)
    };
    ua.bpA = function(bd) {
        if (this.dg !== bd) return;
        bm.bZ(this.dw[this.dg], this.or);
        delete this.dg
    };
    ua.bez = function(bj) {
        var bB = bj.srcElement;
        this.bFA = setTimeout(function() {
            this.Dv();
            this.bn("onblur", bB)
        }.Z(this), 200)
    };
    ua.UV = function(W, bj) {
        if ( !! this.bFA) this.bFA = window.clearTimeout(this.bFA);
        this.bFB = true;
        this.ctf = ch.eP(bj, "c:zitm");
        var bo = this.ctf;
        if (!bo) {
            if ( !! this.dw) bo = this.dw[this.dg]
        }
        if (!bo) {
            this.bFB = false;
            return
        }
        var bG = bo.innerText;
        this.bb.style.visibility = "hidden";
        if (!this.cbL) {
            this.eD.value = bG
        }
        this.Dv();
        var Pe;
        bE.bA(W,
        function(tmp, bd) {
            if (bm.df(bo, "id") == tmp.id) {
                Pe = tmp
            }
        });
        this.bn("onselect", Pe);
        this.bFB = false
    };
    ua.cte = function() {
        if (this.beB) this.beB = window.clearTimeout(this.beB);
        this.beB = setTimeout(function() {
            if (!this.dw) return;
            var bo = this.dw[this.dg] || this.dw[0],
            bG = bm.df(bo, "value") || bo.innerText;
            if (!this.cbL) {
                this.eD.value = bG
            }
            this.beB = false
        }.Z(this), 200)
    };
    ua.bEY = function(bj) {
        if ( !! this.bFB || this.beB) {
            return
        }
        var bG = this.eD.value.trim();
        this.bn("onchange", bG, bj)
    };
    ua.bFb = function(bj) {
        var cN = 0,
        nz = bj.keyCode;
        if (nz == 38) cN = -1;
        if (nz == 40) cN = 1;
        if (!cN) return;
        ch.dK(bj);
        if (!this.dw) return;
        var bd = Math.max(0, Math.min(this.dg + cN, this.dw.length - 1));
        if (bd === this.dg) return;
        this.bpA(this.dg);
        this.UY(bd);
        this.cte()
    };
    ua.bFc = function(bj, W) {
        if (bj.keyCode == 13) this.UV(W)
    };
    ua.Dv = function() {
        var bFm = function(bB, bd) {
            bB.flag = bd
        };
        return function(bH, W) {
            this.bep();
            if (!bH || !bH.length) return;
            this.dw = bH;
            this.UY(0);
            this.cbJ(W);
            bE.bA(this.dw, bFm);
            this.bb.style.visibility = "visible"
        }
    } ()
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    eO = bq("nej.ut"),
    cK = bq("nej.ui"),
    bs = bq("edu.u"),
    EH,
    ctd;
    var cF = bm.dD(".#<uispace>-parent{position:absolute;left:-1px;border:1px solid #d5d5d5;width:100%;background:#FAFAFA;z-index:999;}.#<uispace>-parent .j-cnt{width:100%;color:#444;visibility:hidden;}.#<uispace>-parent .zitm-top{width:100%;text-indent:6px;line-height:32px;cursor:pointer;}.#<uispace>-parent .zitm,.#<uispace>-parent .zitm p{width:100%;text-indent:6px;line-height:32px;cursor:pointer;}.#<uispace>-parent .zitm a{display:block;overflow:hidden;text-overflow:ellipsis;font-size:12px}.#<uispace>-parent .zitm:hover,.#<uispace>-parent .zitm:hover p{color:#16914E;background-color:#ECECEE;}.#<uispace>-parent .js-selected,.#<uispace>-parent .js-selected p{color:#16914E;background-color:#ECECEE;}");
    var dz;
    bs.Ju = NEJ.C();
    EH = bs.Ju.bu(cK.st);
    ctd = bs.Ju.cE;
    bs.Ju.fd = function(Y) {
        if ( !! dz) {
            dz.AL.bg();
            delete dz.AL;
            dz.bF(Y);
            return dz
        } else {
            dz = bs.Ju.bh(Y);
            return dz
        }
    };
    EH.hk = function() {
        this.EZ = {
            onchange: this.jv.Z(this),
            onselect: this.Or.Z(this),
            onblur: this.bez.Z(this)
        };
        this.hy()
    };
    EH.bF = function(Y) {
        this.bI(Y);
        this.bpx = Y.suggestOption;
        this.beN = Y.separate;
        this.EZ.body = this.bpx;
        this.EZ.input = bm.bM(Y.input);
        this.EZ.input.insertAdjacentElement("afterEnd", Y.parent);
        this.EZ.noInputFill = Y.noInputFill;
        this.AL = bs.bFs.bh(this.EZ)
    };
    EH.bL = function() {
        this.bO();
        this.AL.bg();
        delete this.AL;
        delete this.EZ.input
    };
    EH.bU = function() {
        this.dv = cF
    };
    EH.bP = function() {
        this.bQ()
    };
    EH.jv = function(bG, bj) {
        this.bn("onchange", bG, bj)
    };
    EH.Or = function(bG) {
        this.bn("onselect", bG)
    };
    EH.bez = function(bB) {
        this.bn("onblur", bB)
    };
    EH.Dv = function(dE, ek, du) {
        this.AP = dE;
        if (bE.jQ(dE)) {
            bE.bA(dE,
            function(bo, bd) {
                if ( !! bo.name) bo.name = bo.name.replace(/<br\/>/ig, " ");
                if ( !! bo.title) bo.title = bo.title || bo.name
            });
            dE = bm.bX(du || "jst-suggest", {
                xlist: dE
            })
        }
        this.bpx.innerHTML = dE || "";
        this.zY = !ek ? bm.cS(this.bpx) : bm.bc(this.bpx, ek);
        bE.bA(this.zY,
        function(bo, bd) {
            var ca = this.AP[bd].id;
            if ( !! ca) {
                if ( !! this.beN && !!this.beN[ca]) {
                    bm.bJ(bo, this.beN[ca])
                }
            }
        }.Z(this));
        this.AL.Dv(this.zY, this.AP)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    ctc = '<div class="u-insug"><div class="area"></div><div class="sug" style="display:none"><div class="f-thide s-fc6 ar j-basetxt">请选择或继续输入...</div><div class=""></div></div></div>',
    ql;
    eu.zR = NEJ.C();
    ql = eu.zR.bu(eu.cq, true);
    ql.bU = function() {
        this.bW = e.bY(ctc)
    };
    ql.bP = function() {
        this.bQ();
        var kT = e.cS(this.bb);
        this.WS = kT[0];
        this.IW = kT[1];
        this.ctb = e.bc(this.bb, "j-basetxt")[0];
        this.cta = e.cS(this.IW)[1];
        this.fT = new p.iv
    };
    ql.beX = function(bH, rE, ek, du) {
        if ( !! bH && bH.length == 0) {
            this.AL.Dv(bH);
            eu.bt(this.IW);
            return
        }
        if ((!rE || rE == this.cbH) && !this.bGb) {
            this.AL.Dv(bH, ek, du);
            eu.bw(this.IW)
        }
    };
    ql.cbG = function(cN) {
        this.bn("onInputFocus");
        setTimeout(function() {
            if (cN) {
                this.AL = eu.Ju.fd({
                    input: this.eD.hM || this.eD.eD,
                    parent: this.IW,
                    suggestOption: this.cta,
                    separate: this.beN,
                    onchange: this.jv.Z(this),
                    onselect: this.Or.Z(this),
                    onblur: this.bez.Z(this),
                    noInputFill: true
                });
                this.bGb = false
            }
        }.Z(this), 200)
    };
    ql.cbF = function() {
        this.AL.Dv();
        eu.bt(this.IW)
    };
    ql.jv = function(bG, bj) {
        switch (bj.keyCode) {
        case 13:
            v.dK(bj);
            if (eu.zy(this.IW)) {
                this.cbE(bG)
            }
            return;
            break;
        case 8:
            v.dK(bj);
            if (!eu.zy(this.IW)) {
                if (bG.match(".+\\s\\(.+")) {
                    bG = eu.tj(bG.split("(")[0]);
                    this.eD.cX(bG);
                    this.bn("onDeleteCnt");
                    return
                }
            }
            break
        }
        if (bG.match(".*\\s+$")) {
            this.cbF();
            return
        }
        if (bG == "") {
            this.cbF();
            return
        }
        var Xz = this.fT.clJ(bG);
        this.cbH = Xz[Xz.length - 1];
        if ( !! bG) {
            this.bn("onSuggest", this.cbH)
        }
    };
    ql.cbE = function(csP) {
        var Xz = this.fT.clJ(this.eD.cc().trim());
        Xz[Xz.length - 1] = csP.name;
        this.eD.cX(Xz.join(" ") + " ");
        eu.bt(this.IW)
    };
    ql.Or = function(bG) {
        this.cbE(bG);
        this.bGb = false;
        if ( !! bG) {
            this.bn("onSelect", bG)
        }
    };
    ql.bez = function(bB) {
        eu.bt(this.IW);
        this.bGb = true
    };
    ql.Mk = function() {
        var IU;
        return function(bj) {
            if (!bj) {
                return
            }
            if ( !! IU) {
                IU = g.clearTimeout(IU)
            }
            IU = g.setTimeout(function() {
                this.bn("onKeyDown", bj, this.eD.cc())
            }.Z(this), 300)
        }
    } ();
    ql.cX = function(bG) {
        this.eD.cX(bG)
    };
    ql.bF = function(Y) {
        this.bI(Y);
        this.Vc = Y.critical || 0;
        this.cbC = Y.labelText || "请输入";
        this.beN = Y.separate || "";
        this.ctb.innerText = Y.baseText || "请选择或继续输入...";
        if (!this.Vc) {
            this.eD = eu.cH.bh({
                parent: this.WS,
                labelText: this.cbC,
                content: Y.content,
                width: Y.width,
                height: Y.height,
                type: "input",
                onInputFocus: this.cbG.Z(this, true),
                onInputBlur: Y.onInputBlur,
                onInputChange: this.Mk.Z(this)
            })
        } else {
            this.eD = eu.eh.bh({
                parent: this.WS,
                labelText: this.cbC,
                filterEnter: true,
                type: "input",
                width: Y.width,
                height: Y.height,
                critical: this.Vc,
                onInputFocus: this.cbG.Z(this, true),
                onInputBlur: Y.onInputBlur,
                onInputChange: this.Mk.Z(this)
            })
        }
    };
    ql.cc = function() {
        return this.eD.cc()
    };
    ql.ho = function(bG) {
        this.eD.cc(bG)
    };
    ql.iU = function() {
        this.eD.iU()
    };
    ql.jX = function() {
        this.eD.jX()
    };
    ql.bL = function() {
        if (!this.Vc) {
            this.eD = eu.cH.bg(this.eD)
        } else {
            this.eD = eu.eh.bg(this.eD)
        }
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    bD = u.eW(),
    OB,
    bGm = "ck-suggestionCache";
    p.bGn = NEJ.C();
    OB = p.bGn.bu(p.hA);
    OB.csN = function(teacherName, ga) {
        this.bK({
            key: bGm + bD,
            url: "MocSchoolBean.getSuggestLector",
            param: [teacherName, ga],
            notShowLoading: true,
            onload: this.csM.Z(this)
        })
    };
    OB.csM = function(W) {
        this.bn("onGetTeacherInChargeSuggest", W)
    };
    OB.csL = function(cl) {
        this.bK({
            key: bGm + bD,
            url: "PublishCourseBean.listCourseByName",
            param: [cl],
            onload: this.csK.Z(this)
        })
    };
    OB.csK = function(W) {
        this.bn("onGetSuggestCourse", W)
    };
    OB.csJ = function(bGw) {
        this.bK({
            key: bGm + bD,
            url: "TermStaffBean.queryAssits",
            param: [bGw],
            notShowLoading: true,
            onload: this.csG.Z(this)
        })
    };
    OB.csG = function(W) {
        this.bn("onqueryAssits", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    csz = '<div class="u-sugInput"><div class="iptArea f-cb"><div class="ipt"></div><a class="add u-btn u-btn-default">添加</a></div><p></p><p></p><div class="tags"></div></div>',
    vj;
    eu.OC = NEJ.C();
    vj = eu.OC.bu(eu.cq, true);
    vj.bU = function() {
        this.bW = e.bY(csz)
    };
    vj.bP = function() {
        this.bQ();
        this.cbA = e.cS(this.bb)[0];
        this.WS = e.cS(this.cbA)[0];
        this.ld = e.cS(this.cbA)[1];
        this.bpu = e.cS(this.bb)[1];
        this.csx = e.cS(this.bb)[2];
        this.bpt = e.cS(this.bb)[3];
        this.wp = [];
        this.rP = [];
        this.fT = new p.iv;
        v.bf(this.ld, "click", this.bGH.Z(this));
        this.OF = new d.bGn;
        this.OF.bf("onGetTeacherInChargeSuggest", this.bpr.Z(this));
        this.OF.bf("onGetSuggestCourse", this.bpr.Z(this))
    };
    vj.bpr = function(W) {
        this.dw = [];
        for (var i = 0; i < W.length; i++) {
            W[i].text = "text";
            if (this.Um == "chargeTeacher") {
                if (!W[i].nickName) {
                    W[i].nickName = ""
                }
                W[i].name = W[i].lectorName + " (" + W[i].schoolName + " " + W[i].nickName + ")";
                W[i].id = W[i].lectorId
            } else if (this.Um == "spocCourse") {
                if (!W[i].name) {
                    W[i].name = ""
                }
                W[i].name = W[i].name + " (" + (W[i].schoolPanel || {}).name + "" + "" + ")"
            }
            this.dw.push(W[i])
        }
        this.ny.beX(this.dw)
    };
    vj.bGH = function() {
        var bG = this.ny.eD.cc();
        bG = bG.replace(/\s/g, "_");
        if (bG == "") {
            eu.showToastTips({
                content: "请填写标签",
                type: 2
            });
            return false
        }
        this.ny.eD.cX()
    };
    vj.bF = function(Y) {
        this.bI(Y);
        this.cbz = Y.tagCount;
        this.bpu.innerText = "你最多可以填写" + this.cbz + "个";
        this.csx.innerText = Y.hint || "";
        this.csu = Y.labelText || "";
        this.wp = [];
        this.Um = Y.phrase || "";
        this.jR = null;
        if (this.Um == "chargeTeacher" || this.Um == "spocCourse") {
            eu.bt(this.bpu);
            eu.bt(this.ld);
            eu.bt(this.bpu)
        } else {
            eu.bw(this.bpu)
        }
        this.ny = eu.zR.bh({
            parent: this.WS,
            labelText: this.csu,
            width: 280,
            height: 32,
            onSelect: this.bGR.Z(this),
            onKeyDown: this.Mk.Z(this),
            onSuggest: this.bga.Z(this),
            onDeleteCnt: function() {
                this.bn("onDeleteCnt")
            }.Z(this),
            onInputFocus: function() {
                this.bn("onInputFocus")
            }.Z(this)
        })
    };
    vj.Mk = function(bj) {
        if (bj.keyCode == 13) {
            if (this.dw.length == 0) {
                var bG = this.ny.eD.cc();
                this.ny.eD.cX("");
                this.ny.eD.clE()
            }
        }
    };
    vj.bGR = function(W) {
        for (var i = 0; i < this.dw.length; i++) {
            if (this.dw[i].id == W.id) {
                NEJ.X(W, this.dw[i])
            }
        }
        this.bn("onSelect", W)
    };
    vj.bL = function() {
        this.jR = null;
        this.ny = eu.zR.bg(this.ny);
        this.bO()
    };
    vj.bga = function(bG) {
        if (this.Um == "chargeTeacher") {
            this.OF.csN(bG, this.jR)
        } else if (this.Um == "spocCourse") {
            this.OF.csL(bG)
        }
    };
    vj.Uq = function(ga) {
        this.jR = ga
    };
    vj.cX = function(bG) {
        this.ny.cX(bG)
    };
    vj.iU = function() {
        this.ny.iU()
    };
    vj.jX = function() {
        this.ny.jX()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    ui = NEJ.P("nej.ui"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    Bb;
    var cF = e.dD(".#<uispace> .topinfo{margin-bottom:5px;}.#<uispace> .tipinfo{margin-top:5px;line-height:20px;width:305px;}.#<uispace> .tit{height:20px;line-height:20px;padding-bottom:5px;font-size:14px;}.#<uispace> .dateDay,.dateMin {text-align: center;}.#<uispace> .timeSet{top:35px;left:0;z-index:3000;}.#<uispace> .timesetType{margin:5px 15px;}.#<uispace> .timesetType input{vertical-align:middle;margin-right:5px;}.#<uispace> .timesetType label{vertical-align:middle;}.#<uispace> .timesetting .timedetail{margin: 5px 0 10px 36px;}.#<uispace> .timesetting .timedetail .desc{height:30px;line-height:30px;}.#<uispace> .timesetting .timedetail .dateMinLayer{left:143px;}.#<uispace> .timesetting .timedetail .dateDayLayer{left:60px;}.#<uispace> .timeSet .zday a{font-size: 10px;font-family: sans-serif;color: #666;}.#<uispace> .timeSet .zday .js-extended{color:#ccc;}.#<uispace> .timeSet .zday .js-selected{background-color:#83b600;color:#fff;}.#<uispace> .timeSet .zday th{font-size: 12px;font-family: sans-serif;text-align: center;}.#<uispace> .timeSet .zact span{font-size: 12px;font-family: sans-serif;}.#<uispace> .m-feedbackinfo{padding: 5px 0 5px 10px;}.#<uispace> .u-sugInput .u-btn{margin-left:10px;padding:4px 8px;line-height:22px;}.#<uispace> .fb{height:22px;}.#<uispace>\t.fb .m-feedbackinfo{padding:0px;}.#<uispace>\t.schoollector{vertical-align:middle;margin-right:3px;}.#<uispace>\t.lectorfrom{height:33px;line-height:33px;margin-left:10px;}.#<uispace> .u-btn{padding:0 4px;height:30px;line-height:30px;}");
    var dn = e.bY('<div class="u-caeUI"><div class="tit f-f0"><em class="f-sign">*</em>学期负责人</div><div class="f-cb"><div class="j-text name f-fl"></div><div class="f-fl lectorfrom"><input type="checkbox" id="schoollector" class="j-school schoollector"><label class="schoollector" for="schoollector">本校老师</label></div></div><p class="tipinfo f-fc9">保存后，课程负责人将不可再修改。如果查找不到，请电话联系 010-58582372  或发邮件至support@crct.edu.cn进行申请。</p><div class="j-fd fb f-cb"></div><blockquote class="b-20"></blockquote><div class="tit f-f0"><em class="f-sign">*</em>制定学期开课时间和结束时间</div><div class="f-cb timesetting"><div class="timesetType"><input type="radio" id="exacttimeOk" name="NeteaseAhu" class="j-timesetType"><label for="exacttimeOk">设定具体时间</label></div><div class="f-cb timedetail f-pr"><div class="desc j-desc f-fl">开课时间：</div><div class="f-fl timeSet f-cb j-timeSet"></div></div><div class="f-cb timedetail f-pr"><div class="desc j-desc f-fl">结束时间：</div><div class="f-fl timeSet f-cb j-timeSet"></div></div><div class="timesetType"><input type="radio" id="exacttimeNotOk" name="NeteaseAhu" class="j-timesetType"><label for="exacttimeNotOk">待定</label></div></div><div class="j-fd fb f-cb"></div></div>');
    eu.bgg = NEJ.C();
    Bb = eu.bgg.bu(eu.cq, true);
    Bb.bU = function() {
        this.bW = dn;
        this.dv = cF
    };
    Bb.bP = function() {
        this.bQ();
        this.qp = e.bc(this.bb, "j-timeSet");
        this.hV = e.bc(this.bb, "j-text");
        this.Be = e.bc(this.bb, "j-desc");
        this.OH = e.bc(this.bb, "j-fd");
        this.OI = e.bc(this.bb, "j-school")[0];
        this.qs = e.bc(this.bb, "j-timesetType");
        v.bf(this.OI, "click", this.bHj.Z(this));
        u.bA(this.qs,
        function(bo, bd) {
            v.bf(bo, "click", this.bgq.Z(this, bd))
        }.Z(this))
    };
    Bb.bHj = function() {
        if ( !! this.OI.checked) {
            this.OK.Uq(g.school.id)
        } else {
            this.OK.Uq(null)
        }
    };
    Bb.LK = function() {
        var kR = {},
        kd = {};
        if ( !! this.qs[0].checked) {
            kR = this.hD.iM();
            kd = this.gs.iM();
            if (kR.totalData == 0 || kR.day == 0) {
                this.ik.cu("开始日期不能为空", true);
                return null
            }
            if (kd.totalData == 0 || kd.day == 0) {
                this.ik.cu("结束日期不能为空", true);
                return null
            }
            if (kd.totalData < kR.totalData) {
                this.ik.cu("结束日期不能早于开始日期", true);
                return null
            }
        } else if ( !! this.qs[1].checked) {
            kR.totalData = eu.CONST.UNDETERMINDED_STARTTIME;
            kd.totalData = eu.CONST.UNDETERMINDED_ENDTIME
        }
        if (this.bgz == -1) {
            this.Ey.cu("课程负责人不能为空", true);
            return null
        }
        var bHx = {
            id: this.hs,
            courseId: this.hG,
            chiefTeacherId: this.bgz,
            startTime: kR.totalData,
            endTime: kd.totalData,
            checked: !!this.qs[1].checked
        };
        return bHx
    };
    Bb.bgq = function(bd) {
        if (bd == 0) {
            e.bZ(this.Be[0], "f-fc9");
            e.bZ(this.Be[1], "f-fc9");
            this.hD.pj();
            this.gs.pj();
            this.hD.lA(this.Vl);
            this.gs.lA(this.Vr)
        } else if (bd == 1) {
            e.bJ(this.Be[0], "f-fc9");
            e.bJ(this.Be[1], "f-fc9");
            this.Vl = this.hD.iM().totalData;
            this.Vr = this.gs.iM().totalData;
            this.hD.sz();
            this.gs.sz();
            if ( !! this.ik) {
                this.ik.ce()
            }
        }
    };
    Bb.lq = function(oF) {
        this.OK = eu.OC.bh({
            parent: this.hV[0],
            labelText: "请输入负责人名字",
            onSelect: function(W) {
                this.bgz = W.lectorId
            }.Z(this),
            onDeleteCnt: function() {
                this.bgz = -1
            }.Z(this),
            onInputFocus: function() {
                if ( !! this.Ey) this.Ey.ce()
            }.Z(this),
            phrase: "chargeTeacher"
        });
        this.hD = eu.ic.bh({
            parent: this.qp[0],
            onDateClick: function() {
                if ( !! this.gs && this.gs.tR) {
                    this.gs.tR.bg()
                }
                if ( !! this.ik) this.ik.ce()
            }.Z(this),
            onMinClick: function() {
                if ( !! this.gs) {
                    this.gs.baK()
                }
                if ( !! this.ik) this.ik.ce()
            }.Z(this),
            onClick: function() {
                if ( !! this.gs) {
                    this.gs.EB()
                }
            }.Z(this)
        });
        if (this.hL == eu.CONST.TERMSTATUS_PUBLISHED && oF.startTime <= eu.dG()) {
            this.hD.sz();
            e.bJ(this.Be[0], "f-fc9");
            this.cbx = false;
            this.qs[0].disabled = true;
            this.qs[1].disabled = true
        } else {
            this.hD.pj()
        }
        this.gs = eu.ic.bh({
            parent: this.qp[1],
            onDateClick: function() {
                if ( !! this.hD && this.hD.tR) {
                    this.hD.tR.bg()
                }
                if ( !! this.ik) this.ik.ce()
            }.Z(this),
            onMinClick: function() {
                if ( !! this.hD) {
                    this.hD.baK()
                }
                if ( !! this.ik) this.ik.ce()
            }.Z(this),
            onClick: function() {
                if ( !! this.hD) {
                    this.hD.EB()
                }
            }.Z(this)
        });
        if (this.hL == eu.CONST.TERMSTATUS_PUBLISHED && oF.endTime <= eu.dG()) {
            this.gs.sz();
            e.bJ(this.Be[1], "f-fc9");
            this.cbx = false
        } else {
            this.gs.pj()
        }
        if ( !! oF && !!oF.startTime) {
            if (oF.startTime == eu.CONST.UNDETERMINDED_STARTTIME) {
                this.qs[1].checked = true;
                this.bgq(1)
            } else {
                this.qs[0].checked = true;
                this.hD.lA(oF.startTime);
                this.gs.lA(oF.endTime);
                this.Vl = oF.startTime;
                this.Vr = oF.endTime
            }
        } else {
            this.bgq(0);
            this.qs[0].checked = true
        }
        this.Ey = eu.cv.bh({
            parent: this.OH[0]
        });
        this.Ey.ce();
        this.ik = eu.cv.bh({
            parent: this.OH[1]
        });
        this.ik.ce();
        if ( !! oF && !!oF.lectorPanels) {
            for (var i = 0; i < oF.lectorPanels.length; i++) {
                if (oF.lectorPanels[i].lectorType == eu.CONST.REL_TYPE_TERM_CHIEF_LECTOR || oF.lectorPanels[i].lectorType === null) {
                    if (!oF.lectorPanels[i].nickName) {
                        oF.lectorPanels[i].nickName = ""
                    }
                    this.OK.cX(oF.lectorPanels[i].realName + " (" + oF.schoolPanel.name + " " + oF.lectorPanels[i].nickName + ")")
                }
            }
            this.ik.ce();
            this.hs = oF.id
        } else {
            this.hs = 0
        }
        this.OI.checked = true;
        this.OK.Uq(g.school.id)
    };
    Bb.bF = function(Y) {
        Y.title = "学期编辑";
        Y.clazz = "u-termdialog";
        Y.maskClickNotHidden = true;
        this.hG = Y.termDto.courseId;
        if ( !! Y.termDto.lectorPanels) {
            this.bgz = Y.termDto.lectorPanels[0].memberId
        } else {
            this.bgz = -1
        }
        this.hL = Y.status || eu.CONST.TERMSTATUS_DRAFT;
        this.cbx = true;
        this.fj();
        this.bI(Y);
        this.Vl = null;
        this.Vr = null;
        this.qs[0].disabled = false;
        this.qs[1].disabled = false;
        this.yH = Y.canCreateNewTerm || 0;
        this.lq(Y.termDto)
    };
    Bb.fj = function() {
        if ( !! this.OK) {
            this.OK = eu.OC.bg(this.OK)
        }
        if ( !! this.hD) {
            this.hD = eu.ic.bg(this.hD)
        }
        if ( !! this.gs) {
            this.gs = eu.ic.bg(this.gs)
        }
        if ( !! this.Ey) {
            this.Ey = eu.cv.bg(this.Ey)
        }
        if ( !! this.ik) {
            this.ik = eu.cv.bg(this.ik)
        }
    };
    Bb.iR = function() {
        this.fj();
        this.fs()
    };
    Bb.bL = function() {
        this.fj();
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    ui = NEJ.P("nej.ui"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    Bp;
    var cF = e.dD(".#<uispace> {padding:20px;}.#<uispace> .save{margin-right:20px;}.#<uispace> .fb{height:22px;}.#<uispace>\t.fb .m-feedbackinfo{padding:0px;}.#<uispace> .u-btn{padding:0 4px;height:30px;line-height:30px;}");
    var dn = e.ee('<div class="u-caeDialog"><div class="j-moocBase moocBase"></div><div class="j-createfd createfd"></div><a class="u-btn u-btn-default j-save save">保存</a><a class="u-btn j-cancel">取消</a></div>');
    eu.bgJ = NEJ.C();
    Bp = eu.bgJ.bu(eu.hq, true);
    eu.bgJ.bT = function(Y) {
        var fV = eu.bgJ.bh(Y);
        fV.gI()
    };
    Bp.bU = function() {
        this.bW = e.bY(e.bX(dn));
        this.dv = cF
    };
    Bp.bP = function() {
        this.bQ();
        this.gC = e.bc(this.bb, "j-save")[0];
        this.jH = e.bc(this.bb, "j-cancel")[0];
        this.bHM = e.bc(this.bb, "j-moocBase")[0];
        this.bHN = e.bc(this.bb, "j-createfd")[0];
        v.bf(this.gC, "click", this.mQ.Z(this));
        v.bf(this.jH, "click",
        function() {
            this.iR()
        }.Z(this));
        this.Iy = new d.oE;
        this.Iy.bf("AdminCreateTerm", this.bHQ.Z(this));
        this.Iy.bf("AdminUpdateTerm", this.bHV.Z(this))
    };
    Bp.bHQ = function(W) {
        this.bn("createTerm", W);
        this.fj();
        this.fs()
    };
    Bp.bHV = function(W) {
        this.bn("updateTerm", W);
        this.fj();
        this.fs()
    };
    Bp.mQ = function() {
        if ( !! this.yH) return;
        this.kG = this.Iw.LK();
        if (!this.kG) return;
        if (!this.kG.id) {
            this.Iy.cjR(this.kG.courseId, this.kG.chiefTeacherId, this.kG.startTime, this.kG.endTime, this.kG.checked)
        } else {
            this.Iy.cjP(this.kG.courseId, this.kG.id, this.kG.chiefTeacherId, this.kG.startTime, this.kG.endTime, this.kG.checked)
        }
    };
    Bp.lq = function(Y) {
        this.Iw = eu.bgg.bh({
            parent: this.bHM,
            termDto: Y.termDto,
            status: Y.status || eu.CONST.TERMSTATUS_DRAFT
        });
        this.xX = eu.cv.bh({
            parent: this.bHN
        });
        this.xX.ce();
        e.bJ(this.gC, "u-btn-default");
        e.bZ(this.gC, "u-btn-disabled");
        if ( !! this.yH) {
            if (this.yH == 1) {
                this.xX.cu("已经有一个未发布的学期，无法保存。<br>如有需要，请删除未发布的学期后重新操作。", true)
            }
            if (this.yH == 2) {
                this.xX.cu("新学期的创建必须在上一学期的内容结束后方可创建。", true)
            }
            e.bZ(this.gC, "u-btn-default");
            e.bJ(this.gC, "u-btn-disabled")
        }
    };
    Bp.bF = function(Y) {
        Y.title = "学期编辑";
        Y.clazz = "u-termdialog";
        Y.maskClickNotHidden = true;
        this.hL = Y.status || eu.CONST.TERMSTATUS_DRAFT;
        this.bI(Y);
        this.yH = Y.canCreateNewTerm || 0;
        this.lq(Y)
    };
    Bp.fj = function() {
        if ( !! this.Iw) {
            this.Iw = eu.bgg.bg(this.Iw)
        }
        if ( !! this.xX) {
            this.xX = eu.cv.bg(this.xX)
        }
    };
    Bp.iR = function() {
        this.fj();
        this.fs()
    };
    Bp.bL = function() {
        this.fj();
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    OS;
    var cF = e.dD(".#<uispace> {}.#<uispace> .sicon{font-size:16px;color:#ddd;position:absolute;top:3px;right:10px;cursor:pointer;}");
    var eg = e.bY('<div class="u-searchIpt f-pr"><input type="text" name="inputtxt" class="j-input"></input><label class="j-label f-fc9" for="inputtxt"></label><div class="f-icon sicon j-searchIcon"></div></div>');
    eu.jF = NEJ.C();
    OS = eu.jF.bu(eu.cq, true);
    OS.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    OS.bP = function() {
        this.bQ();
        this.csq = e.bc(this.bb, "j-searchIcon")[0];
        v.bf(this.csq, "click",
        function() {
            this.bn("onSearchIconClick")
        }.Z(this))
    };
    OS.bF = function(Y) {
        this.bI(Y);
        this.nr = eu.cH.bh({
            inputArea: this.bb,
            labelText: Y.labelText || "",
            content: Y.content || "",
            onInputChange: function(bj) {
                this.bn("onInputChange", bj)
            }.Z(this),
            onInputKeyDown: function(bj) {
                this.bn("onInputKeyDown", bj)
            }.Z(this)
        })
    };
    OS.bL = function() {
        if ( !! this.nr) {
            this.nr = eu.cH.bg(this.nr)
        }
        this.bO()
    };
    OS.nE = function() {
        return this.nr
    };
    OS.cc = function() {
        return this.nr.cc()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    eu = NEJ.P("edu.u");
    var csn = {
        0 : {
            id: 0,
            name: "C"
        },
        1 : {
            id: 1,
            name: "Cool"
        },
        2 : {
            id: 2,
            name: "C++"
        },
        3 : {
            id: 3,
            name: "Go"
        },
        4 : {
            id: 4,
            name: "Haskell"
        },
        5 : {
            id: 5,
            name: "Java"
        },
        6 : {
            id: 6,
            name: "JavaScript"
        },
        7 : {
            id: 7,
            name: "Lua"
        },
        8 : {
            id: 8,
            name: "Pascal"
        },
        9 : {
            id: 9,
            name: "PHP"
        },
        10 : {
            id: 10,
            name: "Perl"
        },
        11 : {
            id: 11,
            name: "Python2.7"
        },
        12 : {
            id: 12,
            name: "Ruby"
        },
        13 : {
            id: 13,
            name: "Shell"
        }
    };
    var csm = {
        ACCEPTED: "",
        PRESENTATION_ERROR: "请检查程序输出的格式",
        WRONG_ANSWER: "结果错误",
        NON_ZERO_EXIT_CODE: "程序异常，exit code非0",
        MEMORY_LIMIT_EXCEEDED: "超出内存限制",
        TIME_LIMIT_EXCEEDED: "运行时间超出限制",
        OUTPUT_LIMIT_EXCEEDED: "程序输出过长",
        FLOAT_POINT_EXCEPTION: "浮点错误",
        "SEGMENTATION_FAULT ": "程序运行异常",
        RUNTIME_ERROR: "程序运行异常",
        INTERNAL_ERROR: "无法完成判题"
    };
    eu.bpg = function(csl) {
        var eA = "待定";
        switch (csl) {
        case eu.CONST.JUDGE_TYPE_EVALUATE:
            eA = "学生互评";
            break;
        case eu.CONST.JUDGE_TYPE_LECTOR:
            eA = "老师批改";
            break
        }
        return eA
    };
    eu.dmy = function(csj) {
        var eA = "";
        switch (csj) {
        case eu.CONST.HW_PHASE_SUBMIT:
            eA = "提交";
            break;
        case eu.CONST.HW_PHASE_EVALUATION:
            eA = "批改";
            break;
        case eu.CONST.HW_PHASE_SCORE:
            eA = "成绩公布";
            break
        }
        return eA
    };
    eu.cbw = function(Dj) {
        var Ig = eu.dG();
        var vN = null;
        var cbv = Dj.evaluateJudgeType == eu.CONST.JUDGE_TYPE_LECTOR,
        cbu = cbv ? ["提交阶段", "老师批改阶段", "成绩已公布"] : ["提交阶段", "即将开始互评", "互评阶段", "等待成绩公布", "成绩已公布"],
        cV = cbv ? [Dj.deadline, Dj.evaluateScoreReleaseTime, Ig + 1] : [Dj.deadline, Dj.evaluateStart, Dj.evaluateEnd, Dj.evaluateScoreReleaseTime, Ig + 1],
        eG = cbu.length,
        i = 0;
        for (; i < eG; i++) {
            if (cV[i] > Ig) {
                vN = cbu[i];
                break
            }
        }
        return vN
    };
    eu.cbs = function(csa) {
        var eA = "";
        switch (csa) {
        case eu.CONST.QUIZ_SCORE_TYPE_LAST:
            eA = "最后一次得分";
            break;
        case eu.CONST.QUIZ_SCORE_TYPE_BEST:
            eA = "最高得分";
            break;
        case eu.CONST.QUIZ_SCORE_TYPE_AVG:
            eA = "平均得分";
            break
        }
        return eA
    };
    eu.cbq = function(bz) {
        switch (bz) {
        case eu.CONST.TYPE_OBJECTIVE_SINGLE:
        case eu.CONST.TYPE_OBJECTIVE_JUDGE:
            return "radio";
            break;
        case eu.CONST.TYPE_OBJECTIVE_MULTI:
            return "checkbox";
            break;
        default:
            break
        }
    };
    eu.zu = function(bhr, bhs) {
        var gh = {};
        if ( !! bhr) {
            u.bA(bhr,
            function(jN) {
                if (!gh[jN.id]) {
                    gh[jN.id] = {
                        questionDto: eu.Bg(jN)
                    }
                }
            })
        }
        if ( !! bhs) {
            u.bA(bhs,
            function(gV) {
                if ( !! gh[gV.qid]) {
                    gh[gV.qid]["qAnswerDto"] = eu.Bg(gV)
                }
            })
        }
        return gh
    };
    eu.bpb = function(bhr, bhs) {
        var gh = [];
        if ( !! bhr) {
            u.bA(bhr,
            function(jN) {
                gh.push({
                    questionDto: eu.Bg(jN)
                })
            })
        }
        if ( !! bhs) {
            u.bA(bhs,
            function(gV) {
                var rE;
                u.bA(gh,
                function(bo) {
                    if (bo.questionDto && bo.questionDto.id == gV.qid) {
                        rE = bo;
                        return true
                    }
                });
                if ( !! rE) {
                    rE["qAnswerDto"] = eu.Bg(gV)
                }
            })
        }
        return gh
    };
    eu.crQ = function(bpa, crN) {
        u.bA(crN,
        function(bo) {
            u.bA(bpa,
            function(fm) {
                if (fm.id == bo.jid) {
                    fm.score = bo;
                    return true
                }
            })
        });
        return bpa
    };
    eu.WU = function(Dj) {
        var Ig = eu.dG();
        var crM = Dj.deadline;
        var crL = Dj.evaluateScoreReleaseTime;
        var vN = null;
        if (Ig < crM) {
            vN = eu.CONST.HW_PHASE_SUBMIT
        } else if (Ig >= crL) {
            vN = eu.CONST.HW_PHASE_SCORE
        } else {
            vN = eu.CONST.HW_PHASE_EVALUATION
        }
        return vN
    };
    eu.cbm = function(cbl, gn) {
        return gn == 0 && !!cbl.deadline && eu.dG() <= cbl.deadline
    };
    eu.cbk = function(bH) {
        var cbj = [];
        u.bA(bH,
        function(gx) {
            cbj.push(csn[gx])
        }.Z(this));
        return cbj
    };
    eu.crG = function(nz) {
        return csm[nz] || ""
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    ge,
    ix = "ck-termSettingsCache";
    p.zo = NEJ.C();
    ge = p.zo.bu(p.hA);
    ge.crF = function(fh, cd) {
        this.bK({
            key: ix + bD,
            url: "MocMenuItemBean.getAllMenuItems",
            param: [fh, cd],
            onload: this.bJb.Z(this)
        })
    };
    ge.bJb = function(W) {
        this.bn("onGetAllMenuItems", W)
    };
    ge.bqf = function(fh, cd, crE, nd) {
        this.bK({
            key: ix + bD,
            url: "MocMenuItemBean.getMenuItem",
            param: [fh, cd, crE, nd],
            onload: this.baB.Z(this)
        })
    };
    ge.baB = function(W) {
        this.bn("onGetMenuItem", W)
    };
    ge.crA = function(fh, cd, bJe) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "MocMenuItemBean.saveMenuItemDrafts",
            param: [fh, cd, bJe],
            onload: this.crz.Z(this)
        })
    };
    ge.crz = function(W) {
        this.bn("onSaveMenuItems", W)
    };
    ge.cry = function(fh, cd, bJe) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "MocMenuItemBean.publishMenuItems",
            param: [fh, cd, bJe],
            onload: this.boY.Z(this)
        })
    };
    ge.boY = function(W) {
        this.bn("publishMenuItems", W)
    };
    ge.crw = function(fh, cd) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "MocMenuItemBean.publishMenuItems4Spoc",
            param: [fh, cd],
            onload: this.crv.Z(this)
        })
    };
    ge.crv = function(W) {
        this.bn("publishMenuItems4Spoc", W)
    };
    ge.cru = function(crt) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "MocMenuItemBean.saveMenuItemDraft",
            param: [crt],
            onload: this.boW.Z(this)
        })
    };
    ge.boW = function(W) {
        this.bn("onSaveMenuItem", W)
    };
    ge.crs = function(cd, HO, da) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "MocMenuItemBean.saveMenuItemDraft4Spoc",
            param: [cd, HO, da],
            onload: this.crq.Z(this)
        })
    };
    ge.crq = function(W) {
        this.bn("onsSaveMenuItemDraft4Spoc", W)
    };
    ge.cro = function(cd, fJ) {
        this.bK({
            key: ix + bD,
            url: "PublishCourseBean.manageTermCloseStatus",
            param: [cd, fJ],
            onload: this.bJC.Z(this)
        })
    };
    ge.bJC = function(W) {
        this.bn("onSaveTermOpenStatus", W)
    };
    ge.crn = function(bJE, cd) {
        this.bK({
            key: ix + bD,
            url: "MocSettingBean.updateCopyRightSetting",
            param: [bJE, cd],
            onload: this.bJF.Z(this)
        })
    };
    ge.bJF = function(W) {
        this.bn("onUpdateCopyRightSetting", W)
    };
    ge.crm = function(bJE) {
        this.bK({
            key: ix + bD,
            url: "MocSettingBean.updateSpocCopyRightSetting",
            param: [bJE],
            onload: this.bJH.Z(this)
        })
    };
    ge.bJH = function(W) {
        this.bn("onUpdateSpocCopyRightSetting", W)
    };
    ge.crj = function(cd) {
        this.bK({
            key: ix + bD,
            url: "MocSettingBean.getSpocCopyRightSetting",
            param: [cd],
            onload: this.bJJ.Z(this)
        })
    };
    ge.bJJ = function(W) {
        this.bn("onGetSpocCopyRightSetting", W)
    };
    ge.cri = function(cd) {
        this.bK({
            key: ix + bD,
            url: "TermStaffBean.getAllstaffByTerm",
            param: [cd],
            onload: this.bJN.Z(this)
        })
    };
    ge.bJN = function(W) {
        this.bn("onGetAllstaffByTerm", W)
    };
    ge.crh = function(DE, cd) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "TermStaffBean.deleteStaff",
            param: [DE, cd],
            onload: this.bJQ.Z(this)
        })
    };
    ge.bJQ = function(W) {
        this.bn("onDeleteStaff", W)
    };
    ge.cqW = function(DE, cd) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "TermStaffBean.addLector",
            param: [DE, cd],
            onload: this.bJS.Z(this)
        })
    };
    ge.bJS = function(W) {
        this.bn("onAddLector", W)
    };
    ge.cqT = function(cqR, fh, cd, eV, ia) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "TermStaffBean.move",
            param: [cqR, fh, cd, eV, ia],
            onload: this.bJW.Z(this)
        })
    };
    ge.bJW = function(W) {
        this.bn("onMoveLector", W)
    };
    ge.cqQ = function(kx, cd) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "TermStaffBean.addAssist",
            param: [kx, cd],
            onload: this.bJY.Z(this)
        })
    };
    ge.bJY = function(W) {
        this.bn("onAddAssist", W)
    };
    ge.caY = function(cqF, yb) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "MocSettingBean.updateTermSetting",
            param: [cqF, yb],
            onload: this.bKe.Z(this)
        })
    };
    ge.bKe = function(W) {
        this.bn("onSaveTermScoreRule", W)
    };
    ge.caR = function(cd, cqA, YF) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "MocSettingBean.saveEvaluationDescriptionDraft",
            param: [cd, cqA, YF],
            onload: this.bKk.Z(this, YF)
        })
    };
    ge.bKk = function(YF, W) {
        this.bn("onSaveEvaluationDescriptionDraft", YF, W)
    };
    ge.Ol = function(cd) {
        this.bK({
            key: ix + bD,
            url: "MocSettingBean.getTermSetting",
            param: [cd],
            onload: this.bil.Z(this)
        })
    };
    ge.bil = function(W) {
        this.bn("onGetTermScoreRule", W)
    };
    ge.bKm = function(cd) {
        this.bK({
            key: ix + bD,
            url: "ForumSettingBean.getForumsByTerm",
            param: [cd],
            onload: this.cqy.Z(this)
        })
    };
    ge.cqy = function(W) {
        if (!W) return;
        var dh = W[0];
        W[0] = W[1];
        W[1] = W[2];
        W[2] = dh;
        if ( !! W[4]) {
            dh = W[4];
            W.splice(4, 1);
            W.splice(3, 0, dh)
        }
        this.bn("ongetForumsByTerm", W)
    };
    ge.caP = function(bin, eR) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "ForumSettingBean.manageForum",
            param: [bin, eR],
            onload: this.bKq.Z(this, eR, bin)
        })
    };
    ge.bKq = function(eR, bin, W) {
        bin.id = W;
        this.bn("onmanageForum", bin, eR)
    };
    ge.caO = function(cd, bG, dI) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "ForumSettingBean.saveForumBase",
            param: [cd, bG, dI],
            onload: this.cqs.Z(this, dI, bG)
        })
    };
    ge.cqs = function(dI, bG, W) {
        if (dI == 1) {
            this.bn("onsaveForumBaseName", W, bG)
        } else {
            this.bn("onsaveForumBaseDescription", W, bG)
        }
    };
    ge.cqq = function(cd) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "ForumSettingBean.publishTermForumSetting",
            param: [cd],
            onload: this.cqp.Z(this)
        })
    };
    ge.cqp = function(W) {
        this.bn("onpublishTermForumSetting", W)
    };
    ge.cqo = function(cd) {
        if (!eu.dM()) return;
        this.bK({
            key: ix + bD,
            url: "ForumSettingBean.updateForumClosedStatus",
            param: [cd],
            onload: this.bKA.Z(this)
        })
    };
    ge.bKA = function(W) {
        this.bn("onupdateForumClosedStatus", W)
    };
    ge.cqn = function(bz, ca) {
        var cJ = bz == "term" ? "TermDraftBean.resetTermDraft": "MocAdminQuizBean.resetTestDraft";
        this.bK({
            key: ix + bD,
            url: cJ,
            param: [ca],
            onload: this.cql.Z(this)
        })
    };
    ge.cql = function(W) {
        this.bn("onResetTermOrTest", W)
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    jm,
    uu = "ck-termNoticeCache";
    p.wu = NEJ.C();
    jm = p.wu.bu(p.hA);
    jm.bKH = function(bKJ, bKK, fa) {
        if (!eu.dM()) return;
        this.bK({
            key: uu + bD,
            url: "PublishCourseBean.saveOrPublishAnnouncement",
            param: [bKJ, bKK, fa],
            onload: this.cqi.Z(this, fa)
        })
    };
    jm.cqi = function(fa, W) {
        this.bn("onSaveOrPublishAnnouncement", {
            data: W,
            isDraft: fa
        })
    };
    jm.cqg = function(bKJ, bKK, fa) {
        if (!eu.dM()) return;
        this.bK({
            key: uu + bD,
            url: "PublishCourseBean.checkAnnouncementDuplicate",
            param: [bKJ, bKK, fa],
            onload: this.cqf.Z(this)
        })
    };
    jm.cqf = function(W) {
        this.bn("onCheckAnnouncementDuplicate", W)
    };
    jm.caM = function(cd, bz) {
        this.bK({
            key: uu + bD,
            url: "PublishCourseBean.getAllAnnouncementByTerm",
            param: [cd, bz],
            onload: this.bKP.Z(this)
        })
    };
    jm.bKP = function(W) {
        this.bn("onGetAllAnnouncementByTerm", W)
    };
    jm.bKQ = function(cd, bz, uv) {
        var cJ = !!uv ? "PublishCourseBean.getAllAnnouncementByTerm": "CourseBean.getAllAnnouncementByTerm";
        this.bK({
            key: uu + bD,
            url: cJ,
            param: [cd, bz],
            onload: this.bKP.Z(this)
        })
    };
    jm.bKP = function(W) {
        this.bn("onGetAllAnnouncementByTerm", W)
    };
    jm.caL = function(ca) {
        if (!eu.dM()) return;
        this.bK({
            key: uu + bD,
            url: "PublishCourseBean.deleteAnnouncementById",
            param: [ca],
            onload: this.cqc.Z(this)
        })
    };
    jm.cqc = function(W) {
        this.bn("onDeleteAnnouncementById", W)
    };
    jm.cqa = function(ca, uv) {
        this.bK({
            key: uu + bD,
            url: "CourseBean.getMixedForumAnnouncementByTerm",
            param: [ca, uv],
            onload: this.cpZ.Z(this)
        })
    };
    jm.cpZ = function(W) {
        this.bn("onGetMixedForumAnnouncementByTerm", W)
    };
    jm.caK = function(cd, ji, hu) {
        this.bK({
            key: uu + bD,
            url: "MocTermMailBean.getMocTermMailDtos",
            param: [cd, ji, hu],
            onload: this.cpR.Z(this)
        })
    };
    jm.cpR = function(W) {
        this.bn("onGetIndependentMailDtos", W)
    };
    jm.caJ = function(Pv) {
        if (!eu.dM()) return;
        this.bK({
            key: uu + bD,
            url: "MocTermMailBean.sendTermMail",
            param: [Pv],
            onload: this.bLh.Z(this)
        })
    };
    jm.bLh = function(W) {
        this.bn("onSendTermMail", W)
    };
    jm.cpG = function(Pv) {
        if (!eu.dM()) return;
        this.bK({
            key: uu + bD,
            url: "MocTermMailBean.checkTermMailDuplicate",
            param: [Pv],
            onload: this.bLm.Z(this)
        })
    };
    jm.bLm = function(W) {
        this.bn("onCheckTermMailDuplicate", W)
    };
    jm.cpF = function(Pv) {
        if (!eu.dM()) return;
        this.bK({
            key: uu + bD,
            url: "MocTermMailBean.saveTermMailDraft",
            param: [Pv],
            onload: this.bLo.Z(this)
        })
    };
    jm.bLo = function(W) {
        this.bn("onSaveTermMailDraft", W)
    };
    jm.cpE = function(cpD, cd) {
        this.bK({
            key: uu + bD,
            url: "MocSearchBean.getSuggestMember",
            param: [cpD, cd],
            onload: this.bLr.Z(this)
        })
    };
    jm.bLr = function(W) {
        this.bn("onGetSuggestMember", W)
    };
    jm.cpC = function(bLu, cd) {
        this.bK({
            key: uu + bD,
            url: "MocSearchBean.getMemberByName",
            param: [bLu, cd],
            onload: this.bLv.Z(this)
        })
    };
    jm.bLv = function(W) {
        this.bn("onGetMemberByName", W)
    };
    jm.cpA = function(ca) {
        if (!eu.dM()) return;
        this.bK({
            key: uu + bD,
            url: "MocTermMailBean.deleteMocMail",
            param: [ca],
            onload: this.bLx.Z(this)
        })
    };
    jm.bLx = function(W) {
        this.bn("onDeleteMocMail", W)
    };
    jm.cpw = function(bz, mH) {
        this.bK({
            key: uu + bD,
            url: "MocTermMailBean.getMocTermMailTemplate",
            param: [bz, mH],
            onload: this.bLB.Z(this)
        })
    };
    jm.bLB = function(W) {
        this.bn("onGetMocTermAutoMail", W)
    };
    jm.cpv = function(Pv) {
        if (!eu.dM()) return;
        this.bK({
            key: uu + bD,
            url: "MocTermMailBean.updateMocTermMailTemplate",
            param: [Pv],
            onload: this.bLF.Z(this)
        })
    };
    jm.bLF = function(W) {
        this.bn("onUpdatetMocTermAutoMail", W)
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    t = NEJ.P("nej.ut"),
    eu = NEJ.P("edu.u"),
    v = NEJ.P("nej.v"),
    ui = NEJ.P("nej.ui"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    wM,
    cpu;
    var cF = e.dD(".#<uispace> {margin-top:20px;}.#<uispace> .ctinfo{height:65px;line-height:30px;}.#<uispace> .title{font-size:14px;}.#<uispace> .cnt{width:650px}.#<uispace> .cnt .zarea{height:450px;}.#<uispace> .opts{margin-bottom:10px;padding:0 0 0 50px;}.#<uispace> .messc{width: 20px;height: 20px;vertical-align: middle;}.#<uispace> .mess{vertical-align: middle;}.#<uispace> .publish{height:28px;}.#<uispace> .mail{font-size:12px;margin:6px 0 10px;}.#<uispace> .draft,.publish{margin-right:10px;}.#<uispace> .draft{height:28px;}.#<uispace> .tipinfo{width:660px;}.#<uispace> .opts .u-btn{min-width:60px;height:30px;line-height:30px;padding:0 5px;font-size:12px;}");
    var dj = e.bY('<div class="cNotice f-cb"><div class="ctinfo f-cb f-pr"><div class="title f-fl f-f0"><em class="f-sign">*</em>标题：</div><div class="f-fl j-ctitle"></div><div class="f-fl j-feed feed"></div></div><div class="f-cb f-pr"><div class="title f-fl f-f0"><em class="f-sign">*</em>内容：</div><div class="f-fl j-cnt cnt"></div><div class="f-fl j-feed feed"></div></div><div class="opts f-cb"><div class="mail" id="j-mailtipInfo"><div class="mtop"><input type="checkbox" class="messc j-sendmail" id="aefdsv123"/><label class="mess f-f0" for="aefdsv123">邮件通知</label></div><p class="tipinfo f-fc9">发布后学习者将在学习页面上看到该公告，勾选“邮件通知”后，能同时收到相同内容的邮件。</p></div><a class="f-fl j-draft draft u-btn u-btn-default f-f1">保存为草稿</a><a class="f-fl j-pubslih publish u-btn u-btn-primary f-f1">发布</a><a class="f-fl j-cancel cancel u-btn f-f1">取消</a></div></div>');
    eu.uN = NEJ.C();
    wM = eu.uN.bu(eu.cq, true);
    cpu = eu.uN.cE;
    wM.bU = function() {
        this.bW = dj;
        this.dv = cF
    };
    wM.bP = function() {
        this.bQ();
        this.iu = e.bc(this.bb, "j-ctitle")[0];
        this.oI = e.bc(this.bb, "j-cnt")[0];
        this.boI = e.bc(this.bb, "j-pubslih")[0];
        this.NR = e.bc(this.bb, "j-draft")[0];
        this.jH = e.bc(this.bb, "j-cancel")[0];
        this.pE = e.bc(this.bb, "j-feed");
        this.bLO = e.bc(this.bb, "j-sendmail")[0];
        v.bf(this.boI, "click", this.bjf.Z(this));
        v.bf(this.NR, "click", this.bLR.Z(this));
        v.bf(this.jH, "click", this.bcz.Z(this));
        this.gr = new d.wu;
        this.gr.bf("onSaveOrPublishAnnouncement", this.cpq.Z(this));
        this.gr.bf("onCheckAnnouncementDuplicate", this.cpo.Z(this))
    };
    wM.cpq = function(W) {
        if ( !! W.data) {
            if (this.Hj == eu.CONST.NOTICE_TYPE_FORUMADMIN) {
                if ( !! W.isDraft) {
                    alert("保存成功")
                } else {
                    alert("发布成功")
                }
            } else {
                if ( !! W.isDraft) {
                    eu.showToastTips({
                        content: "保存成功"
                    })
                } else {
                    eu.showToastTips({
                        content: "发布成功"
                    })
                }
            }
            this.bn("saveOrPublish", W.data)
        }
    };
    wM.kw = function() {
        this.qI = eu.eh.bh({
            parent: this.iu,
            height: 34,
            width: 647,
            labelText: " ",
            critical: 30,
            onInputFocus: function() {
                if ( !! this.lc) {
                    this.lc.ce()
                }
            }.Z(this)
        });
        var ff = "";
        if ( !! this.iy) {
            this.qI.cX(this.iy.title || "");
            ff = this.iy.content
        }
        this.uJ = ui.fK.bh({
            parent: this.oI,
            height: 435,
            content: ff
        });
        this.lc = eu.cv.bh({
            parent: this.pE[0]
        });
        this.lc.ce();
        this.mr = eu.cv.bh({
            parent: this.pE[1]
        });
        this.mr.ce();
        if (this.iy.status == 1) {
            eu.bt(this.NR)
        } else {
            eu.bw(this.NR)
        }
    };
    wM.PA = function() {
        this.iy.title = this.qI.cc();
        this.iy.content = this.uJ.cc();
        if (this.Hj == eu.CONST.NOTICE_TYPE_FORUMADMIN) {
            this.iy.termId = -1
        } else {
            this.iy.termId = g.termDto.id
        }
        this.iy.type = this.Hj;
        if (this.bLO.checked || this.bLO.checked == true) {
            this.boG = 1
        } else {
            this.boG = 0
        }
    };
    wM.rq = function(cU) {
        var eG = this.fT.ir(this.iy.title);
        if (!this.iy.title || this.iy.title == "") {
            this.lc.cu("请输入公告标题！");
            return false
        } else if (eG > 60) {
            this.lc.cu("公告标题过长！");
            return false
        } else {
            this.mr.ce();
            return true
        }
        if ( !! cU) {
            if (!this.iy.content || this.iy.content == "") {
                this.mr.cu("请输入公告内容！");
                return false
            } else {
                this.mr.ce()
            }
        }
        return true
    };
    wM.bLR = function() {
        this.PA();
        if ( !! this.rq(true)) {
            this.gr.bKH(this.iy, 0, 1)
        }
    };
    wM.bjf = function() {
        this.PA();
        if ( !! this.rq(false)) {
            this.gr.cqg(this.iy, this.boG, 0)
        }
    };
    wM.cpo = function(W) {
        if (W == 1) {
            eu.cp.bT({
                message: "邮件内容重复，确定要重新发送吗",
                okFunc: function() {
                    this.gr.bKH(this.iy, this.boG, 0)
                }.Z(this),
                cancelFunc: f
            })
        } else {
            this.gr.bKH(this.iy, this.boG, 0)
        }
    };
    wM.bcz = function() {
        this.bn("onCancel")
    };
    wM.bF = function(Y) {
        this.bI(Y);
        this.cA = 100 || g.termDto.id;
        this.iy = Y.noticeDto || {};
        this.kw();
        this.fT = new p.iv;
        if ( !! Y.isAdmin) {
            e.bJ(this.NR, "button green");
            e.bJ(this.boI, "button green");
            e.bJ(this.jH, "button green");
            eu.bt(e.bM("j-mailtipInfo"));
            this.bLO.checked = false;
            e.ev(e.bM("j-mailtipInfo").parentNode, "paddingTop", "20px")
        }
        this.Hj = Y.noticeType || eu.CONST.NOTICE_TYPE_TERM
    };
    wM.bL = function() {
        if ( !! this.qI) {
            this.qI = eu.eh.bg(this.qI)
        }
        if ( !! this.uJ) {
            this.uJ = ui.fK.bg(this.uJ)
        }
        if ( !! this.lc) {
            this.lc = eu.cv.bg(this.lc)
        }
        if ( !! this.mr) {
            this.mr = eu.cv.bg(this.mr)
        }
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    t = NEJ.P("nej.ut"),
    eu = NEJ.P("edu.u"),
    v = NEJ.P("nej.v"),
    ui = NEJ.P("nej.ui"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    sN,
    cpn;
    var dj = e.bY('<div class="noitce f-cb"><div class="noticeitem f-f0 f-pr f-cb"><div class="f-cb item j-item"><span class="j-name name f-fl f-thide">这是第一条公告</span><span class="j-type type f-fc9 f-fl">草稿</span><a class="j-show show f-f1 f-icon f-fr" title="查看详情"></a><a class="j-delete delete f-f1 f-icon f-fr" title="删除"></a><a class="j-edit edit f-f1 f-icon f-fr" title="编辑"></a><span class="j-time time f-f1 f-fr">2014年01月08日</span></div><div class="f-cb detailtitlpage"><span class="j-detailtit detailtit f-fl f-f0">这是第一条公告</span><span class="j-lpagetype type f-fc9 f-fl">草稿</span><span class="f-fc9 f-fr f-f1 nopublish j-nopublish">尚未发布，在前端页面上还不能看到这条公告</span></div><div class="j-detailcnt detailcnt f-fc6 f-richEditorText"></div><div class="icons j-icons f-pa"><div class="icon"></div></div><div class="j-detailcntout detailcntout f-fc6 f-richEditorText"></div><div class="f-cb opt j-opt"></div><div class="f-cb lptimeout"><div class="f-fr j-lpagetime lptime"></div></div></div><a class="j-showmore showmore f-f0">点击载入更多</a></div>');
    eu.vt = NEJ.C();
    sN = eu.vt.bu(eu.cq, true);
    cpn = eu.vt.cE;
    sN.bU = function() {
        this.bW = dj
    };
    sN.bP = function() {
        this.bQ();
        this.qe = e.bc(this.bb, "j-item")[0];
        this.gj = e.bc(this.bb, "j-name")[0];
        this.bV = e.bc(this.bb, "j-type")[0];
        this.caC = e.bc(this.bb, "j-lpagetype")[0];
        this.tn = e.bc(this.bb, "j-time")[0];
        this.pz = e.bc(this.bb, "j-delete")[0];
        this.zE = e.bc(this.bb, "j-edit")[0];
        this.wX = e.bc(this.bb, "j-show")[0];
        this.xO = e.bc(this.bb, "j-opt")[0];
        this.Ny = e.bc(this.bb, "j-icons")[0];
        this.Cz = e.bc(this.bb, "j-detailcnt")[0];
        this.bMp = e.bc(this.bb, "j-detailcntout")[0];
        this.bMr = e.bc(this.bb, "j-detailtit")[0];
        this.EN = e.bc(this.bb, "j-showmore")[0];
        this.bMw = e.bc(this.bb, "j-lpagetime")[0];
        this.caB = e.bc(this.bb, "j-nopublish")[0];
        v.bf(this.zE, "click", this.Ai.Z(this));
        v.bf(this.wX, "click", this.bMz.Z(this));
        v.bf(this.pz, "click", this.JR.Z(this));
        v.bf(this.EN, "click", this.bjK.Z(this));
        this.gr = new d.wu;
        this.gr.bf("onDeleteAnnouncementById", this.PH.Z(this))
    };
    sN.Ai = function() {
        this.bMI(this.sa);
        if ( !! this.CE) {
            this.bjN(this.CE)
        }
    };
    sN.bjK = function() {
        this.bn("showMoreItems")
    };
    sN.bMI = function(cU) {
        if ( !! cU) {
            this.sa = false;
            if ( !! this.ju) {
                this.ju = eu.uN.bg(this.ju)
            }
            eu.bw(this.qe);
            eu.bt(this.xO)
        } else {
            this.sa = true;
            eu.bt(this.qe);
            eu.bw(this.xO);
            this.ju = eu.uN.bh({
                parent: this.xO,
                saveOrPublish: this.GS.Z(this),
                noticeDto: this.iy,
                onCancel: function() {
                    if ( !! this.ju) {
                        eu.bw(this.qe);
                        eu.bt(this.xO);
                        this.ju = eu.uN.bg(this.ju);
                        this.sa = false
                    }
                }.Z(this),
                isAdmin: this.caA,
                noticeType: this.Hj
            })
        }
    };
    sN.bjN = function(cU) {
        if ( !! cU) {
            this.wX.innerText = "";
            this.wX.title = "查看详情";
            this.CE = false;
            this.Cz.style.display = "none";
            this.Ny.style.display = "none"
        } else {
            this.CE = true;
            this.wX.innerText = "";
            this.wX.title = "隐藏详情";
            eu.bw(this.Cz);
            this.Cz.style.display = "block";
            this.Ny.style.display = "block"
        }
    };
    sN.bMz = function() {
        this.bjN(this.CE)
    };
    sN.JR = function() {
        if (!eu.dM()) return;
        if ( !! this.caA) {
            if ( !! window.confirm("确定删除此公告？")) {
                this.gr.caL(this.iy.id)
            }
        } else {
            eu.cp.bT({
                message: "你确定要删除改公告吗？",
                cancelFunc: function() {},
                okFunc: function() {
                    this.gr.caL(this.iy.id)
                }.Z(this)
            })
        }
    };
    sN.PH = function(W) {
        if ( !! W) {
            this.bn("deleteNotice")
        }
    };
    sN.GS = function(W) {
        eu.bw(this.qe);
        eu.bt(this.xO);
        if ( !! W) {
            this.iy = NEJ.X(this.iy, W);
            this.bjS();
            this.sa = false;
            if ( !! this.ju) {
                this.ju = eu.uN.bg(this.ju)
            }
        }
    };
    sN.bjS = function() {
        var eG = this.fT.ir(this.iy.title);
        if (eG > 60) {
            this.gj.innerText = this.fT.My(this.iy.title, 50) + "..."
        } else {
            this.gj.innerText = this.iy.title
        }
        if (this.iy.status == 0) {
            eu.bw(this.bV);
            eu.bw(this.caC);
            eu.bw(this.caB)
        } else {
            eu.bt(this.bV);
            eu.bt(this.caC);
            eu.bt(this.caB)
        }
        this.bMr.innerText = this.iy.title;
        this.Cz.innerHTML = this.iy.content;
        this.bMp.innerHTML = this.iy.content;
        u.jE(this.Cz);
        u.jE(this.bMp);
        if ( !! this.iy.gmtModified) {
            this.bMw.innerText = eu.gA(this.iy.gmtModified);
            this.tn.innerText = eu.gA(this.iy.gmtModified)
        }
    };
    sN.boF = function(cU) {
        if ( !! cU) {
            this.EN.style.display = "block"
        } else {
            this.EN.style.display = "none"
        }
    };
    sN.caz = function() {
        return this.EN.style.display != "none"
    };
    sN.bF = function(Y) {
        this.bI(Y);
        this.sa = false;
        this.CE = false;
        this.wX.innerText = "";
        eu.bt(this.Cz);
        eu.bt(this.xO);
        if ( !! Y.showMore) {
            this.djb = true;
            this.EN.style.display = "block"
        } else {
            this.djb = false;
            this.EN.style.display = "none"
        }
        this.iy = Y.noticeDto || null;
        this.fT = new p.iv;
        this.bjS();
        if ( !! Y.islearnPage) {
            this.qe.innerHTML = "";
            this.bMr.parentNode.style.display = "block";
            this.bMp.style.display = "block";
            this.bMw.style.display = "block"
        } else {
            this.tn.style.display = "block";
            this.bMr.parentNode.style.display = "none";
            this.bMw.style.display = "none"
        }
        this.caA = Y.isAdmin || false;
        this.Hj = Y.noticeType || eu.CONST.NOTICE_TYPE_TERM
    };
    sN.bL = function() {
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    ut = NEJ.P("nej.ut"),
    cax;
    ut.PJ = NEJ.C();
    cax = ut.PJ.bu(ut.DG, !0);
    diY = ut.PJ.cE;
    cax.Sj = function(bj) {
        diY.Sj.apply(this, arguments);
        this.bn("ondragstart", bj)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("nej.ui"),
    Ff;
    var diX = {
        "-1": "",
        1 : "算分任务正在执行中，",
        2 : "最新的成绩还未计算，",
        3 : "部分学生尚未有分数，",
        4 : "还有测验、作业或者试卷的成绩尚未确认或者未到成绩公布时间，",
        5 : "学期设置已经更改，请重新计算总分"
    };
    var eg = e.bY('<a class="u-btn u-btn-default"></a>');
    eu.bkb = NEJ.C();
    Ff = eu.bkb.bu(eu.cq, true);
    Ff.bU = function() {
        this.bW = eg
    };
    Ff.bP = function() {
        this.bQ();
        this.cg = new d.mN;
        this.cg.bf("onDoConfirm", this.diS.Z(this));
        this.cg.bf("onTryConfirmAchievement", this.diR.Z(this));
        this.MP = new d.vL;
        this.MP.bf("onGetMocAchivementDto", this.yV.Z(this))
    };
    Ff.yV = function(W) {
        var fJ = W.status;
        e.bJ(this.bb, "u-btn-disabled");
        if (fJ == eu.CONST.ACHIEVEMENT_STATUS_CONFIRMED) {
            this.bb.innerHTML = "已确认成绩";
            this.bn("hasConfirmed")
        } else {
            this.bb.innerHTML = this.diN;
            if (eu.pG() || fJ == eu.CONST.ACHIEVEMENT_STATUS_REVIEW_PASS) {
                e.bZ(this.bb, "u-btn-disabled");
                v.bf(this.bb, "click", this.din.Z(this))
            }
        }
    };
    Ff.din = function(bj) {
        eu.cp.bT({
            type: 1,
            message: "确认成绩后，所有学生的成绩数据将不能更改，是否确定？",
            okFunc: function() {
                this.cg.cKV(this.cA)
            }.Z(this),
            cancelFunc: f
        })
    };
    Ff.diR = function(W) {
        if (!W) {
            this.cas();
            return
        }
        if (!W.success) {
            eu.cp.bT({
                type: 1,
                message: diX[W.code + ""] + "不能发布！"
            });
            return
        }
        var dR = parseInt(W.passCount || 0) + parseInt(W.outstandingCount || 0);
        if (dR > 0) {
            this.cg.cKX(this.cA)
        } else {
            var fc = "";
            if (W.outstandingEnabled) {
                fc = '当前获得优秀和合格成绩的学生人数为0，不能确认成绩。<br/><span class="f-fc9">可以通过修改评分规则来调整优秀和合格成绩人数，确保不为0</span>'
            } else {
                fc = '当前获得合格成绩的学生人数为0，不能确认成绩。<br/><span class="f-fc9">可以通过修改评分规则来调整合格成绩人数，确保不为0</span>'
            }
            eu.cp.bT({
                type: 1,
                message: fc
            })
        }
    };
    Ff.diS = function(W) {
        if ( !! W) {
            e.bJ(this.bb, "u-btn-disabled");
            v.dY(this.bb, "click");
            this.bn("confirmSuccess")
        } else {
            this.cas()
        }
    };
    Ff.cas = function() {
        eu.cp.bT({
            type: 1,
            message: "确认失败"
        })
    };
    Ff.bF = function(Y) {
        this.bI(Y);
        this.cA = Y.termId;
        this.diN = Y.btnTxt || "确认成绩无误";
        if ( !! Y.scoreDto) {
            this.yV(Y.scoreDto)
        } else {
            this.MP.OD(this.cA)
        }
    };
    Ff.bL = function() {
        v.dY(this.bb, "click");
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    PO,
    bNk = "ck-CommonCache";
    p.bNm = NEJ.C();
    PO = p.bNm.bu(p.hA);
    PO.dih = function(fh, cd, dif, bz, dhU) {
        this.bK({
            key: bNk + bD,
            url: "ChartStatisticsBean.asyncGenerateStatisticExcel",
            param: [fh, cd, dif, bz, dhU],
            notShowLoading: true,
            onload: this.bNw.Z(this)
        })
    };
    PO.bNw = function(W) {
        this.bn("onAsyncGenerateStatisticExcel", W)
    };
    PO.WX = function(bvX) {
        this.bK({
            key: bNk + bD,
            url: "CommonBean.getThreadStatusByThreadId",
            param: [bvX],
            notShowLoading: true,
            onload: this.bfC.Z(this)
        })
    };
    PO.bfC = function(W) {
        this.bn("onGetThreadStatusByThreadId", W)
    };
    PO.dhS = function(mX) {
        this.bK({
            key: bNk + bD,
            url: "CommonBean.checkAccountStatus",
            param: [mX],
            notShowLoading: true,
            onload: this.bNz.Z(this)
        })
    };
    PO.bNz = function(W) {
        this.bn("onCheckAccountStatus", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    eu = NEJ.P("edu.u");
    eu.boy = function(gE) {
        gE = parseInt(gE || 0);
        var Vw = null;
        var cL = "";
        var dhK = gE >= 0 ? "": "-";
        gE = Math.abs(gE);
        if (gE < 1e3) {
            cL = "" + gE + ""
        } else if (gE < 1e6) {
            Vw = Math.floor(gE % 1e3 / 100);
            gE = Math.floor(gE / 1e3);
            cL = gE >= 10 ? gE + "k": Vw > 0 ? gE + "." + Vw + "k": gE + "k"
        } else {
            gE /= 1e3;
            Vw = Math.floor(gE % 1e3 / 100);
            gE = Math.floor(gE / 1e3);
            cL = gE >= 10 ? gE + "m": Vw > 0 ? gE + "." + Vw + "m": gE + "m"
        }
        return dhK + cL
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    Mr;
    var rE = '<div><p class="f-cb"><span title="内容">内容</span><b class="u-close f-icon f-ib">&nbsp</b></p></div>';
    var dmC = "<span></span>";
    p.bNI = NEJ.C();
    Mr = p.bNI.bu(eu.cq, true);
    Mr.bU = function() {
        var dj = e.bY(rE);
        this.bW = dj
    };
    Mr.bP = function() {
        this.bQ()
    };
    Mr.bF = function(Y) {
        this.bI(Y);
        this.bov = Y.big;
        this.dg = Y.index;
        this.PR = Y.from || "";
        this.cap = this.bov ? "w-tag-hover w-tag-big-hover": "w-tag-hover";
        if (this.bov) {
            this.bb.className = "w-tag w-tag-big f-ib"
        } else {
            this.bb.className = "w-tag f-ib"
        }
        this.PS = e.cS(this.bb);
        this.bNV = this.PS[0];
        this.PS = e.cS(this.bNV);
        this.VD = this.PS[0];
        this.bNX = this.PS[1];
        var bou = this.VE = Y.tagName;
        this.bOa = bou.sys || false;
        if (this.bOa) {
            e.bJ(this.bb, "sys")
        } else {
            e.bZ(this.bb, "sys")
        }
        this.gj = bou.name;
        if ( !! bou.pop) {
            this.dhz = bou.pop;
            var cao = e.rF("span", "j-count u-count");
            cao.innerText = "x " + eu.boy(this.dhz || 0);
            this.bb.appendChild(cao)
        }
        this.VD.title = this.gj || "";
        if ( !! Y.charlen) {
            this.fT = new p.iv;
            var eG = this.fT.ir(this.gj);
            if (eG >= 50) {
                this.gj = this.fT.My(this.gj, Y.charlen) + "..."
            }
        }
        this.VD.innerText = this.gj || "";
        this.hd([[this.bNV, "mouseover", this.bFa.Z(this)], [this.bNV, "mouseout", this.dhd.Z(this)], [this.VD, "click", this.kW.Z(this)]]);
        eu.bw(this.bNX);
        if (Y.canDelete && !this.bOa) {
            this.hd([[this.bNX, "click", this.dgV.Z(this)]])
        } else {
            this.bNX.style.display = "none"
        }
    };
    Mr.bFa = function() {
        if ( !! this.bOf) {
            window.clearTimeout(this.bOf);
            this.bOf = null
        }
        this.bOg = setTimeout(function() {
            e.bJ(this.bb, this.cap)
        }.Z(this), 0)
    };
    Mr.dhd = function() {
        if ( !! this.bOg) {
            window.clearTimeout(this.bOg);
            this.bOg = null
        }
        this.bOf = setTimeout(function() {
            e.bZ(this.bb, this.cap)
        }.Z(this), 0)
    };
    Mr.kW = function() {
        if (this.PR == "ask") {
            if (this.bOa) {
                if (location.pathname == g.askIndexPrefix) {
                    g.dispatcher.cB(eu.umi("askIndex") + "?resType=" + this.VE.resType + "&resId=" + this.VE.resId + "&st=0")
                } else {
                    g.open(g.askIndexPrefix + "?fromId=" + this.VE.linkId + "&fromType=" + this.VE.linkType + "#" + eu.umi("askIndex") + "?resType=" + this.VE.resType + "&resId=" + this.VE.resId + "&st=0", "_blank")
                }
            } else {
                g.open(g.askSearchByLabelPrefix + "?label=" + g.encodeURIComponent(this.gj), "_blank")
            }
        }
    };
    Mr.dgV = function() {
        this.bn("onDelete", this, this.dg);
        this.bL()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    Fu;
    var rE = '<div class="w-tags"></div>';
    p.bkK = NEJ.C();
    Fu = p.bkK.bu(eu.cq, true);
    Fu.bU = function() {
        var dj = e.bY(rE);
        this.bW = dj
    };
    Fu.bP = function() {
        this.bQ()
    };
    Fu.bF = function(Y) {
        this.bI(Y);
        this.dgx = Y.canDelete;
        this.bov = Y.big;
        this.PR = Y.from || "";
        this.lZ = [];
        this.dgu = Y.charlen || null;
        this.bOm(Y.list)
    };
    Fu.bL = function() {
        this.bO();
        if ( !! this.lZ && this.lZ.length) {
            u.od(this.lZ, this.bos, this)
        }
        this.dw = [];
        this.lZ = []
    };
    Fu.bAG = function(eI, bd) {
        for (var i = 0; i < this.lZ.length; i++) {
            if (eI == this.lZ[i]) {
                this.dw.splice(i, 1);
                this.lZ.splice(i, 1)
            }
        }
        this.bn("onDelete", eI.gj)
    };
    Fu.dgt = function(bo, cO) {
        var Af = p.bNI.bh({
            parent: this.bb,
            canDelete: this.dgx,
            tagName: bo,
            big: this.bov,
            index: cO,
            charlen: this.dgu,
            onDelete: this.bAG.Z(this),
            from: this.PR
        });
        Af.index = cO;
        this.lZ.push(Af)
    };
    Fu.bos = function(bo, bd) {
        this.lZ.splice(bd, 1);
        bo = p.bNI.bg(bo)
    };
    Fu.bOm = function(bH) {
        if ( !! this.lZ && this.lZ.length) {
            u.od(this.lZ, this.bos, this)
        }
        this.dw = bH;
        u.bA(this.dw, this.dgt, this);
        this.bn("afterrefresh")
    };
    Fu.cal = function() {
        return this.dw
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    Gz,
    dfW;
    var cF = e.dD(".#<uispace> {line-height:22px;}.#<uispace>.loading{background: url(" + g.imageUrlMap.loading_circle_gif + ") no-repeat 10px 6px; text-indent: 20px;}");
    var eg = e.bY('<a style="display:none" class="u-btn u-loading-btn">下载</a>');
    eu.io = NEJ.C();
    Gz = eu.io.bu(eu.cq, true);
    dfW = eu.io.cE;
    Gz.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    Gz.bP = function() {
        this.bQ();
        this.cg = new d.bNm;
        this.cg.bf("onAsyncGenerateStatisticExcel", this.bNw.Z(this));
        this.cg.bf("onGetThreadStatusByThreadId", this.bfC.Z(this))
    };
    Gz.bNw = function(W) {
        if ( !! W) {
            this.bOv = W.threadId
        }
    };
    Gz.bfC = function(W) {
        if ( !! W.finished) {
            var bOw = e.bgV({
                src: W.data,
                name: "excel",
                parent: document.body,
                visible: false,
                onload: function() {
                    e.sE(bOw)
                }
            });
            this.VS = g.clearInterval(this.VS);
            e.bZ(this.bb, "u-btn-disabled loading");
            e.bJ(this.bb, this.bkV);
            v.bf(this.bb, "click", this.cai.Z(this))
        }
    };
    Gz.cai = function(bj) {
        e.bZ(this.bb, this.bkV);
        e.bJ(this.bb, "u-btn-disabled loading");
        v.dY(this.bb, "click");
        if ( !! this.cah) {
            this.VS = g.setInterval(function() {
                this.cah()
            }.Z(this), this.dfQ)
        }
        this.cg.dih(this.hG, this.cA, this.dfO, this.bV, this.dfH)
    };
    Gz.bF = function(Y) {
        this.bI(Y);
        eu.bw(this.bb);
        this.bkV = Y.clazz || "u-btn-normal";
        this.dfQ = Y.timeOut || 1e3;
        this.bb.innerText = Y.name || "导出数据";
        this.bb.href = Y.href || "javascript:void(0)";
        this.dfO = Y.resourceId;
        e.bJ(this.bb, this.bkV);
        this.hd([[this.bb, "click", this.cai.Z(this)]]);
        this.bOv = null;
        this.hG = Y.courseId;
        this.cA = Y.termId;
        this.bV = Y.type;
        this.dfH = Y.downloadType
    };
    Gz.cah = function(bj) {
        if ( !! this.bOv) {
            this.cg.WX(this.bOv)
        }
    };
    Gz.bL = function() {
        e.bZ(this.bb, "u-btn-disabled loading");
        v.dY(this.bb, "click");
        this.VS = g.clearInterval(this.VS);
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    ya,
    VW = "ck-tpMocSpocCache";
    p.ZW = NEJ.C();
    ya = p.ZW.bu(p.hA);
    ya.dfC = function(cl, cd) {
        if (!eu.dM()) return;
        this.bK({
            key: VW + bD,
            url: "SpocTermBean.enrollSpocByName",
            param: [cl, cd],
            onload: this.bOM.Z(this)
        })
    };
    ya.bOM = function(W) {
        this.bn("onenrollSpocByName", W)
    };
    ya.cag = function(cd, bz, ji, hu) {
        this.bK({
            key: VW + bD,
            url: "SpocTermBean.listSpocEventRecords",
            param: [cd, bz, ji, hu],
            onload: this.bOP.Z(this)
        })
    };
    ya.bOP = function(W) {
        this.bn("onlistSpocEventRecords", W)
    };
    ya.caf = function(ZY, cd) {
        if (!eu.dM()) return;
        this.bK({
            key: VW + bD,
            url: "SpocTermBean.sendSpocInviteMails",
            param: [ZY, cd],
            onload: this.bOT.Z(this)
        })
    };
    ya.bOT = function(W) {
        this.bn("onsendSpocInviteMails", W)
    };
    ya.dfx = function(cd, boo, EK) {
        if (!eu.dM()) return;
        this.bK({
            key: VW + bD,
            url: "SpocTermBean.kickSpocEnroll",
            param: [cd, boo, EK],
            onload: this.bOY.Z(this)
        })
    };
    ya.bOY = function(W) {
        this.bn("onkickSpocEnroll", W)
    };
    ya.bPa = function(cd, ji, hu, cl) {
        this.bK({
            key: VW + bD,
            url: "SpocTermBean.listEnrolls",
            param: [cd, ji, hu, cl],
            onload: this.bPb.Z(this)
        })
    };
    ya.bPb = function(W) {
        this.bn("onlistEnrolls", W)
    };
    ya.dfq = function(cd) {
        this.bK({
            key: VW + bD,
            url: "PublishCourseBean.getTermPassword",
            param: [cd],
            onload: this.dfh.Z(this)
        })
    };
    ya.dfh = function(W) {
        this.bn("getTermPassword", W)
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    f = NEJ.F,
    b = NEJ.P("nej.p"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    bab;
    var cF = e.dD(".#<uispace>.u-appbanner{ display: none; border-bottom:1px solid #aaa; width:100%;}.#<uispace>.u-appbanner .wrap{ padding:45px 40px; height:95px; min-width:880px; background:#fff;}.#<uispace>.u-appbanner .wrap .logo{ width:465px; height:85px;}.#<uispace>.u-appbanner .wrap .lookbtn{ width:198px; height:85px; margin-right:25px;}.#<uispace>.u-appbanner .wrap .dlbtn{ width:198px; height:85px;}.#<uispace>.u-appbanner .wrap .close{ width:35px; height:35px; margin:27px 0 0 100px;}.#<uispace>.u-appbanner .tip{ display:none; min-width:880px; background:#07853a; padding:45px 40px; height:95px;}.#<uispace>.u-appbanner .tip p{ width:740px; color:#fff; line-height:1.4; font-size:2.6em;; font-family:Hiragino Sans GB;}.#<uispace>.u-appbanner .tip .jt{ width:106px; height:46px; margin-top:20px;}.#<uispace>.u-appbanner.pc{ display:none;}.#<uispace>.u-appbanner.iphone{ display:block;}.#<uispace>.u-appbanner.ipad{ display:block;}.#<uispace>.u-appbanner.ipad .wrap{ padding:20px; height:66px;}.#<uispace>.u-appbanner.ipad .wrap .logo{ width:229px; height:66px;}.#<uispace>.u-appbanner.ipad .wrap .lookbtn{ width:139px; height:60px; margin-right:25px;}.#<uispace>.u-appbanner.ipad .wrap .dlbtn{ width:139px; height:60px;}.#<uispace>.u-appbanner.ipad .wrap .close{ width:30px; height:30px; margin:16px 0 0 35px;}.#<uispace>.u-appbanner.ipad .tip{ padding:20px; height:66px;}.#<uispace>.u-appbanner.ipad .tip p{ line-height:1.3;}.#<uispace>.u-appbanner.ipad .tip .jt{ margin-top:10px;}.#<uispace>.u-appbanner.android{ display:block;}.#<uispace>.u-appbanner.android .wrap .lookbtn{ display:none;}");
    var eg = e.bY('<div class="u-appbanner j-appbanner"><div class="wrap f-cb j-wrap"><img class="logo f-fl" src="http://img2.ph.126.net/7kFN7xNH6II59uN1t6Sz1A==/3824400508668064241.jpg"/><a class="f-fr j-close"><img class="close" src="http://s.stu.126.net/res/images/ui/ui_appbanner_closebtn.png"/></a><a class="f-fr j-dl"><img class="dlbtn" src="http://s.stu.126.net/res/images/ui/ui_appbanner_dlbtn.png"/></a></div><div class="tip j-tip"><p class="f-fl">请点击右上角按钮，选择“在Safari中打开”<br/>再点击页面中的下载或打开</p><img class="jt f-fr" src="http://s.stu.126.net/res/images/ui/ui_appbanner_jt.png"></div></div>');
    eu.cae = NEJ.C();
    bab = eu.cae.bu(eu.cq, true);
    bab.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    bab.bP = function() {
        this.bQ();
        this.Qe = this.bb;
        this.bPi = e.bc(this.Qe, "j-close")[0];
        this.dfb = e.bc(this.Qe, "j-look")[0];
        this.dfa = e.bc(this.Qe, "j-dl")[0];
        this.deY = e.bc(this.Qe, "j-wrap")[0];
        this.xA = e.bc(this.Qe, "j-tip")[0];
        v.bf(this.bPi, "click",
        function() {
            eu.bt(this.Qe)
        }.Z(this));
        v.bf(this.dfa, "click",
        function() {
            g.location.href = this.cad
        }.Z(this));
        v.bf(this.dfb, "click",
        function(argument) {
            var vv = document.createElement("iframe");
            vv.setAttribute("style", "display:none;width:0;height:0;position: absolute;top:0;left:0;border:0;");
            vv.setAttribute("height", "0px");
            vv.setAttribute("width", "0px");
            vv.setAttribute("frameborder", "0");
            document.body.appendChild(vv);
            vv.src = this.bPq;
            setTimeout(function() {
                g.location = this.cad
            }.Z(this), 100)
        }.Z(this));
        this.cad = "http://www.icourse163.org/appDownload.htm?from=mobiletopbar"
    };
    bab.bF = function(Y) {
        this.bI(Y);
        var ek = "pc";
        if (!eu.bxJ()) {
            return
        }
        if (b.Ti["android"]) {
            this.bPq = "";
            ek = "android"
        } else if (b.Ti["ipad"]) {
            this.bPq = "wangyiyunketang://";
            ek = "ipad"
        } else {
            this.bPq = "yktiphone://";
            ek = "iphone"
        }
        e.bJ(this.Qe, ek)
    };
    bab.dmE = function() {
        eu.bt(this.deY);
        this.xA.style.display = "block"
    }
})(); (function() {
    var bq = NEJ.P,
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.bom) return;
    bs.bom = NEJ.C();
    bN = bs.bom.bu(bs.bdE);
    bN.bF = function(Y) {
        Y = NEJ.X({},
        Y);
        Y.timing = "easein";
        this.bI(Y)
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u");
    var Qd, bPt, bPv;
    eu.bol = function(cl) {
        return cl + u.eW(2)
    };
    var hk = function() {
        Qd = e.iN(e.bX("jst-edu-ui-loading"));
        document.body.appendChild(Qd);
        bPt = e.bM("loadingMask");
        bPv = e.bM("loadingPb");
        if (eu.VX(location.href.substring(location.href.indexOf("?"))).mobiletopbar != "hidden") {
            eu.cae.bh({
                parent: e.bM("j-appbanner")
            })
        }
    };
    eu.showLoading = function(bPz) {
        if (!Qd) hk();
        bPz = bPz || false;
        if (!bPz) {
            eu.bw(bPt)
        }
        eu.bw(bPv)
    };
    eu.hideLoading = function() {
        eu.bt(bPt);
        eu.bt(bPv)
    };
    eu.showToastTips = function(Y) {
        var ca = eu.bol("toasttips"),
        Y = Y || o,
        da = Y.content || "请输入提示的内容",
        PL = Y.minutes || 1e3,
        bz = "u-tips" + (Y.type || 1);
        var boj = e.iN(e.bX("jst-edu-ui-tips", {
            tipId: ca,
            content: da,
            type: bz
        }));
        document.body.appendChild(boj);
        var boh;
        var options = {
            from: {
                offset: 100,
                velocity: 10
            },
            to: {
                offset: 0
            },
            duration: 500,
            onupdate: function(offset) {
                boj.style.opacity = offset.offset / 100
            },
            onstop: function() {
                boh = nej.ut.bom.bg(boh);
                boj.parentNode.removeChild(boj)
            }
        };
        g.setTimeout(function() {
            boh = nej.ut.bom.bh(options);
            boh.wJ()
        }.Z(this), PL)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    ut = NEJ.P("nej.ut"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("nej.ui"),
    Ma;
    eu.cab = NEJ.C();
    Ma = eu.cab.bu(ut.hS, true);
    Ma.bF = function(Y) {
        this.bI(Y);
        this.bb = Y.parent;
        this.caa = e.bc(this.bb, "j-iarea");
        this.dmF = e.bc(this.bb, "j-failUrl")[0];
        this.bPJ = e.bc(this.bb, "j-tip")[0];
        this.hx();
        this.pI = this.bb.getElementsByTagName("FORM")[0];
        this.der();
        this.bPQ = e.bc(this.bb, "j-autologin")[0];
        if ( !! this.bPQ) {
            v.bf(this.bPQ, eu.nf() ? "propertychange": "change", this.bod.Z(this, this.bPQ))
        }
        this.jL = e.bc(this.bb, "j-submit")[0];
        v.bf(this.jL, "click", this.Qj.Z(this))
    };
    Ma.Qj = function(bj) {
        this.pI["username"].value = this.boc.cc();
        this.pI["passwd"].value = this.bob.cc();
        this.pI["failUrl"].value = u.bgi(g.location.protocol + "//" + g.location.host + g.urlPrefix.loginPrefix + "?username=" + u.dV(this.boc.cc()) + "&returnUrl=" + eu.bqR());
        this.pI.submit()
    };
    Ma.WF = function(bz, event) {
        var kX = v.eP(event);
        if (!kX || !kX.name) return;
        switch (event.keyCode) {
        case 13:
            v.dK(event);
            if (bz == "username" && !!this.boc.cc()) {
                this.bob.Xs()
            } else if (bz == "password" && !!this.bob.cc()) {
                this.Qj()
            }
            break
        }
    };
    Ma.hx = function() {
        var bZX = g.uname;
        this.boc = eu.cH.bh({
            inputArea: this.caa[0],
            content: bZX || "",
            onInputFocus: function() {
                this.boa.ce()
            }.Z(this),
            onInputBlur: function(AT) {
                this.bn("onUserNameBlur", AT)
            }.Z(this),
            onInputKeyDown: this.WF.Z(this, "username")
        });
        this.bob = eu.cH.bh({
            inputArea: this.caa[1],
            onInputFocus: function() {
                this.boa.ce()
            }.Z(this),
            onInputKeyDown: this.WF.Z(this, "password")
        });
        this.boa = eu.cv.bh({
            parent: this.bPJ
        });
        if ( !! bZX) {
            this.boa.ey("帐号或密码错误，请重新输入", false)
        } else {
            this.boa.ce()
        }
    };
    Ma.der = function() {
        this.pI["returnUrl"].value = u.bgi(eu.bqR())
    };
    Ma.bod = function(bQd) {
        if (bQd.checked) {
            this.pI["savelogin"].value = true
        } else {
            this.pI["savelogin"].value = false
        }
    };
    Ma.bL = function() {
        this.kC();
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    u = NEJ.P("nej.u"),
    ut = NEJ.P("nej.ut"),
    eu = NEJ.P("edu.u"),
    tJ,
    LL = "js-zhvr-901",
    bZW = "ui-" + u.eW(),
    bQi = ["163.com", "126.com", "yeah.net", "vip.163.com", "vip.126.com", "popo.163.com", "188.com", "qq.com", "yahoo.com", "sina.com"];
    var bQj = "#<uispace>-hack{position:absolute;z-index:99;}#<uispace>{position:absolute;z-index:101;border:1px solid #d5d5d5;background:#FAFAFA;color:#444}#<uispace> .zitm{width:100%;text-indent:6px;height:32px;line-height:32px;cursor:default;}#<uispace> .zitm." + LL + "{color:#16914E;background-color:#ECECEE;}";
    p.bnW = NEJ.C();
    tJ = p.bnW.bu(ut.hS, true);
    p.bnW.Z = function(nK, Y) {
        if (bQj) {
            e.bLI(bQj.replace(/\#\<.*?\>/gi, "." + bZW));
            bQj = null
        }
        return new p.bnW(nK, Y)
    };
    tJ.hk = function(nK, Y) {
        this.hy(Y);
        this.eD = e.bM(nK);
        this.eD.setAttribute("autocomplete", "off");
        this.bb = e.rF("div", bZW);
        this.fB = e.bM(Y.parent) || document.body;
        this.dej(Y);
        v.bf(this.eD, "blur", this.Qn.Z(this));
        v.bf(this.eD, "focus", this.Gk.Z(this));
        v.bf(this.eD, "keydown", this.WF.Z(this));
        v.bf(this.bb, "mouseover", this.dee.Z(this))
    };
    tJ.dej = function(Y) {
        Y = Y || o;
        this.bQi = Y.suffixes || bQi;
        this.bf("onselect", Y.onselect || f);
        if (Y.width) this.bb.style.width = Y.width + "px"
    };
    tJ.Qn = function(event) {
        this.q = g.clearInterval(this.q);
        if ( !! eu.tj(this.eD.value)) {
            this.bZV()
        }
    };
    tJ.Gk = function(event) {
        this.bnU = eu.tj(this.eD.value);
        if (!this.q) this.q = g.setInterval(this.ddW.Z(this), 100)
    };
    tJ.WF = function(event) {
        if (!this.ddV()) return;
        var nz = event.keyCode;
        switch (nz) {
        case 9:
        case 13:
            this.bZV();
            break;
        case 38:
        case 40:
            this.ddU(nz == 40);
            break
        }
    };
    tJ.dee = function(event) {
        var kX = v.eP(event),
        bH = e.cS(this.bb);
        if (!bH.length || bH[0] == kX) return;
        for (var i = 1,
        l = bH.length; i < l; ++i) bH[i] == kX ? e.bJ(bH[i], LL) : e.bZ(bH[i], LL)
    };
    tJ.ddV = function() {
        var dO = this.bb.parentNode;
        return !! dO && !!dO.tagName
    };
    tJ.ddU = function(ddT) {
        var bH = e.cS(this.bb);
        for (var i = 0,
        l = bH.length,
        bhX; i < l; ++i) {
            if (e.hJ(bH[i], LL)) {
                bhX = ddT ? i == l - 1 ? 1 : i + 1 : i == 1 ? l - 1 : i - 1;
                e.bZ(bH[i], LL);
                e.bJ(bH[bhX], LL);
                break
            }
        }
    };
    tJ.bZV = function() {
        for (var i = 0,
        bH = e.cS(this.bb), l = bH.length; i < l; ++i) if (e.hJ(bH[i], LL)) {
            this.eD.value = bH[i].innerHTML;
            this.bnU = this.eD.value;
            this.baR(false);
            this.bn("onselect");
            break
        }
        if (i >= l && bH[1]) {
            this.eD.value = bH[1].innerHTML;
            this.bnU = this.eD.value;
            this.baR(false);
            this.bn("onselect")
        }
    };
    tJ.baR = function(ddS) { ! ddS ? e.dr(this.bb) : this.fB.appendChild(this.bb)
    };
    tJ.ddW = function() {
        var bG = eu.tj(this.eD.value);
        if (bG != this.bnU) {
            this.bnU = bG;
            this.ddR(bG)
        }
    };
    tJ.ddP = function() {
        this.bb.innerHTML = ""
    };
    tJ.ddR = function(bG) {
        this.ddP();
        if (!bG) {
            this.baR(false);
            return
        }
        var zn = [],
        i;
        var PZ = bG.indexOf("@"),
        Bo = this.bQi;
        if (PZ < 0) {
            for (i = 0; i < Bo.length; ++i) zn.push(bG + "@" + Bo[i])
        } else {
            var ON = bG.substring(PZ + 1),
            eL = ON.length;
            for (i = 0; i < Bo.length; ++i) if (Bo[i].substr(0, eL) == ON) zn.push(bG.substring(0, PZ) + "@" + Bo[i])
        }
        if (!zn.length) {
            this.baR(false);
            return
        }
        for (var i = 0,
        bZU = ['<div class="zitm f-thide s-fc6">请选择或继续输入...</div>']; i < zn.length; ++i) bZU.push('<div class="zitm f-thide' + (i == 0 ? " " + LL: "") + '">' + zn[i] + "</div>");
        this.baR(true);
        this.bb.innerHTML = bZU.join("")
    };
    tJ.vr = function(sS, ml) {
        if (sS == null || ml == null) return;
        var kl = this.bb.style;
        kl.top = ml + "px";
        kl.left = sS + "px"
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    ut = NEJ.P("nej.ut"),
    eu = NEJ.P("edu.u"),
    pP;
    p.bZT = NEJ.C();
    pP = p.bZT.bu(ut.hS, true);
    pP.hk = function(qV, Y) {
        this.hy(Y);
        this.bb = qV;
        this.pI = e.bc(this.bb, "j-logform")[0];
        this.jL = e.bc(this.bb, "j-submit")[0];
        this.Qp = e.bc(this.bb, "j-autologin")[0];
        this.bnS = e.bc(this.bb, "fLogin_username_input")[0];
        this.Xm = e.bc(this.bb, "fLogin_password_input")[0];
        this.bZS = Y.regUrlNode;
        if (!this.pI) return;
        this.baZ = this.pI.id || "";
        this.ddI(Y);
        this.bnR = Y.onUserNameBlur || f
    };
    pP.ddI = function(Y) {
        for (var i = 0,
        bH = ["username", "password"], nK, wV; i < bH.length; ++i) {
            nK = e.bc(this.bb, this.baZ + "_" + bH[i] + "_input")[0];
            wV = e.bc(this.bb, this.baZ + "_" + bH[i])[0];
            if (nK && wV) {
                v.bf(wV, "click", this.ddz.Z(this));
                v.bf(nK, "blur", this.Qn.Z(this, bH[i]));
                v.bf(nK, "focus", this.Gk.Z(this));
                v.bf(nK, "keydown", this.WF.Z(this))
            }
        }
        this.bZR = e.bc(this.bb, this.baZ + "_autologin")[0];
        if (this.Qp) {
            v.bf(this.Qp, eu.nf() ? "propertychange": "change", this.bod.Z(this, this.Qp));
            v.bf(this.Qp.parentNode, eu.nf() ? "mouseleave": "mouseout", this.bRa.Z(this, false));
            v.bf(this.Qp.parentNode, eu.nf() ? "mouseenter": "mouseover", this.bRa.Z(this, true))
        }
        v.bf(this.jL, "click", this.Qj.Z(this));
        v.bf(this.bZS, "click",
        function() {
            if ( !! this.bnQ) {
                eu.eE("reg", this.bnQ)
            }
        }.Z(this));
        var bZQ = e.bc(this.bb, "fLogin_username_input")[0];
        if (bZQ) {
            this.AL = p.bnW.Z(bZQ, {
                width: Y.width || 328,
                parent: this.bb,
                onselect: this.ddp.Z(this)
            });
            this.AL.vr(Y.left || 19, Y.top || 43)
        }
    };
    pP.ddp = function() {
        this.bnR(this.bnS.value)
    };
    pP.ddz = function(event) {
        var kX = v.eP(event);
        if (!kX || !kX.id) return;
        eu.bt(kX);
        var jG = e.bc(this.bb, kX.id + "_input")[0]; !! jG && jG.focus()
    };
    pP.Qn = function(cl, event) {
        var kX = v.eP(event);
        if (!kX || !kX.name) return;
        var bG = eu.tj(kX.value),
        wV = e.bc(this.bb, this.baZ + "_" + kX.name)[0];
        if (!bG) eu.bw(wV);
        e.bZ(kX.parentNode, "f-err")
    };
    pP.Gk = function(event) {
        var kX = v.eP(event);
        if (!kX || !kX.name) return;
        var wV = e.bc(this.bb, this.baZ + "_" + kX.name)[0];
        eu.bt(wV);
        e.bZ(kX.parentNode, "f-err")
    };
    pP.dde = function() {
        eu.bt(e.bc(this.bb, "fLogin_username")[0]);
        eu.bt(e.bc(this.bb, "fLogin_password")[0])
    };
    pP.WF = function(event) {
        var kX = v.eP(event);
        if (!kX || !kX.name) return;
        switch (event.keyCode) {
        case 13:
            v.dK(event);
            if (kX.name == "username") {
                this.Xm.focus();
                this.Xm.select()
            } else if (kX.name == "password") {
                this.Qj()
            }
            break
        }
    };
    pP.Qj = function() {
        var Qu, CL;
        if (! (Qu = this.dcP())) return;
        if (! (CL = this.dcO())) return;
        if ( !! this.bZN) {
            this.bZN()
        }
        this.dcG(CL, Qu);
        this.pI.submit();
        if ( !! this.bnQ) {
            eu.eE("logon", this.bnQ)
        }
        return
    };
    pP.dcP = function() {
        var Qu = eu.tj(this.bnS.value);
        if (!Qu) {
            e.bJ(this.bnS.parentNode, "f-err");
            return
        }
        return Qu
    };
    pP.dcG = function(CL, Qu) {
        this.pI["username"].value = Qu;
        CL = u.dbY(CL.substring(0, 16));
        this.pI["password"].value = CL;
        this.pI["type"].value = 0
    };
    pP.dcO = function() {
        var CL = eu.tj(this.Xm.value);
        if (!CL) {
            e.bJ(this.Xm.parentNode, "f-err");
            return
        }
        return CL
    };
    pP.bod = function(bQd) {
        if (bQd.checked) {
            this.pI["savelogin"].value = "1"
        } else {
            this.pI["savelogin"].value = "0"
        }
        this.bRa(false)
    };
    pP.bRa = function(qd) {
        if (!qd) {
            eu.bt(this.bZR)
        } else {
            eu.bw(this.bZR)
        }
    };
    p.bindLoginForm = function(qV, Y) {
        return new p.bZT(qV, Y)
    };
    pP.dcD = function(dcC) {
        this.bZN = dcC
    };
    pP.dcB = function(eV) {
        this.bnQ = eV || "otherauth";
        this.bZS.href = eu.cYs();
        this.Qp.checked = true;
        this.bod(this.Qp)
    };
    pP.dcA = function(dcy, dcw) {
        this.dmJ = dcy;
        this.dcq = dcw || [];
        this.pI["url"].value = eu.bqR(this.dcq)
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    d = NEJ.P("edu.d"),
    j = NEJ.P("nej.j"),
    eu = NEJ.P("edu.u"),
    ut = NEJ.P("nej.ut"),
    u = NEJ.P("nej.u"),
    FU,
    cQ = ["云课堂", "爱课程网"],
    dcp = new RegExp(/@([a-z0-9]+[_|\-|\.]?)*[a-z0-9]+\.[a-z]{2,3}$/i);
    eu.bRD = NEJ.C();
    FU = eu.bRD.bu(eu.cq, true);
    FU.bU = function() {
        var dcn = e.bX("jst-edu-login-form"),
        dck = e.bX("jst-edu-iclogin-form");
        this.bW = e.bY(e.bX("jst-edu-login-dialog", {
            loginform: dcn,
            icloginform: dck
        }))
    };
    FU.bP = function(Y) {
        this.bQ();
        this.bZL = e.bc(this.bb, "j-loginCnts");
        this.ed = e.bc(this.bb, "j-tabs");
        this.bbw = e.bc(this.bb, "j-loginTip")[0];
        this.dbV = e.bc(this.bb, "j-regUrl")[0];
        this.Qy = p.bindLoginForm(e.bc(this.bb, "j-loginform")[0], {
            regUrlNode: this.dbV,
            onUserNameBlur: this.bnR.Z(this),
            width: Y.width,
            left: Y.left
        });
        this.bZK = eu.cab.bh({
            parent: this.bZL[1],
            onUserNameBlur: this.bnR.Z(this)
        });
        this.cg = new d.bNm;
        this.cg.bf("onCheckAccountStatus", this.bNz.Z(this));
        v.bf(this.bbw, "click", this.dbL.Z(this))
    };
    FU.bnR = function(mX) {
        if ( !! mX && dcp.test(mX)) {
            this.Qz = mX;
            this.cg.dhS(mX)
        }
    };
    FU.dbL = function(bj) {
        var dI = v.eP(bj, "c:j-btn"),
        bz = e.df(dI, "type");
        if ( !! dI && !!bz) {
            eu.bt(this.bbw);
            this.bRQ(bz)
        }
    };
    FU.bRQ = function(bz) {
        if (bz == cQ[0]) {
            this.eF.BF(0);
            this.Qy.dde();
            this.Qy.bnS.value = this.Qz;
            this.Qy.Xm.focus();
            this.Qy.Xm.select()
        } else if (bz == cQ[1]) {
            this.eF.BF(1);
            this.bZK.boc.cX(this.Qz);
            this.bZK.bob.Xs()
        }
    };
    FU.bNz = function(W) {
        var qd = false,
        Y, nL;
        if (this.bV == 0 && W == 11) {
            qd = !0;
            Y = {
                type: cQ[1],
                type2: cQ[0]
            }
        }
        if (this.bV == 1 && W == -1) {
            qd = !0;
            Y = {
                type: cQ[0],
                type2: cQ[1]
            }
        }
        if (qd) {
            eu.bw(this.bbw);
            this.bbw.innerHTML = e.bX("jst-edu-login-tips", Y)
        }
    };
    FU.bF = function(Y) {
        this.bI(Y);
        var bZJ = 0,
        bZH = g.existLoginType;
        this.Qz = g.email;
        if (j.ox("slgt") == 11 || g.uname) {
            bZJ = 1
        }
        this.eF = ut.gg.AN({
            list: this.ed,
            index: bZJ,
            event: "click",
            selected: "active",
            onchange: this.gU.Z(this)
        });
        if (bZH == 11) {
            this.bRQ(cQ[1])
        } else if (bZH == -1) {
            this.bRQ(cQ[0])
        }
        this.Qy.dcD(Y.beforeSubmitFunc || f);
        this.Qy.dcB(Y.from);
        this.Qy.dcA(Y.aftParams)
    };
    FU.gU = function(W) {
        u.bA(this.bZL,
        function(bB, bd) {
            eu.cZ(bB, W.index == bd)
        });
        this.bV = W.index;
        eu.bt(this.bbw);
        u.bA(this.ed,
        function(bB) {
            if (!e.hJ(bB, "active")) {
                e.bJ(bB, "inactive")
            } else {
                e.bZ(bB, "inactive")
            }
        })
    };
    FU.bL = function() {
        this.kC();
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    bnJ;
    var dz;
    eu.rs = NEJ.C();
    bnJ = eu.rs.bu(eu.hq, true);
    eu.rs.zO = function(Y) {
        if ( !! dz) {
            return
        }
        dz = eu.rs.bh(Y);
        dz.gI()
    };
    eu.rs.dmM = function(Y) {
        if (!dz) {
            return
        }
        dz = eu.rs.bg(dz)
    };
    bnJ.bL = function() {
        dz = null;
        this.bO()
    };
    bnJ.bP = function() {
        this.bQ()
    };
    bnJ.bF = function(Y) {
        Y = Y || {};
        Y.title = "登录***";
        Y.clazz = "u-logwin";
        this.bI(Y);
        this.bbG = eu.bRD.AN({
            parent: this.bb,
            from: Y.from,
            beforeSubmitFunc: Y.beforeSubmitFunc || f,
            aftParams: Y.aftParams
        })
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("nej.ui"),
    dn = '<div class="m-allwrap"><div class="cnt f-cb"></div><a class="u-loadmore f-bg f-f0" style="display:none">载入更多</a><div class="nocnt f-fc9" style="display:none">暂无内容</div></div>',
    qc;
    eu.wh = NEJ.C();
    qc = eu.wh.bu(eu.cq, true);
    qc.bU = function() {
        this.bW = e.bY(dn)
    };
    qc.bP = function() {
        this.bQ();
        this.dg = 1;
        var uF = e.cS(this.bb);
        this.bnH = uF[0];
        this.Yr = uF[1];
        this.bnF = uF[2]
    };
    qc.ho = function(W, du) {
        this.fE = du || this.fE;
        if ( !! W) {
            var bbN = W.pagination;
            if ( !! bbN && bbN.totlePageCount > 1) {
                eu.bw(this.Yr);
                if (bbN.pageIndex === 1) {
                    this.hd([[this.Yr, "click", this.xt.Z(this)]])
                }
                if (bbN.pageIndex === bbN.totlePageCount) {
                    eu.bt(this.Yr);
                    v.vw(this.Yr, "click", this.xt.Z(this))
                }
            } else {
                eu.bt(this.Yr)
            }
            var bnE = false;
            if ( !! W.lectorResult && W.lectorResult.length > 0) {
                this.mM.ho(W.lectorResult, this.fE, eu.CONST.ROLE_LECTOR);
                bnE = true
            }
            if ( !! W.assistResult && W.assistResult.length > 0) {
                this.mM.ho(W.assistResult, this.fE, eu.CONST.ROLE_ASSISTANT);
                bnE = true
            }
            if ( !! W.result && W.result.length > 0) {
                this.mM.ho(W.result, this.fE);
                bnE = true
            }
            if ( !! bnE) {
                if ( !! this.bZF) {
                    this.bZF()
                }
                eu.bt(this.bnF)
            } else {
                this.bZE()
            }
        } else {
            this.bZE()
        }
    };
    qc.bZE = function() {
        if ( !! this.bZD) {
            this.bZD()
        } else {
            eu.bw(this.bnF)
        }
    };
    qc.xt = function() {
        this.bn("onLoad", ++this.dg)
    };
    qc.bF = function(Y) {
        this.bI(Y);
        this.fE = Y.tpl || "";
        this.dbg = Y.noCnt || "暂无内容";
        this.buZ = Y.clickActions || [];
        this.bZF = Y.hasCntCb || null;
        this.bZD = Y.noCntCb || null;
        this.bnF.innerHTML = this.dbg;
        this.mM = eu.lM.bh({
            parent: this.bnH,
            tpl: this.fE,
            clickActions: this.buZ
        });
        this.bn("onLoad", this.dg)
    };
    qc.bL = function() {
        if ( !! this.mM) {
            this.mM = eu.lM.bg(this.mM)
        }
        this.dg = 1;
        eu.bt(this.bnF);
        eu.bt(this.Yr);
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    Gy,
    QI = "ck-examCreateCache";
    p.GB = NEJ.C();
    Gy = p.GB.bu(p.hA);
    Gy.bbX = function(wv, fw) {
        if (!eu.dM()) return;
        var bz = fw;
        if (fw == 400) {
            bz = 200
        }
        this.bK({
            key: QI + bD,
            url: "TermDraftBean.manageExamDraft",
            param: [wv, bz],
            onload: this.bbZ.Z(this, fw)
        })
    };
    Gy.bbZ = function(fw, W) {
        this.bn("onManageExamDraft", fw, W)
    };
    Gy.bSw = function(cd, yc, wv) {
        if (!eu.dM()) return;
        this.bK({
            key: QI + bD,
            url: "TermDraftBean.publishExamDraft",
            param: [cd, yc, wv],
            onload: this.dba.Z(this)
        })
    };
    Gy.dba = function(W) {
        this.bn("onPublishExamDraft", W)
    };
    Gy.bnD = function(HB, fw, yc) {
        if (!eu.dM()) return;
        this.bK({
            key: QI + bD,
            url: "MocAdminQuizBean.manageExamTestDraft",
            param: [HB, fw, yc],
            onload: this.daR.Z(this, fw)
        })
    };
    Gy.daR = function(fw, W) {
        this.bn("onManageExamTestDraft", fw, W)
    };
    Gy.daQ = function(yc, cd) {
        this.bK({
            key: QI + bD,
            url: "MocAdminQuizBean.getExamDraft",
            param: [yc, cd],
            onload: this.bnC.Z(this)
        })
    };
    Gy.bnC = function(W) {
        this.bn("onGetExamDraft", W)
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    bD = u.eW(),
    GD,
    rm = "ck-testBaseCache";
    d.bSJ = NEJ.C();
    GD = d.bSJ.bu(d.hA);
    GD.bZB = function(QM, uv, JZ) {
        this.bK({
            key: rm + bD,
            url: "MocQuizBean.saveDraftAnswers",
            onlyHideLoading: !JZ,
            param: [QM, uv],
            onload: this.daK.Z(this, JZ)
        })
    };
    GD.daK = function(JZ, W) {
        this.bn("onSaveDraftAnswers", W, JZ)
    };
    GD.bck = function(QM, uv) {
        this.bK({
            key: rm + bD,
            url: "MocQuizBean.submitAnswers",
            param: [QM, uv],
            onload: this.daJ.Z(this)
        })
    };
    GD.daJ = function(W) {
        this.bn("onSubmitAnswers", W)
    };
    GD.bnA = function() {
        this.bK({
            key: rm + bD,
            url: "MemberBean.getMocMemberTutorialInfo",
            param: [],
            onload: this.daI.Z(this)
        })
    };
    GD.daI = function(W) {
        this.bn("onGetMocMemberTutorialInfo", W)
    };
    GD.Zg = function(bS, bG) {
        this.bK({
            key: rm + bD,
            url: "MemberBean.setMocMemberTutorialInfo",
            param: [bS, bG],
            onload: this.daG.Z(this)
        })
    };
    GD.daG = function(W) {
        this.bn("onSetMocMemberTutorialInfo", W)
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    bD = u.eW(),
    ls,
    rm = "ck-HomeworkCacheCache";
    d.rV = NEJ.C();
    ls = d.rV.bu(d.bSJ);
    ls.bZA = function(dZ, hQ, fa) {
        this.bK({
            key: rm + bD,
            url: "MocQuizBean.getHomeworkInfo",
            param: [dZ, hQ, fa],
            onload: this.bTe.Z(this)
        })
    };
    ls.bTe = function(W) {
        this.bn("onGetHomeworkInfo", W)
    };
    ls.Zn = function(dZ, bTg, daE, vN, hQ, uv) {
        var bTi = uv ? "MocAdminQuizBean.previewTestDraft": "MocQuizBean.getHomeworkPaperDto";
        var lU = uv ? [dZ] : [dZ, bTg, daE, vN, hQ];
        this.bK({
            key: rm + bD,
            url: bTi,
            param: lU,
            onload: this.daD.Z(this)
        })
    };
    ls.daD = function(W) {
        this.bn("onGetHomeworkPaper", W)
    };
    ls.daB = function(dZ, QU) {
        this.bK({
            key: rm + bD,
            url: "MocEvaluateBean.getEvaluateStatus",
            param: [dZ, QU],
            onload: this.daz.Z(this)
        })
    };
    ls.daz = function(W) {
        this.bn("onGetEvaluateStatus", W)
    };
    ls.dax = function(dZ, hQ) {
        this.bK({
            key: rm + bD,
            url: "MocEvaluateBean.getEvaluateStatusByAid",
            param: [dZ, hQ],
            onload: this.daw.Z(this)
        })
    };
    ls.daw = function(W) {
        this.bn("onGetEvaluateStatusByAid", W)
    };
    ls.dal = function(dZ, QU) {
        this.bK({
            key: rm + bD,
            url: "MocEvaluateBean.getEvaluateDetail",
            param: [dZ, QU],
            onload: this.cZP.Z(this)
        })
    };
    ls.cZP = function(W) {
        this.bn("onGetEvaluateDetail", W)
    };
    ls.bTt = function(dZ, QU, cN) {
        this.bK({
            key: rm + bD,
            url: "MocEvaluateBean.startOneSubmissionEvaluate",
            param: [dZ, QU],
            onload: this.cZO.Z(this, cN)
        })
    };
    ls.cZO = function(cN, W) {
        this.bn("onGetNextEvaluate", W, cN)
    };
    ls.dmN = function(dZ, QU) {
        this.bK({
            key: rm + bD,
            url: "MocEvaluateBean.startSelfSubmissionEvaluate",
            param: [dZ, QU],
            onload: this.cZI.Z(this)
        })
    };
    ls.cZI = function(W) {
        this.bn("onGetSelfEvaluate", W)
    };
    ls.bTy = function(cZy, bnv) {
        this.bK({
            key: rm + bD,
            url: "MocEvaluateBean.submitSubmissionEvaluate",
            param: [cZy, bnv],
            onload: this.bTB.Z(this, bnv)
        })
    };
    ls.bTB = function(bnv, W) {
        if ( !! bnv) {
            this.bn("onSaveEvaluate", W)
        } else {
            this.bn("onSubmitEvaluate", W)
        }
    };
    ls.cZp = function(cd, nd) {
        this.bK({
            key: rm + bD,
            url: "MocAdminQuizBean.getEvaluateTrain",
            param: [cd, nd || false],
            onload: this.cZn.Z(this)
        })
    };
    ls.cZn = function(W) {
        this.bn("onGetTrainPaper", W)
    };
    ls.cZj = function(kx, cd) {
        this.bK({
            key: rm + bD,
            url: "MocEvaluateBean.saveTrainedRecord",
            param: [kx, cd],
            onload: this.cZi.Z(this)
        })
    };
    ls.cZi = function(W) {
        this.bn("onSaveTrainedRecord", W)
    };
    ls.bnr = function(dZ, hQ) {
        this.bK({
            key: rm + bD,
            url: "MocQuizBean.getHomeworkEvalInfo",
            param: [dZ, hQ],
            onload: this.cZg.Z(this)
        })
    };
    ls.cZg = function(W) {
        this.bn("onGetHomeworkEvalInfo", W)
    };
    ls.cZf = function(hQ, cZe) {
        this.bK({
            key: rm + bD,
            url: "MocQuizBean.deleteAttachment",
            param: [hQ, cZe],
            onload: this.cZc.Z(this)
        })
    };
    ls.cZc = function(W) {
        this.bn("onDeleteAttachment", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    zU,
    dj = e.bY('<div class="u-simpleFileUpload"><div class="j-uploadArea f-cb" style="display:none;"><div class="j-upload f-fl uploadBtn"></div><div class="j-tipNode f-fl tipNode"></div></div><div class="j-info f-cb info" style="display:none;"><div class="f-fl name f-thide"></div><div class="f-fl fb"></div><a class="f-fl cancel">取消</a></div></div>');
    eu.QZ = NEJ.C();
    zU = eu.QZ.bu(eu.cq, !0);
    zU.bU = function() {
        this.bW = dj
    };
    zU.bP = function() {
        this.bQ();
        this.bcR = e.bc(this.bb, "j-uploadArea")[0];
        this.pf = e.bc(this.bb, "j-upload")[0];
        this.bPJ = e.bc(this.bb, "j-tipNode")[0];
        this.oB = e.bc(this.bb, "j-info")[0];
        this.db = e.cS(this.oB);
        this.gj = this.db[0];
        this.Je = this.db[1];
        this.mA = this.db[2];
        v.bf(this.mA, "click", this.iI.Z(this))
    };
    zU.Jm = function(W) {
        this.gX.xp("上传中···");
        this.gj.innerText = eu.BB(W.name || "");
        eu.bw(this.mA);
        eu.bw(this.oB);
        eu.bt(this.bcR);
        this.bn("beginUpload", W)
    };
    zU.cZb = function(W) {
        this.gX.ce();
        this.gj.innerText = "";
        eu.bt(this.mA);
        eu.bt(this.oB);
        eu.bw(this.bcR)
    };
    zU.iI = function() {
        if ( !! this.eU) {
            this.eU.rt()
        }
        this.bn("abortUpload")
    };
    zU.cZa = function(W) {
        if (W.total > this.bcT.maxSize) {
            eu.zN(eu.CONST.UPLOAD_ERROR_LIMITED, this.iI.Z(this));
            return
        }
        this.bn("onupdateProgress", W)
    };
    zU.xt = function(W) {
        if ( !! W.retSuc) {
            this.gX.ce();
            this.bn("onFinishUpload", W)
        } else {
            eu.zN()
        }
        this.cZb()
    };
    zU.sF = function(jq) {
        if ( !! this.bcT.suffixs) {
            return eu.SN(null, jq, this.bcT.suffixs)
        }
        return true
    };
    zU.vV = function() {
        if ( !! this.eU) {
            this.eU = eu.oC.bg(this.eU)
        }
        this.eU = eu.oC.bh({
            parent: this.pf,
            beginUpload: this.Jm.Z(this),
            txt: this.bcT.txt,
            action: "/file/smallFileUpload.htm",
            supportAnchor: false,
            tokenType: eu.CONST.UPLOAD_TOKEN_TYPE_DEFAULT,
            verifyFile: this.sF.Z(this),
            onFinishUpload: this.xt.Z(this),
            onupdateProgress: this.cZa.Z(this),
            onUploadError: function() {
                this.bn("onUploadError")
            }.Z(this)
        });
        this.bPJ.innerHTML = this.bcT.tip;
        eu.bt(this.oB);
        eu.bw(this.bcR)
    };
    zU.bF = function(Y) {
        this.bI(Y);
        this.bcT = {
            txt: Y.txt || "+ 上传附件",
            tip: Y.tip || "",
            suffixs: Y.suffixs,
            maxSize: Y.maxSize || eu.CONST.UPLOAD_SIZE_MAX_SIMPLE
        };
        this.vV();
        this.gX = eu.cv.bh({
            parent: this.Je
        });
        this.gX.ce()
    };
    zU.bL = function() {
        if ( !! this.gX) {
            this.gX = eu.cv.bg(this.gX)
        }
        if (this.eU) {
            this.eU = eu.oC.bg(this.eU)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    u = NEJ.P("nej.u"),
    eu = NEJ.P("edu.u"),
    Ra,
    cYY;
    eu.bnm = NEJ.C();
    Ra = eu.bnm.bu(eu.cq, true);
    cYY = eu.bnm.cE;
    Ra.bP = function() {
        this.Bh = u.eW(2);
        this.ne = NEJ.P("edu.u.pdfReader" + this.Bh);
        this.bQ();
        this.SW()
    };
    Ra.bL = function() {
        if ( !! this.fB) {
            var bH = e.cS(this.fB);
            if ( !! bH) {
                for (var i = 0; i < bH.length; i++) {
                    this.fB.removeChild(bH[i])
                }
            }
        }
        delete this.lO;
        this.bO()
    };
    Ra.SW = function() {
        this.ne.changePage = this.cYU.Z(this)
    };
    Ra.cYU = function(cYT) {
        this.bn("onPageChange", {
            toPageNum: cYT
        })
    };
    Ra.bF = function(Y) {
        e.Gp({
            src: g.imageUrlMap.image_pdf_swf,
            width: "100%",
            height: "100%",
            parent: Y.parent,
            params: {
                wmode: "transparent",
                flashvars: "namespace=edu.u.pdfReader" + this.Bh,
                allowscriptaccess: "always",
                allowFullScreen: !Y.notAllowFullScreen
            },
            onready: function(lR) {
                this.lO = lR
            }.Z(this)
        });
        this.bI(Y);
        this.cYR(Y.lessonLearnVo)
    };
    Ra.cYR = function(bcZ) {
        if (!bcZ) {
            return
        }
        this.dmO = bcZ;
        if ( !! this.bda) {
            this.bda = g.clearInterval(this.bda)
        }
        this.bda = g.setInterval(function() {
            if ( !! this.lO) {
                this.lO.loadSwfFile(bcZ.textUrl, {
                    startPageNum: bcZ.learnedPosition || 1,
                    widthHeightRadio: bcZ.textPageWhRatio
                });
                this.bda = g.clearInterval(this.bda)
            }
        }.Z(this), 100)
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    pu,
    JY = "ck-forumCache",
    rO = 20;
    d.CH = NEJ.C();
    pu = d.CH.bu(d.hA);
    pu.cYE = function(cd) {
        this.bK({
            key: JY + bD,
            url: "MocForumBean.getForumInfo",
            param: [cd],
            onload: this.cYD.Z(this)
        })
    };
    pu.cYD = function(W) {
        this.bn("onGetForumInfo", W)
    };
    pu.bdf = function(cd, fa, bao) {
        this.bK({
            key: JY + bD,
            url: "MocForumBean.getForumListByTermId",
            param: [cd, fa, bao],
            onload: this.bvP.Z(this)
        })
    };
    pu.bvP = function(W) {
        if (!W) return;
        var dh = W[0];
        W[0] = W[1];
        W[1] = W[2];
        W[2] = dh;
        if ( !! W[4] && W[4].type == eu.CONST.FORUM_TYPE_ELITE) {
            dh = W[4];
            W.splice(4, 1);
            W.splice(3, 0, dh)
        }
        this.bn("onGetForumListByTermId", W)
    };
    pu.cYA = function(cd, xQ, nd, bao) {
        this.bK({
            key: JY + bD,
            url: "MocForumBean.getForumByIdWithChildrens",
            param: [cd, xQ, nd, bao],
            onload: this.cYx.Z(this)
        })
    };
    pu.cYx = function(W) {
        this.bn("onGetForumByIdWithChildrens", W)
    };
    pu.bvT = function(cd, DE, bs, Rj) {
        this.bK({
            key: JY + bD,
            url: "PostBean.getUserFollowedPosts",
            param: [cd, DE, bs, rO],
            onload: this.cYv.Z(this, Rj)
        })
    };
    pu.cYv = function(Rj, W) {
        this.bn("onGetUserFollowedPosts", W, Rj)
    };
    pu.cYu = function(cd, xQ, ow, bs, fa, bdm) {
        this.bK({
            key: JY + bD,
            url: "PostBean.getAllPostsPagination",
            param: [cd, xQ, ow, bs, rO, fa, bdm || null],
            onload: this.cYr.Z(this)
        })
    };
    pu.cYr = function(W) {
        this.bn("onGetAllPostsPagination", W)
    };
    pu.cYm = function(xQ, qK, nd, cd) {
        this.bK({
            key: JY + bD,
            url: "MocForumBean.getForumNavi",
            param: [xQ, qK, nd, cd],
            onload: this.cYl.Z(this)
        })
    };
    pu.cYl = function(W) {
        this.bn("onGetForumNavi", W)
    };
    pu.cYk = function(kx) {
        this.bK({
            key: JY + bD,
            url: "MemberBean.getMocMemberTrim",
            param: [kx],
            onload: this.cYj.Z(this)
        })
    };
    pu.cYj = function(W) {
        this.bn("onGetMocMemberTrim", W)
    };
    pu.bwe = function(GZ, cU) {
        GZ = NEJ.X(GZ || {},
        {
            highlight: true
        });
        this.bK({
            key: JY + bD,
            url: "MocForumBean.searchMocForum",
            notShowLoading: true,
            param: [GZ, cU],
            onload: this.cYf.Z(this)
        })
    };
    pu.cYf = function(W) {
        this.bn("onSearchMocForum", W)
    };
    pu.bZq = function(ca) {
        this.bK({
            key: JY + bD,
            url: "MocForumBean.getMocForumDto",
            param: [ca],
            onload: this.cYc.Z(this)
        })
    };
    pu.cYc = function(W) {
        this.bn("ongetMocForumDto", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    LQ;
    var dn = '<div class="f-pa u-previewstatus"><a class="f-fl u-btn u-btn-primary publishbtn j-btn">发布</a><span class="f-fl statustxt f-fc9 j-txt"></span></div>';
    var cF = e.dD(".#<uispace>{ width:120px; top:6px; right:-120px; height:28px;}.#<uispace> .publishbtn{ line-height:22px; margin-left:8px; padding:2px 9px; min-width:0px;}.#<uispace> .statustxt{ line-height:28px; margin-left:8px;}");
    eu.yh = NEJ.C();
    LQ = eu.yh.bu(eu.cq, true);
    LQ.bU = function() {
        this.dv = cF;
        this.bW = e.bY(dn)
    };
    LQ.bP = function() {
        this.bQ();
        this.bnf = e.bc(this.bb, "j-btn")[0];
        this.GO = e.bc(this.bb, "j-txt")[0];
        this.nc = new d.qY;
        this.nc.bf("onPublishChapter", this.bwn.Z(this));
        this.nc.bf("onPublishTest", this.bwn.Z(this));
        this.zf = new d.GB;
        this.zf.bf("onPublishExamDraft", this.bwn.Z(this));
        v.bf(this.bnf, "click", this.cXZ.Z(this))
    };
    LQ.cXZ = function(qm) {
        v.dK(qm);
        if ( !! this.bZp) return;
        switch (this.bV) {
        case eu.CONST.CHAPTER_QUIZ:
        case eu.CONST.CHAPTER_HOMEWORK:
            this.nc.bsD(this.iX, this.iX.test.type);
            break;
        case eu.CONST.CHAPTER_TYPE_NORMAL:
            this.nc.cfl(this.iX.termId, this.iX.id);
            break;
        case eu.CONST.CHAPTER_TYPE_EXAM:
            this.zf.bSw(this.iX.termId, this.iX.id, null);
            break
        }
    };
    LQ.bwn = function(W) {
        if ( !! W && Boolean(W.success) == true) {
            eu.showToastTips({
                type: 1,
                content: "发布成功"
            });
            this.bnf.style.display = "none";
            this.GO.innerHTML = "已发布"
        } else {
            var cQ = "";
            if (W.message) {
                cQ = W.message
            } else if (W.messages) {
                for (var i = W.messages.length - 1; i >= 0; i--) {
                    cQ += W.messages[i]
                }
            }
            eu.cp.bT({
                type: 1,
                message: cQ
            })
        }
    };
    LQ.bF = function(Y) {
        this.bI(Y);
        this.iX = Y.vo;
        this.bV = Y.type;
        this.bZp = Y.hidePublish;
        this.cXQ()
    };
    LQ.cXQ = function() {
        this.hL = this.iX.testDraftStatus == undefined ? this.iX.draftStatus: this.iX.testDraftStatus;
        var fc = "";
        var bwt = true;
        switch (this.hL) {
        case eu.CONST.CHAPTERSTATUS_CREATE:
            fc = "未发布";
            break;
        case eu.CONST.CHAPTERSTATUS_PUBLISHED:
            fc = "";
            bwt = false;
            break;
        case eu.CONST.CHAPTERSTATUS_MODIFIED:
            fc = "有修改";
            break;
        case eu.CONST.CHAPTERSTATUS_DELETED:
            fc = "已删除";
            break
        }
        e.bZ(this.bb, "leftin");
        if (this.bV == eu.CONST.CHAPTER_TYPE_EXAM && bwt != false) {
            e.bJ(this.bb, "leftin")
        }
        this.GO.innerHTML = fc;
        if (bwt && !this.bZp) {
            this.bnf.style.display = "block"
        } else {
            this.bnf.style.display = "none"
        }
    };
    LQ.bL = function() {
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    bnc;
    var bdF = e.bY('<div class="u-moocbl"><span class="j-tips"></span></div>');
    eu.xx = NEJ.C();
    bnc = eu.xx.bu(eu.cq, true);
    bnc.bU = function() {
        this.bW = bdF
    };
    bnc.bP = function() {
        this.bQ();
        this.cXH = e.bc(this.bb, "j-tips")[0]
    };
    bnc.bF = function(Y) {
        this.bI(Y);
        this.cXH.innerText = Y.tips || "源课程内容"
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    bE = NEJ.P("nej.u"),
    bR = NEJ.P("edu.u"),
    Cu;
    var cF = bm.dD(".#<uispace> .anonyInfo{color:#999;}.#<uispace> .userInfo .type{margin:0 5px;padding:0 5px;display:inline-block;line-height:18px;color:#fff;text-align:center;}.#<uispace> .userInfo .type.lector{background-color:#6CB4FB;}.#<uispace> .userInfo .type.manager{background-color:#9BCE00;}.#<uispace> .userInfo .type.assist{background-color:#6CB4FB;}");
    var eg = bm.bY('<span><span class="anonyInfo j-anonyInfo">匿名发表</span><span class="userInfo j-userInfo"></span></span>');
    bR.Rr = NEJ.C();
    Cu = bR.Rr.bu(bR.cq, true);
    Cu.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    Cu.bP = function() {
        this.bQ();
        this.bZn = bm.bc(this.bb, "j-anonyInfo")[0];
        this.Rs = bm.bc(this.bb, "j-userInfo")[0];
        this.fy = new cC.vm;
        this.fy.bf("onsetUserBannedForSite", this.bZm.Z(this, "site"));
        this.fy.bf("onsetUserBannedForTerm", this.bZm.Z(this, "term"));
        ch.bf(this.Rs, "click", this.cXz.Z(this))
    };
    Cu.bwG = function(W, cd) {
        this.bZk(false);
        var dE = this.Rs.innerHTML,
        AT = W[1],
        bwI = W[2],
        bmW = W[3];
        this.cA = cd;
        this.bZj = W;
        dE += ' <a href="mailto:' + AT + '" class="f-fcgreen" title="' + AT + '">发邮件</a>';
        if (bR.bfo([bR.CONST.ROLE_OUT_COURSE_EDITOR, bR.CONST.ROLE_FORUM_MANAGER])) {
            dE += ' <a class="j-ban" class="f-fcgreen" data-action="site" data-state="' + bwI + '">' + (bwI > 0 ? "解除": "") + "全站禁言</a>";
            dE += ' <a class="j-ban" class="f-fcgreen" data-action="term" data-state="' + bmW + '">' + (bmW > 0 ? "解除": "") + "课程禁言</a>"
        } else if (bR.FM(dx.courseDto.lectorPanels, bR.hj().id) || bR.bhl(dx.courseDto.ordinaryEditors)) {
            if (bwI > 0) {
                dE += ' <span class="f-fc9">已被全站禁言</span>'
            } else {
                dE += ' <a class="j-ban" class="f-fcgreen" data-action="term" data-state="' + bmW + '">' + (bmW > 0 ? "解除": "") + "禁言</a>"
            }
        }
        this.Rs.innerHTML = dE
    };
    Cu.cXz = function(bj) {
        var dI = ch.eP(bj, "c:j-ban");
        if ( !! dI) {
            ch.dK(bj);
            var eR = bm.df(dI, "action"),
            jb = bm.df(dI, "state");
            if (eR == "site") {
                this.cXj(jb)
            } else {
                this.cXf(jb)
            }
        }
    };
    Cu.cXj = function(jb) {
        var fG = jb > 0 ? '<p class="f-fwb">你确认解除该用户禁言吗？</p><p>解除后该用户可在所有讨论区发表主题、回复、评论</p>': '<p class="f-fwb">你确认将该用户禁言吗？</p><p>确认后该用户将无法在所有讨论区发表主题、回复、评论</p>';
        bR.cp.bT({
            type: 1,
            message: fG,
            okFunc: function() {
                this.fy.cXe(this.mn.id, jb > 0 ? 0 : 1)
            }.Z(this),
            cancelFunc: dk
        })
    };
    Cu.cXf = function(jb) {
        var fG = jb > 0 ? '<p class="f-fwb">你确认解除该用户禁言吗？</p><p>解除后该用户可在本课程讨论区发表主题、回复、评论</p>': '<p class="f-fwb">你确认将该用户禁言吗？</p><p>确认后该用户将无法在本课程讨论区发表主题、回复、评论</p>';
        bR.cp.bT({
            type: 1,
            message: fG,
            okFunc: function() {
                this.fy.cWY(this.mn.id, this.cA, jb > 0 ? 0 : 1)
            }.Z(this),
            cancelFunc: dk
        })
    };
    Cu.bZm = function(bz, W, jb) {
        if ( !! W) {
            var bd = bz == "site" ? 2 : 3;
            bR.showToastTips({
                type: 1,
                content: (jb > 0 ? "": "解除") + "禁言成功"
            });
            this.bZj[bd] = jb;
            this.bwG(this.bZj, this.cA)
        }
    };
    Cu.bZk = function(bwQ) {
        if ( !! bwQ) {
            bR.bw(this.bZn);
            bR.bt(this.Rs)
        } else {
            bR.bt(this.bZn);
            bR.bw(this.Rs);
            var bZh = "#" + bR.umi("learnForumPersonal") + "?uid=" + this.mn.id;
            var dE, ma = this.mn.nickName || "",
            bwS = bR.hj(),
            bZg = [];
            bE.bA(dx.courseDto.lectorPanels,
            function(lector, cO) {
                bZg[cO] = lector.memberId
            });
            if ( !! this.mn.mocAuthenticatedMemberDto && (bR.bfo([bR.CONST.ROLE_SCHOOLSUPER_ADMIN, bR.CONST.ROLE_OUT_COURSE_EDITOR]) || bR.nu(bZg, bwS.id) || bR.bhl(dx.courseDto.ordinaryEditors))) {
                ma = bR.Fq(this.mn.mocAuthenticatedMemberDto)
            }
            if (this.bwU) {
                dE = '<span class="f-fc6" title="' + ma + '">' + bR.bqo(ma, 12) + "</span>"
            } else {
                dE = '<a class="f-fcgreen" href="' + bZh + '" title="' + ma + '">' + bR.bqo(ma, 12) + "</a>"
            }
            if (bR.nu(this.mn.roles, bR.CONST.ROLE_FORUM_MANAGER)) {
                dE += "<span class='type manager'>管理员</span>"
            } else {
                var ku = bR.FM(dx.courseDto.lectorPanels, this.mn.id);
                if ( !! ku) {
                    switch (ku.lectorType) {
                    case bR.CONST.REL_TYPE_TERM_CHIEF_LECTOR:
                    case bR.CONST.REL_TYPE_TERM_LECTOR:
                        dE = '<a class="f-fcgreen" href="' + bZh + '"  title="' + this.mn.realName + '">' + bR.bqo(this.mn.realName, 12) + "</a>" + "<span class='type lector'>老师</span>";
                        break;
                    case bR.CONST.REL_TYPE_TERM_ASSIST:
                        dE += "<span class='type assist'>助教</span>";
                        break
                    }
                }
            }
            this.Rs.innerHTML = dE
        }
    };
    Cu.bL = function() {
        this.Rs.title = "";
        this.bO()
    };
    Cu.bF = function(Y) {
        this.bI(Y);
        this.mn = Y.userDto;
        this.dmQ = Y.locked || bR.Gs() == bR.CONST.FORUM_FORBID_ELITE || false;
        this.bZk( !! Y.anonymous)
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    gv,
    mI = "ck-forumDetailCache";
    d.vm = NEJ.C();
    gv = d.vm.bu(d.hA);
    gv.bZf = function(ca) {
        this.bK({
            key: mI + bD,
            url: "PostBean.getPostDetailById",
            param: [ca],
            onload: this.cWH.Z(this)
        })
    };
    gv.cWH = function(W) {
        this.bn("onGetPostDetailById", W)
    };
    gv.cWG = function(ca) {
        this.bK({
            notShowLoading: true,
            key: mI + bD,
            url: "PostBean.incrPostBrowse",
            param: [ca],
            onload: this.cWB.Z(this)
        })
    };
    gv.cWB = function(W) {
        this.bn("onAddBrowseCount", W)
    };
    gv.cWy = function(ca, cd) {
        this.bK({
            notShowLoading: true,
            key: mI + bD,
            url: "PostBean.clearUnreadCount",
            param: [ca, cd],
            onload: this.cWu.Z(this)
        })
    };
    gv.cWu = function(W) {
        this.bn("onclearUnreadCount", W)
    };
    gv.cWt = function(ca) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.deletePost",
            param: [ca],
            onload: this.cWq.Z(this)
        })
    };
    gv.cWq = function(W) {
        this.bn("onDelPost", W)
    };
    gv.cWl = function(ca) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.changePostFollow",
            param: [ca, true],
            onload: this.cWf.Z(this)
        })
    };
    gv.cWf = function(W) {
        if ( !! W) {
            eu.showToastTips({
                content: "关注成功!",
                type: 1
            });
            this.bn("onFollowPost", W)
        } else {
            eu.showToastTips({
                content: "关注失败!",
                type: 2
            })
        }
    };
    gv.cWd = function(ca) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.changePostFollow",
            param: [ca, false],
            onload: this.cVO.Z(this)
        })
    };
    gv.cVO = function(W) {
        if ( !! W) {
            eu.showToastTips({
                content: "取消成功!",
                type: 1
            });
            this.bn("onCancelFollowPost", W)
        } else {
            eu.showToastTips({
                content: "取消失败!",
                type: 2
            })
        }
    };
    gv.cVN = function(bxl, RD) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.addReply",
            param: [bxl, RD],
            onload: this.cVL.Z(this)
        })
    };
    gv.cVL = function(W) {
        this.bn("onAddReply", W)
    };
    gv.cVK = function(qK, ber) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.deleteReply",
            param: [qK, ber],
            onload: this.cVH.Z(this)
        })
    };
    gv.cVH = function(W) {
        this.bn("onDelReply", W)
    };
    gv.cVF = function(ca, ow, vz, hu) {
        var cVy = ow == "gmt_create" ? vz == "asc" ? 1 : 2 : 3;
        this.bK({
            key: mI + bD,
            url: "PostBean.getPaginationReplys",
            param: [ca, cVy, hu],
            onload: this.cVx.Z(this)
        })
    };
    gv.cVx = function(W) {
        this.bn("onGetReplyList", W)
    };
    gv.cVm = function(ber, hu) {
        this.bK({
            key: mI + bD,
            url: "PostBean.getPaginationComments",
            param: [ber, hu],
            onload: this.cVk.Z(this)
        })
    };
    gv.cVk = function(W) {
        this.bn("onGetCmtList", W)
    };
    gv.cVd = function(cVc, RD) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.addComment",
            param: [cVc, RD],
            onload: this.cUO.Z(this)
        })
    };
    gv.cUO = function(W) {
        this.bn("onAddComment", W)
    };
    gv.cUB = function(qK, bxB) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.deleteComment",
            param: [qK, bxB],
            onload: this.cUq.Z(this)
        })
    };
    gv.cUq = function(W) {
        this.bn("onDelComment", W)
    };
    gv.cUl = function(qK, ca, bz, cTY, bmO) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.markVote",
            param: [qK, ca, bz, cTY, bmO],
            onload: this.cTR.Z(this)
        })
    };
    gv.cTR = function(W) {
        this.bn("onVote", W)
    };
    gv.bYW = function(qK, ca, bz, ml) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.markTop",
            param: [qK, ca, bz, !!ml ? 1 : 0],
            onload: this.cTL.Z(this, ml)
        })
    };
    gv.cTL = function(ml, W) {
        if ( !! W) {
            eu.showToastTips({
                content: !!ml ? "已标记为置顶": "已取消置顶",
                type: 1
            })
        }
        this.bn("onMarkTop", W)
    };
    gv.bYV = function(qK, ca, bz, bmN) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.markAgree",
            param: [qK, ca, bz, !!bmN ? 1 : 0],
            onload: this.cTI.Z(this, bmN)
        })
    };
    gv.cTI = function(bmN, W) {
        if ( !! W) {
            eu.showToastTips({
                content: !!bmN ? "已标记为赞同": "已取消赞同",
                type: 1
            })
        }
        this.bn("onMarkAgree", W)
    };
    gv.cTw = function(qK, bmL) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.markSolve",
            param: [qK, !!bmL ? 1 : 0],
            onload: this.cTg.Z(this, bmL)
        })
    };
    gv.cTg = function(bmL, W) {
        if ( !! W) {
            eu.showToastTips({
                content: !!bmL ? "已标记为解决": "已取消解决",
                type: 1
            })
        }
        this.bn("onMarkSolve", W)
    };
    gv.bYU = function(qK, ca, bz) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.checkPosterInfo",
            param: [qK, ca, bz],
            onload: this.cTc.Z(this)
        })
    };
    gv.cTc = function(W) {
        this.bn("onCheckPosterInfo", W)
    };
    gv.cSX = function(RN, RD) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.addPost",
            param: [RN, RD],
            onload: this.cSV.Z(this)
        })
    };
    gv.cSV = function(W) {
        this.bn("onAddPost", W)
    };
    gv.cSM = function(RN, RD) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.editPost",
            param: [RN, RD],
            onload: this.cSE.Z(this)
        })
    };
    gv.cSE = function(W) {
        this.bn("onEditPost", W)
    };
    gv.cXe = function(bD, HM) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.setUserBannedForSite",
            param: [bD, HM],
            onload: this.cSD.Z(this, HM)
        })
    };
    gv.cSD = function(HM, W) {
        this.bn("onsetUserBannedForSite", W, HM)
    };
    gv.cWY = function(bD, cd, HM) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.setUserBannedForTerm",
            param: [bD, cd, HM],
            onload: this.cSz.Z(this, HM)
        })
    };
    gv.cSz = function(HM, W) {
        this.bn("onsetUserBannedForTerm", W, HM)
    };
    gv.bYT = function(cd) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.checkUserBannedList",
            param: [cd],
            onload: this.cSu.Z(this)
        })
    };
    gv.cSu = function(W) {
        this.bn("oncheckUserBannedList", W)
    };
    gv.cSt = function(sC, cSs, cSm) {
        this.bK({
            key: mI + bD,
            url: "MocForumBean.copyGoodPost",
            param: [sC, cSs, cSm],
            onload: this.cSl.Z(this)
        })
    };
    gv.cSl = function(W) {
        this.bn("onCopyGoodPost", W)
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    cC = NEJ.P("edu.d"),
    bR = NEJ.P("edu.u"),
    RT;
    var cF = bm.dD(".#<uispace> div{cursor:pointer;width:15px;height:15px;background: url(" + dx.imageUrlMap.forum_icon_sprite + ") no-repeat -4999px -4999px;}.#<uispace> .num{color:#666;line-height:15px;max-width:45px;margin:0 3px;}.#<uispace> .up{ background-position:2px -22px;}.#<uispace> .up.hvr:hover{ background-position:-15px -22px;}.#<uispace> .up.voted{ background-position:-33px -22px;}.#<uispace> .down{ background-position:2px -44px;}.#<uispace> .down.hvr:hover{ background-position:-15px -44px;}.#<uispace> .down.voted{ background-position:-33px -44px;}");
    var eg = bm.bY('<div class="f-cb"><div class="up f-fl j-up"></div><p class="num f-fl f-thide j-num"></p><div class="down f-fl j-down"></div></div>');
    bR.bfd = NEJ.C();
    RT = bR.bfd.bu(bR.cq, true);
    RT.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    RT.bP = function() {
        this.bQ();
        this.RU = bm.bc(this.bb, "j-up")[0];
        this.bYS = bm.bc(this.bb, "j-num")[0];
        this.RW = bm.bc(this.bb, "j-down")[0];
        ch.bf(this.RU, "click", this.bYR.Z(this, bR.CONST.TALK_VOTE_DIGG));
        ch.bf(this.RW, "click", this.bYR.Z(this, bR.CONST.TALK_VOTE_CAI));
        this.fy = new cC.vm;
        this.fy.bf("onVote", this.cSd.Z(this))
    };
    RT.bYR = function(cSb, bj) {
        ch.dK(bj);
        if (eu.Gs() > 0) {
            this.bn("onBanned");
            return
        }
        this.VN = cSb;
        this.fy.cUl(this.pY, this.hs, this.bV, this.VN, this.xZ.voteOpinion === this.VN ? 1 : 0)
    };
    RT.cSd = function(W) {
        if (W == null) {
            bR.showToastTips({
                type: 2,
                content: "投票失败"
            });
            return
        }
        var bfn = 0;
        var bYQ = this.VN;
        if (this.xZ.voteOpinion < 0) {
            bfn = 1
        } else if (this.VN != this.xZ.voteOpinion) {
            bfn = 2
        } else {
            bYQ = -1;
            bfn = -1
        }
        this.xZ.voteOpinion = bYQ;
        if (this.VN == bR.CONST.TALK_VOTE_DIGG) {
            this.xZ.voteCount += bfn
        } else if (this.VN == bR.CONST.TALK_VOTE_CAI) {
            this.xZ.voteCount -= bfn
        }
        this.bYP();
        this.bn("onVote", {
            voteOpinion: this.xZ.voteOpinion,
            targetId: this.hs,
            targetType: this.bV
        })
    };
    RT.bYP = function() {
        this.xZ.voteCount = this.xZ.voteCount || 0;
        this.bYS.innerText = bR.boy(this.xZ.voteCount);
        this.bYS.title = this.xZ.voteCount;
        bm.bZ(this.RU, "voted");
        bm.bZ(this.RW, "voted");
        bm.bJ(this.RU, "hvr");
        bm.bJ(this.RW, "hvr");
        this.RU.title = "顶";
        this.RW.title = "踩";
        if (this.xZ.voteOpinion == bR.CONST.TALK_VOTE_DIGG) {
            bm.bZ(this.RU, "hvr");
            bm.bJ(this.RU, "voted");
            this.RU.title = "取消顶"
        } else if (this.xZ.voteOpinion == bR.CONST.TALK_VOTE_CAI) {
            bm.bZ(this.RW, "hvr");
            bm.bJ(this.RW, "voted");
            this.RW.title = "取消踩"
        }
    };
    RT.bF = function(Y) {
        this.bI(Y);
        this.pY = Y.postId;
        this.hs = Y.id;
        this.bV = Y.type;
        this.xZ = Y.dataVo;
        this.bYP()
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    bE = NEJ.P("nej.u"),
    bR = NEJ.P("edu.u"),
    RZ;
    var cF = bm.dD(".#<uispace> .bd{color:#ddd;margin:0 5px;}.#<uispace> .manBtn span{display:inline-block;vertical-align:middle;height:14px;width:14px;background:url(" + dx.imageUrlMap.forum_icon_sprite + ") no-repeat -55px -45px;}.#<uispace> .manBtn:hover span{background-position:-72px -45px;}.u-manList{position:absolute;width:110px;background-color:#fff;border:1px solid #DDD;border-bottom:none;}.u-manList li{line-height:30px;text-align:center;border-bottom:1px solid #DDD;cursor:pointer;}.u-manList li:hover a{color:#61A500;}");
    var eg = bm.bY('<div class="f-cb"><div class="f-fl bd">|</div><a hidefocus="true" class="f-fl f-fc9 manBtn"><span></span>管理</a></div>');
    bR.bfq = NEJ.C();
    RZ = bR.bfq.bu(bR.cq, true);
    RZ.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    RZ.bP = function() {
        this.bQ();
        ch.bf(this.bb, bR.nf() ? "mouseenter": "mouseover", this.bfr.Z(this, true));
        ch.bf(this.bb, bR.nf() ? "mouseleave": "mouseout", this.bfr.Z(this, false))
    };
    RZ.bfr = function(qd, bj) {
        if ( !! qd) {
            if (this.bYO) {
                dx.clearTimeout(this.bYO)
            }
            if (this.sj && document.body.contains(this.sj)) {
                return
            }
            var bYN = bm.rx(this.bb);
            this.sj.style.zIndex = 1e3;
            this.sj.style.top = bYN.y + 18 + "px";
            this.sj.style.left = bYN.x - 20 + "px";
            document.body.appendChild(this.sj)
        } else {
            this.bYO = dx.setTimeout(function() {
                if (this.sj && document.body.contains(this.sj)) {
                    document.body.removeChild(this.sj)
                }
            }.Z(this), 10)
        }
    };
    RZ.bL = function() {
        if (this.sj && this.sj.parentNode) {
            this.sj.parentNode.removeChild(this.sj)
        }
        this.bO()
    };
    RZ.bfv = function(itemStr, eA) {
        var bYM = this.bYL[itemStr];
        if ( !! bYM) {
            bYM.innerText = eA || ""
        }
    };
    RZ.bF = function(Y) {
        this.bI(Y);
        var dE = "<ul class='u-manList'>";
        bE.bA(Y.showItems,
        function(bo) {
            switch (bo) {
            case "onCheck":
                dE += "<li data-eventmes='onCheck'><a hidefocus='true' class='f-fc9'>查看发帖人信息</a></li>";
                break;
            case "onResolve":
                dE += "<li data-eventmes='onResolve'><a hidefocus='true' class='f-fc9'>已解决</a></li>";
                break;
            case "onTop":
                dE += "<li data-eventmes='onTop'><a hidefocus='true' class='f-fc9'>置顶</a></li>";
                break;
            case "onAgree":
                dE += "<li data-eventmes='onAgree'><a hidefocus='true' class='f-fc9'>赞同</a></li>";
                break;
            case "onDel":
                dE += "<li data-eventmes='onDel'><a hidefocus='true' class='f-fc9'>删除</a></li>";
                break
            }
        });
        dE += "</ul>";
        this.sj = bm.iN(dE);
        var cRQ = bm.cS(this.sj);
        this.bYL = {};
        bE.bA(cRQ,
        function(byD) {
            var eA = bm.df(byD, "eventmes");
            this.bYL[eA] = bm.cS(byD)[0];
            this.hd([[byD, "click",
            function() {
                this.bn(eA)
            }.Z(this)]])
        }.Z(this));
        this.hd([[this.sj, bR.nf() ? "mouseenter": "mouseover", this.bfr.Z(this, true)], [this.sj, bR.nf() ? "mouseleave": "mouseout", this.bfr.Z(this, false)]]);
        this.bfr(false)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    vI,
    cRK = e.ee('<div class="m-edititem"><div class="editwrap"><textarea name="edittxt" class="j-edittxt edittxt"></textarea><label class="j-hint hint" for="edittxt"></label></div><div class="editopt f-cb"><a hidefocus="true" class="j-edit-btn u-btn u-btn-primary editbtn"><span class="j-btn-text">保存</span></a><a hidefocus="true" class="j-close-btn f-fc9 cancelbtn">取消</a></div></div>');
    eu.byG = NEJ.C();
    vI = eu.byG.bu(eu.cq, true);
    vI.bU = function() {
        this.bW = e.bY(e.bX(cRK))
    };
    vI.bP = function() {
        this.bQ();
        this.ts = e.bc(this.bb, "j-hint")[0];
        this.hM = e.bc(this.bb, "j-edittxt")[0];
        this.bmF = e.bc(this.bb, "j-edit-btn")[0];
        this.cRF = e.bc(this.bb, "j-btn-text")[0];
        this.NU = e.bc(this.bb, "j-close-btn")[0];
        v.bf(this.ts, "click", this.Xs.Z(this));
        v.bf(this.hM, "focus", this.bQW.Z(this));
        v.bf(this.hM, "blur", this.OA.Z(this));
        v.bf(this.hM, "keydown", this.bRj.Z(this));
        v.bf(this.bmF, "click", this.bYJ.Z(this));
        v.bf(this.NU, "click", this.cRz.Z(this))
    };
    vI.Xs = function() {
        this.hM.focus()
    };
    vI.OA = function(bj) {
        v.dK(bj);
        var hK = this.hM.value;
        if (!hK) {
            eu.bw(this.ts)
        } else {
            eu.bt(this.ts)
        }
        this.bn("onBlurArea")
    };
    vI.bQW = function(bj) {
        v.dK(bj);
        eu.bt(this.ts);
        this.bn("onFocusArea")
    };
    vI.bRj = function(bj) {
        if ( !! bj.ctrlKey) {
            switch (bj.keyCode) {
            case 13:
                v.dK(bj);
                this.bYJ();
                break
            }
        }
    };
    vI.bYJ = function(bj) {
        v.dK(bj);
        this.bn("onEditClick")
    };
    vI.cRz = function(bj) {
        v.dK(bj);
        this.bn("onCloseClick")
    };
    vI.bF = function(Y) {
        this.bI(Y);
        this.cRF.innerText = Y.btnText || "保存";
        this.NU.innerText = Y.cancelBtnText || "取消";
        this.ts.innerText = Y.labelText || "";
        eu.bw(this.ts);
        var byM = Y.notShowClose || false;
        if (!byM) {
            eu.bw(this.NU)
        } else {
            eu.bt(this.NU)
        }
    };
    vI.cX = function(bG) {
        bG = eu.tj(bG || "");
        this.Ut = bG;
        this.hM.value = bG;
        this.OA()
    };
    vI.clC = function() {
        var LT = this.cc();
        return this.Ut != LT && LT != ""
    };
    vI.cc = function() {
        var hK = eu.tj(this.hM.value || "");
        return hK
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    bfE,
    byO = "ck-reportCache";
    p.bYI = NEJ.C();
    bfE = p.bYI.bu(p.hA);
    bfE.cRr = function(qK, HP, oS, da, cJ, DK) {
        this.bK({
            key: byO + bD,
            url: "ReportBean.reportPost",
            param: [qK, HP, oS, da, cJ, DK],
            onload: this.byT.Z(this)
        })
    };
    bfE.cRe = function(ber, HP, da, cJ, DK) {
        this.bK({
            key: byO + bD,
            url: "ReportBean.reportReply",
            param: [ber, HP, da, cJ, DK],
            onload: this.byT.Z(this)
        })
    };
    bfE.cRd = function(bxB, HP, da, cJ, DK) {
        this.bK({
            key: byO + bD,
            url: "ReportBean.reportComment",
            param: [bxB, HP, da, cJ, DK],
            onload: this.byT.Z(this)
        })
    };
    bfE.byT = function(W) {
        this.bn("onReportCb", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    HS;
    byX = e.bY('<div class="m-reportDialog"><div class="j-reportedit reportedit"></div><div class="j-feedback feedback"></div></div>');
    eu.bfM = NEJ.C();
    HS = eu.bfM.bu(eu.hq, true);
    eu.bfM.bT = function(Y) {
        var fV = eu.bfM.bh(Y);
        fV.gI()
    };
    HS.bU = function() {
        this.bW = byX
    };
    HS.bP = function() {
        this.bQ();
        this.cRc = e.bc(this.bb, "j-reportedit")[0];
        this.Je = e.bc(this.bb, "j-feedback")[0];
        this.bmD = new d.bYI;
        this.bmD.bf("onReportCb", this.cRb.Z(this))
    };
    HS.cRb = function(W) {
        if ( !! W) {
            eu.showToastTips({
                content: "提交成功，感谢你对中国大学MOOC的支持！",
                type: 1
            });
            this.fs()
        } else {
            this.fk.cu("提交失败，请重试")
        }
    };
    HS.bfR = function() {
        var DK = this.sX.cc();
        if (DK == "") {
            this.fk.cu(this.cQZ, true)
        } else {
            switch (this.bV) {
            case eu.CONST.TALK_VOTE_POST:
                this.bmD.cRr(this.iX.id, this.iX.posterId, this.iX.title, this.iX.content, location.href, DK);
                break;
            case eu.CONST.TALK_VOTE_REPLY:
                this.bmD.cRe(this.iX.id, this.iX.replyerId, this.iX.content, location.href, DK);
                break;
            case eu.CONST.TALK_VOTE_COMMENT:
                this.bmD.cRd(this.iX.id, this.iX.commentorId, this.iX.content, location.href, DK);
                break
            }
        }
    };
    HS.cQX = function() {
        this.fs()
    };
    HS.cQW = function() {
        this.fk.ce()
    };
    HS.bL = function() {
        if ( !! this.fk) {
            this.fk = eu.cv.bg(this.fk)
        }
        if ( !! this.sX) {
            this.sX = eu.byG.bg(this.sX)
        }
        this.bO()
    };
    HS.bF = function(Y) {
        this.iX = Y.vo;
        this.bV = Y.type;
        Y.title = Y.title || "举报不良信息";
        Y.clazz = "u-window-pd";
        var cQT = Y.placeHold || "请填写举报原因";
        this.cQZ = Y.feedBackTxt || "请填写举报原因";
        this.bI(Y);
        this.fk = eu.cv.bh({
            parent: this.Je
        });
        this.fk.ce();
        this.sX = eu.byG.bh({
            parent: this.cRc,
            labelText: cQT,
            btnText: "提交"
        });
        this.sX.cX("");
        this.sX.bf("onFocusArea", this.cQW.Z(this));
        this.sX.bf("onEditClick", this.bfR.Z(this));
        this.sX.bf("onCloseClick", this.cQX.Z(this))
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    bE = NEJ.P("nej.u"),
    cC = NEJ.P("edu.d"),
    bR = NEJ.P("edu.u"),
    rd;
    var cF = bm.dD(".#<uispace>{background-color:#f8f8f8;padding:10px 20px;}.#<uispace> .title{max-width:68%;word-break:break-word;}.#<uispace> .content{padding-top:10px;}.#<uispace> .infobar{padding:10px 0;border-bottom:1px solid #eee;}.#<uispace> .infobar .time{padding:0 10px;}.#<uispace> .optbar{padding-top:10px;}.#<uispace> .optBox,.#<uispace> .votebox{margin-top:5px;}.#<uispace> .optBox .divider{color:#ddd;margin:0 5px;}.#<uispace> .optbar a.u-btn-sm{line-height:18px;}.#<uispace> .optbar a i{vertical-align:-3px;display:inline-block;width:20px;height:16px;background:url(" + dx.imageUrlMap.forum_icon_sprite + ") no-repeat -4999px -4999px;}.#<uispace> .optbar .replyBtn i{background-position: -54px 1px;}.#<uispace> .followBtn{margin-right:10px;}.#<uispace> .optbar .followBtn.unfollowed i{background-position: -78px 0;}.#<uispace> .optbar .followBtn.unfollowed .second,.#<uispace> .optbar .followBtn.unfollowed .secHvr{display:none;}.#<uispace> .optbar .followBtn.followed i{background-position: -53px -24px;}.#<uispace> .optbar .followBtn.followed .first,.#<uispace> .optbar .followBtn.followed .secHvr{display:none;}.#<uispace> .optbar .followBtn.followed:hover .second{display:none;}.#<uispace> .optbar .followBtn.followed:hover .secHvr{display:inline-block;padding-left:8px;}");
    var eg = bm.bY('<div><div class="f-cb"><h3 class="j-title title f-fl"></h3><a class="f-fr u-btn u-btn-sm u-btn-default j-transBtn" style="display:none">迁移至“过往学期精华贴”</a><div class="f-cb f-fr j-tagBox"><div class="u-forumtag u-forumtag1 j-tagTopNode">置顶</div><div class="u-forumtag j-tagAgreeNode">赞同</div><div class="u-forumtag j-tagSolveNode">已解决</div><div class="u-forumtag j-tagTeacherNode">老师参与</div></div></div><div class="content f-richEditorText j-content"></div><div class="infobar f-cb"><div class="j-infoBox"><div class="f-fl name j-name"></div><div class="f-fl f-fc9 time j-time"></div></div><div class="f-fl f-fc9 j-fromUnitBox">来自课件“<a class="j-fromUnit f-fcgreen"></a>”</div></div><div class="optbar f-cb"><a hidefocus="true" class="f-fl followBtn u-btn u-btn-sm j-followBtn"><span class="first j-followInner"><i></i>关注</span><span class="second j-followInner"><i></i>已关注</span><span class="secHvr j-followInner">取消关注</span></a><a hidefocus="true" class="f-fl replyBtn u-btn u-btn-sm j-replyBtn"><span><i></i>回复</span></a><div class="f-cb f-fr optBox j-optBox"><div class="f-fl j-editDivider divider">|</div><a hidefocus="true" class="f-fl f-fc9 editBtn j-editBtn">编辑</a><div class="f-fl divider">|</div><a hidefocus="true" class="f-fl f-fc9 editBtn j-reportBtn">举报</a><div class="f-fl j-manBox"></div></div><div class="f-fr votebox j-vote"></div></div></div>');
    bR.bzk = NEJ.C();
    rd = bR.bzk.bu(bR.cq, true);
    rd.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    rd.bP = function() {
        this.bQ();
        this.hY = bm.bc(this.bb, "j-title")[0];
        this.gc = bm.bc(this.bb, "j-content")[0];
        this.bzn = bm.bc(this.bb, "j-time")[0];
        this.fg = bm.bc(this.bb, "j-name")[0];
        this.bzp = bm.bc(this.bb, "j-vote")[0];
        this.dmU = bm.bc(this.bb, "j-optBox")[0];
        this.nv = bm.bc(this.bb, "j-editBtn")[0];
        this.bYF = bm.bc(this.bb, "j-editDivider")[0];
        this.bzt = bm.bc(this.bb, "j-reportBtn")[0];
        this.bge = bm.bc(this.bb, "j-followBtn")[0];
        this.dmV = bm.bc(this.bb, "j-followInner");
        this.cQG = bm.bc(this.bb, "j-replyBtn")[0];
        this.Mx = bm.bc(this.bb, "j-manBox")[0];
        this.bYD = bm.bc(this.bb, "j-transBtn")[0];
        this.Wl = bm.bc(this.bb, "j-tagBox")[0];
        this.bgj = bm.bc(this.bb, "j-tagTopNode")[0];
        this.bgk = bm.bc(this.bb, "j-tagAgreeNode")[0];
        this.bYC = bm.bc(this.bb, "j-tagSolveNode")[0];
        this.bYA = bm.bc(this.bb, "j-tagTeacherNode")[0];
        this.bYz = bm.bc(this.bb, "j-infoBox")[0];
        this.bYy = bm.bc(this.bb, "j-fromUnitBox")[0];
        this.bYx = bm.bc(this.bb, "j-fromUnit")[0];
        ch.bf(this.nv, "click", this.bfR.Z(this));
        ch.bf(this.bzt, "click", this.bzH.Z(this));
        ch.bf(this.bge, "click", this.cQj.Z(this));
        ch.bf(this.cQG, "click", this.bzJ.Z(this));
        this.bYw = dx.newTermId;
        ch.bf(this.bYD, "click",
        function(bj) {
            if (!this.bYv) {
                this.fy.cSt(this.ea.termId, this.ea.id, this.bYw);
                this.bYv = true
            }
        }.Z(this));
        this.fy = new cC.vm;
        this.fy.bf("onDelPost", this.cPY.Z(this));
        this.fy.bf("onFollowPost", this.bgs.Z(this, true));
        this.fy.bf("onCancelFollowPost", this.bgs.Z(this, false));
        this.fy.bf("onCheckPosterInfo", this.LR.Z(this, "onCheck"));
        this.fy.bf("onMarkAgree", this.LR.Z(this, "onAgree"));
        this.fy.bf("onMarkTop", this.LR.Z(this, "onTop"));
        this.fy.bf("onMarkSolve", this.LR.Z(this, "onResolve"));
        this.fy.bf("onCopyGoodPost", this.cPV.Z(this))
    };
    rd.cPV = function(W) {
        var fc = "已成功迁址至“过往学期精华贴”",
        bz = 1;
        this.bYv = false;
        if (!W) {
            fc = "迁移失败";
            bz = 2
        }
        bR.showToastTips({
            type: bz,
            content: fc
        })
    };
    rd.bzH = function(bj) {
        bR.bfM.bT({
            vo: this.ea,
            type: bR.CONST.TALK_VOTE_POST
        })
    };
    rd.cPY = function(W) {
        if ( !! W) {
            dx.dispatcher.cB(bR.umi("learnForumIndex"))
        }
    };
    rd.qw = function() {
        bR.cp.bT({
            type: 1,
            message: "<b>你确定删除该贴吗？</b><p>确定后将删除该贴下全部回复和评论</p>",
            okFunc: function() {
                this.fy.cWt(this.ea.id)
            }.Z(this),
            cancelFunc: dk.Z(this),
            focusNum: 1
        })
    };
    rd.bgs = function(bYu) {
        bR.bw(this.bge);
        this.ea.hasFollowed = !!bYu;
        bm.bZ(this.bge, "followed unfollowed");
        if ( !! bYu) {
            bm.bJ(this.bge, "followed")
        } else {
            bm.bJ(this.bge, "unfollowed")
        }
    };
    rd.cQj = function() {
        if (eu.Gs() > 0) {
            this.bn("onBanned");
            return
        }
        if ( !! this.ea.hasFollowed) {
            this.fy.cWd(this.ea.id)
        } else {
            this.fy.cWl(this.ea.id)
        }
    };
    rd.LR = function(eA, W) {
        if ( !! W) {
            switch (eA) {
            case "onCheck":
                if (this.qT) {
                    this.qT.bwG(W, this.ea.termId)
                }
                break;
            case "onAgree":
                this.ea.tagAgree = !this.ea.tagAgree;
                break;
            case "onTop":
                this.ea.tagTop = !this.ea.tagTop;
                break;
            case "onResolve":
                this.ea.tagSolve = !this.ea.tagSolve;
                break
            }
            this.bgw()
        }
    };
    rd.LM = function(eA) {
        switch (eA) {
        case "onCheck":
            if (this.ea.type == eu.CONST.TYPE_LESSONUNIT) {
                bR.showToastTips({
                    content: "该贴来自课件,无法查看发贴人信息",
                    type: 2
                })
            } else {
                this.fy.bYU(this.ea.id, this.ea.id, bR.CONST.TALK_VOTE_POST)
            }
            break;
        case "onAgree":
            this.fy.bYV(this.ea.id, this.ea.id, bR.CONST.TALK_VOTE_POST, !this.ea.tagAgree);
            break;
        case "onTop":
            this.fy.bYW(this.ea.id, this.ea.id, bR.CONST.TALK_VOTE_POST, !this.ea.tagTop);
            break;
        case "onResolve":
            this.fy.cTw(this.ea.id, !this.ea.tagSolve);
            break
        }
    };
    rd.bgw = function() {
        bR.bw(this.Wl);
        if ( !! this.ea.tagTop || !!this.ea.tagAgree || !!this.ea.tagSolve || !!this.ea.tagLector) {
            bR.bt(this.bgj);
            bR.bt(this.bgk);
            bR.bt(this.bYC);
            bR.bt(this.bYA);
            if ( !! this.ea.tagTop) {
                bR.bw(this.bgj)
            }
            if ( !! this.ea.tagAgree) {
                bR.bw(this.bgk)
            }
            if ( !! this.ea.tagSolve) {
                bR.bw(this.bYC)
            }
            if ( !! this.ea.tagLector) {
                bR.bw(this.bYA)
            }
        } else {
            bR.bt(this.Wl)
        }
        if ( !! this.bYw) {
            bR.bt(this.Wl);
            bR.bw(this.bYD)
        }
        if ( !! this.wn) {
            this.wn.bfv("onTop", !!this.ea.tagTop ? "取消置顶": "置顶");
            this.wn.bfv("onAgree", !!this.ea.tagAgree ? "取消赞同": "赞同");
            this.wn.bfv("onResolve", !!this.ea.tagSolve ? "取消解决": "已解决")
        }
    };
    rd.bzJ = function() {
        this.bn("onReply")
    };
    rd.bfR = function() {
        dx.dispatcher.cB(bR.umi("learnForumTopic") + "?fid=" + this.ea.forumId + "&pid=" + this.ea.id)
    };
    rd.cPL = function() {
        if (this.ea.relateUnit) {
            bR.bw(this.bYy);
            this.bYx.innerText = this.ea.relateUnit.name;
            this.bYx.href = "#" + bR.umi("learnContent") + "?type=detail&id=" + this.ea.relateUnit.lessonId + "&cid=" + this.ea.relateUnit.id
        } else {
            bR.bt(this.bYy)
        }
        if (this.ea.type == eu.CONST.TYPE_LESSONUNIT) {
            bR.bt(this.bYz)
        } else {
            bR.bw(this.bYz);
            this.bzn.innerText = bR.brC(this.ea.postTime);
            this.qT = bR.Rr.bh({
                parent: this.fg,
                anonymous: this.ea.anonymous,
                userDto: this.mn
            })
        }
    };
    rd.bF = function(Y) {
        this.bI(Y);
        this.ea = Y.postVo;
        this.mn = this.ea.poster || {};
        this.hY.innerText = bR.bhi(this.ea.title || "");
        if ( !! bR.tj(this.ea.content)) {
            bR.bw(this.gc);
            bE.jE(this.gc, this.ea.content)
        } else {
            bR.bt(this.gc)
        }
        this.cPL();
        this.Ss = bR.bfd.bh({
            parent: this.bzp,
            postId: this.ea.id,
            id: this.ea.id,
            type: bR.CONST.TALK_VOTE_POST,
            dataVo: {
                voteCount: this.ea.countVote,
                voteOpinion: !!this.ea.hasVoteUp ? bR.CONST.TALK_VOTE_DIGG: !!this.ea.hasVoteDown ? bR.CONST.TALK_VOTE_CAI: -1
            },
            onVote: function(W) {
                this.bn("onVote", W)
            }.Z(this),
            onBanned: function() {
                this.bn("onBanned")
            }.Z(this)
        });
        this.bgs(this.ea.hasFollowed);
        if (bR.bAz(this.mn.id)) {
            bR.bw(this.nv);
            bR.bw(this.bYF)
        } else {
            bR.bt(this.nv);
            bR.bt(this.bYF)
        }
        if (bR.FM(dx.courseDto.lectorPanels, bR.hj().id) || bR.bhl(dx.courseDto.ordinaryEditors) || bR.dX(bR.CONST.ROLE_OUT_COURSE_EDITOR) || bR.dX(bR.CONST.ROLE_PLATFORM_ADMIN) || bR.dX(bR.CONST.ROLE_FORUM_MANAGER)) {
            bR.bw(this.Mx);
            var bYt = ["onCheck", "onResolve", "onTop", "onAgree"];
            if (this.ea.type != eu.CONST.TYPE_LESSONUNIT) {
                bYt.push("onDel")
            }
            this.wn = bR.bfq.bh({
                parent: this.Mx,
                showItems: bYt,
                onTop: this.LM.Z(this, "onTop"),
                onAgree: this.LM.Z(this, "onAgree"),
                onResolve: this.LM.Z(this, "onResolve"),
                onCheck: this.LM.Z(this, "onCheck"),
                onDel: this.qw.Z(this)
            })
        } else {
            bR.bt(this.Mx)
        }
        this.bgw()
    };
    rd.bL = function() {
        if ( !! this.qT) {
            this.qT = bR.Rr.bg(this.qT)
        }
        if ( !! this.Ss) {
            this.Ss = bR.bfd.bg(this.Ss)
        }
        if ( !! this.wn) {
            this.wn = bR.bfq.bg(this.wn)
        }
        this.bO()
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    bR = NEJ.P("edu.u"),
    cK = NEJ.P("nej.ui"),
    vI;
    var cF = bm.dD(".#<uispace> {}.#<uispace> .rich-opt{margin-top:10px;}.#<uispace> .rich-opt label{cursor:pointer;color:#999;vertical-align:top;}.#<uispace> .rich-opt label:hover{color:#61a500;}.#<uispace> .rich-opt label input{margin-top:3px;}.#<uispace> .rich-opt .cancelbtn{margin-right:10px;line-height:24px;}.#<uispace> .unlogin{position:absolute;top:0;left:0;bottom:0;right:0;}.#<uispace> .unlogin .autowrap {margin:115px auto;width:188px;}.#<uispace> .unlogin .autowrap p{line-height:26px;color:#666;margin-right:10px;}");
    var dj = bm.bY('<div class="ui-richEditor f-cb f-pr"><div class="rich-wrap"><div class="rich-editor j-richeditor"></div><div class="rich-opt f-cb"><label class="j-anony f-fl"><input type="checkbox" hidefocus="true" class="j-anonycheck"/>&nbsp;&nbsp;匿名发表</label><a hidefocus="true" class="j-edit-btn editbtn u-btn u-btn-sm u-btn-primary f-fr"></a><a hidefocus="true" class="j-close-btn cancelbtn f-fc9 f-fr">取消</a></div></div><div class="unlogin j-unloginbox"><div class="autowrap f-cb"><p class="f-fl">发表观点要登录哦！</p><a hidefocus="true" class="j-login-btn loginbtn u-btn u-btn-sm u-btn-primary f-fl">立即登录</a></div></div></div>');
    bR.bgB = NEJ.C();
    tl = bR.bgB.bu(bR.cq, true);
    tl.bU = function() {
        this.bW = dj;
        this.dv = cF
    };
    tl.bP = function() {
        this.bQ();
        this.cPE = bm.bc(this.bb, "j-richeditor")[0];
        this.bmF = bm.bc(this.bb, "j-edit-btn")[0];
        this.NU = bm.bc(this.bb, "j-close-btn")[0];
        this.dmW = bm.bc(this.bb, "j-anony")[0];
        this.bYs = bm.bc(this.bb, "j-anonycheck")[0];
        this.bAf = bm.bc(this.bb, "j-unloginbox")[0];
        this.bAg = bm.bc(this.bb, "j-login-btn")[0];
        ch.bf(this.bmF, "click", this.Dk.Z(this));
        ch.bf(this.NU, "click", this.iR.Z(this));
        ch.bf(this.bAg, "click", this.bAi.Z(this))
    };
    tl.Dk = function(bj) {
        ch.dK(bj);
        this.bn("onEditClick")
    };
    tl.iR = function(bj) {
        ch.dK(bj);
        this.bn("onCloseClick")
    };
    tl.bAi = function(bj) {
        ch.dK(bj);
        bR.rs.zO({})
    };
    tl.cPx = function() {
        if (bR.OE()) {
            bR.bt(this.bAf)
        } else {
            bR.bw(this.bAf)
        }
    };
    tl.bF = function(Y) {
        this.bI(Y);
        this.bmF.innerText = Y.btnText || "发表";
        var byM = Y.notShowClose || false;
        if (!byM) {
            bR.bw(this.NU)
        } else {
            bR.bt(this.NU)
        }
        this.Ut = Y.initContent || "";
        this.KZ = cK.fK.bh({
            parent: this.cPE,
            content: this.Ut,
            focus: !!Y.focus,
            height: Y.height
        });
        this.bYr( !! Y.anonyChecked);
        this.cPx()
    };
    tl.clC = function() {
        var LT = this.cc();
        return this.Ut != LT && LT != ""
    };
    tl.cc = function() {
        return this.KZ.cc()
    };
    tl.bYq = function() {
        return !! this.bYs.checked ? 1 : 0
    };
    tl.bYr = function(bwQ) {
        this.bYs.checked = !!bwQ
    };
    tl.zZ = function() {
        return this.KZ.zZ()
    };
    tl.ho = function(da) {
        return this.KZ.ho(da)
    };
    tl.bYp = function(cPj) {
        if (!bR.zy(this.bAf)) {
            this.KZ.ho("");
            this.bYr(false);
            if ( !! cPj) {
                this.KZ.blc()
            }
        }
    };
    tl.bL = function() {
        if ( !! this.KZ) {
            this.KZ = cK.fK.bg(this.KZ)
        }
        this.bO()
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    cC = NEJ.P("edu.d"),
    bR = NEJ.P("edu.u"),
    bgM;
    bR.bAq = NEJ.C();
    bgM = bR.bAq.bu(bR.bgB, true);
    bgM.bP = function() {
        this.bQ();
        this.fy = new cC.vm;
        this.fy.bf("onAddReply", this.cOY.Z(this))
    };
    bgM.bAs = function() {
        var hK = this.cc();
        if (hK != "") {
            this.fy.cVN({
                postId: this.pY,
                content: hK,
                anonymous: this.bYq()
            },
            bR.bwZ(this.zZ()))
        } else {
            bR.showToastTips({
                content: "请输入回复内容！",
                type: 2
            })
        }
    };
    bgM.cOY = function(bYm) {
        if (!bYm) {
            eu.cp.bT({
                type: 1,
                message: "发表失败，请刷新重试"
            });
            return
        }
        if (this.bgP) {
            this.bgP(bYm)
        }
        this.bYp(true)
    };
    bgM.bF = function(Y) {
        Y.btnText = Y.btnText || "发表回复";
        this.bgP = Y.submitCallback;
        this.pY = Y.postId;
        this.bf("onEditClick", this.bAs.Z(this));
        Y.notShowClose = true;
        Y.focus = false;
        Y.initContent = "";
        this.bI(Y)
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    bE = NEJ.P("nej.u"),
    cC = NEJ.P("edu.d"),
    bR = NEJ.P("edu.u"),
    xD;
    var cF = bm.dD(".#<uispace>{width:100%;padding-top:15px;}.#<uispace> .tagCt{margin-bottom:6px;}.#<uispace> .bar{padding:10px 0;}.#<uispace> .time{padding-left:10px;}.#<uispace> .opt{cursor:pointer;}.#<uispace> .divider{color:#ddd;margin:0 5px;}");
    var eg = bm.bY('<div class="m-detailInfoItem f-pr"><div class="tagCt f-cb j-tagBox"><div class="u-forumtag u-forumtag1 j-tagTopNode">置顶</div><div class="u-forumtag j-tagAgreeNode">赞同</div></div><div class="f-richEditorText j-content"></div><div class="bar f-cb"><div class="f-fl name j-name"></div><div class="f-fl f-fc9 time j-time"></div><div class="f-fr j-manBox"></div><a hidefocus="true" class="f-fr f-fc9 opt delBtn j-reportBtn">举报</a><div class="f-fr divider">|</div><a hidefocus="true" class="f-fr f-fc9 opt delBtn j-delBtn">删除</a><div class="j-delDivider f-fr divider">|</div><a hidefocus="true" class="f-fr f-fc9 opt cmtBtn j-cmtBtn">评论(0)</a><div class="j-cmtDivider f-fr divider">|</div><div class="f-fr votebox j-vote"></div></div></div>');
    bR.bgR = NEJ.C();
    xD = bR.bgR.bu(bR.cq, true);
    xD.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    xD.bP = function() {
        this.bQ();
        this.bzn = bm.bc(this.bb, "j-time")[0];
        this.iD = bm.bc(this.bb, "j-delBtn")[0];
        this.bmc = bm.bc(this.bb, "j-cmtBtn")[0];
        this.bzt = bm.bc(this.bb, "j-reportBtn")[0];
        this.bYl = bm.bc(this.bb, "j-delDivider")[0];
        this.bYk = bm.bc(this.bb, "j-cmtDivider")[0];
        this.gc = bm.bc(this.bb, "j-content")[0];
        this.fg = bm.bc(this.bb, "j-name")[0];
        this.bzp = bm.bc(this.bb, "j-vote")[0];
        this.Mx = bm.bc(this.bb, "j-manBox")[0];
        this.Wl = bm.bc(this.bb, "j-tagBox")[0];
        this.bgj = bm.bc(this.bb, "j-tagTopNode")[0];
        this.bgk = bm.bc(this.bb, "j-tagAgreeNode")[0];
        ch.bf(this.bzt, "click", this.bzH.Z(this));
        ch.bf(this.iD, "click", this.qw.Z(this));
        ch.bf(this.bmc, "click", this.bmb.Z(this));
        this.fy = new cC.vm;
        this.fy.bf("onMarkAgree", this.LR.Z(this, "onAgree"));
        this.fy.bf("onMarkTop", this.LR.Z(this, "onTop"));
        this.fy.bf("onCheckPosterInfo", this.LR.Z(this, "onCheck"))
    };
    xD.bzH = function(bj) {
        bR.bfM.bT({
            vo: this.kH,
            type: this.bgX
        })
    };
    xD.LR = function(eA, W) {
        if ( !! W) {
            switch (eA) {
            case "onCheck":
                if (this.qT) {
                    this.qT.bwG(W, dx.termDto.id)
                }
                break;
            case "onAgree":
                this.kH.tagAgree = !this.kH.tagAgree;
                break;
            case "onTop":
                this.kH.tagTop = !this.kH.tagTop;
                break
            }
            this.bgw()
        }
    };
    xD.LM = function(eA) {
        switch (eA) {
        case "onCheck":
            this.fy.bYU(this.kH.postId, this.kH.id, this.bgX);
            break;
        case "onAgree":
            this.fy.bYV(this.kH.postId, this.kH.id, this.bgX, !this.kH.tagAgree);
            break;
        case "onTop":
            this.fy.bYW(this.kH.postId, this.kH.id, this.bgX, !this.kH.tagTop);
            break
        }
    };
    xD.bgw = function() {
        if ( !! this.kH.tagTop || !!this.kH.tagAgree) {
            bR.bw(this.Wl);
            bR.bt(this.bgj);
            bR.bt(this.bgk);
            if ( !! this.kH.tagTop) {
                bR.bw(this.bgj)
            }
            if ( !! this.kH.tagAgree) {
                bR.bw(this.bgk)
            }
        } else {
            bR.bt(this.Wl)
        }
        if ( !! this.wn) {
            this.wn.bfv("onTop", !!this.kH.tagTop ? "取消置顶": "置顶");
            this.wn.bfv("onAgree", !!this.kH.tagAgree ? "取消赞同": "赞同")
        }
    };
    xD.bF = function(Y) {
        this.bI(Y);
        this.kH = Y.infoVo;
        this.bgX = Y.type;
        this.mn = Y.userDto || {};
        this.bzn.innerText = bR.brC(this.kH.gmtCreate);
        bE.jE(this.gc, this.kH.content || "");
        if (bR.bAz(this.mn.id) && eu.Gs() == eu.CONST.FORUM_FORBID_NORMAL) {
            bR.bw(this.iD);
            bR.bw(this.bYl)
        } else {
            bR.bt(this.iD);
            bR.bt(this.bYl)
        }
        if (bR.FM(dx.courseDto.lectorPanels, bR.hj().id) || bR.bhl(dx.courseDto.ordinaryEditors) || bR.dX(bR.CONST.ROLE_OUT_COURSE_EDITOR) || bR.dX(bR.CONST.ROLE_PLATFORM_ADMIN) || bR.dX(bR.CONST.ROLE_FORUM_MANAGER)) {
            bR.bw(this.Mx);
            this.wn = bR.bfq.bh({
                parent: this.Mx,
                showItems: ["onCheck", "onTop", "onAgree", "onDel"],
                onTop: this.LM.Z(this, "onTop"),
                onAgree: this.LM.Z(this, "onAgree"),
                onCheck: this.LM.Z(this, "onCheck"),
                onDel: this.qw.Z(this)
            })
        } else {
            bR.bt(this.Mx)
        }
        this.bgw();
        if ( !! Y.showCmtBtn) {
            bR.bw(this.bmc);
            bR.bw(this.bYk)
        } else {
            bR.bt(this.bmc);
            bR.bt(this.bYk)
        }
        this.qT = bR.Rr.bh({
            parent: this.fg,
            anonymous: this.kH.anonymous,
            userDto: this.mn
        });
        this.Ss = bR.bfd.bh({
            parent: this.bzp,
            postId: this.kH.postId,
            id: this.kH.id,
            type: this.bgX,
            dataVo: {
                voteCount: this.kH.countVote,
                voteOpinion: !!this.kH.hasVoteUp ? bR.CONST.TALK_VOTE_DIGG: !!this.kH.hasVoteDown ? bR.CONST.TALK_VOTE_CAI: -1
            },
            onVote: function(W) {
                this.bn("onVote", W)
            }.Z(this),
            onBanned: function() {
                this.bn("onBanned")
            }.Z(this)
        })
    };
    xD.cOI = function() {
        var dR = 1;
        if (bR.zy(this.iD)) {
            dR++
        }
        if (bR.zy(this.Mx)) {
            dR++
        }
        return dR
    };
    xD.bYj = function(dR) {
        this.bmc.innerText = "评论(" + (dR || 0) + ")"
    };
    xD.bmb = function() {
        this.bn("onCmt")
    };
    xD.qw = function() {
        this.bn("onDel")
    };
    xD.bL = function() {
        if ( !! this.qT) {
            this.qT = bR.Rr.bg(this.qT)
        }
        if ( !! this.Ss) {
            this.Ss = bR.bfd.bg(this.Ss)
        }
        if ( !! this.wn) {
            this.wn = bR.bfq.bg(this.wn)
        }
        this.bO()
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    cC = NEJ.P("edu.d"),
    bR = NEJ.P("edu.u"),
    Fv;
    var cF = bm.dD(".#<uispace> {width:550px;}.#<uispace> .small{background-color:#fff;border:1px solid #dfdfdf;padding:10px;color:#999;}.#<uispace> .small a{color:#61A500;}.#<uispace> .small.j-logupbox{cursor:pointer;}.#<uispace> .ui-richEditor .rich-editor .ztbar{padding:0 4px;}");
    var dj = bm.bY('<div><p class="small j-unlogbox">发表观点要登录哦！点击<a hidefocus="true" class="j-loginbtn loginbtn">登录</a></p><p class="small j-logupbox">添加评论...</p><div class="j-logdownbox"></div></div>');
    bR.bAH = NEJ.C();
    Fv = bR.bAH.bu(bR.cq, true);
    Fv.bU = function() {
        this.bW = dj;
        this.dv = cF
    };
    Fv.bP = function() {
        this.bQ();
        this.bYi = bm.bc(this.bb, "j-unlogbox")[0];
        this.blZ = bm.bc(this.bb, "j-logupbox")[0];
        this.bAK = bm.bc(this.bb, "j-logdownbox")[0];
        this.bAg = bm.bc(this.bb, "j-loginbtn")[0];
        ch.bf(this.blZ, "click", this.bAL.Z(this, true));
        ch.bf(this.bAg, "click", this.bAi.Z(this));
        this.fy = new cC.vm;
        this.fy.bf("onAddComment", this.cOB.Z(this))
    };
    Fv.bAi = function(bj) {
        ch.dK(bj);
        bR.rs.zO({})
    };
    Fv.bAL = function(tm) {
        if ( !! tm) {
            if (eu.Gs() > 0) {
                this.bn("onBanned");
                return
            }
            bR.bt(this.blZ);
            bR.bw(this.bAK);
            this.fq = bR.bgB.bh({
                parent: this.bAK,
                focus: true,
                initContent: "",
                height: 80,
                btnText: "添加评论",
                onEditClick: this.bAs.Z(this),
                onCloseClick: this.blU.Z(this, false)
            })
        } else {
            if ( !! this.fq) {
                this.fq = bR.bgB.bg(this.fq)
            }
            bR.bw(this.blZ);
            bR.bt(this.bAK)
        }
    };
    Fv.blU = function(tm) {
        if (bR.OE()) {
            bR.bt(this.bYi);
            this.bAL(tm)
        } else {
            this.bAL(false);
            bR.bw(this.bYi);
            bR.bt(this.blZ)
        }
    };
    Fv.bAs = function() {
        var hK = this.fq.cc();
        if (hK != "") {
            this.fy.cVd({
                postId: this.pY,
                replyId: this.cOA,
                content: hK,
                anonymous: this.fq.bYq()
            },
            bR.bwZ(this.fq.zZ()))
        } else {
            bR.showToastTips({
                content: "请输入评论内容！",
                type: 2
            })
        }
    };
    Fv.cOB = function(bhg) {
        if (!bhg) {
            eu.cp.bT({
                type: 1,
                message: "发表失败，请刷新重试"
            });
            return
        }
        if (this.bgP) {
            this.bgP(bhg)
        }
        this.blU(false)
    };
    Fv.bF = function(Y) {
        this.bgP = Y.submitCallback;
        this.pY = Y.postId;
        this.cOA = Y.replyId;
        this.bI(Y);
        this.blU(false)
    };
    Fv.bL = function() {
        if ( !! this.fq) {
            this.fq = bR.bgB.bg(this.fq)
        }
        this.bO()
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    cC = NEJ.P("edu.d"),
    bR = NEJ.P("edu.u"),
    SC;
    var cF = bm.dD(".#<uispace>{border-bottom:1px solid #eee;}.#<uispace> .m-detailInfoItem .bar{padding:5px 0;}");
    var eg = bm.bY("<div></div>");
    bR.blS = NEJ.C();
    SC = bR.blS.bu(bR.cq, true);
    SC.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    SC.bP = function() {
        this.bQ();
        this.fy = new cC.vm;
        this.fy.bf("onDelComment", this.cOy.Z(this))
    };
    SC.cOy = function(W) {
        if ( !! W) {
            this.bn("onDelSuc", W);
            bR.blS.bg(this)
        }
    };
    SC.qw = function() {
        bR.cp.bT({
            type: 1,
            message: "你确定删除该评论吗？",
            okFunc: function() {
                this.fy.cUB(this.blR.postId, this.blR.id)
            }.Z(this),
            cancelFunc: dk.Z(this),
            focusNum: 1
        })
    };
    SC.bF = function(Y) {
        this.bI(Y);
        this.blR = Y.commentVo;
        this.vs = bR.bgR.bh({
            parent: this.bb,
            infoVo: this.blR,
            userDto: this.blR.commentor,
            showCmtBtn: false,
            type: bR.CONST.TALK_VOTE_COMMENT,
            onVote: function(W) {
                this.bn("onVote", W)
            }.Z(this),
            onBanned: function() {
                this.bn("onBanned")
            }.Z(this)
        });
        this.vs.bf("onDel", this.qw.Z(this))
    };
    SC.bL = function() {
        if ( !! this.vs) {
            this.vs = bR.bgR.bg(this.vs)
        }
        this.bO()
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    SE = NEJ.P("edu.m"),
    cC = NEJ.P("edu.d"),
    bR = NEJ.P("edu.u"),
    Iq;
    bR.bAY = NEJ.C();
    Iq = bR.bAY.bu(SE.BZ, true);
    Iq.bP = function() {
        this.yt = true;
        this.bQ();
        this.fy = new cC.vm;
        this.fy.bf("onGetCmtList", this.cOw.Z(this))
    };
    Iq.Ce = function(fA) {
        var cY = bR.blS.bh({
            commentVo: fA,
            onDelSuc: this.bgW.Z(this),
            onVote: function(W) {
                this.bn("onVote", W)
            }.Z(this),
            onBanned: function() {
                this.bn("onBanned")
            }.Z(this)
        });
        return cY
    };
    Iq.Ca = function(cY) {
        return bR.blS.bg(cY)
    };
    Iq.yp = function(kS) {
        var bd = kS ? kS.index: -1;
        if ( !! this.fN && this.fN != bd) {
            this.fN = bd;
            this.fy.cVm(this.bho.id, this.fN)
        }
    };
    Iq.cOw = function(Bw) {
        if ( !! Bw) {
            var dU = this.bYh(Bw);
            this.sr(dU);
            this.bYg(Bw)
        }
    };
    Iq.bYg = function(Bw) {
        if (Bw) {
            this.bn("onUpdateCmtCnt", Bw.totalCount)
        }
    };
    Iq.bYh = function(Bw) {
        var dU = null;
        if ( !! Bw) {
            dU = {
                totlePageCount: Bw.totalPageCount,
                currentPageNo: Bw.pageNo,
                list: Bw.list || []
            }
        }
        return dU
    };
    Iq.bF = function(Y) {
        this.bho = Y.cmtData;
        Y.dataMaps = this.bYh(Y.commentsMaps);
        this.bI(Y);
        this.bYg(Y.commentsMaps)
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    bE = NEJ.P("nej.u"),
    bR = NEJ.P("edu.u"),
    SG;
    var cF = bm.dD(".#<uispace> .triangle{position:absolute;top:0;width:14px;height:10px;background: url(" + dx.imageUrlMap.forum_icon_sprite + ") no-repeat -100px -2px;}.#<uispace> .wrap{margin-top:7px;border:1px solid #ddd;border-radius:2px;}.#<uispace> .wrap .m-comment-pool{padding:0 10px;}.#<uispace> .wrap .m-comment-pool .j-list{padding-bottom:20px;}.#<uispace> .wrap .m-add-comment{padding:15px 10px;background-color:#fafafa;border-top:1px solid #eee;position:relative;}");
    var cOn = bm.bY('<div class="m-commentWrapper f-pr f-cb"><div class="wrap f-fr"><div class="m-comment-pool j-commentpool"></div><div class="m-add-comment j-addcomment"></div></div><div class="j-triangle triangle"></div></div>');
    bR.blO = NEJ.C();
    SG = bR.blO.bu(bR.cq, true);
    SG.bU = function() {
        this.bW = cOn;
        this.dv = cF
    };
    SG.bP = function() {
        this.bQ();
        this.bBi = bm.bc(this.bb, "j-triangle")[0];
        this.cOm = bm.bc(this.bb, "j-commentpool")[0];
        this.cOi = bm.bc(this.bb, "j-addcomment")[0]
    };
    SG.cOf = function(bhg) {
        if ( !! bhg && !!this.bhx) {
            this.bhx.bgl(bhg);
            this.bn("onAddItem")
        }
    };
    SG.bF = function(Y) {
        this.bI(Y);
        this.bho = Y.cmtData;
        this.bBi.style.right = Y.triRight + "px" || "0px";
        this.blL = bR.bAH.bh({
            parent: this.cOi,
            postId: this.bho.postId,
            replyId: this.bho.id,
            submitCallback: this.cOf.Z(this),
            onBanned: function() {
                this.bn("onBanned")
            }.Z(this)
        });
        this.bhx = bR.bAY.bh({
            parent: this.cOm,
            cmtData: this.bho,
            commentsMaps: Y.commentsMaps,
            onUpdateCmtCnt: function(W) {
                this.bn("onUpdateCmtCnt", W)
            }.Z(this),
            onDelItem: function() {
                this.bn("onDelItem")
            }.Z(this),
            onVote: function(W) {
                this.bn("onVote", W)
            }.Z(this),
            onBanned: function() {
                this.bn("onBanned")
            }.Z(this)
        })
    };
    SG.cNS = function(qd) {
        if ( !! qd) {
            bR.bw(this.bBi)
        } else {
            bR.bt(this.bBi)
        }
    };
    SG.bL = function() {
        if ( !! this.bhx) {
            this.bhx = bR.bAY.bg(this.bhx)
        }
        if ( !! this.blL) {
            this.blL = bR.bAH.bg(this.blL)
        }
        this.bO()
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    cC = NEJ.P("edu.d"),
    bR = NEJ.P("edu.u"),
    IC;
    var cF = bm.dD(".#<uispace>{border-bottom:1px solid #eee;zoom:1;}.#<uispace> .m-commentWrapper{margin:-5px 0 15px 0;}.#<uispace> .m-commentWrapper .wrap{width:570px; position:relative;}");
    var eg = bm.bY('<div class="f-pr"></div>');
    bR.blK = NEJ.C();
    IC = bR.blK.bu(bR.cq, true);
    IC.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    IC.bP = function() {
        this.bQ();
        this.fy = new cC.vm;
        this.fy.bf("onDelReply", this.cNQ.Z(this))
    };
    IC.cNQ = function(W) {
        if ( !! W) {
            this.blJ(0);
            this.bn("onDelSuc", W);
            bR.blK.bg(this)
        }
    };
    IC.qw = function() {
        bR.cp.bT({
            type: 1,
            message: "<b>你确定删除该回复吗？</b><p>确定后将删除该回复下的全部评论</p>",
            okFunc: function() {
                this.fy.cVK(this.qO.postId, this.qO.id)
            }.Z(this),
            cancelFunc: dk.Z(this),
            focusNum: 1
        })
    };
    IC.bmb = function(kg, bj) {
        if ( !! this.Ez) {
            this.Ez = bR.blO.bg(this.Ez)
        } else if (this.qO.countComment || !kg) {
            if (eu.Gs() > 0 && !this.qO.countComment) {
                this.bn("onBanned");
                return
            }
            this.Ez = bR.blO.bh({
                parent: this.bb,
                cmtData: this.qO,
                triRight: this.vs.cOI() * 40 + 20,
                onUpdateCmtCnt: this.blJ.Z(this),
                onAddItem: function() {
                    this.blJ(this.qO.countComment + 1);
                    this.bn("onAddCmtItem", this.qO)
                }.Z(this),
                onDelItem: function() {
                    this.blJ(this.qO.countComment - 1)
                }.Z(this),
                onVote: function(W) {
                    this.bn("onVote", W)
                }.Z(this),
                onBanned: function() {
                    this.bn("onBanned")
                }.Z(this)
            });
            this.Ez.kf().style.zIndex = 99;
            if (!this.qO.countComment) {
                this.Ez.blL.blU(true)
            }
        }
    };
    IC.blJ = function(bYf) {
        this.qO.countComment = bYf > 0 ? bYf: 0;
        this.vs.bYj(this.qO.countComment);
        if ( !! this.Ez) {
            this.Ez.cNS( !! this.qO.countComment)
        }
    };
    IC.bF = function(Y) {
        this.bI(Y);
        this.qO = Y.replyVo;
        this.qO.countComment = this.qO.countComment || 0;
        this.bb.style.zIndex = Y.zIndex || 0;
        this.vs = bR.bgR.bh({
            parent: this.bb,
            infoVo: this.qO,
            userDto: this.qO.replyer,
            showCmtBtn: true,
            type: bR.CONST.TALK_VOTE_REPLY,
            onVote: function(W) {
                this.bn("onVote", W)
            }.Z(this)
        });
        this.vs.kf().style.zIndex = 100;
        this.vs.bf("onDel", this.qw.Z(this));
        this.vs.bf("onCmt", this.bmb.Z(this, false));
        this.vs.bYj(this.qO.commentCount);
        this.bmb(true)
    };
    IC.bL = function() {
        if ( !! this.vs) {
            this.vs = bR.bgR.bg(this.vs)
        }
        if ( !! this.Ez) {
            this.Ez = bR.blO.bg(this.Ez)
        }
        this.bO()
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    bE = NEJ.P("nej.u"),
    SE = NEJ.P("edu.m"),
    cC = NEJ.P("edu.d"),
    bR = NEJ.P("edu.u"),
    Bm;
    bR.bBx = NEJ.C();
    Bm = bR.bBx.bu(SE.BZ, true);
    Bm.bP = function() {
        this.yt = true;
        this.bQ();
        this.fy = new cC.vm;
        this.fy.bf("onGetReplyList", this.cNl.Z(this))
    };
    Bm.Ce = function(fA) {
        var cY = bR.blK.bh({
            replyVo: fA,
            onDelSuc: this.bgW.Z(this),
            onAddCmtItem: function(W) {
                this.bn("onAddCmtItem", W)
            }.Z(this),
            onVote: function(W) {
                this.bn("onVote", W)
            }.Z(this),
            onBanned: function() {
                this.bn("onBanned")
            }.Z(this)
        });
        return cY
    };
    Bm.Ca = function(cY) {
        return bR.blK.bg(cY)
    };
    Bm.yp = function(kS) {
        var bd = kS ? kS.index: -1;
        if ( !! this.fN && this.fN != bd) {
            this.fN = bd;
            this.fy.cVF(this.ea.id, this.gF, this.ST, this.fN)
        }
    };
    Bm.cNl = function(Bj) {
        if ( !! Bj) {
            var dU = this.bYe(Bj);
            this.sr(dU);
            this.bYd(Bj)
        }
    };
    Bm.bYd = function(Bj) {
        if (Bj) {
            this.bn("updateCount", Bj.totalCount)
        }
    };
    Bm.bYe = function(Bj) {
        var dU = null;
        if ( !! Bj) {
            dU = {
                totlePageCount: Bj.totalPageCount,
                currentPageNo: Bj.pageNo,
                list: Bj.list || []
            }
        }
        return dU
    };
    Bm.cMt = function(ow, vz) {
        this.gF = ow;
        this.ST = vz;
        this.cfI(1)
    };
    Bm.dmX = function() {
        return {
            sortType: this.gF,
            sortAsc: this.ST
        }
    };
    Bm.bF = function(Y) {
        this.ea = Y.postVo;
        this.gF = Y.sortType;
        this.ST = Y.sortAsc;
        Y.dataMaps = this.bYe(Y.replysMaps);
        this.bI(Y);
        this.bYd(Y.replysMaps)
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    bR = NEJ.P("edu.u"),
    Eh;
    var cF = bm.dD(".#<uispace> {line-height:20px;color:#666;}.#<uispace> .divider{display:inline-block;border-left:1px solid #ddd;margin:0px 10px 0px 5px;}.#<uispace> a{color:#666;cursor:pointer;}.#<uispace> a:hover{color:#61A500;text-decoration:none;}.#<uispace> a span{background:url(" + dx.imageUrlMap.forum_icon_sprite + ") no-repeat -4999px -4999px;margin-left:4px;display:inline-block;width:12px;height:20px;vertical-align:top;}.#<uispace> .upsort,.#<uispace> .downsort{color:#61A500;}.#<uispace> .double.nosort span{background-position:0 2px;}.#<uispace> .double.downsort span{background-position:-20px 2px;}.#<uispace> .double.upsort span{background-position:-38px 2px;}");
    var cLM = bm.bY('<div>排序方式：<a class="j-time double">回复时间<span></span></a><span class="divider"></span><a class="j-vote single">投票数</a</div>');
    bR.bBI = NEJ.C();
    Eh = bR.bBI.bu(bR.cq, true);
    Eh.bU = function() {
        this.bW = cLM;
        this.dv = cF
    };
    Eh.bP = function() {
        this.bQ();
        this.cLD = bm.bc(this.bb, "j-time")[0];
        this.cLm = bm.bc(this.bb, "j-vote")[0];
        this.IG = {
            gmt_create: this.cLD,
            vote_count: this.cLm
        };
        for (var i in this.IG) {
            ch.bf(this.IG[i], "click", this.bXY.Z(this, i, true))
        }
    };
    Eh.bXY = function(ow, gO) {
        var vz = this.cLd(this.IG[ow]);
        if ( !! gO) {
            this.gF = ow;
            this.ST = vz;
            this.bn("onSortChange", {
                sortType: ow,
                sortAsc: vz
            })
        }
    };
    Eh.cLd = function(rz) {
        if (!rz) return;
        var vz;
        if (bm.hJ(rz, "nosort")) {
            if ( !! this.bBP) {
                this.bXW(this.bBP)
            }
            this.bBP = rz;
            vz = this.ST || "asc";
            bm.FT(rz, "nosort", vz == "asc" ? "upsort": "downsort")
        } else if (bm.hJ(rz, "downsort")) {
            bm.FT(rz, "downsort", "upsort");
            vz = "asc"
        } else if (bm.hJ(rz, "upsort")) {
            bm.FT(rz, "upsort", "downsort");
            vz = "desc"
        }
        return vz
    };
    Eh.bXW = function(rz) {
        if ( !! rz) {
            bm.bZ(rz, "downsort");
            bm.bZ(rz, "upsort");
            bm.bJ(rz, "nosort")
        }
    };
    Eh.cKH = function(bhY) {
        bhY = bhY || [];
        for (var i in this.IG) {
            bR.bt(this.IG[i])
        }
        for (var j = 0; j < bhY.length; j++) {
            if ( !! this.IG[bhY[j]]) {
                var hc = this.IG[bhY[j]];
                bR.bw(hc)
            }
        }
    };
    Eh.bF = function(Y) {
        this.bI(Y);
        this.bBP = null;
        this.cKH(Y.showTypes);
        if (Y.sortType != undefined) {
            this.cKu(Y.sortType, Y.sortAsc)
        }
    };
    Eh.dna = function() {
        return {
            sortType: this.gF,
            sortAsc: this.ST
        }
    };
    Eh.cKu = function(ow, vz) {
        this.gF = ow;
        this.ST = vz;
        for (var i in this.IG) {
            this.bXW(this.IG[i])
        }
        this.bXY(ow, false)
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    ch = NEJ.P("nej.v"),
    bE = NEJ.P("nej.u"),
    cC = NEJ.P("edu.d"),
    bR = NEJ.P("edu.u"),
    rB,
    cJH;
    var cF = bm.dD(".#<uispace> .rinfobox{padding:30px 0 10px 0; border-bottom:1px solid #eee;}.#<uispace> .allbox{margin-bottom:20px;}");
    var eg = bm.bY('<div><div class="j-post"></div><div class="j-banState"></div><div class="rinfobox f-cb"><h4 class="j-reply-info f-fl"></h4><div class="j-reply-sort f-fr"></div></div><div class="j-reply-all allbox"></div><div class="j-reply-add"></div></div>');
    bR.SZ = NEJ.C();
    rB = bR.SZ.bu(bR.cq, true);
    cJH = bR.SZ.cE;
    rB.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    rB.bP = function() {
        this.bQ();
        this.cJE = bm.bc(this.bb, "j-post")[0];
        this.cJD = bm.bc(this.bb, "j-reply-info")[0];
        this.cJB = bm.bc(this.bb, "j-reply-sort")[0];
        this.cJz = bm.bc(this.bb, "j-reply-all")[0];
        this.cJu = bm.bc(this.bb, "j-reply-add")[0];
        this.XJ = bm.bc(this.bb, "j-banState")[0];
        this.fy = new cC.vm;
        this.fy.bf("oncheckUserBannedList", this.bik.Z(this, -1, "banned"));
        this.uz = new cC.CH;
        this.uz.bf("ongetMocForumDto", this.bik.Z(this, -1, "close"))
    };
    rB.Ba = function(OM) {
        if ( !! this.XM && !!OM) {
            this.XM.cMt(OM.sortType, OM.sortAsc)
        }
    };
    rB.bCi = function() {
        bm.sD(this.XJ)
    };
    rB.bzJ = function() {
        if ( !! this.XN) {
            this.XN.bYp(true);
            bm.sD(this.XN.kf())
        } else if (this.XO > 0) {
            this.bCi()
        }
    };
    rB.cJq = function() {
        this.ea.countReply -= 1;
        this.bCm()
    };
    rB.cJi = function(cJa) {
        this.ea.countReply = cJa;
        this.bCm()
    };
    rB.bCm = function() {
        this.cJD.innerText = "共" + (this.ea.countReply || 0) + "回复"
    };
    rB.cIY = function(bxl) {
        this.biu.bgs(true);
        this.XM.bgl(bxl);
        this.ea.countReply += 1;
        this.bCm();
        if (!dx.isPreview) {
            bR.eE("forum", "answerPost", bR.np(this.bCr()))
        }
    };
    rB.bCr = function() {
        var gm = {
            userId: bR.hj().id,
            courseId: dx.courseDto.id,
            termId: this.ea.termId,
            postId: this.ea.id,
            postType: this.ea.type
        };
        if ( !! this.ea.relateUnit) {
            gm["lessonId"] = this.ea.relateUnit.lessonId;
            gm["unitId"] = this.ea.relateUnit.id
        }
        return gm
    };
    rB.bXT = function(W) {
        if (!dx.isPreview) {
            var gm = this.bCr();
            NEJ.X(gm, W);
            bR.eE("forum", "vote", bR.np(gm))
        }
    };
    rB.cIS = function() {
        this.XO = eu.Gs();
        this.biu = bR.bzk.bh({
            parent: this.cJE,
            postVo: this.ea,
            onReply: this.bzJ.Z(this),
            onVote: this.bXT.Z(this),
            onBanned: this.bCi.Z(this)
        });
        this.vH = bR.bBI.bh({
            parent: this.cJB,
            showTypes: ["gmt_create", "vote_count"],
            sortType: this.bXS,
            sortAsc: this.bXR,
            onSortChange: this.Ba.Z(this)
        });
        this.XM = bR.bBx.bh({
            parent: this.cJz,
            postVo: this.ea,
            sortType: this.bXS,
            sortAsc: this.bXR,
            updateCount: this.cJi.Z(this),
            onDelItem: this.cJq.Z(this),
            onAddCmtItem: function(W) {
                this.biu.bgs(true);
                if (!dx.isPreview) {
                    var gm = this.bCr();
                    gm["replyId"] = W.id;
                    bR.eE("forum", "commentReply", bR.np(gm))
                }
            }.Z(this),
            onVote: this.bXT.Z(this),
            onBanned: this.bCi.Z(this)
        });
        if (this.XO < 0) {
            this.XN = bR.bAq.bh({
                parent: this.cJu,
                postId: this.ea.id,
                termId: this.ea.termId,
                submitCallback: this.cIY.Z(this)
            })
        } else {
            this.XJ.innerHTML = bm.bX("jst-edu-" + this.XO)
        }
        this.fy.cWG(this.ea.id);
        this.fy.cWy(this.ea.id, this.ea.termId)
    };
    rB.bF = function(Y) {
        this.bI(Y);
        this.lW = Y.forumData || {};
        this.cA = Y.termId || dx.termDto.id;
        this.uz.bZq(this.lW.subForumId > 0 ? this.lW.subForumId: this.lW.forumId);
        this.fy.bYT(this.cA);
        this.biC = 2;
        this.ea = Y.postVo;
        this.bXS = "gmt_create";
        this.bXR = "desc";
        this.XJ.innerHTML = ""
    };
    rB.bik = function(bCA, bz, W) {
        if ( !! W) {
            if (bz == "banned") {
                dx.bannedState = {
                    site: W[0],
                    term: W[1]
                }
            } else if (bz == "close") {
                dx.mergedClosedStatus = W.mergedClosedStatus;
                dx.forumType = W.type
            }
        }
        this.biC += bCA;
        if (this.biC > 0) return;
        this.cIS()
    };
    rB.es = function() {
        if ( !! this.biu) {
            this.biu = bR.bzk.bg(this.biu)
        }
        if ( !! this.vH) {
            this.vH = bR.bBI.bg(this.vH)
        }
        if ( !! this.XM) {
            this.XM = bR.bBx.bg(this.XM)
        }
        if ( !! this.XN) {
            this.XN = bR.bAq.bg(this.XN)
        }
    };
    rB.bL = function() {
        this.es();
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    fQ,
    jh = "ck-dataReportCache";
    d.Dl = NEJ.C();
    fQ = d.Dl.bu(d.hA);
    fQ.cIJ = function(fh, cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getCourseLearnCountInfo",
            param: [fh, cd],
            onload: this.bCF.Z(this)
        })
    };
    fQ.bCF = function(W) {
        this.bn("onGetCourseLearnCountInfo", W)
    };
    fQ.cIx = function(fh, cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getForumLogLearnInfo",
            param: [fh, cd],
            onload: this.Yc.Z(this)
        })
    };
    fQ.Yc = function(W) {
        this.bn("onGetForumLogLearnInfo", W)
    };
    fQ.cIv = function(cd, Rm) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getLastestMocTestLogs",
            param: [cd, Rm],
            onload: this.bCJ.Z(this)
        })
    };
    fQ.bCJ = function(W) {
        this.bn("onGetLastestMocTestLogs", W)
    };
    fQ.cIo = function(cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getLastestMocTestLogsMap",
            param: [cd],
            onload: this.bCL.Z(this)
        })
    };
    fQ.bCL = function(W) {
        this.bn("onGetLastestMocTestLogsMap", W)
    };
    fQ.cIf = function(fh, cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getForumLogLearnTrendKeys",
            param: [fh, cd],
            onload: this.cHX.Z(this)
        })
    };
    fQ.cHX = function(W) {
        this.bn("onGetForumLogLearnTrendKeys", W)
    };
    fQ.cHT = function(fh, cd, bdm) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getForumLogLearnTrendValues",
            param: [fh, cd, bdm],
            onload: this.cHR.Z(this)
        })
    };
    fQ.cHR = function(W) {
        this.bn("onGetForumLogLearnTrendValues", W)
    };
    fQ.bCQ = function(fh, cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getMocTestChartDtoList",
            param: [fh, cd],
            onload: this.cHF.Z(this)
        })
    };
    fQ.cHF = function(W) {
        this.bn("onGetTestLogLearnTrendKeys", W)
    };
    fQ.bCS = function(cd, dZ) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getDaysMocTestLogByTestId",
            param: [cd, dZ],
            onload: this.cHD.Z(this)
        })
    };
    fQ.cHD = function(W) {
        this.bn("onGetTestLogLearnTrendValues", W)
    };
    fQ.cHz = function(cd) {
        this.bK({
            key: jh + bD,
            url: "MocScoreManagerBean.getTestsList",
            param: [cd],
            onload: this.cHy.Z(this)
        })
    };
    fQ.cHy = function(W) {
        this.bn("onGetTestsList", W)
    };
    fQ.cHw = function(dZ, bz) {
        this.bK({
            key: jh + bD,
            url: "MocScoreManagerBean.getCountForTestScore",
            param: [dZ, bz],
            onload: this.bCX.Z(this)
        })
    };
    fQ.bCX = function(W) {
        this.bn("onGetCountForTestScore", W)
    };
    fQ.cHt = function(cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getMocExamChartDtoList",
            param: [cd],
            onload: this.cHr.Z(this)
        })
    };
    fQ.cHr = function(W) {
        this.bn("onGetMocExamChartDtoList", W)
    };
    fQ.cHq = function(cd, yc) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getDaysMocExamLogByExamId",
            param: [cd, yc],
            onload: this.cGK.Z(this)
        })
    };
    fQ.cGK = function(W) {
        this.bn("onGetDaysMocExamLogByExamId", W)
    };
    fQ.cGH = function(cd) {
        this.bK({
            key: jh + bD,
            url: "MocScoreManagerBean.getPieOfPass",
            param: [cd],
            onload: this.cGG.Z(this)
        })
    };
    fQ.cGG = function(W) {
        this.bn("ongetPieOfPass", W)
    };
    fQ.cGB = function(cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getTermLearnNowTotalCount",
            param: [cd],
            onload: this.cGr.Z(this)
        })
    };
    fQ.cGr = function(W) {
        this.bn("ongetTotalStu", W)
    };
    fQ.cGn = function(fh) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getCourseStoreCount",
            param: [fh],
            onload: this.cGm.Z(this)
        })
    };
    fQ.cGm = function(W) {
        this.bn("onGetCourseStoreCount", W)
    };
    fQ.cGg = function(cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getVideoLearnCountInfo",
            param: [cd],
            onload: this.cGd.Z(this)
        })
    };
    fQ.cGd = function(W) {
        this.bn("onGetVideoLearnCountInfo", W)
    };
    fQ.cFN = function(cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getPdfLearnCountInfo",
            param: [cd],
            onload: this.cFJ.Z(this)
        })
    };
    fQ.cFJ = function(W) {
        this.bn("onGetPdfLearnCountInfo", W)
    };
    fQ.cFB = function(cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getTextLearnCountInfo",
            param: [cd],
            onload: this.cFc.Z(this)
        })
    };
    fQ.cFc = function(W) {
        this.bn("onGetTextLearnCountInfo", W)
    };
    fQ.cEN = function(fh, cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getVideoLearnTrendKeys",
            param: [fh, cd],
            onload: this.cEM.Z(this)
        })
    };
    fQ.cEM = function(W) {
        this.bn("onGetVideoLearnTrendKeys", W)
    };
    fQ.cEL = function(fh, cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getPdfLearnTrendKeys",
            param: [fh, cd],
            onload: this.cEJ.Z(this)
        })
    };
    fQ.cEJ = function(W) {
        this.bn("onGPdfLearnTrendKeys", W)
    };
    fQ.cEH = function(fh, cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getTextLearnTrendKeys",
            param: [fh, cd],
            onload: this.cED.Z(this)
        })
    };
    fQ.cED = function(W) {
        this.bn("onGetTextLearnTrendKeys", W)
    };
    fQ.cEy = function(cd, bdm) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getLearnTrendValues",
            param: [cd, bdm],
            onload: this.cEx.Z(this)
        })
    };
    fQ.cEx = function(W) {
        this.bn("onGetLearnTrendValues", W)
    };
    fQ.cEf = function(cd) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getTermUnenrollCountInfo",
            param: [cd],
            onload: this.bDx.Z(this)
        })
    };
    fQ.bDx = function(W) {
        this.bn("onGetTermUnenrollCountInfo", W)
    };
    fQ.bXD = function(xQ, bz, cDS) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getMocForumStatisticsInfo",
            param: [xQ, bz, cDS],
            onload: this.cDN.Z(this)
        })
    };
    fQ.cDN = function(W) {
        this.bn("onGetMocForumStatisticsInfo", W)
    };
    fQ.cDF = function(cd, bGT) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getForumActiveUsers",
            param: [cd, bGT],
            onload: this.cDz.Z(this)
        })
    };
    fQ.cDz = function(W) {
        this.bn("onGetForumActiveUsers", W)
    };
    fQ.cDw = function(ca, bz) {
        this.bK({
            key: jh + bD,
            url: "ChartStatisticsBean.getForumPartInValues",
            param: [ca, bz],
            onload: this.cDu.Z(this)
        })
    };
    fQ.cDu = function(W) {
        this.bn("ongetForumPartInValues", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    ui = NEJ.P("nej.ui"),
    YG;
    var du = e.bY('<div class="u-userranklist f-cb"><div class="j-pool pool"></div><div class="j-pager pager"></div></div>');
    var dE = e.ee('<table class="u-table" style="width:100%"><tr><th>昵称</th><th>贴子数(主题/回复/评论)</th><th>被顶次数</th></tr><col width="30%"></col><col width="40%"></col><col width="30%"></col>{list data as q}<tr><td class="j-name userInfo"><a href="${q.link}" class="username f-fl f-db f-thide" target="_blank" title="${q.name|default:\'\'|escape}">${q.name|default:\'\'|escape}</a></td><td class="f-fc6">${q.allCount|default:0}<span class="f-fc9">（ ${q.postCount|default:0}/${q.replyCount|default:0}/${q.commentCount|default:0} ）</span></td><td class="f-fc6">${q.votedCount|default:0}</td></tr>{/list}</table><div class="b-20"></div>');
    var cF = e.dD(".#<uispace> .userInfo .type{float:left; font-size:12px; margin:0 5px;padding:0 5px;display:inline-block;line-height:18px;color:#fff;text-align:center;}.#<uispace> .userInfo .type.lector{background-color:#6CB4FB;}.#<uispace> .userInfo .type.manager{background-color:#9BCE00;}.#<uispace> .userInfo .type.assist{background-color:#9BCE00;}.#<uispace> .userInfo .username{max-width:80%;}");
    eu.Tw = NEJ.C();
    YG = eu.Tw.bu(eu.cq, !0);
    YG.bU = function() {
        this.bW = du;
        this.dv = cF
    };
    YG.bP = function() {
        this.bQ();
        this.hR = e.bc(this.bb, "j-pool")[0];
        this.jK = e.bc(this.bb, "j-pager")[0];
        this.cg = new d.Dl;
        this.cg.bf("onGetForumActiveUsers", this.bDJ.Z(this))
    };
    YG.bDJ = function(W) {
        if ( !! this.dL) {
            this.dL = ui.ha.bg(this.dL)
        }
        if (!W) {
            this.hR.innerHTML = '<div class="empty j-empty"><span class="f-ib">还没有用户发布帖子</span></div>';
            return
        }
        this.hb = W.list;
        if (!this.hb) {
            this.hR.innerHTML = '<div class="empty j-empty"><span class="f-ib">还没有用户发布帖子</span></div>';
            return
        }
        var bXC = g.urlPrefix.courseLearnPrefix,
        bwS = eu.hj();
        if ( !! this.fR) {
            bXC = g.urlPrefix.spocCourseLearnPrefix
        }
        for (var i = this.hb.length - 1; i >= 0; i--) {
            if ( !! this.hb[i]) {
                this.hb[i].link = bXC + encodeURIComponent(this.YL) + "-" + encodeURIComponent(g.courseDto.id) + "?tid=" + this.cA + "#" + eu.umi("learnForumPersonal") + "?uid=" + this.hb[i].member.id
            }
            this.hb[i].name = this.hb[i].member.nickName;
            if ( !! this.hb[i].member.mocAuthenticatedMemberDto && (eu.bfo([eu.CONST.ROLE_SCHOOLSUPER_ADMIN, eu.CONST.ROLE_OUT_COURSE_EDITOR]) || !!eu.FM(this.btB, bwS.id) || eu.bhl(g.courseDto.ordinaryEditors))) {
                this.hb[i].name = eu.Fq(this.hb[i].member.mocAuthenticatedMemberDto)
            }
        }
        this.hR.innerHTML = e.bX(dE, {
            data: this.hb
        });
        u.bA(e.bc(this.hR, "j-name"),
        function(bB, bd) {
            if (eu.nu(this.hb[bd].member.roles, eu.CONST.ROLE_FORUM_MANAGER)) {
                bB.appendChild(e.iN("<span class='type manager'>管理员</span>"))
            } else {
                var ku = eu.FM(this.btB, this.hb[bd].member.id);
                if ( !! ku) {
                    switch (ku.lectorType) {
                    case eu.CONST.REL_TYPE_TERM_CHIEF_LECTOR:
                    case eu.CONST.REL_TYPE_TERM_LECTOR:
                        e.cS(bB)[0].innerText = this.hb[bd].member.realName || "无名氏";
                        e.cS(bB)[0].title = this.hb[bd].member.realName || "无名氏";
                        bB.appendChild(e.iN("<span class='type lector'>老师</span>"));
                        break;
                    case eu.CONST.REL_TYPE_TERM_ASSIST:
                        bB.appendChild(e.iN("<span class='type assist'>助教</span>"));
                        break
                    }
                }
            }
        }.Z(this));
        if ( !! W.query && W.query.totlePageCount > 1) {
            if ( !! this.Wn && W.query.totlePageCount > 5) {
                W.query.totlePageCount = 5
            }
            this.dL = ui.ha.fd({
                parent: this.jK,
                index: W.query.pageIndex || 0,
                total: W.query.totlePageCount || 0,
                clazz: "u-pager f-fr",
                onchange: function(eK) {
                    if ( !! eK.last) {
                        this.eC["p"] = eK.index;
                        g.dispatcher.cB(this.oL + "?" + u.At(this.eC))
                    }
                }.Z(this)
            })
        }
    };
    YG.bF = function(Y) {
        this.bI(Y);
        this.cA = Y.termId;
        this.YL = Y.schoolName;
        this.bXB = Y.courseName;
        this.fR = Y.isSpoc || false;
        this.eC = Y.param || {};
        this.eC["p"] = parseInt(this.eC["p"] || 1);
        this.oL = Y.umi;
        this.btB = Y.lector || [];
        this.Wn = Y.limit || false;
        if ( !! this.Wn && this.eC["p"] > 5) {
            this.eC["p"] = 5
        }
        this.cg.cDF(this.cA, this.eC["p"])
    };
    YG.bL = function() {
        if ( !! this.dL) {
            this.dL = ui.ha.bg(this.dL)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    Jt;
    eu.bjD = NEJ.C();
    Jt = eu.bjD.bu(eu.cq, true);
    Jt.bP = function() {
        this.bQ()
    };
    Jt.bXA = f;
    Jt.bjE = f;
    Jt.bjF = f;
    Jt.blp = f;
    Jt.bjH = function() {
        return this.eo
    };
    Jt.bF = function(Y) {
        this.bI(Y);
        this.eS = Y.recordDto;
        this.ih = Y.mode || 0;
        this.sc = Y.position;
        this.AA = Y.noScore || false;
        this.blo = Y.showAnalysis;
        if ( !! this.eS) {
            this.eo = this.eS.qAnswerDto;
            this.ck = this.eS.questionDto
        }
        this.bjE();
        if (this.ih === 1) {
            e.FT(this.bb, "examMode", "analysisMode");
            this.bjF()
        } else {
            e.FT(this.bb, "analysisMode", "examMode");
            this.blp()
        }
    };
    Jt.bL = function() {
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    u = NEJ.P("nej.u"),
    eu = NEJ.P("edu.u"),
    ui = NEJ.P("nej.ui"),
    tL;
    var eg = e.bY('<div class="u-questionItem u-analysisQuestion"><div class="j-title f-cb title questionDes"><div class="position f-fl"></div><div class="qaDescription f-fl f-cb"><div class="qaCate j-qacate f-fl"></div><div class="f-richEditorText j-richTxt f-fl"></div></div></div><div class="j-answer answer"><div class="j-richTip f-fc9 f-fs0" style="margin-bottom: 10px;text-align: right;display:none;">答案内容超过5000字建议使用附件形式上传</div><div class="j-richOrText text f-f0 f-richEditorText"></div><div class="j-attachment attachment f-cb"><div class="j-attchInfo attchinfo f-thide"></div><div class="j-upload attchupload"></div></div><div class="j-evaluate"></div></div></div>');
    eu.bln = NEJ.C();
    tL = eu.bln.bu(eu.bjD, true);
    tL.bU = function() {
        this.bW = eg
    };
    tL.bP = function() {
        this.bQ();
        this.hY = e.bc(this.bb, "j-title")[0];
        this.xq = e.cS(this.hY);
        this.tz = e.bc(this.bb, "j-answer")[0];
        this.yZ = e.bc(this.tz, "j-richOrText")[0];
        this.JC = e.bc(this.tz, "j-upload")[0];
        this.Mw = e.bc(this.tz, "j-attchInfo")[0];
        this.bXz = e.bc(this.tz, "j-attachment")[0];
        this.TE = e.bc(this.bb, "j-qacate")[0];
        this.JE = e.bc(this.bb, "j-richTxt")[0];
        this.bXy = e.bc(this.bb, "j-richTip")[0];
        this.fl = new d.rV;
        this.fl.bf("onDeleteAttachment", this.bXx.Z(this))
    };
    tL.bXx = function(W) {
        this.Mw.innerHTML = "";
        if ( !! this.eo && !!this.eo.content) {
            this.eo.content.attachments = []
        }
        delete this.sJ
    };
    tL.TI = function() {
        var gV = this.bEq();
        return gV
    };
    tL.bka = function(cQ) {
        switch (cQ) {
        case "onSubmited":
            this.bli(true);
            return
        }
    };
    tL.bjE = function() {
        this.xq[0].innerText = (this.sc || 0) + 1;
        this.JE.innerHTML = this.ck.title || "";
        this.TE.innerHTML = !!this.JG ? "": "（" + this.ck.score + "分）";
        u.jE(this.JE)
    };
    tL.bjF = function() {
        eu.bt(this.bXy);
        if ( !! this.eo && this.eo.content) {
            e.bJ(this.yZ, "f-richEditorText");
            this.yZ.innerHTML = '<span class="tit f-fc3">回答：</span>' + this.eo.content.content || "";
            u.jE(this.yZ);
            if ( !! this.eo.content.attachments && this.eo.content.attachments.length > 0) {
                this.yZ.innerHTML += '<a class="downloadLink u-btn u-btn-default u-btn-sm" href="' + g.urlPrefix.attachmentPrefix + "?key=" + this.eo.content.attachments[0].filekey + "&aid=" + this.lo + '" target="_blank">下载附件</a>'
            }
        }
    };
    tL.cDc = function(W) {
        this.sJ = {
            filename: W.name,
            filekey: W.nosKey
        }
    };
    tL.bEq = function() {
        var ff = "",
        bXw = !!this.eo ? (this.eo.content || {}).attachments || [] : [];
        if ( !! this.Am) {
            ff = this.Am.cc()
        }
        if ( !! this.sJ) {
            bXw[0] = this.sJ
        }
        var gV = {
            qid: this.ck.id,
            type: eu.CONST.TYPE_SUBJECTIVE_NORMAL,
            content: {
                content: ff,
                attachments: bXw
            }
        };
        return gV
    };
    tL.blp = function() {
        e.bZ(this.yZ, "f-richEditorText");
        eu.bw(this.bXy);
        this.Am = ui.fK.bh({
            parent: this.yZ,
            content: !!this.eo ? (this.eo.content || {}).content || "": ""
        });
        this.JJ();
        if ( !! this.eo && this.eo.content && this.eo.content.attachments && this.eo.content.attachments.length > 0) {
            this.sJ = this.eo.content.attachments[0];
            this.bli(true)
        } else {
            this.Mw.innerText = ""
        }
    };
    tL.bli = function(cDa) {
        if (!this.sJ) {
            return
        }
        if (cDa) {
            this.Mw.innerHTML = '<a class="name f-db f-fl f-thide" href="' + g.urlPrefix.attachmentPrefix + "?key=" + this.sJ.filekey + "&aid=" + this.lo + '" target="_blank">' + eu.BB(this.sJ.filename || "") + "</a>"
        } else {
            this.Mw.innerHTML = '<div class="name f-fl f-thide">' + eu.BB(this.sJ.filename || "") + "</div>"
        }
        var bki = e.iN('<a class="del f-fl f-db">删除</a>');
        v.bf(bki, "click",
        function(bj) {
            v.dK(bj);
            eu.cp.bT({
                message: "删除后将立即生效，是否继续？",
                okFunc: function() {
                    if ( !! this.lo) {
                        this.fl.cZf(this.lo, this.sJ.filekey)
                    } else {
                        this.bXx()
                    }
                }.Z(this),
                cancelFunc: f
            })
        }.Z(this));
        this.Mw.appendChild(bki)
    };
    tL.JJ = function() {
        if ( !! this.eU) {
            this.eU = eu.QZ.bg(this.eU)
        }
        this.eU = eu.QZ.bh({
            parent: this.JC,
            tip: "支持txt, png, jpg, html, pdf, jpeg, mp3, rar,zip,文件最大50M。<br/>请将Word、Excel和PowerPoint文件转为pdf格式上传。",
            suffixs: {
                support: ["txt", "pdf", "html", "jpg", "jpeg", "png", "mp3", "rar", "zip"],
                max: "50M"
            },
            beginUpload: function() {
                eu.bt(this.Mw)
            }.Z(this),
            onFinishUpload: function(W) {
                if ( !! W) {
                    this.JJ();
                    this.cDc(W);
                    this.bli(false);
                    eu.bw(this.Mw)
                }
            }.Z(this),
            abortUpload: function() {
                this.JJ();
                this.bli(false);
                eu.bw(this.Mw)
            }.Z(this)
        })
    };
    tL.bF = function(Y) {
        this.lo = Y.aid;
        this.bI(Y)
    };
    tL.bL = function() {
        if ( !! this.Am) {
            this.Am = ui.fK.bg(this.Am)
        }
        if ( !! this.eU) {
            this.eU = eu.QZ.bg(this.eU)
        }
        this.yZ.innerHTML = "";
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    bD = u.eW(),
    TN,
    bEC = "ck-quizCache";
    d.JK = NEJ.C();
    TN = d.JK.bu(d.bSJ);
    TN.bEE = function(dZ) {
        this.bK({
            key: bEC + bD,
            url: "MocAdminQuizBean.previewTestDraft",
            param: [dZ],
            onload: this.cCQ.Z(this)
        })
    };
    TN.cCQ = function(W) {
        this.bn("onGetPreviewQuizList", W)
    };
    TN.bEG = function(dZ, byu, cCw) {
        this.bK({
            key: bEC + bD,
            url: "MocQuizBean.getQuizPaperDto",
            param: [dZ, byu, cCw],
            onload: this.cCq.Z(this)
        })
    };
    TN.cCq = function(W) {
        this.bn("onGetQuizPaperList", W)
    };
    TN.blg = function(dZ, cCm, fa) {
        this.bK({
            key: bEC + bD,
            url: "MocQuizBean.getQuizInfo",
            param: [dZ, cCm, fa],
            onload: this.bEL.Z(this)
        })
    };
    TN.bEL = function(W) {
        this.bn("onGetQuizInfo", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bEM;
    eu.Zq = NEJ.C();
    bEM = eu.Zq.bu(eu.cq, true);
    bEM.bP = function() {
        this.bQ();
        this.hV = e.bc(this.bb, "j-configTxt")
    };
    bEM.bF = function(Y) {
        this.bI(Y);
        this.pt = Y.configObj || {
            type: "hw",
            txt: "作业"
        };
        u.bA(this.hV,
        function(bo) {
            bo.innerText = this.pt.txt
        }.Z(this))
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    Nq;
    eu.ble = NEJ.C();
    Nq = eu.ble.bu(eu.Zq, true);
    Nq.bU = function() {
        this.bW = e.bY(e.bX("jst-edu-learnHomeworkEvaluateStatusHead"))
    };
    Nq.bP = function() {
        this.bQ();
        this.cCl = e.bc(this.bb, "j-jd");
        this.bld = e.bc(this.bb, "j-lefttime");
        this.bXu = e.bc(this.bb, "j-status");
        this.bEU = e.bc(this.bb, "j-bar");
        this.cCh = e.bc(this.bb, "j-progress");
        this.bXt = e.bc(this.bb, "j-trainstatus")[0];
        this.fl = new d.rV;
        this.fl.bf("onGetEvaluateStatus", this.bXs.Z(this));
        this.fl.bf("onGetEvaluateStatusByAid", this.bXs.Z(this))
    };
    Nq.bF = function(Y) {
        this.bI(Y);
        this.te = Y.jdIndex;
        this.fM = Y.homeworkId;
        this.dT = Y.homeworkVo;
        this.lo = Y.aid;
        this.pc = this.dT.releaseTime;
        this.bkE = this.dT.deadline;
        this.bFd = this.dT.evaluateStart;
        this.bla = this.dT.evaluateEnd;
        this.cCa = this.dT.evaluateScoreReleaseTime;
        this.ZD = Y.evaluateNeedTrain;
        this.cBW();
        if (this.lo) {
            this.fl.dax(this.fM, this.lo)
        } else {
            this.fl.daB(this.fM, g.webUser.id)
        }
    };
    Nq.bXs = function(W) {
        if (!W) return;
        this.LS(false, 0);
        this.LS(false, 1);
        this.LS(false, 2);
        this.LS(false, 3);
        if (this.te >= eu.CONST.HW_PHASE_SUBMIT) {
            this.LS(W.stepSubmitted, 0)
        }
        if (this.te >= eu.CONST.HW_PHASE_EVALUATION) {
            this.LS(W.stepTrained, 1);
            this.LS(W.stepEvaluated, 2);
            this.LS(W.stepSelfEvaluated, 3)
        }
        if (this.ZD == eu.CONST.NEED_TRAIN_FALSE) {
            this.bXt.style.display = "none"
        } else {
            this.bXt.style.display = "block"
        }
    };
    Nq.LS = function(cBN, bd) {
        if ( !! cBN) {
            e.bJ(this.bXu[bd], "done")
        } else {
            e.bZ(this.bXu[bd], "done")
        }
    };
    Nq.cBW = function() {
        this.TV = eu.dG();
        this.TW = 0;
        this.MV = 0;
        this.bkZ = 0;
        var Fj = {};
        if (this.te == eu.CONST.HW_PHASE_SUBMIT) {
            this.MV = (this.TV - this.pc) / (this.bkE - this.pc);
            this.bkZ = this.bkE - this.TV < 0 ? -1 : Math.ceil((this.bkE - this.TV) / 1e3 / 24 / 3600);
            this.TW = 0;
            Fj["1"] = "feature";
            Fj["2"] = "feature"
        }
        if (this.te == eu.CONST.HW_PHASE_EVALUATION) {
            this.MV = (this.TV - this.bFd) / (this.bla - this.bFd);
            this.bkZ = this.bla - this.TV < 0 ? -1 : Math.ceil((this.bla - this.TV) / 1e3 / 24 / 3600);
            this.TW = 1;
            Fj["0"] = "pass";
            Fj["2"] = "feature"
        }
        if (this.te == eu.CONST.HW_PHASE_SCORE) {
            this.MV = (this.TV - this.pc) / (this.bkE - this.pc);
            this.TW = 2;
            Fj["0"] = "pass";
            Fj["1"] = "pass"
        }
        Fj[this.TW + ""] = "now";
        u.bA(this.cCl,
        function(bo, bd) {
            e.bZ(bo, "pass");
            e.bZ(bo, "now");
            e.bZ(bo, "feature");
            e.bJ(bo, Fj[bd + ""]);
            if ( !! this.bld[bd]) {
                this.bld[bd].innerHTML = ""
            }
        }.Z(this));
        if ( !! this.bld[this.TW]) {
            this.bld[this.TW].innerHTML = this.bkZ < 0 ? "(截止时间已过)": "(剩余" + (this.bkZ || 1) + "天)"
        }
        this.MV = this.MV > 1 ? 1 : this.MV;
        e.ev(this.cCh[this.TW], "width", (this.MV >= 0 ? this.MV: 0) * 100 + "%");
        this.bEU[0].title = eu.gA(this.pc) + "~" + eu.gA(this.bkE);
        this.bEU[1].title = eu.gA(this.bFd) + "~" + eu.gA(this.bla);
        this.bEU[2].title = eu.gA(this.cCa) + "发布成绩"
    };
    Nq.bL = function() {
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    tO;
    var eg = e.bY('<div class="u-evaluateItem"><div class="evaluateArea"><div class="j-bar bar"><span class="tit">互评模块</span><span>(该阶段只有在互评阶段开放后才可使用）</span></div><div class="j-content"><div class="j-list list"></div><div class="j-comment comment" style="display:none;"><div class="j-qscore tit"></div><span class="j-addComment add" style="display:none;">点评</span><div class="j-commentRichOrText detail"></div><div class="j-answerVisible f-cb av"><label class="answerVisible f-fl"><input type="checkbox" class="j-acb"/><span>答题者可见</span></label><div class="j-fb f-fl"></div></div></div></div></div></div>');
    var cBI = e.ee(' {if defined("xlist")}{list xlist as x}<div class="u-point"><div class="breif f-fc6"><p class="f-fc3">得分指导：</p><div class="f-richEditorText">${x.msg|default:""}</div></div><div class="detail"><p class="f-fc3">请给予评分：(满分${x.maxScore|default:0}分)</p><div class="s">{if !!x.details}{list x.details as d}<label class="d" for="j-select-${x.id}${d.score}-${instance}"><input id="j-select-${x.id}${d.score}-${instance}" type="radio" name="j-select-${x.id}-${instance}" class="j-select" data-jid="${x.id}" value="${d.score}" {if x.score && x.score.jscore == d.score}checked="true"{else}{if !x.score&&d.score==0}checked="true"{/if}{/if}/><span class="f-ib sc">${d.score}分</span></label>{/list}{else}<input type="radio" disabled/>{/if}</div></div></div>{/list}{/if}');
    var cBA = e.ee('{if defined("xlist")}{list xlist as x}<div class="u-point show"><div class="breif f-richEditorText">${x.msg|default:""}</div><div class="detail">{if !!x.refScore}{if !!x.score&&x.score.jscore}<div class="info pointscoreinfo"><span class="num">你的评分：${x.score.jscore}</span></div>{/if}{if !!x.refScore&&x.refScore.score>=0}<div class="info refscoreinfo"><span class="num">老师评分：${x.refScore.score}</span></div>{/if}{else}{if !!x.score&&x.score.jscore>=0}<div class="info pointscoreinfo"><span class="num">你的得分：${x.score.jscore}</span></div>{/if}{if !!x.selfScore&&x.selfScore.jscore>=0}<div class="info pointscoreinfo"><span class="num">自评评分：${x.selfScore.jscore}</span></div>{/if}{/if}</div></div>{/list}{/if}');
    eu.bFr = NEJ.C();
    tO = eu.bFr.bu(eu.cq, true);
    tO.bU = function() {
        this.bW = eg
    };
    tO.bP = function() {
        this.bQ();
        this.gi = e.bc(this.bb, "j-list")[0];
        this.bXr = e.bc(this.bb, "j-addComment")[0];
        this.yZ = e.bc(this.bb, "j-commentRichOrText")[0];
        this.gc = e.bc(this.bb, "j-content")[0];
        this.bFt = e.bc(this.bb, "j-comment")[0];
        this.tz = e.bc(this.bb, "j-answer")[0];
        this.dnj = e.bc(this.bb, "j-answerVisible")[0];
        this.bXk = e.bc(this.bb, "j-acb")[0];
        this.uo = e.bc(this.bb, "j-fb")[0];
        this.cAM = e.bc(this.bb, "j-qscore")[0];
        this.cAy = e.bc(this.bb, "j-bar")[0]
    };
    tO.TY = function() {
        var nH = this.kP || {
            qid: this.eo.qid
        };
        if ( !! this.Am) {
            nH.qcomment = this.Am.cc()
        }
        if (!nH.qcomment) {
            this.iG.cu("点评不能为空");
            return null
        }
        nH.answerCanViewComment = this.bXk.checked;
        if ( !! this.bXh) {
            nH.jitems = [];
            u.bA(this.bXh,
            function(bo) {
                if (bo.checked == true) {
                    var cAs = {
                        jid: e.df(bo, "jid"),
                        jscore: bo.value
                    };
                    nH.jitems.push(cAs)
                }
            }.Z(this))
        }
        return nH
    };
    tO.bkO = function() {};
    tO.bXg = function(bH) {
        var bB = e.iN(e.bX(cBI, {
            xlist: bH,
            instance: this.id
        }));
        return bB
    };
    tO.cAo = function(bH) {
        var bB = e.iN(e.bX(cBA, {
            xlist: bH
        }));
        return bB
    };
    tO.cAl = function() {
        e.bJ(this.bb, "initMode");
        eu.bt(this.bFt);
        var bB = this.bXg(["mock data"]);
        this.gi.appendChild(bB)
    };
    tO.cAd = function() {
        e.bJ(this.bb, "evaluateMode");
        eu.bw(this.bFt);
        eu.bw(this.bXr);
        if ( !! this.Zt && this.Zt.length > 0) {
            u.bA(this.Zt,
            function(bo) {
                if (bo.details[0].score > 0) {
                    bo.details.unshift({
                        score: 0
                    })
                }
            }.Z(this));
            var bB = this.bXg(this.Zt);
            this.bXh = e.bc(bB, "j-select");
            this.gi.appendChild(bB)
        }
        this.yZ.innerHTML = "";
        this.Am = eu.cH.bh({
            parent: this.yZ,
            width: 675,
            height: 94,
            content: (this.kP || {}).qcomment || "",
            onInputFocus: function() {
                if ( !! this.iG) {
                    this.iG.ce()
                }
            }.Z(this)
        });
        this.bXk.checked = !this.kP ? true: !!this.kP.answerCanViewComment;
        if (!this.iG) {
            this.iG = eu.cv.bh({
                parent: this.uo
            });
            this.iG.ce()
        }
    };
    tO.cAa = function() {
        e.bJ(this.bb, "resultMode");
        eu.bw(this.bFt);
        eu.bt(this.bXr);
        this.czZ();
        var bB = this.cAo(this.Zt);
        if ( !! bB) {
            this.gi.appendChild(bB)
        }
        var JQ = this.czY();
        this.yZ.innerHTML = JQ
    };
    tO.czZ = function() {
        u.bA(this.Zt,
        function(bo) {
            if ((this.kP || {}).judge == eu.CONST.EVALUATE_JUDGE_TYPE_TEACHER && !!bo.details) {
                bo.score = bo.details[0]
            }
            if ( !! this.TJ) {
                u.bA(this.TJ.jitems || [],
                function(bXf) {
                    if (bXf.jid == bo.id) {
                        bo.selfScore = bXf
                    }
                }.Z(this))
            }
            u.bA(bo.details,
            function(WH) {
                if ( !! this.JG) {
                    if (WH.score == bo.score.jscore) {
                        bo.score.msg = WH.msg
                    }
                }
                if (bo.refScore >= 0 && bo.refScore != null) {
                    if (bo.refScore == 0) {
                        bo.refScore = {
                            score: 0
                        }
                    } else if (WH.score == bo.refScore) {
                        bo.refScore = WH
                    }
                }
                if ( !! bo.selfScore) {
                    if (WH.score == bo.selfScore.jscore) {
                        bo.selfScore.msg = WH.msg
                    }
                }
            }.Z(this))
        }.Z(this))
    };
    tO.czY = function() {
        var fP = (this.kP || {}).qscore;
        this.cAM.innerText = "该题得分：" + (fP != null && fP >= 0 ? fP: "无");
        var JQ = '<div class="tit">整体评价：</div>';
        bXe = (this.kP || {}).qcomments || [],
        cN = false,
        bFR = 0;
        if ((this.kP || {}).judge == eu.CONST.EVALUATE_JUDGE_TYPE_TEACHER) {
            if ( !! (this.kP || {}).qcomments && (this.kP || {}).qcomments.length > 0) {
                var bXc = (this.kP || {}).qcomments[0];
                if ( !! bXc) {
                    JQ += '<p><span class="stu">老师评价：</span>' + u.dV(bXc) + "</p>";
                    cN = true
                }
            }
        } else {
            u.bA(bXe,
            function(bo, bd) {
                bFR++;
                if ( !! bo) {
                    JQ += '<p class="' + (bd == bXe.length - 1 ? "last": "") + '"><span class="stu">student' + bFR + "：</span>" + u.dV(bo) + "</p>";
                    cN = true
                } else {
                    bFR--
                }
            }.Z(this))
        }
        if ( !! this.TJ && !!this.TJ.qcomment && !this.JG) {
            JQ += "<p><span>自评评价：</span>" + u.dV(this.TJ.qcomment || "") + "</p>";
            cN = true
        }
        if ( !! this.JG) {
            if ( !! this.kP.qcomment && !!this.kP.qcomment) {
                JQ += '<p><span class="stu">我的评价：</span>' + u.dV(this.kP.qcomment) + "</p>";
                cN = true
            }
            if ( !! (this.kP || {}).refcomment && !!(this.kP || {}).refcomment) {
                JQ += '<p><span class="stu">老师评价：</span>' + u.dV((this.kP || {}).refcomment) + "</p>";
                cN = true
            }
        }
        if (!cN) {
            JQ = '<div class="tit">整体评价：无</div>'
        }
        return JQ
    };
    tO.JA = function() {
        e.bZ(this.bb, "initMode evaluateMode resultMode");
        if (this.bFU == eu.CONST.HW_PHASE_SUBMIT) {
            this.cAl()
        } else if (this.bFU == eu.CONST.HW_PHASE_EVALUATION) {
            this.cAd()
        } else {
            eu.cZ(this.cAy, !!this.Kl);
            this.cAa()
        }
    };
    tO.bF = function(Y) {
        this.bI(Y);
        this.bFU = Y.evaluateStatus || eu.CONST.HW_PHASE_SUBMIT;
        this.JG = Y.isTraining;
        this.Kl = Y.needEvaluate;
        if (this.bFU != eu.CONST.HW_PHASE_SUBMIT) {
            this.Zt = Y.data.judgeDtos;
            this.eo = Y.data.answerDto;
            this.kP = Y.data.evaluateDto;
            this.TJ = Y.data.selfEvaluateDto
        }
        this.bkO();
        this.JA()
    };
    tO.bL = function() {
        this.gi.innerHTML = "";
        e.bZ(this.yZ, "f-dn");
        if ( !! this.Am) {
            this.Am = eu.cH.bg(this.Am)
        }
        if ( !! this.iG) {
            this.iG = eu.cv.bg(this.iG)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    Ky;
    eu.bFX = NEJ.C();
    Ky = eu.bFX.bu(eu.bln, true);
    Ky.bP = function() {
        this.bQ();
        this.cyU = e.bc(this.bb, "j-evaluate")[0]
    };
    Ky.TY = function() {
        if ( !! this.bje) {
            return this.bje.TY()
        }
    };
    Ky.bWY = function(W) {
        this.bje = eu.bFr.bh({
            parent: this.cyU,
            evaluateStatus: this.NF,
            isTraining: this.JG,
            needEvaluate: this.Kl,
            data: W
        })
    };
    Ky.cyz = function() {
        if ( !! this.Kl || this.NF == eu.CONST.HW_PHASE_SCORE) {
            if (this.NF == eu.CONST.HW_PHASE_SUBMIT) {
                this.bWY()
            } else {
                if (this.ih == 0) {
                    this.bjF()
                }
                eu.bt(this.bXz);
                var xS = (this.kP || {}).jitems;
                var bpa = eu.crQ(this.ck.judgeDtos, xS);
                var cyp = {
                    judgeDtos: bpa,
                    answerDto: this.eo,
                    evaluateDto: this.kP,
                    selfEvaluateDto: this.TJ,
                    needEvaluate: this.Kl
                };
                this.bWY(cyp)
            }
        }
    };
    Ky.cxZ = function() {
        if ( !! this.JG) {
            var bd = this.ck.id.split("-t")[1];
            if (bd > 0) {
                eu.bt(this.hY)
            } else {
                eu.bw(this.hY)
            }
        }
    };
    Ky.bF = function(Y) {
        this.JG = Y.isTraining;
        this.bI(Y);
        this.Kl = Y.needEvaluate == true ? true: false;
        this.NF = Y.evaluateStatus || eu.CONST.HW_PHASE_SUBMIT;
        if ( !! this.eo) {
            this.kP = this.NF == eu.CONST.HW_PHASE_SCORE ? this.eo.evalResult: this.eo.evaluateDto;
            if (this.NF == eu.CONST.HW_PHASE_SCORE) {
                this.TJ = this.eo.evaluateDto
            }
        }
        this.cxZ();
        this.cyz()
    };
    Ky.bL = function() {
        if ( !! this.bje) {
            this.bje = eu.bFr.bg(this.bje)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    EW;
    var dj = e.bY('<div class="m-homeworkQuestionList"></div>');
    eu.tD = NEJ.C();
    EW = eu.tD.bu(eu.cq, true);
    EW.bU = function() {
        this.bW = dj
    };
    EW.bP = function() {
        this.bQ();
        this.eB = [];
        this.Yd = []
    };
    EW.TY = function() {
        var nH = {
            evaluateId: this.Do,
            testId: this.ds,
            qitems: []
        };
        var cN = true;
        u.bA(this.eB,
        function(bo) {
            var biA = bo.TY();
            nH.qitems.push(biA);
            if (!biA) {
                cN = false
            }
        });
        return {
            complete: cN,
            evaluateDto: nH
        }
    };
    EW.TI = function() {
        var vG = [],
        bWW = true;
        u.bA(this.eB,
        function(bo, bd) {
            var gV = bo.TI();
            vG.push(gV);
            if (!gV.content.content && (!gV.content.attachments || gV.content.attachments.length <= 0)) {
                bWW = false
            }
        }.Z(this));
        return {
            answers: vG,
            finishFlag: bWW
        }
    };
    EW.bka = function(cQ) {
        u.bA(this.eB,
        function(bo) {
            bo.bka(cQ)
        }.Z(this))
    };
    EW.bGo = function(cY, bd, eL) {
        if (bd == 0) {
            e.bJ(cY.kf(), "first")
        }
        if (bd == eL) {
            e.bJ(cY.kf(), "last")
        }
    };
    EW.Ji = function(Y) {
        this.bWU = 0;
        u.hW(Y.recordDto,
        function() {
            this.bWU++
        }.Z(this));
        u.hW(Y.recordDto,
        function(bo, bd) {
            this.Yd.push(bo.questionDto.id);
            var cY = eu.bFX.bh({
                parent: this.bb,
                mode: Y.mode || 0,
                needEvaluate: Y.needEvaluate,
                evaluateStatus: Y.evaluateStatus || eu.CONST.HW_PHASE_SUBMIT,
                isTraining: this.JG,
                recordDto: bo,
                aid: this.oQ.aid,
                position: this.Yd.length - 1
            });
            this.bGo(cY, this.Yd.length - 1, this.bWU - 1);
            this.eB.push(cY)
        }.Z(this))
    };
    EW.bF = function(Y) {
        this.bI(Y);
        this.eS = Y.recordDto;
        if (!this.eS) {
            return
        }
        this.JG = Y.isTraining;
        this.oQ = Y.paperInfo || {};
        this.Do = this.oQ.evaluateId;
        this.ds = this.oQ.testId;
        this.lo = this.oQ.aid;
        if ( !! this.eS) {
            this.Ji(Y)
        }
    };
    EW.bL = function() {
        this.Yd = [];
        if ( !! this.eB) {
            for (var cO = this.eB.length - 1; cO >= 0; cO--) {
                this.eB[cO] = eu.bFX.bg(this.eB[cO])
            }
            this.eB = []
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    Bi;
    eu.bGs = NEJ.C();
    Bi = eu.bGs.bu(eu.cq, true);
    Bi.bU = function() {
        this.bW = e.bY(e.bX("jst-edu-learnHomeworkSubmit"))
    };
    Bi.bP = function() {
        this.bQ();
        this.SS = e.bc(this.bb, "j-cannot-submit")[0];
        this.gc = e.bc(this.bb, "j-homework-con")[0];
        this.qr = e.bc(this.bb, "j-homework-paper")[0];
        this.bGv = e.bc(this.bb, "j-btnwrap")[0];
        this.zp = e.bc(this.bb, "j-submit")[0];
        this.bWT = e.bc(this.bb, "j-tbntxt")[0];
        this.vR = e.bc(this.bb, "j-homeworkdes")[0];
        this.SJ = e.bc(this.bb, "j-cxcheck")[0];
        this.SI = e.bc(this.bb, "j-cxtxt")[0];
        this.BA = e.bc(this.bb, "j-aftersubmit")[0];
        this.Ka = e.bc(this.bb, "j-qaFormLink")[0];
        if ( !! this.Ka) {
            this.Ka.href = "#" + eu.umi("learnForumTopic") + "?fid=" + g.quizForumId
        }
        this.fl = new d.rV;
        this.fl.bf("onGetHomeworkPaper", this.uh.Z(this));
        this.fl.bf("onSubmitAnswers", this.WV.Z(this));
        this.fl.bf("onGetMocMemberTutorialInfo", this.SB.Z(this));
        this.nc = new d.rN;
        this.nc.bf("onGetAggreement", this.SA.Z(this))
    };
    Bi.bF = function(Y) {
        this.bI(Y);
        this.fM = Y.homeworkId;
        this.dT = Y.homeworkVo;
        this.blV = this.dT.submitStatus != eu.CONST.HW_STATUS_SUBMITTED && !!this.dT.deadline && eu.dG() > this.dT.deadline;
        eu.cZ(this.BA, this.dT.submitStatus == eu.CONST.HW_STATUS_SUBMITTED);
        this.vR.innerHTML = u.dV(this.dT.description || "");
        v.dY(this.zp, "click");
        if (this.blV) {
            this.dC = eu.cv.bh({
                parent: this.SS
            });
            this.dC.cu("温馨提示：<br/>本次作业的提交截止时间已过，无法成功提交作业。你可以在输入框中输入答案作为练习，但是所有答案都不会计入最后成绩。");
            e.bZ(this.zp, "u-btn-default");
            eu.bw(this.bWT)
        } else {
            eu.bt(this.bWT);
            e.bJ(this.zp, "u-btn-default");
            v.bf(this.zp, "click", this.blX.Z(this))
        }
        if ( !! g.isPreview) {
            this.bGv.style.display = "none"
        }
        this.fl.Zn(this.dT.tid, null, false, eu.CONST.HW_PHASE_SUBMIT, this.dT.aid, g.isPreview);
        this.nc.Zf(3);
        this.fl.bnA()
    };
    Bi.uh = function(W) {
        if ( !! W) {
            this.kt = W;
            this.eS = eu.zu(W.subjectiveQList, W.answers);
            this.gz = eu.tD.bh({
                parent: this.qr,
                mode: 0,
                needEvaluate: false,
                paperInfo: this.kt,
                evaluateStatus: 0,
                recordDto: this.eS
            })
        } else {
            eu.cp.bT({
                type: 1,
                message: "无法获取单元作业题目"
            })
        }
    };
    Bi.SA = function(W) {
        this.SI.innerHTML = W
    };
    Bi.SB = function(W) {
        this.oi = W[eu.CONST.GLOBAL_MOOC_PROTOCAL];
        this.SJ.checked = this.oi;
        v.dY(this.SJ, "click");
        v.bf(this.SJ, "click", this.bGN.Z(this))
    };
    Bi.bGN = function() {
        eu.eE("homeworkHonest", "click", "点击签订作业诚信协议:" + !this.oi);
        if (this.oi) {
            this.oi = false;
            this.fl.Zg(eu.CONST.GLOBAL_MOOC_PROTOCAL, 0)
        } else {
            this.oi = true;
            this.fl.Zg(eu.CONST.GLOBAL_MOOC_PROTOCAL, 1)
        }
    };
    Bi.blX = function() {
        if (!this.gz) {
            return
        }
        var vG = this.gz.TI();
        if (!vG.finishFlag) {
            eu.showToastTips({
                type: 2,
                content: "还没有答完，不能提交"
            });
            return
        }
        if (!this.oi) {
            eu.showToastTips({
                type: 2,
                content: "请勾选诚信保证声明"
            });
            return
        }
        eu.eE("homeworkSubmit", "click", "提交作业，id:" + this.fM);
        if (!g.isPreview) {
            var gm = {
                userId: eu.hj().id,
                courseId: g.courseDto.id,
                termId: g.termDto.id,
                hwId: this.fM
            };
            eu.eE("homework", "submit", eu.np(gm))
        }
        this.kt.answers = vG.answers;
        this.fl.bck(this.kt, !!g.isPreview)
    };
    Bi.WV = function(W) {
        eu.showToastTips({
            type: 1,
            content: "提交成功"
        });
        eu.bw(this.BA);
        this.gz.bka("onSubmited");
        this.bn("onHomeworkEvent", {
            type: "refreshStatus"
        })
    };
    Bi.bL = function() {
        if ( !! this.gz) {
            this.gz = eu.tD.bg(this.gz)
        }
        if ( !! this.dC) {
            this.dC = eu.cv.bg(this.dC)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    d = NEJ.P("edu.d"),
    uX;
    eu.bGP = NEJ.C();
    uX = eu.bGP.bu(eu.Zq, true);
    uX.bU = function() {
        this.bW = e.bY(e.bX("jst-edu-learnHomeworkEvaluateList"))
    };
    uX.bP = function() {
        this.bQ();
        this.Sz = e.bc(this.bb, "j-cannot-starteva")[0];
        this.bmd = e.bc(this.bb, "j-tasklist")[0];
        this.cxm = e.bc(this.bb, "j-evaMin")[0];
        this.bWQ = e.bc(this.bb, "j-trainwrap")[0];
        this.bWP = e.bc(this.bb, "j-trainingbtn")[0];
        this.cwV = e.bc(this.bb, "j-listtablediv")[0];
        this.bWO = e.bc(this.bb, "j-getnextbtnwrap")[0];
        this.cwF = e.bc(this.bb, "j-getnextbtn")[0];
        this.bmh = e.bc(this.bb, "j-selfevabtn")[0];
        this.bGZ = e.bc(this.bb, "j-progress")[0];
        v.bf(this.cwF, "click", this.cwu.Z(this));
        this.fl = new d.rV;
        this.fl.bf("onGetEvaluateDetail", this.cwl.Z(this))
    };
    uX.bF = function(Y) {
        this.bI(Y);
        this.fM = Y.homeworkId;
        this.dT = Y.homeworkVo;
        this.cwg = Y.evaluatorId || g.webUser.id;
        this.ZD = Y.evaluateNeedTrain;
        if (eu.dG() < this.dT.evaluateStart) {
            this.Sz.innerHTML = this.dT.evaluateJudgeType == eu.CONST.JUDGE_TYPE_EVALUATE ? this.pt.txt + "互评阶段还未开始": this.pt.txt + "已结束，请等待成绩公布";
            this.Sz.style.display = "block";
            this.bmd.style.display = "none";
            return
        }
        if (eu.dG() > this.dT.evaluateEnd) {
            this.Sz.innerHTML = this.dT.evaluateJudgeType == eu.CONST.JUDGE_TYPE_EVALUATE ? this.pt.txt + "互评已经结束，请等待成绩公布": this.pt.txt + "已结束，请等待成绩公布";
            this.Sz.style.display = "block";
            this.bmd.style.display = "none";
            return
        }
        this.fl.dal(this.fM, this.cwg)
    };
    uX.cwl = function(W) {
        this.cwe = !!W && !!W.enoughAnswer;
        if (!this.cwe) {
            this.Sz.innerHTML = "由于" + this.pt.txt + "提交数量不足，无法开始互评阶段，改为由老师批改";
            this.Sz.style.display = "block";
            this.bmd.style.display = "none";
            return
        }
        this.Sz.innerHTML = "";
        this.bmd.style.display = "block";
        this.cwd = !!W.trained;
        this.cvU();
        this.cvO(W);
        this.cvA(W);
        this.cvw(W)
    };
    uX.cvU = function() {
        if (this.ZD == eu.CONST.NEED_TRAIN_FALSE) {
            this.bWQ.style.display = "none";
            return
        }
        this.bWQ.style.display = "block";
        if (this.cwd) {
            this.bWP.innerHTML = '<span class="f-fc9">训练已经完成</span>'
        } else {
            this.bWP.innerHTML = '<a class="clickbtn j-starttraining">点击开始训练</a>';
            var cvv = e.bc(this.bb, "j-starttraining")[0];
            v.bf(cvv, "click", this.cvs.Z(this))
        }
    };
    uX.cvO = function(W) {
        var kY = 3,
        fS = W.totalEvaluateCount,
        iB = W.maxEvaluateCount,
        bmq = parseInt((iB - fS) / 2) + fS,
        bWI = fS - kY,
        Wm = (W.completedEvaluates || []).length;
        var bms = function(eV, bHp) {
            if (Wm >= bHp) return "s2";
            if (Wm > eV && Wm <= bHp) return "s1";
            if (Wm < bHp) return "s0";
            return s0
        };
        var Sk = ["s2", bms(0, kY), bms(bWI > 0 ? kY: 0, fS), bms(fS, bmq), bms(bmq, iB)];
        var HZ = [{
            count: 0,
            clazz: Sk[0] + " p-start",
            text: "鸡鸣而起",
            tip: "尚未参与互评，不评或者少评都会影响成绩哦",
            important: 0,
            show: 1
        },
        {
            count: kY,
            clazz: Sk[1] + " p-min",
            text: "勤学苦练",
            tip: "互评未完成，要接受惩罚哦",
            important: 0,
            show: bWI > 0 ? 1 : 0
        },
        {
            count: fS,
            clazz: Sk[2] + " p-total",
            text: "初出茅庐",
            tip: "恭喜！互评已完成" + (iB > fS ? "，继续评分可能会有神秘礼物哦~": ""),
            important: 1,
            show: 1
        },
        {
            count: bmq,
            clazz: Sk[3] + " p-extra",
            text: "孜孜不倦",
            tip: "好棒,你已超额完成任务，走在学霸的路上很爽吧~",
            important: 0,
            show: bmq > fS ? 1 : 0
        },
        {
            count: iB,
            clazz: Sk[4] + " p-max",
            text: "指点江山",
            tip: "学霸！把机会留给更多的小伙伴吧",
            important: 0,
            show: iB > fS ? 1 : 0
        }];
        var bfX = 0,
        bmw = 4,
        bWH = 0,
        bHv = 0,
        bWG = 0;
        for (var cO = HZ.length - 1; cO >= 1; cO--) {
            if (HZ[cO].show <= 0) {
                HZ.splice(cO, 1);
                bmw--
            } else {
                if (Sk[cO] == "s2") {
                    bWH++
                } else if (Sk[cO] == "s1") {
                    bWG = HZ[cO].count
                }
            }
        }
        bHv += bWH * (520 / bmw);
        bfX = u.oa(HZ,
        function(bo) {
            return bo.count == bWG
        });
        if (bfX > 0) {
            bHv += (Wm - HZ[bfX - 1].count) / (HZ[bfX].count - HZ[bfX - 1].count) * 520 / bmw
        }
        var du = e.bX("jst-edu-evaProgress", {
            xlist: HZ,
            progress: bHv,
            completed: Wm,
            gapNum: bmw
        });
        this.bGZ.innerHTML = du
    };
    uX.cvA = function(W) {
        this.cxm.innerText = W.totalEvaluateCount;
        this.HU = W.completedEvaluates || [];
        this.Wb = !!W.startedEvaluate ? [W.startedEvaluate] : [];
        this.dnn = this.HU.length;
        if (this.HU.length >= W.maxEvaluateCount || this.Wb.length > 0) {
            this.bWO.style.display = "none"
        } else {
            this.bWO.style.display = "block"
        }
        for (var i = this.HU.length - 1; i >= 0; i--) {
            this.HU[i].btnName = this.HU[i].origScore;
            this.HU[i].btnTitle = "";
            this.HU[i].index = i + 1
        }
        for (var i = this.Wb.length - 1; i >= 0; i--) {
            this.Wb[i].btnName = "继续进行互评";
            this.Wb[i].btnTitle = "还未提交互评";
            this.Wb[i].index = this.HU.length + i + 1
        }
        var dE = ' <table class="listtable"><thead><tr><td class="l1">' + this.pt.txt + '列表</td><td class="l2">你的评分</td></tr></thead><tbody class="j-listtable">';
        var cuc = e.bX("jst-edu-evalutlist-item", {
            evalist: this.HU
        });
        dE += cuc;
        var cub = e.bX("jst-edu-evalutlist-item", {
            evalist: this.Wb,
            clazz: "f-fcorange"
        });
        dE += cub;
        dE += "</tbody></table>";
        this.cwV.innerHTML = dE;
        this.ctY = e.bc(this.bb, "j-evabtn");
        u.bA(this.ctY,
        function(bo, bd) {
            v.bf(bo, "click", this.ctW.Z(this, bo))
        }.Z(this))
    };
    uX.cvw = function(W) {
        v.dY(this.bmh, "click");
        this.ctK = W.selfEvaluate.evaluateId;
        this.bWy = W.selfEvaluate.status;
        this.ctB = W.selfEvaluate.answerformId;
        if (this.bWy == eu.CONST.EVA_STATUS_COMPLETED) {
            this.bmh.innerHTML = W.selfEvaluate.origScore + ""
        } else {
            this.bmh.innerHTML = "点击自评"
        }
        e.bc(this.bb, "j-selfevaname")[0].innerHTML = u.dV(g.webUser.nickName || "");
        v.bf(this.bmh, "click", this.ctz.Z(this))
    };
    uX.cwu = function() {
        this.bn("onHomeworkEvent", {
            type: "startevaluate"
        })
    };
    uX.cvs = function() {
        this.bn("onHomeworkEvent", {
            type: "starttraing"
        });
        eu.eE("homeTraining", "click", "进入互评训练，id:" + this.fM)
    };
    uX.ctW = function(mi) {
        var bTg = e.df(mi, "evaluateid");
        var hQ = e.df(mi, "aid");
        var fJ = e.df(mi, "status");
        this.bn("onHomeworkEvent", {
            type: "startevaluate",
            data: {
                evaluateId: bTg,
                aid: hQ,
                status: fJ
            }
        });
        eu.eE("homeEvaluate", "click", "进入互评，homeworkId:" + this.fM)
    };
    uX.ctz = function() {
        this.bn("onHomeworkEvent", {
            type: "startselfevaluate",
            data: {
                evaluateId: this.ctK,
                aid: this.ctB,
                status: this.bWy
            }
        });
        eu.eE("homeSelfEvaluate", "click", "进入自评，homeworkId:" + this.fM)
    };
    uX.bL = function() {
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    d = NEJ.P("edu.d"),
    wr;
    var ctw = ["打分是不是打上瘾啦，再来一份吧~", "互评作业是另一种学习哦~有没有在给别人评分的时候发现自己的不足呢？加油哦~", "换一种角色去为别人的作业评分，有没有一种成就感？那就让它来的更猛烈一些吧~", "三人行必有我师焉，参加互评可以学到更多哦~", "你已经超额完成任务，继续评分可能会有神秘礼物哦~", "指点江山，激扬文字，互评达人就是你！保持这种感觉飞翔吧，少年~"];
    eu.bfB = NEJ.C();
    wr = eu.bfB.bu(eu.Zq, true);
    wr.bU = function() {
        this.bW = e.bY(e.bX("jst-edu-learnHEAction"))
    };
    wr.bP = function() {
        this.bQ();
        this.bfj = e.bc(this.bb, "j-savedraftbtn")[0];
        this.bfb = e.bc(this.bb, "j-submitbtn")[0];
        this.qr = e.bc(this.bb, "j-paperbox")[0];
        this.RQ = e.bc(this.bb, "j-backbtn")[0];
        this.ctv = e.bc(this.bb, "j-btnwrap")[0];
        this.ctq = e.bc(this.bb, "j-remainTxt")[0];
        this.ctm = e.bc(this.bb, "j-gotonext")[0];
        this.gi = e.bc(this.bb, "j-list")[0];
        this.xA = e.bc(this.bb, "j-tip")[0];
        this.bHS = e.bc(this.bb, "j-completetip")[0];
        this.bHT = e.bc(this.bb, "j-selfcompletetip")[0];
        v.bf(this.bfb, "click", this.bHU.Z(this));
        v.bf(this.ctm, "click", this.bmK.Z(this));
        v.bf(this.RQ, "click", this.Ch.Z(this));
        v.bf(this.bfj, "click", this.ctk.Z(this));
        this.cg = new d.rV;
        this.cg.bf("onGetHomeworkPaper", this.bHY.Z(this));
        this.cg.bf("onGetNextEvaluate", this.ctj.Z(this));
        this.cg.bf("onSubmitEvaluate", this.WV.Z(this));
        this.cg.bf("onSaveEvaluate", this.Vu.Z(this))
    };
    wr.bF = function(Y) {
        this.bI(Y);
        this.NF = Y.evaluateStatus;
        this.Kl = Y.needEvaluate;
        this.Do = Y.evaluateId;
        this.bIb = Y.evaStatus || eu.CONST.EVA_STATUS_STARTED;
        this.bmP = Y.aid;
        this.cti = Y.isSelf;
        this.ds = Y.testId;
        eu.bt(this.bfj);
        this.bmK()
    };
    wr.Ch = function() {
        this.bn("onHomeworkEvent", {
            type: "backToEvaluateList"
        })
    };
    wr.bmK = function() {
        if ( !! this.Do) {
            this.cg.Zn(this.ds, this.Do, false, eu.CONST.HW_PHASE_EVALUATION, this.bmP, g.isPreview)
        } else {
            this.cg.bTt(this.ds, g.webUser.id, true)
        }
    };
    wr.ctj = function(W, cN) {
        if (!W) {
            return
        }
        var bWx = W.total - W.completed,
        csY = W.max - W.completed;
        if ( !! W.next && csY > 0) {
            this.Do = W.next.evaluateId;
            this.bmP = W.next.answerformId;
            this.bIb = W.next.status;
            if ( !! cN) {
                this.bmK()
            }
            var fc = "目前还剩余" + bWx + "个学员的" + this.pt.txt + "需要进行评分，否则会影响成绩哦~";
            if (bWx <= 0) {
                fc = ctw[parseInt(Math.random() * 100) % 6]
            }
            this.ctq.innerText = fc;
            eu.bw(this.xA)
        } else {
            eu.bw(this.bHS)
        }
        e.sD(this.xA)
    };
    wr.bHY = function(W) {
        if ( !! W) {
            this.HG = W;
            if (!W.answers || W.answers.length <= 0) {
                W.answers = [];
                u.bA(W.subjectiveQList,
                function(bo, bd) {
                    W.answers.push({
                        qid: bo.id,
                        type: bo.type,
                        content: {
                            content: "该同学未提交答案",
                            attachments: []
                        }
                    })
                }.Z(this))
            }
            this.eS = eu.zu(W.subjectiveQList, W.answers);
            if ( !! this.gk) {
                this.gk = eu.tD.bg(this.gk)
            }
            this.gk = eu.tD.bh({
                parent: this.gi,
                mode: 1,
                needEvaluate: this.Kl || true,
                evaluateStatus: this.NF || 2,
                recordDto: this.eS,
                paperInfo: {
                    testId: this.HG.tid,
                    evaluateId: this.Do,
                    aid: this.HG.aid
                }
            });
            eu.bt(this.xA);
            eu.bt(this.bHS);
            eu.bt(this.bHT);
            eu.bw(this.ctv);
            if (this.bIb == eu.CONST.EVA_STATUS_STARTED) {
                eu.bw(this.bfj)
            } else {
                eu.bt(this.bfj)
            }
        }
    };
    wr.bHU = function() {
        if ( !! this.gk) {
            var cL = this.gk.TY(),
            cN = cL.complete;
            if (!cN) {
                return
            }
            this.cg.bTy(cL.evaluateDto, false)
        }
    };
    wr.ctk = function() {
        if ( !! this.gk && this.bIb == eu.CONST.EVA_STATUS_STARTED) {
            var cL = this.gk.TY(),
            cN = cL.complete;
            if (!cN) {
                return
            }
            this.cg.bTy(cL.evaluateDto, true)
        }
    };
    wr.WV = function(W) {
        if ( !! W) {
            eu.showToastTips({
                type: 1,
                content: "提交成功"
            });
            if (!this.cti) {
                this.cg.bTt(this.ds, g.webUser.id)
            } else {
                eu.bw(this.bHT);
                e.sD(this.bHT)
            }
            eu.bt(this.bfj)
        }
        this.bn("onHomeworkEvent", {
            type: "refreshStatus"
        })
    };
    wr.Vu = function(W) {
        if ( !! W) {
            eu.showToastTips({
                type: 1,
                content: "保存成功"
            });
            this.bmK()
        }
    };
    wr.bL = function() {
        if ( !! this.gk) {
            this.gk = eu.tD.bg(this.gk)
        }
        eu.bt(this.xA);
        eu.bt(this.bHS);
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    d = NEJ.P("edu.d"),
    uc;
    eu.bIj = NEJ.C();
    uc = eu.bIj.bu(eu.Zq, true);
    uc.bU = function() {
        this.bW = e.bY(e.bX("jst-edu-learnHETraining"))
    };
    uc.bP = function() {
        this.bQ();
        this.bWw = e.bc(this.bb, "j-completeinfo")[0];
        this.bWv = e.bc(this.bb, "j-nextinfo")[0];
        this.qr = e.bc(this.bb, "j-paperbox")[0];
        this.RQ = e.bc(this.bb, "j-backbtn")[0];
        this.bfb = e.bc(this.bb, "j-submitbtn")[0];
        this.bmX = e.bc(this.bb, "j-nextbtn")[0];
        this.csU = e.bc(this.bb, "j-completebtn")[0];
        this.csT = e.bc(this.bb, "j-remainNum")[0];
        this.eY = e.bc(this.bb, "j-nores")[0];
        this.bWu = e.bc(this.bb, "j-bottomBtn")[0];
        v.bf(this.RQ, "click", this.Ch.Z(this));
        v.bf(this.bfb, "click", this.bHU.Z(this));
        v.bf(this.bmX, "click", this.csH.Z(this));
        v.bf(this.csU, "click", this.csy.Z(this));
        this.fl = new d.rV;
        this.fl.bf("onGetTrainPaper", this.csv.Z(this));
        this.fl.bf("onGetNextEvaluate", this.cst.Z(this))
    };
    uc.bF = function(Y) {
        this.bI(Y);
        this.Do = "training";
        this.ds = Y.testId;
        this.csr()
    };
    uc.csr = function() {
        var ca = !!eu.CZ() ? g.moocTermDto.id: g.termDto.id;
        this.fl.cZp(ca, false)
    };
    uc.cst = function(W) {
        this.bn("onHomeworkEvent", {
            type: "backToEvaluateList"
        })
    };
    uc.csi = function(jN, bd) {
        var fm = {
            tid: jN.id,
            subjectiveQList: [],
            answers: []
        };
        u.bA(jN.sampleAnswers,
        function(bo, cO) {
            var wk = eu.Bg(jN);
            wk.id = jN.id + "-t" + cO;
            wk.position = bd;
            var csf = {
                qid: wk.id,
                type: eu.CONST.TYPE_SUBJECTIVE_NORMAL,
                content: {
                    content: bo.lectorAnswer
                },
                evaluateDto: {
                    qid: wk.id,
                    refcomment: bo.qcomment
                }
            };
            u.bA(wk.judgeDtos,
            function(cse, bd) {
                cse.refScore = !!bo.jitems && bo.jitems[bd] ? bo.jitems[bd].jscore: ""
            }.Z(this));
            fm.subjectiveQList.push(wk);
            fm.answers.push(csf)
        }.Z(this));
        return fm
    };
    uc.Ch = function() {
        this.bn("onHomeworkEvent", {
            type: "backToEvaluateList"
        })
    };
    uc.bHU = function() {
        if ( !! this.gk) {
            var nH = this.gk.TY().evaluateDto;
            u.bA(this.bdk[this.fN - 1].answers,
            function(bo, bd) {
                u.bA(nH.qitems,
                function(biA, bd) {
                    if (bo.qid == biA.qid) {
                        bo.evalResult = biA
                    }
                }.Z(this))
            }.Z(this))
        }
        this.bIB(this.fN - 1, eu.CONST.HW_PHASE_SCORE);
        if (this.fN == this.bdk.length) {
            this.fl.cZj(g.webUser.id, g.termDto.id);
            eu.bw(this.bWw);
            eu.bt(this.bmX);
            this.bn("onHomeworkEvent", {
                type: "refreshStatus"
            })
        } else {
            this.csT.innerText = this.bdk.length - this.fN;
            eu.bw(this.bWv);
            eu.bw(this.bmX)
        }
    };
    uc.csH = function() {
        this.bIB(this.fN, eu.CONST.HW_PHASE_EVALUATION)
    };
    uc.csy = function() {
        this.fl.bTt(this.ds, g.webUser.id, true)
    };
    uc.bIB = function(bd, fJ) {
        eu.bt(this.bWw);
        eu.bt(this.bWv);
        eu.bt(this.bmX);
        this.HG = this.bdk[bd];
        this.eS = eu.zu(this.HG.subjectiveQList, this.HG.answers);
        if ( !! this.gk) {
            this.gk = eu.tD.bg(this.gk)
        }
        this.gk = eu.tD.bh({
            parent: this.qr,
            mode: 1,
            needEvaluate: this.Kl || true,
            evaluateStatus: fJ,
            recordDto: this.eS,
            testId: this.HG.tid,
            evaluateId: this.Do,
            isTraining: true
        });
        if (fJ == eu.CONST.HW_PHASE_EVALUATION) {
            this.fN++;
            eu.bw(this.bfb)
        } else {
            eu.bt(this.bfb)
        }
    };
    uc.csv = function(W) {
        if ( !! W && !!W.subjectiveQList && W.subjectiveQList.length > 0) {
            eu.bt(this.eY);
            eu.bw(this.bWu);
            this.CG = W;
            this.qS = W.subjectiveQList || [{
                id: "q1",
                title: "题干题干",
                judgeDtos: [{
                    id: 1,
                    msg: "得分点说明",
                    details: [{
                        msg: "让你得1分你就得1分",
                        score: 1
                    },
                    {
                        msg: "赏你2分吧",
                        score: 2
                    }]
                }],
                sampleAnswers: [{
                    lectorAnswer: "1fdafdas",
                    qcomment: "老师评价",
                    jitems: [{
                        jscore: 2,
                        jid: 1
                    }]
                },
                {
                    lectorAnswer: "2dafdas",
                    qcomment: "老师评价1",
                    jitems: [{
                        jscore: 2,
                        jid: 1
                    }]
                }]
            },
            {
                id: "q2",
                title: "题干题干",
                judgeDtos: [{
                    id: 2,
                    msg: "得分点说明",
                    details: [{
                        msg: "让你得1分你就得1分",
                        score: 1
                    },
                    {
                        msg: "赏你2分吧",
                        score: 2
                    }]
                }],
                sampleAnswers: [{
                    lectorAnswer: "2",
                    qcomment: "老师评价3",
                    jitems: [{
                        jscore: 1,
                        jid: 2
                    }]
                },
                {
                    lectorAnswer: "3",
                    qcomment: "老师评价4",
                    jitems: [{
                        jscore: 2,
                        jid: 2
                    }]
                }]
            }];
            this.bdk = [];
            u.bA(this.qS,
            function(bo, bd) {
                var QM = this.csi(bo, bd);
                this.bdk.push(QM)
            }.Z(this));
            this.fN = 0;
            this.bIB(this.fN, eu.CONST.HW_PHASE_EVALUATION)
        } else {
            eu.bw(this.eY);
            eu.bt(this.bWu)
        }
    };
    uc.WV = function(W) {};
    uc.bL = function() {
        if ( !! this.gk) {
            this.gk = eu.tD.bg(this.gk)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    d = NEJ.P("edu.d"),
    Rc;
    eu.bIF = NEJ.C();
    Rc = eu.bIF.bu(eu.cq, true);
    Rc.bU = function() {
        this.bW = e.bY(e.bX("jst-edu-learnHomeworkScore"))
    };
    Rc.bP = function() {
        this.bQ();
        this.Rb = e.bc(this.bb, "j-score-notpublish")[0];
        this.bcP = e.bc(this.bb, "j-scorecon")[0];
        this.qr = e.bc(this.bb, "j-homework-paper")[0];
        this.iF = e.bc(this.bb, "j-score")[0];
        this.bnp = e.bc(this.bb, "j-score-evaluate")[0];
        this.fl = new d.rV;
        this.fl.bf("onGetHomeworkPaper", this.uh.Z(this));
        this.fl.bf("onGetHomeworkEvalInfo", this.QX.Z(this))
    };
    Rc.bF = function(Y) {
        this.bI(Y);
        this.fM = Y.homeworkId;
        this.dT = Y.homeworkVo;
        this.CM = Y.isEvaMode;
        if (Y.scorePubStatus != eu.CONST.SCORE_PUB_STATUS_CONFIRMED) {
            this.Rb.innerHTML = "成绩还未发布，请耐心等待";
            this.Rb.style.display = "block";
            this.bcP.style.display = "none";
            return
        } else {
            this.Rb.style.display = "none";
            this.bcP.style.display = "block"
        }
        this.fl.bnr(this.fM, this.dT.aid);
        this.fl.Zn(this.fM, null, true, eu.CONST.HW_PHASE_SCORE, this.dT.aid, g.isPreview)
    };
    Rc.QX = function(W) {
        if ( !! W) {
            this.bIM = W.evalTotalCount;
            this.bcJ = W.complatedEvalCount;
            W.mocMutualEvaluatePenaltyRule["completed"] = 100;
            var CN;
            if (this.bcJ == 0) {
                CN = "uncompleted"
            } else if (this.bcJ >= this.bIM) {
                CN = "completed"
            } else {
                CN = "partial"
            }
            this.iF.innerText = (W.score || 0) + "分";
            if (this.CM && W.enableEvaluation) {
                var GP = "";
                var bcF = W.mocMutualEvaluatePenaltyRule[CN] + "%";
                switch (CN) {
                case "uncompleted":
                    GP = "，你没有进行互评，所以你最终的有效成绩将是你获得的评分的" + bcF;
                    break;
                case "completed":
                    GP = "，你完成了全部互评";
                    break;
                case "partial":
                    GP = "，你只完成了一部分互评，所以你最终的有效成绩将是你获得的评分的" + bcF;
                    break
                }
                this.bnp.innerText = GP
            }
        } else {
            eu.cp.bT({
                type: 1,
                message: "无法获取成绩"
            })
        }
    };
    Rc.uh = function(W) {
        if ( !! W) {
            this.kt = W;
            this.eS = eu.zu(W.subjectiveQList, W.answers);
            this.gz = eu.tD.bh({
                parent: this.qr,
                mode: 1,
                needEvaluate: this.CM,
                evaluateStatus: eu.CONST.HW_PHASE_SCORE,
                recordDto: this.eS,
                paperInfo: {
                    testId: this.kt.tid,
                    aid: this.kt.aid
                }
            })
        } else {
            eu.cp.bT({
                type: 1,
                message: "无法获取成绩"
            })
        }
    };
    Rc.bL = function() {
        if ( !! this.gz) {
            this.gz = eu.tD.bg(this.gz)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    d = NEJ.P("edu.d"),
    sQ;
    eu.bIS = NEJ.C();
    sQ = eu.bIS.bu(eu.cq, true);
    sQ.bU = function() {
        this.bW = e.bY(e.bX("jst-edu-learnHomeworkStudentCheck"))
    };
    sQ.bP = function() {
        this.bQ();
        this.qr = e.bc(this.bb, "j-homework-paper")[0];
        this.iF = e.bc(this.bb, "j-score")[0];
        this.bnp = e.bc(this.bb, "j-score-evaluate")[0];
        this.fl = new d.rV;
        this.fl.bf("onGetHomeworkPaper", this.uh.Z(this));
        this.fl.bf("onGetHomeworkEvalInfo", this.QX.Z(this))
    };
    sQ.bF = function(Y) {
        this.bI(Y);
        this.fM = Y.homeworkId;
        this.dT = Y.homeworkVo;
        this.CM = Y.isEvaMode;
        this.NF = Y.evaluateStatus;
        this.fl.bnr(this.fM, this.dT.aid);
        this.fl.Zn(this.fM, null, true, eu.CONST.HW_PHASE_SCORE, this.dT.aid, g.isPreview)
    };
    sQ.QX = function(W) {
        if ( !! W) {
            if (W.score == null || W.score == undefined) {
                this.iF.innerText = "该学生还没有得分";
                this.bnp.innerText = "";
                return
            }
            this.bIM = W.evalTotalCount;
            this.bcJ = W.complatedEvalCount;
            W.mocMutualEvaluatePenaltyRule["completed"] = 100;
            var CN;
            if (this.bcJ == 0) {
                CN = "uncompleted"
            } else if (this.bcJ >= this.bIM) {
                CN = "completed"
            } else {
                CN = "partial"
            }
            this.iF.innerText = "该学生综合得分为：" + (W.score || 0) + "分";
            if (this.CM && W.enableEvaluation) {
                var GP = "";
                var bcF = W.mocMutualEvaluatePenaltyRule[CN] + "%";
                switch (CN) {
                case "uncompleted":
                    GP = "，没有进行互评，所以最终的有效成绩将是获得的评分的" + bcF;
                    break;
                case "completed":
                    GP = "，完成了全部互评";
                    break;
                case "partial":
                    GP = "，只完成了一部分互评，所以最终的有效成绩将是获得的评分的" + bcF;
                    break
                }
                this.bnp.innerText = GP
            }
        } else {
            eu.cp.bT({
                type: 1,
                message: "无法获取成绩"
            })
        }
    };
    sQ.uh = function(W) {
        if ( !! W) {
            this.kt = W;
            this.eS = eu.zu(W.subjectiveQList, W.answers);
            this.gz = eu.tD.bh({
                parent: this.qr,
                mode: 1,
                needEvaluate: this.CM,
                evaluateStatus: eu.CONST.HW_PHASE_SCORE,
                recordDto: this.eS,
                paperInfo: {
                    testId: this.kt.tid,
                    aid: this.kt.aid
                }
            })
        } else {
            eu.cp.bT({
                type: 1,
                message: "无法获取题目"
            })
        }
    };
    sQ.bL = function() {
        if ( !! this.gz) {
            this.gz = eu.tD.bg(this.gz)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    v = NEJ.P("nej.v"),
    ot,
    bIU;
    p.bny = NEJ.C();
    ot = p.bny.bu(p.dq, true);
    bIU = p.bny.cE;
    ot.en = function() {
        return e.bM("courseLearn-inner-box")
    };
    ot.cz = function() {
        bIU.cz.apply(this, arguments);
        this.crO = e.bc(this.bb, "j-hwname")[0];
        this.RQ = e.bc(this.bb, "j-backbtn")[0];
        this.crK = e.bc(this.bb, "j-evaluate-status-head")[0];
        this.GJ = e.bc(this.bb, "j-homework-box")[0];
        v.bf(this.RQ, "click", this.Ch.Z(this));
        this.fl = new d.rV;
        this.fl.bf("onGetHomeworkInfo", this.bIZ.Z(this))
    };
    ot.Ch = f;
    ot.QO = f;
    ot.YR = function() {
        if (!this.fM) {
            eu.cp.bT({
                type: 1,
                message: "无法获取题目"
            })
        } else {
            this.dy();
            this.fl.bZA(this.fM, this.lo, !!g.isPreview)
        }
    };
    ot.bIZ = function(W) {
        if (!W) {
            eu.cp.bT({
                type: 1,
                message: "无法获取题目"
            });
            return
        }
        this.sZ = W;
        this.CM = W.evaluateJudgeType == eu.CONST.JUDGE_TYPE_EVALUATE;
        this.bcb = W.submitStatus == eu.CONST.HW_STATUS_SUBMITTED;
        this.ZD = W.evaluateNeedTrain;
        this.bbO = W.scorePubStatus;
        this.bJf = this.te = eu.WU(W);
        if (!this.bcb) {
            this.te = eu.CONST.HW_PHASE_SUBMIT
        }
        this.crO.innerHTML = u.dV(W.name || "");
        this.Gt()
    };
    ot.Gt = function() {
        this.bnG();
        this.sO()
    };
    ot.sO = function() {
        if (this.KK && (eu.dX(eu.CONST.ROLE_LECTOR) || eu.dX(eu.CONST.ROLE_ASSISTANT) || eu.dX(eu.CONST.ROLE_PLATFORM_ADMIN) || eu.dX(eu.CONST.ROLE_OUT_SUPER_ADMIN) || eu.dX(eu.CONST.ROLE_OUT_BUSINESS_EDITOR) || eu.dX(eu.CONST.ROLE_OUT_COURSE_EDITOR) || eu.dX(eu.CONST.ROLE_OUT_ORDINARY_EDITOR) || eu.dX(eu.CONST.ROLE_OUT_COURSE_REVIEWER))) {
            this.bJk();
            return
        }
        switch (this.te) {
        case eu.CONST.HW_PHASE_SUBMIT:
            this.bJl();
            break;
        case eu.CONST.HW_PHASE_EVALUATION:
            this.bWs();
            break;
        case eu.CONST.HW_PHASE_SCORE:
            this.bJn();
            break
        }
    };
    ot.Yf = function(W) {
        switch (W.type) {
        case "refreshStatus":
            this.bnG();
            break;
        case "backToEvaluateList":
            this.bWs();
            break;
        case "starttraing":
            this.crI();
            break;
        case "startevaluate":
            this.crx(W.data || {});
            break;
        case "startselfevaluate":
            this.crf(W.data || {});
            break
        }
    };
    ot.bnG = function() {
        if (this.XL) {
            this.XL = eu.ble.bg(this.XL)
        }
        if (this.CM) {
            this.XL = eu.ble.bh({
                parent: this.crK,
                jdIndex: this.te,
                homeworkId: this.fM,
                homeworkVo: this.sZ,
                evaluateNeedTrain: this.ZD,
                aid: this.lo,
                configObj: this.pt
            })
        }
    };
    ot.bJl = function() {
        this.dy();
        this.QO()
    };
    ot.bWs = function() {
        this.dy();
        this.bJt = eu.bGP.bh({
            parent: this.GJ,
            homeworkId: this.fM,
            homeworkVo: this.sZ,
            evaluateNeedTrain: this.ZD,
            onHomeworkEvent: this.Yf.Z(this),
            configObj: this.pt
        })
    };
    ot.crI = function(W) {
        this.dy();
        this.bJu = eu.bIj.bh({
            parent: this.GJ,
            onHomeworkEvent: this.Yf.Z(this),
            configObj: this.pt,
            testId: this.fM
        })
    };
    ot.crx = function(W) {
        this.dy();
        this.bJv = eu.bfB.bh({
            parent: this.GJ,
            evaluateStatus: this.te,
            needEvaluate: this.CM,
            evaluateId: W.evaluateId,
            evaStatus: W.status,
            aid: W.aid,
            isSelf: false,
            testId: this.fM,
            onHomeworkEvent: this.Yf.Z(this),
            configObj: this.pt
        })
    };
    ot.crf = function(W) {
        this.dy();
        this.bJw = eu.bfB.bh({
            parent: this.GJ,
            evaluateStatus: this.te,
            needEvaluate: this.CM,
            evaluateId: W.evaluateId,
            evaStatus: W.status,
            aid: W.aid,
            isSelf: true,
            testId: this.fM,
            onHomeworkEvent: this.Yf.Z(this),
            configObj: this.pt
        })
    };
    ot.bJn = function(W) {
        this.dy();
        this.jI = eu.bIF.bh({
            parent: this.GJ,
            isEvaMode: this.CM,
            homeworkId: this.fM,
            homeworkVo: this.sZ,
            scorePubStatus: this.bbO,
            configObj: this.pt
        })
    };
    ot.bJk = function(W) {
        this.dy();
        this.Qv = eu.bIS.bh({
            parent: this.GJ,
            isEvaMode: this.CM,
            homeworkId: this.fM,
            homeworkVo: this.sZ,
            evaluateStatus: this.te,
            configObj: this.pt
        })
    };
    ot.cG = function() {
        if (this.XL) {
            this.XL = eu.ble.bg(this.XL)
        }
        this.dy();
        bIU.cG.apply(this, arguments);
        e.dr(this.bb)
    };
    ot.dy = function() {
        if (this.jI) {
            this.jI = eu.bIF.bg(this.jI)
        }
        if (this.bJt) {
            this.bJt = eu.bGP.bg(this.bJt)
        }
        if (this.bJv) {
            this.bJv = eu.bfB.bg(this.bJv)
        }
        if (this.bJw) {
            this.bJw = eu.bfB.bg(this.bJw)
        }
        if (this.bJu) {
            this.bJu = eu.bIj.bg(this.bJu)
        }
        if (this.Qv) {
            this.Qv = eu.bIS.bg(this.Qv)
        }
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    u = NEJ.P("nej.u"),
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    ut = NEJ.P("nej.ut"),
    p = NEJ.P("edu.m"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    Ac;
    var du = e.bY('<div class="timeBox f-pf u-btn u-btn-orange j-timeNode"><span class="f-icon"></span>倒计时：<span class="j-timeTxt"></span></div>');
    eu.bJA = NEJ.C();
    Ac = eu.bJA.bu(eu.cq, true);
    Ac.bP = function() {
        this.bQ();
        this.km = e.bc(this.bb, "j-timeTxt")[0]
    };
    Ac.bU = function() {
        this.bW = du
    };
    Ac.bF = function(Y) {
        this.bI(Y);
        this.Ps = Y.begin;
        e.ev(this.bb, "top", Y.top || "180px");
        e.ev(this.bb, "left", Y.left || "1034px");
        this.Qs();
        this.bbe()
    };
    Ac.bEN = function() {
        this.bbe()
    };
    Ac.dK = function() {
        this.Qr()
    };
    Ac.bbe = function() {
        if (this.Ps <= 0) {
            this.bn("onTimeExhaust");
            return
        }
        this.Jq(this.Ps);
        this.gp = g.setInterval(function() {
            this.Ps--;
            if (this.Ps <= 0) {
                this.Qr();
                this.bn("onTimeExhaust");
                return
            }
            this.Jq(this.Ps)
        }.Z(this), 1e3)
    };
    Ac.Qr = function() {
        this.gp = g.clearInterval(this.gp)
    };
    Ac.Jq = function(cV) {
        this.km.innerHTML = eu.bDz(cV)
    };
    Ac.Qs = function() {
        this.iJ = ut.DG.bh({
            body: this.bb,
            overflow: true,
            direction: 0,
            onchange: function(gK) {
                e.ev(this.bb, "top", gK.top + "px");
                e.ev(this.bb, "left", gK.left + "px")
            }.Z(this)
        })
    };
    Ac.bL = function() {
        this.Qr();
        if ( !! this.iJ) {
            this.iJ = ut.DG.bg(this.iJ)
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    FR,
    crd = {
        object: 4,
        subject: 5,
        oj: 7
    };
    var dj = e.bY('<div class="m-beforeTest"><div class="j-baseInfo baseInfo f-f0"></div><div class="details"><p class="important f-f0">建议您认真完成所有题目后提交试卷</p><p>您需要一次性作答并提交，如中途离开计时不会停止。</p><p>为获得更好的测试效果，建议您关闭IM聊天工具，视频等干扰信息，测试中途尽量不要离开。中途勿关闭浏览器，否则测试结果将无法保存。</p><p>考试成绩会在稍后公布，请密切关注公告或邮件提醒。</p><p>根据考试相关规定以及证书要求，在答题前请签署考试协议。</p></div><div class="agreeBox f-cb"><input type="checkbox" id="agreeCheck" class="j-agree f-fl"><label for="agreeCheck" class="j-agreeCt"></label></div><a class="u-btn u-btn-primary u-btn-disabled j-startBtn">开始考试</a></div>');
    eu.Qo = NEJ.C();
    FR = eu.Qo.bu(eu.cq, true);
    FR.bU = function() {
        this.bW = dj
    };
    FR.bP = function() {
        this.bQ();
        this.nO = e.bc(this.bb, "j-baseInfo")[0];
        this.Ql = e.bc(this.bb, "j-startBtn")[0];
        this.xC = e.bc(this.bb, "j-agree")[0];
        this.SI = e.bc(this.bb, "j-agreeCt")[0];
        v.bf(this.Ql, "click", this.bJK.Z(this));
        v.bf(this.xC, "click", this.baE.Z(this));
        this.bJM = new d.JK;
        this.bJM.bf("onGetMocMemberTutorialInfo", this.SB.Z(this));
        this.nc = new d.rN;
        this.nc.bf("onGetAggreement", this.SA.Z(this))
    };
    FR.SA = function(W) {
        this.SI.innerHTML = W
    };
    FR.SB = function(W) {
        this.xC.checked = !!W[this.bnZ];
        this.baE()
    };
    FR.baE = function() {
        switch (this.bV) {
        case "object":
            eu.eE("examObjectHonest", "click", "点击客观题考试类型签订诚信协议：" + !this.xC.checked);
            break;
        case "subject":
            eu.eE("examSubjectHonest", "click", "点击主观题考试类型签订诚信协议：" + !this.xC.checked);
            break;
        case "oj":
            eu.eE("examOjHonest", "click", "点击Online Judge考试类型签订诚信协议：" + !this.xC.checked);
            break
        }
        eu.EL(!this.xC.checked, this.Ql, "u-btn-disabled")
    };
    FR.bJK = function() {
        if (!e.hJ(this.Ql, "u-btn-disabled")) {
            this.bn("onDoingAble");
            this.bJM.Zg(this.bnZ, 1);
            switch (this.bV) {
            case "object":
                var bJO = "examObjectBegin";
                break;
            case "subject":
                var bJO = "examSubjectBegin";
                break;
            case "oj":
                var bJO = "examOJBegin";
                break
            }
            eu.eE(bJO, "click", "点击开始考试")
        }
    };
    FR.baD = function() {
        var cV = "<p>本次考试仅有一次作答机会，共 <span><em>" + (this.FF.questionCount || 0) + "</em></span> 道题，总分 <span><em>" + (this.FF.totalScore || 0) + "</em> 分</span></p>";
        if (this.FF.duration > 0) {
            cV += "考试总时长：<span> <em>" + this.FF.duration / 60 + "</em> 分钟</span>"
        }
        this.nO.innerHTML = cV
    };
    FR.bF = function(Y) {
        this.bI(Y);
        this.FF = Y.data;
        this.bV = Y.type;
        switch (this.bV) {
        case "object":
            this.bnZ = eu.CONST.MOOC_EXAM_OBJECT_PROTOCAL;
            break;
        case "subject":
            this.bnZ = eu.CONST.MOOC_EXAM_SUBJECT_PROTOCAL;
            break;
        case "oj":
            this.bnZ = eu.CONST.OJ_EXAM_PROTOCAL;
            break
        }
        this.baD();
        this.xC.checked = false;
        this.nc.Zf(crd[this.bV]);
        this.bJM.bnA()
    };
    FR.bL = function() {
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    eu = NEJ.P("edu.u"),
    Wy = {
        0 : "A",
        1 : "B",
        2 : "C",
        3 : "D",
        4 : "E",
        5 : "F",
        6 : "G",
        7 : "H",
        8 : "I",
        9 : "J",
        10 : "K",
        11 : "L",
        12 : "M",
        13 : "N",
        14 : "O",
        15 : "P",
        16 : "Q",
        17 : "R"
    },
    Qi,
    crb;
    var eg = e.bY('<div class="m-choiceQuestion u-questionItem"><div class="j-title title f-cb"><div class="position f-fl"></div><div class="qaDescription f-fl f-cb"><div class="qaCate j-qacate f-fl"></div><div class="f-richEditorText j-richTxt"></div></div><label class="scoreLabel f-fr f-dn j-scoreLabel">得分/总分</label></div><div class="j-choicebox"></div></div>');
    eu.boe = NEJ.C();
    Qi = eu.boe.bu(eu.bjD, true);
    crb = eu.boe.cE;
    Qi.bU = function() {
        this.bW = eg
    };
    Qi.bP = function() {
        this.bQ();
        this.hY = e.bc(this.bb, "j-title")[0];
        this.bWr = e.bc(this.bb, "j-choicebox")[0];
        this.bog = e.bc(this.bb, "j-scoreLabel")[0];
        this.TE = e.bc(this.bb, "j-qacate")[0];
        this.JE = e.bc(this.bb, "j-richTxt")[0];
        this.xq = e.cS(this.hY)
    };
    Qi.bjE = function() {
        this.Wo = !!this.eS.qAnswerDto ? this.eS.qAnswerDto.optIds: [];
        var du = "",
        jN = this.eS.questionDto;
        if (!this.sc && this.sc != 0 || this.sc < 0) {
            eu.bt(this.xq[0])
        } else {
            eu.bw(this.xq[0]);
            this.xq[0].innerText = this.sc + 1
        }
        this.TE.innerHTML = "";
        if (this.AA) {
            this.JE.innerHTML = jN.title || "";
            this.TE.innerHTML = ""
        } else {
            var oS = jN.title || "",
            boi = "";
            switch (jN.type) {
            case eu.CONST.TYPE_OBJECTIVE_SINGLE:
                boi += '<span class="dan">单选</span>(' + jN.score + "分)";
                break;
            case eu.CONST.TYPE_OBJECTIVE_MULTI:
                boi += '<span class="duo">多选</span>(' + jN.score + "分)";
                break;
            case eu.CONST.TYPE_OBJECTIVE_JUDGE:
                boi += '<span class="pan">判断</span>(' + jN.score + "分)";
                break
            }
            this.TE.innerHTML = boi;
            this.JE.innerHTML = oS
        }
        u.jE(this.JE);
        this.bV = eu.cbq(jN.type);
        if (this.ih === 1 && !this.AA && !g.isPreview) {
            e.ev(this.bog, "display", "block")
        } else {
            e.ev(this.bog, "display", "none")
        }
        var bJZ = [],
        bKa = [],
        Wk = null,
        bok = !0,
        bWq = {};
        if ( !! this.eS.qAnswerDto && !!this.eS.qAnswerDto.optIds && this.eS.qAnswerDto.optIds.length > 0) {
            bWq = u.bdg(this.eS.qAnswerDto.optIds || null,
            function(ca) {
                return ca
            })
        } else {
            bok = false
        }
        u.bA(jN.optionDtos,
        function(bal, cO) {
            if ( !! bWq[bal.id]) {
                if (!bal.answer) {
                    bok = false
                }
                bKa.push(Wy[cO])
            }
            if ( !! bal.answer) {
                bJZ.push(Wy[cO])
            }
            if ( !! bal.analyse) {
                Wk = (Wk || "") + "&nbsp;&nbsp;" + Wy[cO] + "、" + bal.analyse
            }
        });
        if (this.bV == "checkbox" && bKa.length != bJZ.length) {
            bok = false
        }
        if (jN.type == eu.CONST.TYPE_OBJECTIVE_JUDGE) {
            Wk = jN.analyse || null
        }
        if ( !! this.blo && !Wk) {
            Wk = ""
        }
        du = e.bX("jst-edu-testChoiceOption", {
            queDto: jN,
            answers: this.eS.qAnswerDto,
            mode: this.ih,
            CONST: eu.CONST,
            optionType: this.bV,
            letters: Wy,
            noScore: this.AA,
            rightAns: bJZ.join("、"),
            selectAns: bKa.join("、"),
            anstrue: bok,
            analyse: Wk,
            offsetCtn: function(ff) {
                if (jN.type == eu.CONST.TYPE_OBJECTIVE_JUDGE && !!ff) {
                    ff = ff.replace("正确", "√");
                    ff = ff.replace("错误", "×")
                }
                return ff
            }.Z(this),
            setScore: function(zL) {
                if ( !! zL && !this.AA) {
                    zL = zL.toFixed(2)
                } else {
                    zL = "0.00"
                }
                return zL
            }.Z(this)
        });
        this.bWr.innerHTML = du;
        if (this.ih === 0) {
            this.ln = e.bc(this.bWr, "u-tbi");
            u.bA(this.ln,
            function(nL, cO) {
                v.bf(nL, "click", this.Or.Z(this, jN.optionDtos[cO]))
            }.Z(this))
        }
    };
    Qi.Or = function(bKf, bj) {
        if (this.bV == "radio") {
            this.Wo[0] = bKf.id
        } else {
            var nK = v.eP(bj),
            bWp = nK.checked;
            for (var cN = false,
            i = 0,
            eG = this.Wo.length; i < eG; i++) {
                if (this.Wo[i] == bKf.id) {
                    if ( !! bWp) {
                        cN = true
                    } else {
                        this.Wo.splice(i, 1)
                    }
                }
            }
            if (!cN && !!bWp) {
                this.Wo.push(bKf.id)
            }
        }
        this.eo.optIds = this.Wo;
        if (!this.bah && !this.eo.time) {
            this.bah = true;
            this.eo.time = eu.dG()
        }
        this.bn("onSelect", this.eo)
    };
    Qi.bF = function(Y) {
        this.bI(Y);
        this.eo = this.eS.qAnswerDto;
        this.bah = false;
        if (!this.eo) {
            this.eo = {
                qid: this.eS.questionDto.id,
                type: this.eS.questionDto.type,
                optIds: []
            }
        }
    };
    Qi.bL = function() {
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    eu = NEJ.P("edu.u"),
    CX,
    cqU;
    var eg = e.bY('<div class="m-FillBlank examMode u-questionItem f-pr"><div class="j-title title f-cb"><div class="position f-fl"></div><div class="qaDescription f-fl f-cb"><div class="qaCate j-qacate f-fl"></div><div class="f-richEditorText j-richTxt"></div></div><label class="scoreLabel f-fr f-dn j-scoreLabel">得分/总分</label></div><div class="f-cb inputArea"><div class="f-fl j-input input"></div><div class="score f-fr f-fn j-score"></div></div><div class="analysisInfo f-dn j-analysis"></div></div>');
    eu.bop = NEJ.C();
    CX = eu.bop.bu(eu.bjD, true);
    cqU = eu.bop.cE;
    CX.bU = function() {
        this.bW = eg
    };
    CX.bP = function() {
        this.bQ();
        this.hY = e.bc(this.bb, "j-title")[0];
        this.eD = e.bc(this.bb, "j-input")[0];
        this.Qb = e.bc(this.bb, "j-analysis")[0];
        this.iF = e.bc(this.bb, "j-score")[0];
        this.bog = e.bc(this.bb, "j-scoreLabel")[0];
        this.TE = e.bc(this.bb, "j-qacate")[0];
        this.JE = e.bc(this.bb, "j-richTxt")[0];
        this.xq = e.cS(this.hY)
    };
    CX.bjE = function() {
        if (!this.sc && this.sc != 0 || this.sc < 0) {
            eu.bt(this.xq[0])
        } else {
            eu.bw(this.xq[0]);
            this.xq[0].innerText = this.sc + 1
        }
        var cqM = !this.AA ? '<span class="pan">填空</span>(' + this.eS.questionDto.score + "分)": "";
        this.TE.innerHTML = cqM;
        this.JE.innerHTML = this.eS.questionDto.title || "";
        u.jE(this.JE);
        this.GA = eu.cH.bh({
            parent: this.eD,
            labelText: "请输入答案",
            onInputBlur: this.bWo.Z(this),
            height: 35,
            width: 250
        })
    };
    CX.bWo = function() {
        var cqI = this.GA.cc();
        this.eo.content.content = cqI;
        if (!this.bah && !this.eo.time) {
            this.bah = true;
            this.eo.time = eu.dG()
        }
        this.bn("onSelect", this.eo)
    };
    CX.bXA = function() {
        this.GA.jX();
        this.GA.cX(this.eo.content.content || "");
        if (this.ih === 1) {
            this.GA.iU();
            if (!this.eo.content.content || this.eo.content.content == "") {
                this.GA.Vx("你没有填写答案");
                var bWm = false
            } else {
                var bWm = true
            }
        }
        e.bJ(this.Qb, "f-dn");
        if (this.ih == 1) {
            var Mv = !!this.eS.questionDto.analyse ? "<br><b>解析： </b>" + this.eS.questionDto.analyse: null;
            if ( !! this.blo && !Mv) {
                Mv = ""
            }
            if (this.AA) {
                e.bZ(this.Qb, "f-dn");
                this.Qb.innerHTML = '<span class="f-f0 tt1">正确答案：</span><span class="f-f0 tt2">' + (this.eS.questionDto.stdAnswer.replace(eu.CONST.FILL_BLANK_SPLITCHARREG, "&nbsp&nbsp或&nbsp&nbsp") || "") + "</span>";
                eu.EL(!this.cqC(), this.Qb, "answrong")
            } else if (Mv != null) {
                e.bZ(this.Qb, "f-dn");
                this.Qb.innerHTML = '<span class="f-f0 tt1">正确答案：</span><span class="f-f0 tt2">' + (this.eS.questionDto.stdAnswer.replace(eu.CONST.FILL_BLANK_SPLITCHARREG, "&nbsp&nbsp或&nbsp&nbsp") || "") + "</span>" + Mv;
                eu.EL(this.eo.correct != 0, this.Qb, "answrong")
            }
        }
        eu.cZ(this.bog, this.ih == 1 && !this.AA);
        eu.cZ(this.iF, this.ih == 1 && !this.AA && !!bWm);
        if (this.ih == 1 && !this.AA) {
            if (this.eo.correct == 0) {
                e.bJ(this.iF, "right");
                var bWl = '<span class="f-icon"></span> '
            } else {
                e.bZ(this.iF, "right");
                var bWl = '<span class="f-icon"></span> '
            }
            this.iF.innerHTML = bWl + (this.eo.score ? this.eo.score.toFixed(2) : "0.00") + "/" + this.eS.questionDto.score.toFixed(2)
        }
    };
    CX.cqC = function(vG) {
        switch (this.eS.questionDto.fillblankType) {
        case 1:
        case 2:
            var vG = (this.eS.questionDto.stdAnswer || "").split(eu.CONST.FILL_BLANK_SPLITCHAR);
            var cqx = eu.nu(vG, this.eo.content.content);
            return cqx;
            break;
        case 3:
            var bkj = this.eS.questionDto.stdAnswer.split(","),
            bWj = parseFloat(bkj[0].substr(1)),
            bWi = parseFloat(bkj[1].substr(0, bkj[1].length - 1)),
            bKy = false,
            bKz = false;
            bkj[0].indexOf("(") == 0 ? bKy = false: bKy = true;
            bkj[1].indexOf(")") > 0 ? bKz = false: bKz = true;
            if (this.eo.content.content > bWj && this.eo.content.content < bWi) {
                return true
            } else if (this.eo.content.content == bWj && !!bKy) {
                return true
            } else if (this.eo.content.content == bWi && !!bKz) {
                return true
            } else {
                return false
            }
            break;
        case 4:
            return !! this.eo.content.content && this.eS.questionDto.stdAnswer.indexOf(this.eo.content.content) >= 0 ? true: false;
            break
        }
    };
    CX.bjF = function() {
        this.GA.iU()
    };
    CX.blp = function() {
        this.GA.jX()
    };
    CX.bF = function(Y) {
        this.bI(Y);
        this.eo = this.eS.qAnswerDto;
        this.bah = false;
        if (!this.eo) {
            this.eo = {
                qid: this.eS.questionDto.id,
                type: this.eS.questionDto.type,
                content: {
                    content: ""
                }
            }
        }
        this.bXA()
    };
    CX.bL = function() {
        this.bO();
        this.GA = eu.cH.bg(this.GA)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    ut = NEJ.P("nej.ut"),
    eu = NEJ.P("edu.u"),
    la;
    eu.oH = NEJ.C();
    la = eu.oH.bu(ut.hS, true);
    la.bWh = function() {
        return this.kN
    };
    la.bF = function(Y) {
        this.bI(Y);
        this.eS = Y.recordDto;
        if (!this.eS) {
            return
        }
        this.ih = Y.mode;
        var wB = {
            parent: Y.parent,
            recordDto: this.eS,
            mode: this.ih,
            showAnalysis: Y.showAnalysis,
            position: Y.position,
            noScore: Y.noScore,
            onSelect: function(W) {
                this.bn("onSelect", W)
            }.Z(this)
        };
        switch (this.eS.questionDto.type) {
        case eu.CONST.TYPE_OBJECTIVE_SINGLE:
        case eu.CONST.TYPE_OBJECTIVE_MULTI:
        case eu.CONST.TYPE_OBJECTIVE_JUDGE:
            this.kN = eu.boe.bh(wB);
            break;
        case eu.CONST.TYPE_SUBJECTIVE_NORMAL:
            this.kN = eu.bln.bh(wB);
            break;
        case eu.CONST.TYPE_OBJECTIVE_FILLBLANK:
            this.kN = eu.bop.bh(wB);
            break;
        default:
            break
        }
    };
    la.bjH = function() {
        return this.kN.bjH()
    };
    la.bL = function() {
        if ( !! this.kN) {
            switch (this.eS.questionDto.type) {
            case eu.CONST.TYPE_OBJECTIVE_SINGLE:
            case eu.CONST.TYPE_OBJECTIVE_MULTI:
            case eu.CONST.TYPE_OBJECTIVE_JUDGE:
                this.kN = eu.boe.bg(this.kN);
                break;
            case eu.CONST.TYPE_SUBJECTIVE_NORMAL:
                this.kN = eu.bln.bg(this.kN);
                break;
            case eu.CONST.TYPE_OBJECTIVE_FILLBLANK:
                this.kN = eu.bop.bg(this.kN);
                break;
            default:
                break
            }
        }
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    Hg,
    cpU;
    eu.Hk = NEJ.C();
    Hg = eu.Hk.bu(p.BZ, true);
    cpU = eu.Hk.cE;
    Hg.bP = function() {
        this.yt = false;
        this.bQ()
    };
    Hg.dno = function() {
        eu.bw(this.bb)
    };
    Hg.dnp = function() {
        eu.bt(this.bb)
    };
    Hg.cps = function(QM) {
        var dU = null,
        bWf = QM.objectiveQList;
        dU = {
            totlePageCount: 1,
            currentPageNo: 1,
            list: bWf
        };
        this.bWe = [];
        u.bA(bWf,
        function(bo) {
            this.bWe.push(bo.id)
        }.Z(this));
        return dU
    };
    Hg.Ce = function(fA) {
        var bd = u.oa(this.bWe, fA.id);
        var cY = eu.oH.bh({
            parent: this.bb,
            recordDto: this.biL[fA.id],
            mode: this.ih,
            showAnalysis: this.blo,
            position: bd,
            noScore: this.AA,
            onSelect: function(W) {
                this.bn("onSelect", W)
            }.Z(this)
        }).bWh();
        return cY
    };
    Hg.Ca = function(cY) {
        if ( !! cY) {
            cY = eu.oH.bg(cY)
        }
        return cY
    };
    Hg.bF = function(Y) {
        if ( !! Y.data) {
            Y.dataMaps = this.cps(Y.data)
        }
        this.blo = Y.data.showAnalysis;
        this.ih = Y.mode || 0;
        this.biL = Y.recordDtos;
        this.AA = Y.noScore || false;
        this.bI(Y)
    };
    Hg.cpk = function() {
        var boO = [];
        for (var i in this.ef) {
            var cY = this.ef[i];
            if (cY) {
                boO.push(cY.bjH())
            }
        }
        return boO
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    bD = u.eW(),
    nt,
    Ej = "ck-OJCacheCache";
    d.Ef = NEJ.C();
    nt = d.Ef.bu(d.hA);
    nt.bKS = function(mH, hQ, fa) {
        this.bK({
            key: Ej + bD,
            url: "YocOJQuizBean.getOJPaperInfo",
            param: [mH, hQ, fa],
            onload: this.bic.Z(this)
        })
    };
    nt.bic = function(W) {
        this.bn("ongetOJPaperInfo", W)
    };
    nt.boT = function(dZ, hQ, uv) {
        var bTi = uv ? "MocAdminQuizBean.previewTestDraft": "YocOJQuizBean.getOJPaperDto";
        var lU = uv ? [dZ] : [dZ, hQ];
        this.bK({
            key: Ej + bD,
            url: bTi,
            param: lU,
            onload: this.djf.Z(this)
        })
    };
    nt.djf = function(W) {
        this.bn("ongetOJPaperDto", W)
    };
    nt.dje = function(dZ, hQ, gV) {
        this.bK({
            key: Ej + bD,
            url: "YocOJQuizBean.submitSingleAnswer",
            param: [dZ, hQ, gV],
            onload: this.bKX.Z(this)
        })
    };
    nt.bKX = function(W) {
        this.bn("onsubmitSingleAnswer", W)
    };
    nt.WX = function(hQ, bKY) {
        this.bK({
            key: Ej + bD,
            notShowLoading: true,
            url: "YocOJQuizBean.getThreadStatusByThreadId",
            param: [hQ, bKY],
            onload: this.bKZ.Z(this)
        })
    };
    nt.bKZ = function(W) {
        this.bn("ongetThreadStatusByThreadId", W)
    };
    nt.bKS = function(dZ, hQ, fa) {
        this.bK({
            key: Ej + bD,
            url: "YocOJQuizBean.getOJPaperInfo",
            param: [dZ, hQ, fa],
            onload: this.bic.Z(this)
        })
    };
    nt.bic = function(W) {
        this.bn("ongetOJPaperInfo", W)
    };
    nt.dja = function(dZ, fa) {
        this.bK({
            key: Ej + bD,
            url: "YocOJQuizBean.getOjQuestionSubmitRecords",
            param: [dZ, fa],
            onload: this.bhL.Z(this)
        })
    };
    nt.bhL = function(W) {
        this.bn("ongetOjSubmitRecords", W)
    };
    nt.dim = function(dZ, fa, dhR) {
        this.bK({
            key: Ej + bD,
            url: "YocOJQuizBean.adminGetOjQuestionSubmitRecords",
            param: [dZ, fa, dhR],
            onload: this.bhL.Z(this)
        })
    };
    nt.dnq = function(W) {
        this.bn("onadminGetOjSubmitRecords", W)
    };
    nt.dgJ = function(hQ) {
        this.bK({
            key: Ej + bD,
            url: "YocOJQuizBean.submitOjPaper",
            param: [hQ],
            onload: this.bLg.Z(this)
        })
    };
    nt.bLg = function(W) {
        this.bn("onsubmitOjPaper", W)
    };
    nt.dgs = function(dZ, gV) {
        this.bK({
            key: Ej + bD,
            url: "YocOJQuizBean.submitPreviewSingleAnswer",
            param: [dZ, gV],
            onload: this.bLi.Z(this)
        })
    };
    nt.bLi = function(W) {
        this.bn("onsubmitPreviewSingleAnswer", W)
    };
    nt.bVZ = function(dZ, bLk, bz) {
        this.bK({
            key: Ej + bD,
            url: "YocOJQuizBean.viewOJData",
            param: [dZ, bLk, !bz],
            onload: this.bLl.Z(this, bz)
        })
    };
    nt.bLl = function(bz, W) {
        this.bn("onviewOJData", W, bz)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    bhn;
    var dn = e.ee('<div class="ctn"><img src="" class="j-pic f-fl" width="125"/><div class="f-fl tip">用微信扫描二维码<br>分享至好友和朋友圈</div></div>');
    eu.bpd = NEJ.C();
    bhn = eu.bpd.bu(eu.hq, true);
    eu.bpd.bT = function(Y) {
        var fV = eu.bpd.bh(Y);
        fV.gI()
    };
    bhn.bU = function() {
        this.bW = e.bY(e.bX(dn))
    };
    bhn.bP = function() {
        this.bQ();
        this.bkX = e.bc(this.bb, "j-pic")[0]
    };
    bhn.bL = function() {
        this.bO()
    };
    bhn.bF = function(Y) {
        Y.title = " ";
        Y.clazz = "m-QRCodeDialog";
        this.bI(Y);
        this.bkX.src = Y.pic
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    FW,
    dfA = e.ee('<div class="u-share f-cb"><a class="solo f-fl f-fc6 sina" title="分享到新浪微博" rel="sina"></a><a class="solo f-fl f-fc6 qzone" title="分享到QQ空间" rel="qzone"></a><a class="solo f-fl f-fc6 renren" title="分享到人人" rel="renren"></a><a class="weixin f-fl f-fc6 solo" title="分享到微信" rel="weixin"></a></div>');
    eu.BH = NEJ.C();
    FW = eu.BH.bu(eu.cq, true);
    FW.bU = function() {
        this.bW = e.bY(e.bX(dfA))
    };
    FW.bP = function() {
        this.bQ();
        this.bLs = e.cS(this.bb);
        this.xu = {};
        this.xu.name = " (分享自@云课堂)";
        this.xu.netease = "HrJOJ17S62E4ipIa";
        this.xu.sina = {};
        this.xu.sina.id = "3024282805";
        this.xu.sina.ralateUid = "";
        this.xu.renren = "";
        this.xu.kaixin = {};
        this.xu.kaixin.starid = "0";
        this.xu.kaixin.aid = "0";
        this.xu.douban = "";
        var By = [];
        By[0] = "height=505,width=615,top=" + (screen.height - 280) / 2;
        By[1] = "left=" + (screen.width - 550) / 2;
        By[2] = "toolbar=no, menubar=no, scrollbars=no,";
        By[2] += "resizable=yes,location=no, status=no";
        this.bVY = By.join(",")
    };
    FW.dfc = function(item) {
        var bVX;
        bVX = item.getAttribute("rel");
        this.hd([[item, "click", this.kW.Z(this, bVX)]])
    };
    FW.kW = function(rel, event) {
        switch (rel) {
        case "sina":
            this.deS();
            break;
        case "renren":
            this.deH();
            break;
        case "qzone":
            this.deE();
            break;
        case "douban":
            this.dnr();
            break;
        case "weixin":
            eu.bpd.bT({
                pic:
                this.bLC
            });
            break;
        default:
            break
        }
        eu.eE("share", rel, this.PR + ":" + this.lN)
    };
    FW.deE = function(dns) {
        var jr = {
            url: this.lN,
            title: this.bVV,
            pics: this.bkX,
            summary: this.bpq
        };
        var arr = [];
        for (var tmp in jr) {
            arr.push(tmp + "=" + encodeURIComponent(jr[tmp] || ""))
        }
        url = "http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?" + arr.join("&");
        g.open(url, "Qzone", this.bVY)
    };
    FW.deS = function() {
        var param = {
            url: this.lN,
            appkey: this.xu.sina.id,
            title: this.iu,
            pic: this.bkX,
            ralateUid: this.xu.sina.ralateUid,
            language: "zh_cn"
        };
        var arr = [];
        for (var tmp in param) {
            arr.push(tmp + "=" + encodeURIComponent(param[tmp] || ""))
        }
        url = "http://service.weibo.com/share/share.php?" + arr.join("&");
        g.open(url, "_blank", this.bVY)
    };
    FW.deH = function() {
        var rrShareParam = {
            api_key: this.xu.renren,
            resourceUrl: "",
            srcUrl: this.lN,
            pic: this.bkX,
            title: this.bVV,
            description: this.bpq
        };
        var hl = location.href.indexOf("#");
        var resUrl = hl == -1 ? location.href: location.href.substr(0, hl);
        var shareImgs = "";
        var getParam = function(param) {
            param = param || {};
            param.api_key = param.api_key || "";
            param.resourceUrl = param.resourceUrl || resUrl;
            param.title = param.title || "";
            param.pic = param.pic || "";
            param.description = param.description || "";
            if (resUrl == param.resourceUrl) {
                param.images = param.images || shareImgs
            }
            param.charset = param.charset || "";
            return param
        };
        var submitUrl = "http://widget.renren.com/dialog/share";
        var p = getParam(rrShareParam);
        var prm = [];
        for (var i in p) {
            if (p[i]) prm.push(i + "=" + encodeURIComponent(p[i]))
        }
        var url = submitUrl + "?" + prm.join("&"),
        maxLgh = eu.nf ? 2048 : 4100,
        wa = "width=700,height=650,left=0,top=0,resizable=yes,scrollbars=1";
        g.open(url, "renren", wa)
    };
    FW.bF = function(Y) {
        this.bI(Y);
        u.bA(this.bLs, this.dfc.Z(this));
        this.iu = Y.title || "";
        this.bVV = Y.topic || "";
        this.bpq = Y.description || "";
        this.bkX = Y.pic || "";
        this.lN = Y.url || g.location.href;
        this.bV = Y.type || 0;
        this.bLC = Y.weixinQR || "";
        eu.cZ(this.bLs[2], !this.bLC);
        eu.cZ(this.bLs[3], !!this.bLC);
        e.bZ(this.bb, "u-share2");
        if (this.bV == 1) {
            e.bJ(this.bb, "u-share2")
        }
        this.PR = Y.from || ""
    };
    FW.bL = function() {
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    bD = u.eW(),
    hg,
    oD = "ck-outPartnerCache";
    d.ri = NEJ.C();
    hg = d.ri.bu(d.hA);
    hg.dnt = function(kx, AU) {
        this.bK({
            key: oD + bD,
            url: "AdminMemberBean.addMemberRole",
            param: [kx, AU],
            onload: this.deb.Z(this)
        })
    };
    hg.deb = function(W) {
        this.bn("onAddMemberRole", W)
    };
    hg.bVU = function(bGw, Ou, AU) {
        this.bK({
            key: oD + bD,
            url: "AdminMemberBean.addMemberRoleByLoginId",
            param: [bGw, Ou, AU],
            onload: this.ddK.Z(this)
        })
    };
    hg.ddK = function(W) {
        this.bn("onAddMemberRoleByLoginId", W)
    };
    hg.dnu = function(bLu, AU) {
        this.bK({
            key: oD + bD,
            url: "AdminMemberBean.addMemberRoleByNickname",
            param: [bLu, AU],
            onload: this.ddw.Z(this)
        })
    };
    hg.ddw = function(W) {
        this.bn("onAddMemberRoleByNickname", W)
    };
    hg.bVS = function(kx, AU) {
        this.bK({
            key: oD + bD,
            url: "AdminMemberBean.deleteMemberRole",
            param: [kx, AU],
            onload: this.ddq.Z(this)
        })
    };
    hg.ddq = function(W) {
        this.bn("onDelMemberRole", W)
    };
    hg.dcZ = function(kx, dcL, dcr) {
        this.bK({
            key: oD + bD,
            url: "AdminMemberBean.updateMemberRole",
            param: [kx, dcL, dcr],
            onload: this.dbX.Z(this)
        })
    };
    hg.dbX = function(W) {
        this.bn("onUpdateMemberRole", W)
    };
    hg.dbR = function() {
        this.bK({
            key: oD + bD,
            url: "AdminMemberBean.getOutPartnerRoleList",
            param: [],
            onload: this.dbJ.Z(this)
        })
    };
    hg.dbJ = function(W) {
        this.bn("onGetOutPartnerRoleList", W)
    };
    hg.dbG = function() {
        this.bK({
            key: oD + bD,
            url: "AdminMemberBean.getOrdinaryEditors",
            param: [],
            onload: this.dbz.Z(this)
        })
    };
    hg.dbz = function(W) {
        this.bn("onGetOrdinaryEditorsList", W)
    };
    hg.bMa = function(ga, Xp, hu, ji, JN) {
        this.bK({
            key: oD + bD,
            url: "AdminCommonBean.getSchoolLectorHavingPublishedCourse4Backend",
            param: [ga, Xp, hu, ji, JN],
            onload: this.dbs.Z(this)
        })
    };
    hg.dbs = function(W) {
        this.bn("onGetLectorPublished", W)
    };
    hg.bVO = function(ga, NJ, bz, hu, ji, bpN, gn, JN) {
        this.bK({
            key: oD + bD,
            url: "CourseBean.getTermPanelListForPlatform",
            param: [ga, NJ, bz, hu, ji, bpN, gn, JN],
            onload: this.dau.Z(this, ga, NJ, bpN, gn)
        })
    };
    hg.dau = function(ga, NJ, bpN, gn, W) {
        this.bn("onGetCoursePanelListForPlatform", W, ga, NJ, bpN, gn)
    };
    hg.dar = function() {
        this.bK({
            key: oD + bD,
            url: "MocSchoolBean.getSchoolListsAll",
            param: [],
            onload: this.bMj.Z(this)
        })
    };
    hg.bMj = function(W) {
        this.bn("onGetSchoolListsAll", W)
    };
    hg.bVM = function(ji, hu, JN) {
        this.bK({
            key: oD + bD,
            url: "MocSchoolBean.getSchoolLists",
            param: [ji, hu, JN],
            onload: this.Vd.Z(this)
        })
    };
    hg.Vd = function(W) {
        this.bn("onGetSchoolLists", W)
    };
    hg.cZX = function(ji, hu, NY, JN) {
        this.bK({
            key: oD + bD,
            url: "MocSchoolBean.getSchoolListsByName",
            param: [ji, hu, NY, JN],
            onload: this.cZJ.Z(this)
        })
    };
    hg.cZJ = function(W) {
        this.bn("onGetSchoolListsByName", W)
    };
    hg.cZG = function() {
        this.bK({
            key: oD + bD,
            url: "CourseBean.getEditorList",
            param: [],
            onload: this.bMq.Z(this)
        })
    };
    hg.bMq = function(W) {
        this.bn("ongetEditorList", W)
    };
    hg.cZw = function(nx, mo) {
        this.bK({
            key: oD + bD,
            url: "CourseBean.setOrdinaryEditorForCourse",
            param: [nx, mo],
            onload: this.bMt.Z(this, mo)
        })
    };
    hg.bMt = function(mo, W) {
        this.bn("onSetOrdinaryEditorForCourse", W, mo)
    };
    hg.cXP = function(nx, mo) {
        this.bK({
            key: oD + bD,
            url: "CourseBean.deleteOrdinaryEditorForCourse",
            param: [nx, mo],
            onload: this.bMv.Z(this, mo)
        })
    };
    hg.bMv = function(mo, W) {
        this.bn("onDeleteOrdinaryEditorForCourse", W, mo)
    };
    hg.bVJ = function(cd, Nl) {
        this.bK({
            key: oD + bD,
            url: "PublishCourseBean.adminPublishCourse",
            param: [cd, Nl],
            onload: this.bMy.Z(this, Nl)
        })
    };
    hg.bMy = function(Nl, W) {
        this.bn("onSetAuditAggree", W, Nl)
    };
    hg.cXu = function(fh) {
        this.bK({
            key: oD + bD,
            url: "PublishCourseBean.agreeApplyMoocFromSpoc",
            param: [fh],
            onload: this.cWK.Z(this)
        })
    };
    hg.cWK = function(W) {
        this.bn("onAgreeToMooc", W)
    };
    hg.cVY = function(fh) {
        this.bK({
            key: oD + bD,
            url: "PublishCourseBean.rejectApplyMoocFromSpoc",
            param: [fh],
            onload: this.cVS.Z(this)
        })
    };
    hg.cVS = function(W) {
        this.bn("onRejectToMooc", W)
    };
    hg.bMD = function(cUZ, cUf, JN) {
        this.bK({
            key: oD + bD,
            url: "MocScoreManagerBean.getTermScoreListForReview",
            param: [cUZ, cUf, JN],
            onload: this.cUd.Z(this)
        })
    };
    hg.cUd = function(W) {
        this.bn("onGetTermScoreListForReview", W)
    };
    hg.bVF = function(cd, cTJ) {
        this.bK({
            key: oD + bD,
            url: "MocScoreManagerBean.updateForTermScore",
            param: [cd, cTJ],
            onload: this.cTf.Z(this)
        })
    };
    hg.cTf = function(W) {
        this.bn("onUpdateForTermScore", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    dnv,
    dnw;
    eu.ou = NEJ.C();
    bqh = eu.ou.bu(p.BZ, true);
    cSf = eu.ou.cE;
    bqh.bP = function() {
        this.yt = true;
        this.bQ()
    };
    bqh.yp = function(kS) {
        var bd = kS ? kS.index: -1;
        if ( !! this.fN && this.fN != bd) {
            this.bn("onPageChange", bd);
            this.fN = bd
        }
    };
    bqh.bgl = function(fA, Sb) {
        if ( !! this.bol) {
            this.bol(fA, Sb)
        }
        cSf.bgl.apply(this, arguments)
    };
    bqh.bF = function(Y) {
        this.Ce = Y.itemGen || f;
        this.Ca = Y.itemDestroy || f;
        this.bol = Y.genUIItem;
        this.bI(Y)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    d = NEJ.P("edu.d"),
    Op,
    cRX;
    var dn = e.ee('<div class="item"><span class="f-fl name j-name f-thide f-f0"></span><span class="f-fl school f-fc9 f-thide j-school"></span><span class="f-fl fzr f-icon j-fzr"></span><span class="f-fl centerPage"><a class="lookbtn j-lookbtn f-fcgreen" target="_blank" href="">查看</a><a class="editbtn j-editbtn f-fcgreen" href="/index.htm#/agm/tinfo">编辑</a></span><span><a class="editbtn j-editbtn f-fcgreen" href="/index.htm#/agm/tCenter">编辑</a></span></div>');
    eu.bql = NEJ.C();
    Op = eu.bql.bu(eu.cq, true);
    cRX = eu.bql.cE;
    Op.bU = function() {
        this.bW = e.bY(e.bX(dn))
    };
    Op.bP = function() {
        this.bQ();
        this.Jd = e.bc(this.bb, "j-lookbtn")[0];
        this.vf = e.bc(this.bb, "j-editbtn");
        this.fg = e.bc(this.bb, "j-name")[0];
        this.bVD = e.bc(this.bb, "j-fzr")[0];
        this.bVC = e.bc(this.bb, "j-school")[0]
    };
    Op.bF = function(Y) {
        this.bI(Y);
        this.bV = Y.type;
        this.fg.innerHTML = u.dV(Y.itemVo.realName || Y.itemVo.nickName);
        this.vf[0].style.display = "inline-block";
        this.vf[1].style.display = "inline-block";
        if (!Y.itemVo.status || Y.itemVo.status == eu.CONST.TEACHERSTATUS_DRAFT) {
            this.Jd.style.display = "none"
        } else {
            this.Jd.style.display = "inline-block";
            this.Jd.href = g.urlPrefix.memberPrefix + Y.itemVo.subfixUrl
        }
        if (Y.itemVo.lectorType == eu.CONST.REL_TYPE_TERM_CHIEF_LECTOR) {
            this.bVD.innerHTML = ""
        } else {
            this.bVD.innerHTML = ""
        }
        if (Y.from == "admin") {
            this.cRS(Y)
        } else {
            this.cRR(Y)
        }
        if ( !! eu.dX(eu.CONST.ROLE_SCHOOLNORMAL_ADMIN)) {
            eu.bt(this.vf[0]);
            eu.bt(this.vf[1])
        }
    };
    Op.cRS = function(Y) {
        this.vf[0].href = "#" + eu.umi("adminGxManagerTeacherCenterEdit") + "?id=" + Y.itemVo.memberId;
        this.vf[1].href = "#" + eu.umi("adminGxManagerTeacherInfoEdit") + "?id=" + Y.itemVo.memberId
    };
    Op.cRR = function(Y) {
        this.bVC.title = this.bVC.innerHTML = u.dV(Y.itemVo.schoolPanel.name || "");
        if (eu.dX(eu.CONST.ROLE_PLATFORM_ADMIN) || eu.dX(eu.CONST.ROLE_OUT_COURSE_EDITOR)) {
            this.vf[0].href = "#" + eu.umi("adminOuterEditorManagerTCenterEdit") + "?id=" + Y.itemVo.memberId + "&sid=" + Y.itemVo.schoolPanel.id + "&ty=" + this.bV;
            this.vf[1].href = "#" + eu.umi("adminOuterEditorManagerTEdit") + "?id=" + Y.itemVo.memberId + "&sid=" + Y.itemVo.schoolPanel.id + "&ty=" + this.bV
        } else {
            this.vf[0].style.display = "none";
            this.vf[1].style.display = "none"
        }
    };
    Op.bL = function() {
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    d = NEJ.P("edu.d"),
    FE,
    cRO;
    eu.Wx = NEJ.C();
    FE = eu.Wx.bu(p.BZ, true);
    cRO = eu.Wx.cE;
    FE.bP = function() {
        this.yt = true;
        this.bQ();
        this.eX = new d.ri;
        this.eX.bf("onGetLectorPublished", this.bjJ.Z(this))
    };
    FE.bjJ = function(W) {
        if ( !! W) {
            var dU = this.wP(W);
            this.sr(dU)
        }
    };
    FE.wP = function(W) {
        var dU = null;
        u.bA(W.list,
        function(bo, bd) {
            bo.id = bd + (new Date).getTime()
        },
        this);
        dU = {
            totlePageCount: W.pagination.totlePageCount,
            currentPageNo: W.pagination.pageIndex
        };
        dU.list = W.list;
        return dU
    };
    FE.yp = function(kS) {
        var bd = kS ? kS.index: -1;
        if ( !! this.fN && this.fN != bd) {
            this.eX.bMa(this.jR, this.zv, bd, 15, !this.bV ? 1 : 0);
            this.fN = bd
        }
    };
    FE.Ce = function(fA) {
        var cY = eu.bql.bh({
            itemVo: fA,
            from: this.PR,
            type: this.bV
        });
        return cY
    };
    FE.Ca = function(cY) {
        if ( !! cY) {
            cY = eu.bql.bg(cY)
        }
        return cY
    };
    FE.bNf = function(bz) {
        this.bV = bz
    };
    FE.dnx = function(bcs) {
        this.zv = bcs
    };
    FE.bF = function(Y) {
        this.jR = Y.schoolId || null;
        this.PR = Y.from;
        this.bV = Y.type;
        this.zv = Y.searchName;
        Y.dataMaps = this.wP(Y.itemData);
        this.bI(Y)
    }
})(); (function() {
    var o = NEJ.O,
    g = window,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    LP;
    var cF = e.dD(".#<uispace> {}.#<uispace> .row{margin-top:20px;}.#<uispace> .row .txt{font-size:14px;line-height:30px;}.#<uispace> .row .ct{margin-left:8px;}.#<uispace> .row .ct.ct1{margin-left:12px;}.#<uispace> .row.row1{margin-left:80px;}");
    var eg = e.bY('<div><div class="row f-cb"><div class="txt f-fl f-f0"><em class="f-sign">*</em>注册账号</div><div class="ct j-input f-fl"></div></div><div class="row f-cb f-pr" style="z-index:100;"><div class="txt f-fl f-f0"><em class="f-sign">*</em>账号类型</div><div class="ct ct1 j-accountList f-fl"></div></div><div class="row f-cb f-pr" style="z-index:99;"><div class="txt f-fl f-f0"><em class="f-sign">*</em>选择角色</div><div class="ct ct1 j-dropList f-fl"></div></div><div class="row row1 f-cb"><a class="j-addBtn u-btn u-btn-default f-fl"></a><div class="j-feedback f-fl"></div></div></div>');
    eu.OJ = NEJ.C();
    LP = eu.OJ.bu(eu.cq, true);
    LP.bU = function() {
        this.bW = eg;
        this.dv = cF
    };
    LP.bP = function() {
        this.bQ();
        this.wN = e.bc(this.bb, "j-input")[0];
        this.uo = e.bc(this.bb, "j-feedback")[0];
        this.cRu = e.bc(this.bb, "j-accountList")[0];
        this.bNl = e.bc(this.bb, "j-dropList")[0];
        this.hm = e.bc(this.bb, "j-addBtn")[0];
        v.bf(this.hm, "click", this.cQQ.Z(this))
    };
    LP.cQQ = function(bj) {
        var fc = this.nr.cc();
        var bVB = this.VA.Eq();
        var bVA = null;
        if (!fc) {
            this.fk.cu("请输入用户注册账号邮箱", true);
            return
        } else if (!bVB) {
            this.fk.cu("请选择账号类型", true);
            return
        } else if ( !! this.oP) {
            var bNr = this.oP.Eq();
            if (!bNr) {
                this.fk.cu("请选择角色", true);
                return
            } else if ( !! this.bNs && bNr.id == this.bNs) {
                this.fk.cu("请更改一个新的角色", true);
                return
            }
            bVA = bNr.id
        }
        this.bn("onAddRole", {
            loginId: fc,
            loginType: bVB.id,
            roleId: bVA
        })
    };
    LP.bF = function(Y) {
        this.bI(Y);
        this.hm.innerText = Y.btnText || "添加";
        this.bNs = Y.selectRoleId;
        this.cQJ = Y.hiddenRoleList;
        this.nr = eu.cH.bh({
            parent: this.wN,
            labelText: "请输入用户注册账号邮箱",
            width: 350,
            height: 34,
            onInputFocus: this.bNu.Z(this)
        });
        if ( !! Y.loginId) {
            this.nr.mh();
            this.nr.cX(Y.loginId)
        }
        this.fk = eu.cv.bh({
            parent: this.uo
        });
        this.fk.ce();
        this.VA = eu.fI.bh({
            parent: this.cRu,
            selectId: Y.loginType,
            list: [{
                id: eu.CONST.LOGIN_TYPE_URS,
                name: "网易邮箱帐号"
            },
            {
                id: eu.CONST.LOGIN_TYPE_ICOURSE,
                name: "爱课程帐号"
            }],
            defaultName: "请选择账号类型",
            itemSelect: this.bNu.Z(this)
        });
        if ( !! this.VA.Eq()) {
            this.VA.kM(true)
        }
        if ( !! this.cQJ) {
            eu.bt(this.bNl.parentNode)
        } else {
            eu.bw(this.bNl.parentNode);
            this.oP = eu.fI.bh({
                parent: this.bNl,
                selectId: this.bNs,
                list: [{
                    id: g.roleNameIdMap[eu.CONST.ROLE_OUT_COURSE_EDITOR],
                    name: "课程编辑"
                },
                {
                    id: g.roleNameIdMap[eu.CONST.ROLE_OUT_BUSINESS_EDITOR],
                    name: "运营编辑"
                },
                {
                    id: g.roleNameIdMap[eu.CONST.ROLE_OUT_COURSE_REVIEWER],
                    name: "课程审核人员"
                }],
                defaultName: "请选择角色",
                itemSelect: this.bNu.Z(this)
            })
        }
    };
    LP.bNu = function(bj) {
        this.fk.ce()
    };
    LP.bL = function() {
        if ( !! this.nr) {
            this.nr = eu.cH.bg(this.nr)
        }
        if ( !! this.fk) {
            this.fk = eu.cv.bg(this.fk)
        }
        if ( !! this.VA) {
            this.VA = eu.fI.bg(this.VA)
        }
        if ( !! this.oP) {
            this.oP = eu.fI.bg(this.oP)
        }
        this.bO()
    };
    LP.bNv = function() {
        return this.fk
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    Lp,
    cQz;
    var cF = e.dD('.#<uispace> { width:406px; height:160px; margin:0 20px 0 20px;}.#<uispace> .info{ color:#333; font-size:14px;line-height:23px;margin:0 0 50px;font-family:"微软雅黑";}.#<uispace> .info span{ color:#d62727;}.#<uispace> .ok{ margin:0 0 0 147px;}');
    var cQy = e.ee('<div class="m-finishPaidDialog"><p class="info">请在新打开的页面完成支付，<span>支付完成前，请不要关闭此窗口。</span>支付完成后请根据您的情况点击下面按钮：</p><a class="u-btn u-btn-default ok j-okbtn"><span>已完成支付</span></a></div>');
    eu.Il = NEJ.C();
    Lp = eu.Il.bu(eu.hq, true);
    cQz = eu.Il.cE;
    eu.Il.bT = function(Y) {
        var fV = eu.Il.bh(Y);
        fV.gI();
        return fV
    };
    Lp.bU = function() {
        this.bW = e.bY(e.bX(cQy));
        this.dv = cF
    };
    Lp.bP = function() {
        this.bQ();
        this.cQn = e.bc(this.bb, "j-okbtn")[0];
        v.bf(this.cQn, "click", this.bTK.Z(this));
        this.uj = new d.bhm;
        this.uj.bf("onGetPayStatus", this.bqK.Z(this));
        this.uj.bf("onGetDonateStatus", this.bqK.Z(this))
    };
    Lp.bqK = function(W) {
        if ( !! W) {
            this.bn("succeed")
        } else {
            this.bn("failed")
        }
        this.iR()
    };
    Lp.bTK = function() {
        switch (this.bV) {
        case "buyCourse":
            this.uj.cQm(this.cA);
            break;
        case "donate":
            this.uj.cQl(this.cQc);
        case "buyCourseTerm":
            break
        }
    };
    Lp.iR = function() {
        this.fs()
    };
    Lp.bF = function(Y) {
        Y.title = " ";
        Y.maskClickNotHidden = true;
        Y.closeBtnHidden = true;
        this.cA = Y.termId;
        this.cQc = Y.orderId;
        this.bV = Y.type;
        this.bI(Y)
    };
    Lp.bL = function() {
        this.bO()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    bD = u.eW(),
    wL,
    VY = "ck-OrderCache",
    rO = 8;
    d.bhm = NEJ.C();
    wL = d.bhm.bu(d.hA);
    wL.cQa = function() {
        this.bK({
            key: VY + bD,
            url: "MocOrderBean.getMemberAuthDto",
            param: [],
            onload: this.bNK.Z(this)
        })
    };
    wL.bNK = function(W) {
        this.bn("onGetMemberAuthDto", W)
    };
    wL.cPQ = function(cPH) {
        this.bK({
            key: VY + bD,
            url: "MocOrderBean.updateMemberAuthDto",
            param: [cPH],
            onload: this.bNN.Z(this)
        })
    };
    wL.bNN = function(W) {
        this.bn("onUpdateMemberAuthDto", W)
    };
    wL.cPy = function(cd, cPw) {
        this.bK({
            key: VY + bD,
            url: "MocOrderBean.getProductChargeableInfo",
            param: [cd, cPw],
            onload: this.bNQ.Z(this)
        })
    };
    wL.bNQ = function(W) {
        this.bn("onGetProductChargeableInfo", W)
    };
    wL.cQm = function(cd) {
        this.bK({
            key: VY + bD,
            url: "MocOrderBean.getPayStatus",
            param: [cd],
            onload: this.bqK.Z(this)
        })
    };
    wL.bqK = function(W) {
        this.bn("onGetPayStatus", W)
    };
    wL.cPl = function(cd) {
        this.bK({
            key: VY + bD,
            url: "MocOrderBean.getDonateInfo",
            param: [cd],
            onload: this.bNS.Z(this)
        })
    };
    wL.bNS = function(W) {
        this.bn("onGetDonateInfo", W)
    };
    wL.cQl = function(It) {
        this.bK({
            key: VY + bD,
            url: "MocOrderBean.getDonateStatus",
            param: [It],
            onload: this.cPk.Z(this)
        })
    };
    wL.cPk = function(W) {
        this.bn("onGetDonateStatus", W)
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    bm = bq("nej.e"),
    bE = bq("nej.u"),
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.bqS) return;
    bs.bqS = NEJ.C();
    bN = bs.bqS.bu(bs.hS);
    bN.bF = function(Y) {
        this.bI(Y);
        var pC = {
            province: bm.bM(Y.province),
            city: bm.bM(Y.city),
            area: bm.bM(Y.area)
        };
        this.HY = pC;
        this.BQ = pC.province.options.length || 0;
        this.hd([[pC.area, "change", this.jv.Z(this, "area")], [pC.city, "change", this.jv.Z(this, "city")], [pC.province, "change", this.jv.Z(this, "province")]]);
        this.cg = Y.cache || bs.dnB.bh();
        this.cg.Yj("onlistload", this.cPh.Z(this));
        this.bqX(pC.province);
        this.bgh(Y.data, !0);
        this.cg.KO({
            key: "province"
        })
    };
    bN.bL = function() {
        this.bO();
        if ( !! this.cg) {
            this.cg.bg();
            delete this.cg
        }
        delete this.cg;
        delete this.bv;
        delete this.HY
    };
    bN.bqX = function(mT) {
        if ( !! mT) {
            mT.options.length = this.BQ
        }
    };
    bN.cOX = function(mT, bH) {
        if (!mT) return;
        bE.bA(bH,
        function(bG) {
            mT.add(new Option(bG, bG))
        });
        bm.ev(mT, "display", !bH || !bH.length ? "none": "")
    };
    bN.bVy = function(bz) {
        var bG = this.bv[bz] || "";
        if ( !! bG) {
            this.HY[bz].value = bG;
            delete this.bv[bz]
        }
        this.jv(bz)
    };
    bN.jv = function(bz) {
        var pC = this.HY,
        bG = pC.province.value;
        switch (bz) {
        case "province":
            this.bqX(pC.city);
            this.bqX(pC.area);
            if (!this.cg.cOP(bG)) {
                bm.ev(pC.area, "display", "none");
                if (!pC.area) {
                    bm.ev(pC.city, "display", "none");
                    break
                } else {
                    bm.ev(pC.city, "display", "")
                }
            } else {
                bm.ev(pC.area, "display", "");
                bm.ev(pC.city, "display", "")
            }
            if ( !! pC.city && !!bG) {
                this.cg.KO({
                    key: "city-" + bG
                })
            }
            break;
        case "city":
            this.bqX(pC.area);
            var bVx = pC.city.value;
            if (!bVx) return;
            this.cg.KO({
                key: "area-" + bG + "-" + bVx
            });
            break
        }
        this.bn("onchange", bz)
    };
    bN.cPh = function(Y) {
        var bS = Y.key,
        bz = bS.split("-")[0],
        bB = this.HY[bz];
        this.cOX(bB, this.cg.zz(bS));
        this.bVy(bz)
    };
    bN.bgh = function(W, cOs) {
        this.bv = W || de;
        if (!cOs) this.bVy("province");
        return this
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bE = bq("nej.u"),
    bs = bq("nej.ut"),
    bN,
    sk;
    if ( !! bs.brf) return;
    bs.brf = NEJ.C();
    bN = bs.brf.bu(bs.bqF);
    sk = bs.brf.cE;
    bN.bF = function(Y) {
        this.bI(Y);
        this.vT = Y.key || "id";
        this.bv = Y.data || de;
        this.cOq = !!Y.autogc;
        this.cNC(Y.id)
    };
    bN.bL = function() {
        this.bO();
        if ( !! this.gp) {
            this.bVw()
        }
    };
    bN.cNC = function(ca) {
        var cP;
        if ( !! ca) {
            cP = this.cg[ca];
            if (!cP) {
                cP = {};
                this.cg[ca] = cP
            }
        }
        cP = cP || this.cg;
        cP.hash = cP.hash || {};
        this.Ub = cP
    };
    bN.bVw = function() {
        this.gp = window.clearTimeout(this.gp);
        var dF = {};
        bE.hW(this.Ub,
        function(bH, bS) {
            if (bS == "hash") return;
            if (!bE.jQ(bH)) return;
            bE.bA(bH,
            function(bo) {
                if (!bo) return;
                dF[bo[this.vT]] = !0
            },
            this)
        },
        this);
        bE.hW(this.brk(),
        function(bo, ca, jM) {
            if (!dF[ca]) {
                delete jM[ca]
            }
        })
    };
    bN.cMw = function() {
        if ( !! this.gp) {
            this.gp = window.clearTimeout(this.gp)
        }
        this.gp = window.setTimeout(this.bVw.Z(this), 150)
    };
    bN.Ue = function(bo, Ug) {
        if (!bE.jQ(bo)) {
            bo = this.cMr(bo, Ug) || bo;
            if (!bo) return null;
            var bS = bo[this.vT];
            if (bS != null) {
                var gx = this.brk()[bS];
                if ( !! gx) bo = NEJ.X(gx, bo);
                this.brk()[bS] = bo
            }
            delete bo.bVv;
            return bo
        }
        var cL = [];
        bE.bA(bo,
        function(Rt) {
            cL.push(this.Ue(Rt, Ug))
        },
        this);
        return cL
    };
    bN.bVu = function(Ug, ca) {
        var cL = null,
        bOt = this.vT;
        if (!bE.jQ(ca)) {
            var cL = null,
            bOt = this.vT;
            ca = ca[bOt] || ca;
            var bH = this.zz(Ug),
            bd = bE.oa(bH,
            function(gx) {
                return !! gx && gx[bOt] == ca
            });
            if (bd >= 0) {
                cL = bH[bd];
                bH.splice(bd, 1)
            }
            return cL
        }
        var cL = [];
        bE.bA(ca,
        function(bo) {
            cL.push(this.bVu(Ug, bo))
        },
        this);
        return cL
    };
    bN.cMr = dk;
    bN.bVt = function(bS, bo) {
        if (!bo) return;
        if (!bE.jQ(bo)) {
            var bH = this.zz(bS),
            bo = this.Ue(bo, bS);
            if ( !! bo) bH.unshift(bo);
            return
        }
        bE.od(bo, this.bVt.Z(this, bS))
    };
    bN.byV = function(bS, fS) {
        var bH = this.zz(bS);
        bH.length = Math.max(bH.length, fS);
        this.brt(bS);
        return this
    };
    bN.bbo = function(bS) {
        return this.zz(bS).length
    };
    bN.brt = function(bS, cLj) {
        this.zz(bS).loaded = cLj !== !1;
        return this
    };
    bN.dnF = function(bS) {
        return !! this.zz(bS).loaded
    };
    bN.dnG = function(bS, bH) {
        this.bVs(bS);
        this.bVr({
            key: bS,
            offset: 0,
            limit: bH.length + 1
        },
        {
            list: bH,
            total: bH.length
        })
    };
    bN.zz = function() {
        var PF = function(bS) {
            return (bS || "") + (!bS ? "": "-") + "list"
        };
        return function(bS) {
            var bS = PF(bS),
            bH = this.Ub[bS];
            if (!bH) {
                bH = [];
                this.Ub[bS] = bH
            }
            return bH
        }
    } ();
    bN.brk = function() {
        var jM = this.Ub.hash;
        if (!jM) {
            jM = {};
            this.Ub.hash = jM
        }
        return jM
    };
    bN.dnI = function() {
        var PF = function(Y) {
            return "r-" + Y.key
        };
        return function(Y) {
            var lQ = NEJ.X({},
            Y),
            Na = PF(lQ);
            if (!this.bxm(Na, this.bn.Z(this))) {
                lQ.rkey = Na;
                lQ.onload = this.cIP.Z(this, lQ);
                this.bn("dopullrefresh", lQ)
            }
            return this
        }
    } ();
    bN.cIP = function(Y, cL) {
        var bS = Y.key,
        fS = parseInt(cL.total),
        bH = cL.list || cL.result;
        this.bVt(bS, bH || cL);
        if (!isNaN(fS) && !!bH) {
            this.zz(bS).length = fS;
            this.brt(bS)
        }
        this.bxk(Y.rkey, "onpullrefresh", Y)
    };
    bN.KO = function() {
        var PF = function(Y) {
            return "r-" + Y.key + "-" + Y.offset + "-" + Y.limit
        };
        return function(Y) {
            Y = Y || de;
            var lQ = {
                key: "" + Y.key || "",
                ext: Y.ext || null,
                data: Y.data || null,
                offset: parseInt(Y.offset) || 0,
                limit: parseInt(Y.limit) || 0
            },
            bH = this.zz(lQ.key);
            if (this.cYy(bH, lQ.offset, lQ.limit)) {
                this.bn("onlistload", lQ);
                return this
            }
            var Na = PF(lQ);
            if (!this.bxm(Na, this.bn.Z(this))) {
                lQ.rkey = Na;
                lQ.onload = this.bVr.Z(this, lQ);
                this.bn("doloadlist", lQ)
            }
            return this
        }
    } ();
    bN.bVr = function() {
        var RH = function(bo, bd, bH) {
            if ( !! bo) {
                return ! 0
            }
            bH.splice(bd, 1)
        };
        return function(Y, cL) {
            Y = Y || de;
            var bS = Y.key,
            gG = Y.offset,
            bVp = this.zz(bS);
            var bH = cL || [];
            if (!bE.jQ(bH)) {
                bH = cL.result || cL.list || [];
                var fS = parseInt(cL.total);
                if (!isNaN(fS) || fS > bH.length) {
                    this.byV(bS, fS)
                }
            }
            bE.bA(bH,
            function(bo, bd) {
                bVp[gG + bd] = this.Ue(bo, bS)
            },
            this);
            if (bH.length < Y.limit) {
                this.brt(bS);
                bE.od(bVp, RH)
            }
            this.bxk(Y.rkey, "onlistload", Y)
        }
    } ();
    bN.bVs = function() {
        var RH = function(bo, bd, bH) {
            bH.splice(bd, 1)
        };
        return function(bS) {
            if ( !! bS) {
                var bH = this.zz(bS);
                bE.od(bH, RH);
                this.brt(bS, !1);
                if (this.cOq) {
                    this.cMw()
                }
            } else {
                bE.hW(this.Ub,
                function(bH, bS) {
                    if (bS == "hash" || !bE.jQ(bH)) return;
                    bS = bS.substr(0, bS.length - 5);
                    this.bVs(bS)
                },
                this)
            }
            return this
        }
    } ();
    bN.cIr = function(bo, Ug) {
        return ! bo.bVv
    };
    bN.bOI = function(ca) {
        return this.brk()[ca]
    };
    bN.dnJ = function(ca) {
        var bo = this.bOI(ca);
        if ( !! bo) bo.bVv = !0
    };
    bN.bWh = function() {
        var PF = function(Y) {
            return "r-" + Y.key + "-" + Y.id
        };
        return function(Y) {
            Y = Y || de;
            var ca = Y[this.vT],
            lQ = {
                id: ca,
                ext: Y.ext,
                data: Y.data || {},
                key: "" + Y.key || ""
            };
            bo = this.bOI(ca);
            lQ.data[this.vT] = ca;
            if ( !! bo && this.cIr(bo, lQ.key)) {
                this.bn("onitemload", lQ);
                return this
            }
            var Na = PF(lQ);
            if (!this.bxm(Na, this.bn.Z(this))) {
                lQ.rkey = Na;
                lQ.onload = this.cGU.Z(this, lQ);
                this.bn("doloaditem", lQ)
            }
            return this
        }
    } ();
    bN.cGU = function(Y, bo) {
        Y = Y || de;
        this.Ue(bo, Y.key);
        this.bxk(Y.rkey, "onitemload", Y)
    };
    bN.dnK = function(Y) {
        Y = NEJ.X({},
        Y);
        Y.onload = this.cEA.Z(this, Y);
        this.bn("doadditem", Y)
    };
    bN.cEA = function(Y, bo) {
        var bS = Y.key;
        bo = this.Ue(bo, bS);
        if ( !! bo) {
            var cN = 0,
            bH = this.zz(bS);
            if (!Y.push) {
                cN = -1;
                var gG = Y.offset || 0;
                bH.splice(gG, 0, bo)
            } else if (bH.loaded) {
                cN = 1;
                bH.push(bo)
            } else {
                bH.length++
            }
        }
        var bj = {
            key: bS,
            flag: cN,
            data: bo,
            action: "add",
            ext: Y.ext
        };
        this.bn("onitemadd", bj);
        return bj
    };
    bN.dnL = function(Y) {
        Y = NEJ.X({},
        Y);
        Y.onload = this.bos.Z(this, Y);
        this.bn("dodeleteitem", Y)
    };
    bN.bos = function(Y, bnK) {
        var bo, bS = Y.key;
        if ( !! bnK) {
            var ca = Y.id;
            bo = this.bOI(ca) || null;
            this.bVu(bS, ca)
        }
        var bj = {
            key: bS,
            data: bo,
            action: "delete",
            ext: Y.ext
        };
        this.bn("onitemdelete", bj);
        return bj
    };
    bN.dnN = function(Y) {
        Y = NEJ.X({},
        Y);
        Y.onload = this.cDt.Z(this, Y);
        this.bn("doupdateitem", Y)
    };
    bN.cDt = function(Y, bo) {
        var bS = Y.key;
        if ( !! bo) bo = this.Ue(bo, bS);
        var bj = {
            key: bS,
            data: bo,
            action: "update",
            ext: Y.ext
        };
        this.bn("onitemupdate", bj);
        return bj
    }
})(); (function() {
    var bq = NEJ.P,
    de = NEJ.O,
    dk = NEJ.F,
    bE = bq("nej.u"),
    bs = bq("nej.ut"),
    bN;
    if ( !! bs.bOQ) return;
    bs.bOQ = NEJ.C();
    bN = bs.bOQ.bu(bs.brf);
    bN.bF = function(Y) {
        this.bI(Y);
        this.bSo({
            doloadlist: this.bVi.Z(this),
            doloaditem: this.cDm.Z(this),
            doadditem: this.cDl.Z(this),
            dodeleteitem: this.cDj.Z(this),
            doupdateitem: this.cDg.Z(this),
            dopullrefresh: this.cDb.Z(this)
        })
    };
    bN.bVi = dk;
    bN.cDb = dk;
    bN.cDm = dk;
    bN.cDl = dk;
    bN.cDj = dk;
    bN.cDg = dk
})(); (function() {
    var lr = NEJ.R,
    bs = NEJ.P("nej.ut"),
    bR = NEJ.P("edu.u"),
    bOX;
    if ( !! bR.$$eduRegionCacheZH) return;
    bR.bVh = NEJ.C();
    bOX = bR.bVh.bu(bs.bOQ);
    bOX.bVi = function(Y) {
        var bH, dc = Y.key.split("-");
        switch (dc.shift()) {
        case "province":
            bH = bOZ.p;
            break;
        case "city":
            bH = bOZ.c[dc.join("-")] || lr;
            break;
        case "area":
            bH = [];
            break
        }
        this.byV(Y.key, bH.length);
        Y.onload(bH)
    };
    bOX.cOP = function(bcI) {
        return ! bOZ.s[bcI]
    };
    var bOZ = {
        s: {
            "选择": 1,
            "北京市": 1,
            "天津市": 1,
            "上海市": 1,
            "重庆市": 1,
            "河北省": 1,
            "山西省": 1,
            "辽宁省": 1,
            "吉林省": 1,
            "黑龙江省": 1,
            "江苏省": 1,
            "浙江省": 1,
            "安徽省": 1,
            "福建省": 1,
            "江西省": 1,
            "山东省": 1,
            "河南省": 1,
            "湖北省": 1,
            "湖南省": 1,
            "广东省": 1,
            "海南省": 1,
            "四川省": 1,
            "贵州省": 1,
            "云南省": 1,
            "陕西省": 1,
            "甘肃省": 1,
            "青海省": 1,
            "西藏自治区": 1,
            "内蒙古自治区": 1,
            "广西壮族自治区": 1,
            "宁夏回族自治区": 1,
            "新疆维吾尔自治区": 1,
            "香港特别行政区": 1,
            "澳门特别行政区": 1,
            "台湾": 1,
            "其他": 1
        },
        p: ["选择", "北京市", "天津市", "上海市", "重庆市", "河北省", "山西省", "辽宁省", "吉林省", "黑龙江省", "江苏省", "浙江省", "安徽省", "福建省", "江西省", "山东省", "河南省", "湖北省", "湖南省", "广东省", "海南省", "四川省", "贵州省", "云南省", "陕西省", "甘肃省", "青海省", "西藏自治区", "内蒙古自治区", "广西壮族自治区", "宁夏回族自治区", "新疆维吾尔自治区", "香港特别行政区", "澳门特别行政区", "台湾", "其他"],
        c: {
            "选择": ["选择"],
            "北京市": ["东城区", "西城区", "朝阳区", "丰台区", "石景山区", "海淀区", "门头沟区", "房山区", "通州区", "顺义区", "昌平区", "大兴区", "怀柔区", "平谷区", "密云县", "延庆县"],
            "天津市": ["和平区", "河东区", "河西区", "南开区", "河北区", "红桥区", "东丽区", "西青区", "津南区", "北辰区", "武清区", "宝坻区", "滨海新区", "宁河县", "静海县", "蓟县"],
            "河北省": ["石家庄市", "唐山市", "秦皇岛市", "邯郸市", "邢台市", "保定市", "张家口市", "承德市", "沧州市", "廊坊市", "衡水市"],
            "山西省": ["太原市", "大同市", "阳泉市", "长治市", "晋城市", "朔州市", "晋中市", "运城市", "忻州市", "临汾市", "吕梁市"],
            "内蒙古自治区": ["呼和浩特市", "包头市", "乌海市", "赤峰市", "通辽市", "鄂尔多斯市", "呼伦贝尔市", "巴彦淖尔市", "乌兰察布市", "兴安盟", "锡林郭勒盟", "阿拉善盟"],
            "辽宁省": ["沈阳市", "大连市", "鞍山市", "抚顺市", "本溪市", "丹东市", "锦州市", "营口市", "阜新市", "辽阳市", "盘锦市", "铁岭市", "朝阳市", "葫芦岛市"],
            "吉林省": ["长春市", "吉林市", "四平市", "辽源市", "通化市", "白山市", "松原市", "白城市", "延边朝鲜族自治州"],
            "黑龙江省": ["哈尔滨市", "齐齐哈尔市", "鸡西市", "鹤岗市", "双鸭山市", "大庆市", "伊春市", "佳木斯市", "七台河市", "牡丹江市", "黑河市", "绥化市", "大兴安岭地区"],
            "上海市": ["黄浦区", "徐汇区", "长宁区", "静安区", "普陀区", "闸北区", "虹口区", "杨浦区", "闵行区", "宝山区", "嘉定区", "浦东新区", "金山区", "松江区", "青浦区", "奉贤区", "崇明县"],
            "江苏省": ["南京市", "无锡市", "徐州市", "常州市", "苏州市", "南通市", "连云港市", "淮安市", "盐城市", "扬州市", "镇江市", "泰州市", "宿迁市"],
            "浙江省": ["杭州市", "宁波市", "温州市", "嘉兴市", "湖州市", "绍兴市", "金华市", "衢州市", "舟山市", "台州市", "丽水市"],
            "安徽省": ["合肥市", "芜湖市", "蚌埠市", "淮南市", "马鞍山市", "淮北市", "铜陵市", "安庆市", "黄山市", "滁州市", "阜阳市", "宿州市", "六安市", "亳州市", "池州市", "宣城市"],
            "福建省": ["福州市", "厦门市", "莆田市", "三明市", "泉州市", "漳州市", "南平市", "龙岩市", "宁德市"],
            "江西省": ["南昌市", "景德镇市", "萍乡市", "九江市", "新余市", "鹰潭市", "赣州市", "吉安市", "宜春市", "抚州市", "上饶市"],
            "山东省": ["济南市", "青岛市", "淄博市", "枣庄市", "东营市", "烟台市", "潍坊市", "济宁市", "泰安市", "威海市", "日照市", "莱芜市", "临沂市", "德州市", "聊城市", "滨州市", "菏泽市"],
            "河南省": ["郑州市", "开封市", "洛阳市", "平顶山市", "安阳市", "鹤壁市", "新乡市", "焦作市", "濮阳市", "许昌市", "漯河市", "三门峡市", "南阳市", "商丘市", "信阳市", "周口市", "驻马店市", "省直辖县级行政区划"],
            "湖北省": ["武汉市", "黄石市", "十堰市", "宜昌市", "襄阳市", "鄂州市", "荆门市", "孝感市", "荆州市", "黄冈市", "咸宁市", "随州市", "恩施土家族苗族自治州", "省直辖县级行政区划"],
            "湖南省": ["长沙市", "株洲市", "湘潭市", "衡阳市", "邵阳市", "岳阳市", "常德市", "张家界市", "益阳市", "郴州市", "永州市", "怀化市", "娄底市", "湘西土家族苗族自治州"],
            "广东省": ["广州市", "韶关市", "深圳市", "珠海市", "汕头市", "佛山市", "江门市", "湛江市", "茂名市", "肇庆市", "惠州市", "梅州市", "汕尾市", "河源市", "阳江市", "清远市", "东莞市", "中山市", "潮州市", "揭阳市", "云浮市"],
            "广西壮族自治区": ["南宁市", "柳州市", "桂林市", "梧州市", "北海市", "防城港市", "钦州市", "贵港市", "玉林市", "百色市", "贺州市", "河池市", "来宾市", "崇左市"],
            "海南省": ["海口市", "三亚市", "三沙市", "省直辖县级行政区划"],
            "重庆市": ["万州区", "涪陵区", "渝中区", "大渡口区", "江北区", "沙坪坝区", "九龙坡区", "南岸区", "北碚区", "綦江区", "大足区", "渝北区", "巴南区", "黔江区", "长寿区", "江津区", "合川区", "永川区", "南川区", "潼南县", "铜梁县", "荣昌县", "璧山县", "梁平县", "城口县", "丰都县", "垫江县", "武隆县", "忠县", "开县", "云阳县", "奉节县", "巫山县", "巫溪县", "石柱土家族自治县", "秀山土家族苗族自治县", "酉阳土家族苗族自治县", "彭水苗族土家族自治县"],
            "四川省": ["成都市", "自贡市", "攀枝花市", "泸州市", "德阳市", "绵阳市", "广元市", "遂宁市", "内江市", "乐山市", "南充市", "眉山市", "宜宾市", "广安市", "达州市", "雅安市", "巴中市", "资阳市", "阿坝藏族羌族自治州", "甘孜藏族自治州", "凉山彝族自治州"],
            "贵州省": ["贵阳市", "六盘水市", "遵义市", "安顺市", "毕节市", "铜仁市", "黔西南布依族苗族自治州", "黔东南苗族侗族自治州", "黔南布依族苗族自治州"],
            "云南省": ["昆明市", "曲靖市", "玉溪市", "保山市", "昭通市", "丽江市", "普洱市", "临沧市", "楚雄彝族自治州", "红河哈尼族彝族自治州", "文山壮族苗族自治州", "西双版纳傣族自治州", "大理白族自治州", "德宏傣族景颇族自治州", "怒江傈僳族自治州", "迪庆藏族自治州"],
            "西藏自治区": ["拉萨市", "昌都地区", "山南地区", "日喀则地区", "那曲地区", "阿里地区", "林芝地区"],
            "陕西省": ["西安市", "铜川市", "宝鸡市", "咸阳市", "渭南市", "延安市", "汉中市", "榆林市", "安康市", "商洛市"],
            "甘肃省": ["兰州市", "嘉峪关市", "金昌市", "白银市", "天水市", "武威市", "张掖市", "平凉市", "酒泉市", "庆阳市", "定西市", "陇南市", "临夏回族自治州", "甘南藏族自治州"],
            "青海省": ["西宁市", "海东地区", "海北藏族自治州", "黄南藏族自治州", "海南藏族自治州", "果洛藏族自治州", "玉树藏族自治州", "海西蒙古族藏族自治州"],
            "宁夏回族自治区": ["银川市", "石嘴山市", "吴忠市", "固原市", "中卫市"],
            "新疆维吾尔自治区": ["乌鲁木齐市", "克拉玛依市", "吐鲁番地区", "哈密地区", "昌吉回族自治州", "博尔塔拉蒙古自治州", "巴音郭楞蒙古自治州", "阿克苏地区", "克孜勒苏柯尔克孜自治州", "喀什地区", "和田地区", "伊犁哈萨克自治州", "塔城地区", "阿勒泰地区", "自治区直辖县级行政区划"],
            "香港特别行政区": ["中西区", "东区", "九龙城区", "观塘区", "南区", "深水埗区", "黄大仙区", "湾仔区", "油尖旺区", "离岛区", "葵青区", "北区", "西贡区", "沙田区", "屯门区", "大埔区", "荃湾区", "元朗区", "其他"],
            "澳门特别行政区": ["花地玛堂区", "圣安多尼堂区", "大堂区", "望德堂区", "风顺堂区", "氹仔", "路环", "其他"],
            "台湾": ["台北市", "高雄市", "基隆市", "台中市", "台南市", "新竹市", "嘉义市", "新北市", "宜兰县", "桃园县", "新竹县", "苗栗县", "台中县", "彰化县", "南投县", "云林县", "嘉义县", "台南县", "高雄县", "屏东县", "澎湖县", "台东县", "花莲县", "其他"],
            "其他": ["其他"]
        },
        a: {}
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    fx = NEJ.P("nej.ut"),
    Qm,
    cCf,
    cCc = e.ee('<div class="u-eduReagion"><select id="province" class="slt"></select> <select id="city" class="slt"></select> <select id="area" class="slt" style="display:none"></select></div>');
    eu.WY = NEJ.C();
    Qm = eu.WY.bu(eu.cq);
    cCf = eu.WY.cE;
    Qm.bU = function() {
        this.bW = e.bY(e.bX(cCc))
    };
    Qm.bP = function() {
        this.bQ();
        this.LA = e.cS(this.bb)
    };
    Qm.bVg = function() {
        var W = {
            province: this.LA[0].value == "选择" ? "": this.LA[0].value,
            city: this.LA[1].value == "选择" ? "": this.LA[1].value
        };
        return W
    };
    Qm.bgh = function(W) {
        this.jA.bgh(W)
    };
    Qm.bF = function(Y) {
        this.bI(Y);
        this.cBu = eu.bVh.bh();
        this.jA = fx.bqS.bh({
            parent: this.bb,
            province: this.LA[0],
            city: this.LA[1],
            area: this.LA[2],
            data: Y.data,
            cache: this.cBu
        })
    };
    Qm.bL = function() {
        if ( !! this.jA) {
            this.jA = fx.bqS.bg(this.jA)
        }
        u.bA(this.LA,
        function(bo) {
            bo.innerHTML = ""
        });
        this.bO()
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    FS,
    cBt;
    var dn = e.ee('<div class="f-pr u-body"><div class="u-payList f-cb"><div class="j-payBlock f-fl pay0 f-pr"><span class="f-pa f-ib check"></span></div><div class="j-payBlock f-fl pay1 f-pr"><span class="f-pa f-ib check"></span></div><div class="j-payBlock f-fl pay2 f-pr" data-id=""><span class="f-pa f-ib check"></span><span class="f-pa f-ib drop"></span></div><div class="j-info f-fl f-pr"><span class="warning f-pa"></span><div class="attention">建议使用IE浏览器继续支付，以便正常使用网银大额支付请注意<a href="https://epay.163.com/help/quickPayChargeLimitHelp.html" target="_blank">各银行网银充值限额</a></div></div></div><div class="j-bankList bankListHide f-pa"><div class="bankContent"><div class="j-fullList f-cb"><ul></ul></div><div class="j-shortList f-cb"><ul></ul></div></div></div></div>');
    var cF = e.dD(".#<uispace> .u-body{width:900px}.#<uispace> .j-payBlock{margin-right: 25px;width: 139px;height: 48px;border:1px solid #cccccc;cursor:pointer;background: url(/res/images/pages/pay/payList.png);}.#<uispace> .active{border:1px solid #21a557;}.#<uispace> .active .check{top: 0px;right: 0px;width: 23px;height: 24px;background: url(/res/images/pages/pay/payIcons.png) 0 -161px;}.#<uispace> .drop{right:3px;bottom:3px;border-top:5px solid #fff;border-left:5px solid #fff;border-right:5px  solid #cccccc;border-bottom:5px solid #cccccc;width:1px;height:1px;}.#<uispace> .pay0{background-position: 0px 0px;}.#<uispace> .pay0-disable{background-position: 0px -50px;}.#<uispace> .pay1{background-position: -140px 0px;}.#<uispace> .pay1-disable{background-position: -140px -50px;}.#<uispace> .pay2{background:url(/res/images/pages/pay/bankLogo.png);background-position: 0px -864px;}.#<uispace> .pay2-disable{background-position: 0px -864px;}.#<uispace> .j-info{margin-left:-18px;padding-left: 30px;height: 48px;display:none;font-size:12px;}.#<uispace> .j-info .warning{display:block;width:23px;height:23px;left:0;top:0;background: url(/res/images/ui/ui_sprite.png) no-repeat -2px -48px;}.#<uispace> .j-info a{color:#10ae58;}.#<uispace> .attention{line-height: 18px;width: 180px;}.#<uispace> .j-bankList{padding-top:10px;width: 670px ;top:50px;z-index: 2;}.#<uispace> .bankContent{background-color: #eeeeee;border: 1px solid #cccccc;}.#<uispace> .bankListHide{display: none;}.#<uispace> .j-fullList ul{margin: 0 0;}.#<uispace> .j-fullList ul li{list-style: none;float: left;margin-left: 20px;margin-top: 10px;width: 140px;height: 50px;border: 1px solid #cccccc;cursor:pointer;background:url(/res/images/pages/pay/bankLogo.png);}.#<uispace> .j-shortList{padding: 10px 0;}.#<uispace> .j-shortList ul{margin: 0px 0 ;}.#<uispace> .j-shortList ul li{float: left;margin-left: 25px;margin-top: 10px;font-size:12px;}.#<uispace> .j-shortList li a{color:#666666;}.#<uispace> .j-shortList li a:hover{color:#10ae58;}");
    var Dh = {
        mainMethod: [{
            name: "网易宝",
            id: ""
        },
        {
            name: "支付宝",
            type: "ALIPAY",
            id: "0023",
            picPosition: ""
        },
        {
            name: "网银",
            picPosition: " 0px -864px"
        }],
        fullBank: [{
            name: "工商银行",
            type: "ICBC",
            id: "0001",
            picPosition: "0px 0px"
        },
        {
            name: "建设银行",
            type: "JSYH",
            id: "0004",
            picPosition: "0px -48px"
        },
        {
            name: "农业银行",
            type: " ABC",
            id: "0002",
            picPosition: "0px -96px"
        },
        {
            name: "中国银行",
            type: "ZGYH",
            id: "0009",
            picPosition: "0px -288px"
        },
        {
            name: "邮政储蓄",
            type: "YZCX",
            id: "0006",
            picPosition: "0px -144px"
        },
        {
            name: "招商银行",
            type: "CMB",
            id: "0003",
            picPosition: "0px -240px"
        },
        {
            name: "交通银行",
            type: " JTYH",
            id: "0014",
            picPosition: "0px -192px"
        },
        {
            name: "民生银行",
            type: "MSYH",
            id: "0013",
            picPosition: "0px -480px"
        }],
        shortBank: [{
            name: "中信银行",
            type: "ZXYH",
            id: "0200",
            picPosition: "0px -384px"
        },
        {
            name: "华夏银行",
            type: "HXYH",
            id: "0016",
            picPosition: "0px -720px"
        },
        {
            name: "光大银行",
            type: "GDYH",
            id: "0008",
            picPosition: "0px -336px"
        },
        {
            name: "兴业银行",
            type: "XYYH",
            id: "0007",
            picPosition: "0px -528px"
        },
        {
            name: "深圳发展银行",
            type: "SFZYH",
            id: "0010",
            picPosition: "0px -672px"
        },
        {
            name: "浦发银行",
            type: " PFYH",
            id: "0011",
            picPosition: "0px -432px"
        },
        {
            name: "广发银行",
            type: "GFYH",
            id: "0022",
            picPosition: "0px -624px"
        },
        {
            name: "杭州银行",
            type: "HZYH",
            id: "0155",
            picPosition: "0px -816px"
        },
        {
            name: "平安银行",
            type: "PAYH",
            id: "0204",
            picPosition: "0px -576px"
        },
        {
            name: "上海银行",
            type: "SHYH",
            id: "0302",
            picPosition: "0px -768px"
        }]
    };
    eu.XB = NEJ.C();
    FS = eu.XB.bu(eu.cq, true);
    cBt = eu.XB.cE;
    FS.bU = function() {
        this.dv = cF;
        this.bW = e.bY(e.bX(dn))
    };
    FS.bP = function() {
        this.bQ();
        this.lI = e.bc(this.bb, "j-payBlock");
        this.XX = e.bc(this.bb, "j-bankList")[0];
        this.cBs = e.bc(this.bb, "j-fullList")[0].children[0];
        this.cBh = e.bc(this.bb, "j-shortList")[0].children[0];
        this.oX = e.bc(this.bb, "j-info")[0];
        this.bVf = e.cS(this.oX);
        this.bse = null;
        this.bsf = null;
        if ( !! eu.nf()) {
            this.bVf[0].style.display = "none"
        } else {
            this.bVf[0].style.display = "block"
        }
        if (g.environmentType == "test") {
            Dh.shortBank.push({
                name: "工商银行测试环境",
                type: "TEST_ICBC",
                id: "9968",
                picPosition: "0px 0px"
            })
        }
        var dh = "";
        u.bA(Dh.fullBank,
        function(bo, bd) {
            dh += "<li class='j-bankItem' data-index='fullBank-" + bd + "' style='background-position:" + bo.picPosition + "'></li>"
        });
        this.cBs.innerHTML = dh;
        var dh = "";
        u.bA(Dh.shortBank,
        function(bo, bd) {
            dh += "<li class='j-bankItem' data-index='shortBank-" + bd + "'><a>" + bo.name + "</a></li>"
        });
        this.cBh.innerHTML = dh;
        v.bf(this.lI[0], "click", this.bPu.Z(this, 0));
        v.bf(this.lI[1], "click", this.bPu.Z(this, 1));
        v.bf(this.lI[2], "mouseover", this.bPu.Z(this, 2));
        v.bf(this.lI[2], "click",
        function() {
            if ( !! this.bse) {
                u.bA(this.lI,
                function(bo, bd) {
                    e.bZ(bo, "active")
                });
                e.bJ(this.XX, "bankListHide");
                e.bJ(this.lI[2], "active");
                this.bhc = this.bse;
                this.oX.style.display = "block"
            }
        }.Z(this));
        v.bf(this.XX, "click", this.cAZ.Z(this));
        v.bf(this.bb, "mouseout",
        function(bj) {
            this.bsf = setTimeout(function() {
                e.bJ(this.XX, "bankListHide")
            }.Z(this), 200)
        }.Z(this));
        v.bf(this.bb, "mouseover",
        function() {
            if ( !! this.bsf) {
                clearTimeout(this.bsf);
                this.bsf = null
            }
        }.Z(this))
    };
    FS.bVc = function(cU) {
        this.kZ = !!cU;
        if ( !! cU) {
            u.bA(this.lI,
            function(bo, bd) {
                e.bZ(bo, "active pay" + bd);
                e.bJ(bo, "pay" + bd + "-disable")
            });
            this.payWay = -1
        } else {
            e.bJ(this.lI[this.QE], "active");
            u.bA(this.lI,
            function(bo, bd) {
                e.bJ(bo, "pay" + bd);
                e.bZ(bo, "pay" + bd + "-disable")
            });
            this.bVb()
        }
    };
    FS.bPu = function(bd) {
        if ( !! this.kZ) {
            this.bVc(1);
            return
        }
        if (bd == 2) {
            e.bZ(this.XX, "bankListHide")
        } else {
            u.bA(this.lI,
            function(bo, bd) {
                e.bZ(bo, "active")
            });
            e.bJ(this.lI[bd], "active");
            e.bJ(this.XX, "bankListHide");
            this.bhc = Dh.mainMethod[bd].id;
            this.oX.style.display = "none"
        }
    };
    FS.cAZ = function(bj) {
        var bB = v.eP(bj,
        function(bC) {
            return bC.className == "j-bankItem"
        });
        if ( !! bB) {
            u.bA(this.lI,
            function(bo, bd) {
                e.bZ(bo, "active")
            });
            var bsj = e.df(bB, "index").split("-");
            this.lI[2].style.backgroundPosition = Dh[bsj[0]][bsj[1]].picPosition;
            this.bhc = Dh[bsj[0]][bsj[1]].id;
            e.bJ(this.XX, "bankListHide");
            e.bJ(this.lI[2], "active");
            this.oX.style.display = "block";
            this.bse = this.bhc
        }
    };
    FS.bF = function(Y) {
        this.bI(Y);
        this.kZ = Y.disabled || 0;
        this.QE = Y.preChoise || Dh.mainMethod[0].id;
        this.bhc = this.QE;
        if ( !! this.kZ) {
            this.bVc(1)
        }
        this.bVb()
    };
    FS.bVb = function() {
        this.oX.style.display = "none";
        u.bA(this.lI,
        function(cAp) {
            e.bZ(cAp, "active")
        }.Z(this));
        if (this.QE == Dh.mainMethod[0].id) {
            e.bJ(this.lI[0], "active")
        } else if (this.QE == Dh.mainMethod[1].id) {
            e.bJ(this.lI[1], "active")
        } else {
            this.oX.style.display = "block";
            this.bse = this.QE;
            e.bJ(this.lI[2], "active");
            u.bA(Dh.fullBank,
            function(bo, bd) {
                if (bo.id == this.QE) {
                    this.lI[2].style.backgroundPosition = bo.picPosition;
                    return
                }
            }.Z(this));
            u.bA(Dh.shortBank,
            function(bo, bd) {
                if (bo.id == this.QE) {
                    this.lI[2].style.backgroundPosition = bo.picPosition;
                    return
                }
            }.Z(this))
        }
    };
    FS.bL = function() {
        this.bO()
    };
    FS.bVa = function() {
        return this.bhc
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    u = NEJ.P("nej.u"),
    ui = NEJ.P("nej.ui"),
    p = NEJ.P("edu.m"),
    eu = NEJ.P("edu.u"),
    d = NEJ.P("edu.d"),
    Gw,
    czO,
    du = e.bY('<div class="u-ctlist"><div class="j-list f-cb"></div><div class="j-page page f-cb"></div></div>');
    eu.Ft = NEJ.C();
    Gw = eu.Ft.bu(eu.cq, true);
    czO = eu.Ft.cE;
    Gw.bU = function() {
        this.bW = du
    };
    Gw.bP = function() {
        this.bQ();
        this.gi = e.bc(this.bb, "j-list")[0];
        this.QS = e.bc(this.bb, "j-page")[0];
        this.cg = new d.rN;
        this.cg.bf("onGetCourseListBySchoolId", this.bgy.Z(this));
        this.cg.bf("onGetMocSchoolLectorDtoList", this.bUZ.Z(this));
        this.cg.bf("onGetSpocSchoolLectorDtoList", this.bUZ.Z(this))
    };
    Gw.bUY = function(W) {
        if ( !! W && !!W.result && W.result.length > 0) {
            this.bv = W;
            this.NA();
            this.beA()
        } else {
            switch (this.fE) {
            case "jst-course-card":
                this.gi.innerHTML = '<p class="empty course f-f0">暂无课程</p>';
                break;
            case "jst-teacher-card":
                this.gi.innerHTML = '<p class="empty teacher f-f0">暂无老师</p>';
                break
            }
        }
    };
    Gw.bgy = function(W) {
        this.bUY(W)
    };
    Gw.bUZ = function(W) {
        W = W || {};
        W.pagination = W.query;
        W.result = W.list;
        this.bUY(W)
    };
    Gw.beA = function() {
        this.gi.innerHTML = "";
        this.cyB = eu.lM.bh({
            parent: this.gi,
            tpl: this.fE,
            clickActions: this.buZ || []
        });
        this.cyB.ho(this.bv.result, this.fE)
    };
    Gw.NA = function() {
        if ( !! this.bv.pagination && this.bv.pagination.totlePageCount > 1) {
            if ( !! this.dL) {
                this.dL = ui.ha.bg(this.dL)
            }
            this.dL = ui.ha.bh({
                parent: this.QS,
                index: this.bv.pagination.pageIndex || 0,
                total: this.bv.pagination.totlePageCount || 0,
                clazz: "u-pager f-fr",
                onchange: function(eK) {
                    if ( !! eK.last) {
                        switch (this.fE) {
                        case "jst-course-card":
                            this.cg.ciu(g.schoolId, eK.index, this.lw, this.bUU);
                            break;
                        case "jst-teacher-card":
                            if (this.fR) {
                                this.cg.cin(g.schoolId, eK.index, this.lw)
                            } else {
                                this.cg.cio(g.schoolId, eK.index, this.lw)
                            }
                            break
                        }
                    }
                    if (!this.bUT) {
                        e.sD(this.pm)
                    }
                    this.bUT = false
                }.Z(this)
            });
            eu.bw(this.QS)
        } else {
            eu.bt(this.QS)
        }
    };
    Gw.bF = function(Y) {
        this.bI(Y);
        this.lw = Y.pageSize;
        this.fR = Y.isSpoc || false;
        this.bUU = this.fR ? 2 : 1;
        this.fE = Y.tpl;
        this.pm = Y.parent;
        this.bUT = true;
        switch (this.fE) {
        case "jst-course-card":
            this.lw = 20;
            this.cg.ciu(g.schoolId, 1, this.lw, this.bUU);
            break;
        case "jst-teacher-card":
            this.lw = 8;
            if (this.fR) {
                this.cg.cin(g.schoolId, 1, this.lw)
            } else {
                this.cg.cio(g.schoolId, 1, this.lw)
            }
            break
        }
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    d = NEJ.P("edu.d"),
    bD = u.eW(),
    bPP,
    cxJ = "ck-identifyCache";
    d.bUS = NEJ.C();
    bPP = d.bUS.bu(d.hA);
    bPP.cxr = function(Xp, rl, bsw, NY) {
        this.bK({
            key: cxJ + bD,
            url: "MocSchoolBean.verifyStudent",
            param: [Xp, rl, bsw, NY],
            onload: this.cwW.Z(this)
        })
    };
    bPP.cwW = function(W) {
        this.bn("onverifyStudent", W)
    }
})(); (function() {
    var g = window,
    o = NEJ.O,
    f = NEJ.F,
    e = NEJ.P("nej.e"),
    v = NEJ.P("nej.v"),
    d = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.m"),
    nB,
    cwG,
    dz;
    var cF = e.dD(".#<uispace> .main{width:550px;padding:20px 20px 0;}.#<uispace> .tip{ padding:0 0 10px 87px;}.#<uispace> .tit{ width:80px;text-align:right;padding:5px 10px 0 0;}.#<uispace> .fb{ height:30px; padding: 0 0 0 87px;}.#<uispace> .fb .m-feedbackinfo{ padding-left:0;}.#<uispace> a.u-btn{ display: block;width:100px;margin:20px auto;}.#<uispace> a.u-btn.lg{width:150px;}.#<uispace> .result{ width:388px;margin:10px auto;}.#<uispace> .result h3{ margin:0 0 20px;font-size:20px;line-height: 19px;}.#<uispace> .result ul li{ list-style-type: disc;font-size:14px;line-height:28px;color: #666;}.#<uispace> .result .wrong{ font-size:28px;color:#ce5251;margin-right: 16px;float: left;}.#<uispace> .result .right{ font-size:28px;color:#8bb721;margin-right: 16px;float: left;}");
    var dn = e.bY('<div class="u-IdentifyDialog f-cb"><div class="bigTitle">立即认证，开启学习之旅<div class="ic"></div></div><div class="main f-cb j-main"><p class="f-fc9 tip">认证成功后信息将不可修改 , 请认真填写</p><div class="f-cb"><div class="tit f-fs14 f-fl">姓名:</div><div class="j-text name f-fl"></div></div><div class="j-fd fb f-cb"></div><div class="f-cb"><div class="tit f-fs14 f-fl">所在学校:</div><div class="j-text name f-fl"></div></div><div class="j-fd fb f-cb"></div><div class="f-cb"><div class="tit f-fs14 f-fl">学号:</div><div class="j-text name f-fl"></div></div><div class="j-fd fb f-cb"></div><div class="f-cb"><div class="tit f-fl">认证码:</div><div class="j-text name f-fl"></div></div><div class="j-fd fb f-cb"></div><a class="u-btn u-btn-default j-saveBtn">立即认证</a></div><div class="j-feedInfo main f-cb"></div></div>'),
    cwa = e.ee('<div class="error1 result"><h3><span class="f-icon wrong"></span>与学校提供的信息不匹配，认证失败。</h3><p class="f-fc9">认证失败可能有以下几种原因：</p><ul><li>输入的姓名有误；</li><li>输入的学号有误；</li><li>输入的身份证后六位与学校提供的信息不匹配；</li><li>学校尚未开通学校云服务导致认证失败；</li></ul><a class="u-btn u-btn-default j-okBtn">知道了</a></div>'),
    cvR = e.ee('<div class="error2 result"><h3><span class="f-icon wrong"></span>信息不可重复认证，认证失败！</h3><p>你的信息已经在其他账号下成功认证过，不可重复认证；如有疑问，请联系平台工作人员：0571-89853516或发送邮件至service@icourse163.org；</p><a class="u-btn u-btn-default j-okBtn">知道了</a></div>'),
    cvL = e.ee('<div class="error2 result"><h3><span class="f-icon right"></span>恭喜你，认证成功</h3><ul><li>认证后你可以报名参加spoc（学校私有）课程。</li><li>认证成功后信息将不可修改。</li><li>你可以通过头像-我的学校直接进入自己学校页面。</li></ul><a class="u-btn u-btn-default j-okBtn lg" href="${link}" target="_self">进入我的学校></a></div>');
    eu.Rl = NEJ.C();
    nB = eu.Rl.bu(eu.hq, true);
    cwG = eu.Rl.cE;
    eu.Rl.bT = function(Y) {
        if ( !! dz) {
            dz = eu.Rl.bg(dz)
        }
        dz = eu.Rl.bh(Y);
        dz.gI();
        return dz
    };
    nB.bU = function() {
        this.bW = dn;
        this.dv = cF
    };
    nB.bP = function() {
        this.bQ();
        this.rT = e.bc(this.bb, "j-text");
        this.bQc = e.bc(this.bb, "j-fd");
        this.gC = e.bc(this.bb, "j-saveBtn")[0];
        this.bbg = e.bc(this.bb, "j-main")[0];
        this.baY = e.bc(this.bb, "j-feedInfo")[0];
        v.bf(this.gC, "click", this.mQ.Z(this));
        this.bUR = new d.bUS;
        this.bUR.bf("onverifyStudent", this.cuK.Z(this))
    };
    nB.cuK = function(W) {
        if ( !! W) {
            var ga = null,
            bz = 0;
            for (var cO in W) {
                if (W.hasOwnProperty(cO)) {
                    bz = cO;
                    ga = W[cO]
                }
            }
            eu.bt(this.bbg);
            eu.bw(this.baY);
            switch (parseInt(bz)) {
            case 1:
                this.baY.innerHTML = e.bX(cvL, {
                    link: g.urlPrefix.spocUsityIdPrefix + ga
                });
                break;
            case 10:
                this.baY.innerHTML = e.bX(cwa);
                break;
            case 20:
                this.baY.innerHTML = e.bX(cvR);
                break
            }
            this.Lt = e.bc(this.bb, "j-okBtn")[0];
            v.bf(this.Lt, "click",
            function() {
                this.fs()
            }.Z(this))
        }
    };
    nB.mQ = function() {
        var fm = this.LK();
        if (!fm) return;
        this.bUR.cxr(fm.name, fm.number, fm.idCard, fm.schoolName)
    };
    nB.LK = function() {
        var cl = this.ke[0].cc();
        if (!cl || this.ke[0].gD() > 40) {
            this.lg[0].ey("请填写姓名，并不超过20个汉字。");
            return null
        }
        var bad = this.ke[1].cc();
        if (!bad || this.ke[1].gD() > 40) {
            this.lg[1].ey("请填写所在学校，并不超过20个汉字。");
            return null
        }
        var rl = this.ke[2].cc();
        if (!rl || this.ke[2].gD() > 40) {
            this.lg[2].ey("请填写学号，并不超过40个字符。");
            return null
        }
        var bsw = this.ke[3].cc();
        if (!bsw || this.ke[3].gD() > 6) {
            this.lg[3].ey("请填写认证码，并不超过6个字符。");
            return null
        }
        var cI = {
            name: cl,
            schoolName: bad,
            number: rl,
            idCard: bsw
        };
        return cI
    };
    nB.lq = function(oG) {
        this.ke = [];
        this.lg = [];
        var cuA = ["请输入你的真实姓名", "请输入学校的全称，如北京航空航天大学", "请输入你在读学校的学号", "请输入身份证后六位作为认证码"];
        u.bA(this.rT,
        function(bkS, bd) {
            function bQn(cO) {
                if ( !! this.lg[cO]) this.lg[cO].ce()
            }
            var Ry = eu.eh.bh({
                parent: bkS,
                critical: bd == this.rT.length - 1 ? 3 : 20,
                width: 390,
                height: 34,
                labelText: cuA[bd],
                filterEnter: true
            });
            Ry.bf("onInputFocus", bQn.Z(this, bd));
            this.ke.push(Ry);
            var Rz = eu.cv.bh({
                parent: this.bQc[bd]
            });
            Rz.ce();
            this.lg.push(Rz)
        }.Z(this));
        if ( !! this.YL) {
            this.ke[1].cX(this.YL);
            this.ke[1].iU()
        }
    };
    nB.bF = function(Y) {
        Y.title = " ";
        Y.maskClickNotHidden = true;
        eu.bt(this.baY);
        eu.bw(this.bbg);
        this.fj();
        this.bI(Y);
        this.YL = Y.schoolName;
        this.lq()
    };
    nB.fj = function() {
        u.bA(this.ke,
        function(cK, bd) {
            if ( !! cK) {
                cK = eu.eh.bg(cK)
            }
            if ( !! this.lg[bd]) {
                this.lg[bd] = eu.cv.bg(this.lg[bd])
            }
        }.Z(this));
        this.ke = null;
        this.lg = null
    };
    nB.bL = function() {
        this.fj();
        this.bO();
        this.hk()
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    bD = u.eW(),
    bkD,
    bUP = "ck-commonCache";
    p.bQs = NEJ.C();
    bkD = p.bQs.bu(p.hA);
    bkD.cuu = function(bz, nz) {
        this.bK({
            key: bUP + bD,
            url: "CaptchaBean.checkCaptchaCode",
            notShowLoading: true,
            sync: true,
            param: [bz, nz],
            onload: this.cut.Z(this)
        })
    };
    bkD.cut = function(W) {
        this.bn("onCheckCaptcha", W)
    };
    bkD.cul = function() {
        this.bK({
            key: bUP + bD,
            url: "MemberBean.checkSSOError",
            notShowLoading: true,
            param: [],
            onload: this.ctE.Z(this)
        })
    };
    bkD.ctE = function(W) {
        this.bn("onCheckSSOError", W)
    }
})(); (function() {
    var o = NEJ.O,
    j = NEJ.P("nej.j"),
    u = NEJ.P("nej.u"),
    p = NEJ.P("edu.d"),
    eu = NEJ.P("edu.u"),
    bD = u.eW(),
    biM,
    bUO = "ck-ActivityCache";
    p.bQz = NEJ.C();
    biM = p.bQz.bu(p.hA);
    biM.csX = function(ZV) {
        this.bK({
            key: bUO + bD,
            notShowLoading: true,
            url: "CourseBean.getCourseByIds",
            param: [ZV],
            onload: this.csV.Z(this)
        })
    };
    biM.csV = function(W) {
        this.bn("onGetCourseByIds", W)
    };
    biM.csO = function(ca) {
        this.bK({
            key: bUO + bD,
            url: "CourseBean.getByVideoId",
            param: [ca],
            onload: this.crR.Z(this)
        })
    };
    biM.crR = function(W) {
        this.bn("onGetByVideoId", W)
    }
})(); (function() {
    var dx = window,
    de = NEJ.O,
    dk = NEJ.F,
    bm = NEJ.P("nej.e"),
    bE = NEJ.P("nej.u"),
    ch = NEJ.P("nej.v"),
    bs = NEJ.P("edu.u"),
    cC = NEJ.P("edu.d"),
    fx = NEJ.P("nej.ut"),
    Kc;
    bs.bQF = NEJ.C();
    Kc = bs.bQF.bu(bs.cq, true);
    Kc.bF = function(Y) {
        this.bI(Y);
        this.hf = 0;
        this.pm = Y.parent;
        this.bkV = Y.clazz || "j-mwin";
        this.bfQ = bm.bc(this.pm, this.bkV);
        if (!bs.bxJ() && false) return;
        this.crJ();
        this.cqY();
        this.bQK = true;
        this.hf = 0;
        this.bQL = 0;
        this.bUN = 500;
        this.cqJ = "ease";
        this.cqE = 5
    };
    Kc.crJ = function() {
        bE.bA(this.bfQ,
        function(bo, bd) {
            bm.ev(bo, "height", this.bte() + "px")
        }.Z(this));
        bm.ev(this.pm, "height", this.bte() + "px")
    };
    Kc.cqY = function() {
        if ( !! this.pm.addEventListener) {
            this.pm.addEventListener("touchstart", this.cqB.Z(this));
            this.pm.addEventListener("touchmove", this.cqt.Z(this))
        }
    };
    Kc.cqB = function(bj) {
        this.bQL = bj.touches[0].pageY
    };
    Kc.cqt = function(bj) {
        event.preventDefault ? event.preventDefault() : event.returnValue = false;
        this.bUK = bj.touches[0].pageY;
        if (Math.abs(this.bUK - this.bQL) > this.bte() * this.cqE / 100) {
            if (this.bUK > this.bQL) {
                this.bUI("up")
            } else {
                this.bUI("down")
            }
        }
    };
    Kc.bUI = function(bz) {
        if (!this.bQK) return;
        if (bz == "down") {
            if ( !! this.bfQ[this.hf + 1]) {
                if ( !! this.bfQ[this.hf + 2]) {
                    this.bn("lastPage", false)
                } else {
                    this.bn("lastPage", true)
                }
                this.hf++
            } else {
                return
            }
        } else {
            if ( !! this.bfQ[this.hf - 1]) {
                if ( !! this.bfQ[this.hf]) {
                    this.bn("lastPage", false)
                } else {
                    this.bn("lastPage", true)
                }
                this.hf--
            } else {
                return
            }
        }
        this.bQK = false;
        setTimeout(function() {
            this.bQK = true
        }.Z(this), this.bUN);
        var bth = "translate3d(0px, -" + this.bte() * this.hf + "px, 0px)";
        var bUH = "all " + this.bUN + "ms " + this.cqJ;
        bm.ev(this.pm, "-webkit-transition", bUH);
        bm.ev(this.pm, "transition", bUH);
        bm.ev(this.pm, "-webkit-transform", bth);
        bm.ev(this.pm, "-moz-transform", bth);
        bm.ev(this.pm, "-ms-transform", bth);
        bm.ev(this.pm, "transform", bth)
    };
    Kc.bte = function() {
        return document.body.clientHeight
    }
})()