<?xml version="1.0" encoding="GBK"?>
<Config CONFIG-FILE-PATH="{2}op/learn-config.xml">
  <Operation id="Knowledge" bean="cn.com.bright.yuexue.teach.Knowledge" desc="教材目录知识点管理">
    <Action rowacc="" accredit="" old="" log="" oauth="" base="List" desc="获取教材子目录" colacc="" nologin="" webservice="" name="getBookChildFolder">
      <Query basesql="select t1.*,t2.subjectid,t2.grade_code,(select count(st.folder_id) from base_book_folder st where st.valid='Y' and st.parent_folder_id=t1.folder_id) as child_count from base_book_folder t1,base_subject_book t2 where t1.subject_book_id = t2.subject_book_id and t1.valid='Y' and t2.valid='Y'" orderby="t1.display_order">
        <Field name="qry_subject_book_id" title="教材目录ID" type="String" maxlen="40" notnull="false" refname="t1.subject_book_id" op="=" />
        <Field name="parent_folder_id" title="当前节点" type="long" maxlen="11" notnull="false" refname="t1.parent_folder_id" op="=" />
        <Field name="qry_subjectid" title="学科ID" type="String" maxlen="40" notnull="false" refname="t2.subjectid" op="=" />
        <Field name="qry_gradecode" title="年级代码" type="String" maxlen="40" notnull="false" refname="t2.grade_code" op="=" />
      </Query>
    </Action>
    <Action colacc="" rowacc="" base="List" accredit="" webservice="" old="" desc="获取教材子目录" log="" nologin="true" oauth="" name="getBookChildFolderMooc">
      <Query basesql="select t1.*,t2.subjectid,t2.grade_code,(select count(st.folder_id) from base_book_folder st where st.valid='Y' and st.parent_folder_id=t1.folder_id) as child_count from base_book_folder t1,base_subject_book t2 where t1.subject_book_id = t2.subject_book_id and t1.valid='Y' and t2.valid='Y'" orderby="t1.begin_page_num,t1.folder_id">
        <Field name="qry_subjectid" title="学科ID" type="String" maxlen="40" notnull="false" refname="t2.subjectid" op="=" />
        <Field name="qry_gradecode" title="年级代码" type="String" maxlen="40" notnull="false" refname="t2.grade_code" op="=" />
        <Field name="qry_foldercode" title="目录代码" type="String" maxlen="40" notnull="false" refname="t1.folder_code" op="*%" />
      </Query>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="" base="List" desc="查询学科教材" colacc="" nologin="" webservice="" name="querySubjectBook">
      <Query basesql="select t1.*,t2.subjcode,t2.subjname from base_subject_book t1,base_subject t2 where t1.valid='Y' and t1.subjectid = t2.subjectid" orderby="t2.subjcode,t1.grade_code">
        <Field name="qry_subject_name" title="学科" type="String" maxlen="40" refname="t2.subjname" op="*%" />
        <Field name="qry_grade_code" title="年级" type="String" maxlen="40" refname="t1.grade_code" op="=" />
        <Field name="qry_publisher_code" title="出版社" type="String" maxlen="40" refname="t1.publisher_code" op="=" />
      </Query>
    </Action>
    <Action colacc="" rowacc="" base="Insert" accredit="" webservice="" old="" desc="增加学科教材" log="" nologin="" oauth="" name="addSubjectBook">
      <Table name="base_subject_book" />
      <Message>
        <Msg code="00103" />
      </Message>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="" base="Update" desc="修改学科教材" colacc="" nologin="" webservice="" name="updateSubjectBook">
      <Request>
        <Field name="subject_book_id" title="主键" type="String" maxlen="32" pk="false" />
        <Field name="subjectid" title="学科" type="String" maxlen="32" pk="false" />
        <Field name="grade_code" title="年级(平台代码)" type="long" maxlen="5" pk="false" />
        <Field name="publisher_id" title="出版社(平台代码)" type="String" maxlen="32" pk="false" />
        <Field name="book_name" title="教材名称" type="String" maxlen="60" pk="false" />
        <Field name="book_version" title="教材版本" type="String" maxlen="20" pk="false" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" gen="datetime" />
      </Request>
      <Table name="base_subject_book" />
      <Message>
        <Msg code="00105" />
      </Message>
    </Action>
    <Action log="" colacc="" old="" rowacc="" oauth="" base="Update" desc="删除学科教材" accredit="" nologin="" webservice="" name="deleteSubjectBook">
      <Request>
        <Field name="subject_book_id" title="主键" type="String" maxlen="40" />
        <Field name="valid" title="有效" type="String" maxlen="2" defaultval="N" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" gen="datetime" />
      </Request>
      <Table name="base_subject_book" />
      <Message>
        <Msg code="00105">删除成功</Msg>
      </Message>
    </Action>
    <Action accredit="" nologin="" base="List" colacc="" webservice="" old="" desc="获取学科信息" rowacc="" log="" oauth="" name="getActiveSubject">
      <Query basesql="select t1.* from  base_subject t1 where  t1.state='1'" orderby="t1.subjcode">
        <Field name="qry_subject_name" title="学科名称" type="String" refname="t1.subjname" op="*%" />
      </Query>
    </Action>
    <Action colacc="" rowacc="" base="List" accredit="" webservice="" old="" desc="获取目录知识点" log="" nologin="" oauth="" name="getKnowledgePoint">
      <Query basesql="select t1.*,t2.fp_id,t2.folder_id,t3.folder_name,t4.subjname,getParamDesc('c_grade',t1.grade_code) as grade_name from base_knowledge_point t1,base_folder_point t2,base_book_folder t3,base_subject t4 where t1.k_point_id = t2.k_point_id and t2.folder_id = t3.folder_id and t1.subjectid = t4.subjectid and t2.valid='Y'" orderby="t2.create_date">
        <Field name="qry_folder_id" title="目录ID" type="long" maxlen="12" refname="t2.folder_id" op="=" />
        <Field name="qry_folder_code" title="目录代码" type="String" maxlen="300" refname="t3.folder_code" op="*%" />
        <Field name="qry_subjectid" title="学科ID" type="String" maxlen="40" refname="t1.subjectid" op="=" />
        <Field name="qry_grade_code" title="年级" type="String" maxlen="40" refname="t1.grade_code" op="=" />
        <Field name="qry_point_name" title="知识点" type="String" maxlen="100" refname="t1.k_point_name" op="*%" />
      </Query>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="" base="" desc="删除知识点" accredit="" log="" webservice="" name="deleteKnowPoint">
      <Request>
        <Field name="k_point_id" title="知识点ID" type="String" maxlen="40" />
        <Field name="fp_id" title="目录知识点ID" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="" base="" desc="新增知识点" accredit="" log="" webservice="" name="addKnowPoint">
      <Request>
        <Field name="k_point_id" title="知识点ID" type="String" maxlen="40" />
        <Field name="folder_id" title="目录ID" type="String" maxlen="40" />
        <Field name="k_point_name" title="知识点名称" type="String" maxlen="100" />
        <Field name="grade_code" title="年级" type="String" maxlen="40" />
        <Field name="subjectid" title="学科" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action base="Update" old="" desc="修改知识点" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="" name="updateKnowPoint">
      <Table name="base_knowledge_point" />
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="" base="List" desc="检索知识点" colacc="" nologin="" webservice="" name="searchKnowPoint">
      <Query basesql="select t1.k_point_id as id,t4.subjname,getParamDesc('c_grade',t1.grade_code) as grade_name,t3.folder_name,k_point_name as label from base_knowledge_point t1,base_folder_point t2,base_book_folder t3,base_subject t4,base_subject_book t5 where t1.k_point_id = t2.k_point_id and t2.folder_id = t3.folder_id and t1.subjectid = t4.subjectid and t3.subject_book_id=t5.subject_book_id and t5.valid='Y'" orderby="t3.folder_code,t3.display_order">
        <Field name="qry_folder_code" title="目录代码" type="String" maxlen="300" refname="t3.folder_code" op="*%" />
        <Field name="qry_subjectid" title="学科ID" type="String" maxlen="40" refname="t5.subjectid" op="=" />
        <Field name="qry_grade_code" title="年级" type="String" maxlen="40" refname="t5.grade_code" op="=" />
        <Field name="qry_point_name" title="知识点" type="String" maxlen="100" refname="t1.k_point_name" op="%%" />
        <Field name="query" title="检索内容" type="String" maxlen="40" refname="t1.k_point_name" op="%%" />
      </Query>
    </Action>
    <Action accredit="" log="" base="Update" colacc="" webservice="" old="" desc="删除教材章节" rowacc="" nologin="" oauth="" name="deleteBookFolder">
      <Request>
        <Field name="folder_id" title="目录ID" type="long" maxlen="11" notnull="true" />
        <Field name="valid" title="有效" type="String" maxlen="2" notnull="false" defaultval="N" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" notnull="false" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" notnull="false" gen="datetime" />
      </Request>
      <Table name="base_book_folder" />
      <Message>
        <Msg code="00105">删除成功</Msg>
      </Message>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="" base="Update" desc="修改教材章节" accredit="" log="" webservice="" name="updateBookFolder">
      <Request>
        <Field name="folder_id" title="folder_id" type="long" maxlen="10" pk="false" />
        <Field name="folder_code" title="父节点缩进编码" type="String" maxlen="300" pk="false" />
        <Field name="folder_name" title="章节名称" type="String" maxlen="100" pk="false" />
        <Field name="begin_page_num" title="章节起始页码" type="long" maxlen="10" pk="false" />
        <Field name="end_page_num" title="章节结束页码" type="long" maxlen="10" pk="false" />
        <Field name="display_order" title="显示顺序" type="long" maxlen="5" pk="false" />
        <Field name="create_by" title="建立人" type="String" maxlen="40" pk="false" gen="session.username" />
        <Field name="create_date" title="建立时间" type="Timestamp" pk="false" gen="datetime" />
      </Request>
      <Table name="base_book_folder" />
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="新增教材章节" log="" nologin="" oauth="" name="addBookFolder">
      <Request>
        <Field name="parent_folder_id" title="父目录ID" type="long" maxlen="11" notnull="true" />
        <Field name="folder_code" title="目录代码" type="String" maxlen="200" notnull="false" />
        <Field name="folder_name" title="目录名称" type="String" maxlen="100" notnull="true" />
        <Field name="display_order" title="显示顺序" type="long" maxlen="6" notnull="true" />
        <Field name="subject_book_id" title="学科教材ID" type="String" maxlen="40" notnull="true" />
        <Field name="begin_page_num" title="章节开始页码" type="long" maxlen="11" notnull="false" />
        <Field name="end_page_num" title="章节结束页码" type="long" maxlen="11" notnull="false" />
      </Request>
    </Action>
    <Action base="" old="" desc="增加书本附件" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="" name="addBookAttachment">
      <Request>
        <Field name="subject_book_id" title="学科书本ID" type="String" maxlen="40" />
        <Field name="book_attachment" title="书本附件" type="file" />
      </Request>
    </Action>
    <Action base="List" old="" desc="取学科年级名称" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="getSubjectGradeName">
      <Query basesql="select t1.subject_book_id,t2.subjname,getParamDesc('C_GRADE',t1.grade_code) as grade_name from base_subject_book t1,base_subject t2 where t1.subjectid=t2.subjectid">
        <Field name="subject_book_id" title="学科书本ID" type="String" maxlen="40" notnull="true" refname="t1.subject_book_id" op="=" />
      </Query>
    </Action>
  </Operation>
  <Operation id="Praxes" bean="cn.com.bright.yuexue.teach.Praxes" desc="题库管理">
    <Action accredit="" log="" base="" colacc="" webservice="" old="" desc="新增试题(含选项)" rowacc="" nologin="" oauth="" name="addPraxes">
      <Request>
        <Field name="subject_id" title="学科" type="String" maxlen="32" pk="false" />
        <Field name="grade_code" title="年级" type="long" maxlen="3" pk="false" />
        <Field name="k_point_id" title="知识点" type="String" maxlen="32" pk="false" />
        <Field name="praxes_type" title="类型" type="String" maxlen="32" pk="false" />
        <Field name="praxes_content" title="内容" type="String" maxlen="10000" pk="false" />
        <Field name="difficulty_level" title="难度系数" type="double" maxlen="5" pk="false" />
        <Field name="score" title="分数" type="long" maxlen="5" pk="false" />
        <Field name="share_level" title="共享范围" type="long" maxlen="5" pk="false" />
        <Field name="right_result" title="正确答案(判断题和选择题)" type="String" maxlen="300" pk="false" />
        <Field name="praxes_hint" title="解题思路" type="String" maxlen="10000" pk="false" />
        <Field name="display_order" title="显示顺序" type="long" maxlen="5" pk="false" />
        <Field name="option_content" title="选项内容" type="String" maxlen="10000" pk="false" />
        <Field name="is_right" title="正确答案" type="long" maxlen="5" pk="false" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="修改试题(含选项)" log="" nologin="" oauth="" name="updatePraxes">
      <Request>
        <Field name="praxes_id" title="试题ID" type="String" maxlen="40" pk="false" />
        <Field name="subject_id" title="学科" type="String" maxlen="32" pk="false" />
        <Field name="grade_code" title="年级" type="long" maxlen="3" pk="false" />
        <Field name="k_point_id" title="知识点" type="String" maxlen="32" pk="false" />
        <Field name="praxes_type" title="类型" type="String" maxlen="32" pk="false" />
        <Field name="praxes_content" title="内容" type="String" maxlen="10000" pk="false" />
        <Field name="difficulty_level" title="难度系数" type="double" maxlen="5" pk="false" />
        <Field name="score" title="分数" type="long" maxlen="5" pk="false" />
        <Field name="share_level" title="共享范围" type="long" maxlen="5" pk="false" />
        <Field name="right_result" title="正确答案(判断题和选择题)" type="String" maxlen="300" pk="false" />
        <Field name="option_id" title="选项ID" type="String" maxlen="40" pk="false" />
        <Field name="display_order" title="显示顺序" type="long" maxlen="5" pk="false" />
        <Field name="option_content" title="选项内容" type="String" maxlen="1000" pk="false" />
        <Field name="is_right" title="正确答案" type="long" maxlen="5" pk="false" />
        <Field name="praxes_hint" title="解题思路" type="String" maxlen="10000" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="批量导入试题" log="" nologin="" oauth="" name="importPraxes">
      <Request>
        <Field name="subject_id" title="学科" type="String" maxlen="32" pk="false" />
        <Field name="grade_code" title="年级" type="long" maxlen="3" pk="false" />
        <Field name="k_point_id" title="知识点" type="String" maxlen="32" pk="false" />
        <Field name="attachment_id" title="word文件编号" type="String" maxlen="32" pk="false" notnull="true" />
      </Request>
      <Message>
        <Msg code="00104">导入试题成功!</Msg>
      </Message>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="删除试题" log="" nologin="" oauth="" name="deletePraxes">
      <Request>
        <Field name="praxes_id" title="试题ID" type="String" maxlen="40" notnull="true" />
      </Request>
      <Message>
        <Msg code="00105">删除试题成功!</Msg>
      </Message>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="" base="Update" desc="删除试题选项" colacc="" nologin="" webservice="" name="deletePraxesOption">
      <Request>
        <Field name="valid" title="有效标识" type="String" maxlen="1" defaultval="N" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" gen="session.userid" />
        <Field name="modify_date" title="修改时间" type="Timestamp" gen="datetime" />
        <Field name="option_id" title="选项ID" type="String" maxlen="40" />
      </Request>
      <Table name="learn_options" />
      <Message>
        <Msg code="00105">删除选项成功!</Msg>
      </Message>
    </Action>
    <Action log="" colacc="" old="" rowacc="" oauth="true" base="" desc="检索题目(含选项)" accredit="" nologin="" webservice="" name="queryPraxesOptions">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" />
        <Field name="qry_subject_id" title="学科ID" type="String" maxlen="40" />
        <Field name="qry_grade_code" title="年级ID" type="String" maxlen="40" />
        <Field name="qry_point_id" title="知识点ID" type="String" maxlen="40" />
        <Field name="qry_point_name" title="知识点名称" type="String" maxlen="40" />
        <Field name="qry_praxes_type" title="试题类型" type="String" maxlen="40" />
        <Field name="qry_difficulty_min" title="最小难度系数" type="double" maxlen="40" />
        <Field name="qry_difficulty_max" title="最大难度系数" type="double" maxlen="40" />
        <Field name="qry_share_level" title="共享范围" type="String" maxlen="40" />
        <Field name="qry_folder_code" title="教材目录代码" type="String" maxlen="300" />
        <Field name="qry_praxes_content" title="试题名称" type="String" maxlen="40" />
        <Field name="order_by" title="排序字段" type="String" maxlen="40" />
        <Field name="qry_praxes_id" title="试题ID" type="String" maxlen="40" />
        <Field name="qry_my_praxes" title="我上传的" type="String" maxlen="1" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="" base="" desc="获取试题数量" accredit="" log="" webservice="" name="getPraxesCount">
      <Request>
        <Field name="folder_code" title="目录代码" type="String" maxlen="300" />
        <Field name="praxes_type" title="试题类型" type="String" maxlen="40" />
        <Field name="difficulty_all" title="不限难度" type="String" maxlen="10" />
        <Field name="difficulty_min" title="最小难度" type="double" maxlen="4" />
        <Field name="difficulty_max" title="最大难度" type="double" maxlen="4" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="保存组卷规则" log="" nologin="" oauth="" name="saveChooseRule">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="32" pk="false" />
        <Field name="folder_code" title="教材目录" type="String" maxlen="300" pk="false" />
        <Field name="rule_id" title="规则ID" type="String" maxlen="40" pk="false" />
        <Field name="praxes_type" title="题型" type="String" maxlen="32" pk="false" />
        <Field name="difficulty_all" title="不限难度" type="String" maxlen="1" pk="false" />
        <Field name="difficulty_min" title="最小难度" type="double" maxlen="10" pk="false" />
        <Field name="difficulty_max" title="最大难度" type="double" maxlen="10" pk="false" />
        <Field name="praxes_count" title="试题数量" type="long" maxlen="3" pk="false" />
        <Field name="praxes_score" title="试题分数" type="long" maxlen="3" pk="false" />
      </Request>
    </Action>
  </Operation>
  <Operation id="ExamPaper" bean="cn.com.bright.yuexue.teach.ExamPaper" desc="试卷(课件)管理">
    <Action accredit="" nologin="" base="Insert" colacc="" webservice="" old="" desc="新增试卷(课件)" rowacc="" log="" oauth="true" name="addExamPaper">
      <Table name="learn_examination_paper" />
    </Action>
    <Action colacc="" rowacc="" base="Update" accredit="" webservice="" old="" desc="修改试卷(课件)" log="" nologin="" oauth="true" name="updateExamPaper">
      <Request>
        <Field name="paper_id" title="主键" type="String" maxlen="32" pk="false" />
        <Field name="subject_id" title="学科" type="String" maxlen="32" pk="false" />
        <Field name="grade_code" title="年级" type="long" maxlen="5" pk="false" />
        <Field name="folder_id" title="章节" type="long" maxlen="10" pk="false" />
        <Field name="resource_type" title="类型" type="String" maxlen="32" pk="false" />
        <Field name="paper_name" title="试卷(课件)名称" type="String" maxlen="100" pk="false" />
        <Field name="choose_type" title="组卷方式" type="String" maxlen="32" pk="false" />
        <Field name="limit_times" title="答题时间(分钟)" type="long" maxlen="5" pk="false" />
        <Field name="qualified_score" title="及格分数" type="long" maxlen="5" pk="false" />
        <Field name="share_level" title="共享范围" type="long" maxlen="5" pk="false" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" gen="datetime" />
      </Request>
      <Table name="learn_examination_paper" />
    </Action>
    <Action accredit="" log="" base="" colacc="" webservice="" old="" desc="删除试卷(课件)" rowacc="" nologin="" oauth="true" name="deleteExamPaper">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action accredit="" log="" base="" colacc="" webservice="" old="" desc="发布试卷(课件)" rowacc="" nologin="" oauth="true" name="publishExamPaper">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="" base="Delete" desc="删除组卷规则" colacc="" log="" webservice="" name="deleteChooseRule">
      <Request>
        <Field name="rule_id" title="规则ID" type="String" maxlen="40" />
        <Field name="valid" title="有效标识" type="String" maxlen="1" defaultval="N" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" gen="datetime" />
      </Request>
      <Table name="learn_choose_rule" />
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="生成试卷试题" rowacc="" log="" oauth="" name="genExamPaperPraxes">
      <Request>
        <Field name="paper_id" title="问卷ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action accredit="" log="" base="" colacc="" webservice="" old="" desc="检索试卷" rowacc="" nologin="" oauth="true" name="queryExamPaper">
      <Request>
        <Field name="qry_subject_id" title="学科" type="String" maxlen="40" />
        <Field name="qry_grade_code" title="年级" type="String" maxlen="40" />
        <Field name="qry_resource_type" title="类型" type="String" maxlen="40" />
        <Field name="qry_user_id" title="用户" type="String" maxlen="40" />
        <Field name="qry_folder_code" title="章节代码" type="String" maxlen="40" />
        <Field name="qry_paper_name" title="试卷名称" type="String" maxlen="40" />
        <Field name="qry_subject_book_id" title="学科教材ID" type="String" maxlen="40" />
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" />
        <Field name="qry_myself" title="查询私有" type="String" maxlen="10" />
      </Request>
    </Action>
    <Action accredit="" log="" base="" colacc="" webservice="" old="" desc="检索资源阅读记录" rowacc="" nologin="" oauth="true" name="queryResRecord">
      <Request>
        <Field name="qry_subject_id" title="学科" type="String" maxlen="40" />
        <Field name="qry_grade_code" title="年级" type="String" maxlen="40" />
        <Field name="qry_resource_type" title="类型" type="String" maxlen="40" />
        <Field name="qry_user_id" title="用户" type="String" maxlen="40" />
        <Field name="qry_folder_code" title="章节代码" type="String" maxlen="40" />
        <Field name="qry_paper_name" title="试卷名称" type="String" maxlen="40" />
        <Field name="qry_subject_book_id" title="学科教材ID" type="String" maxlen="40" />
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" />
        <Field name="qry_paper_id" title="课件id" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="获取试卷题目(含选项)" accredit="" log="" webservice="" name="getPaperPraxes">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="paper_praxes_id" title="试卷题目ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="增加试卷题目(含选项)" colacc="" nologin="" webservice="" name="addPaperPraxes">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="32" pk="false" />
        <Field name="display_order" title="显示顺序" type="long" maxlen="5" pk="false" />
        <Field name="subject_id" title="学科" type="String" maxlen="32" pk="false" />
        <Field name="grade_code" title="年级" type="long" maxlen="3" pk="false" />
        <Field name="k_point_id" title="知识点" type="String" maxlen="32" pk="false" />
        <Field name="praxes_type" title="类型" type="String" maxlen="32" pk="false" />
        <Field name="praxes_content" title="内容" type="String" maxlen="10000" pk="false" />
        <Field name="difficulty_level" title="难度系数" type="double" maxlen="5" pk="false" />
        <Field name="score" title="分数" type="long" maxlen="5" pk="false" />
        <Field name="share_level" title="共享范围" type="long" maxlen="5" pk="false" />
        <Field name="right_result" title="正确答案(判断题和选择题)" type="String" maxlen="300" pk="false" />
        <Field name="praxes_hint" title="解题思路" type="String" maxlen="10000" pk="false" />
        <Field name="option_content" title="选项内容" type="String" maxlen="10000" pk="false" />
        <Field name="is_right" title="正确答案" type="long" maxlen="5" pk="false" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="修改试卷题目" log="" nologin="" oauth="true" name="updatePaperPraxes">
      <Request>
        <Field name="paper_praxes_id" title="试卷题目ID" type="String" maxlen="32" pk="false" />
        <Field name="display_order" title="显示顺序" type="long" maxlen="5" pk="false" />
        <Field name="subject_id" title="学科" type="String" maxlen="32" pk="false" />
        <Field name="grade_code" title="年级" type="long" maxlen="3" pk="false" />
        <Field name="k_point_id" title="知识点" type="String" maxlen="32" pk="false" />
        <Field name="praxes_type" title="类型" type="String" maxlen="32" pk="false" />
        <Field name="praxes_content" title="内容" type="String" maxlen="10000" pk="false" />
        <Field name="difficulty_level" title="难度系数" type="double" maxlen="5" pk="false" />
        <Field name="score" title="分数" type="long" maxlen="5" pk="false" />
        <Field name="share_level" title="共享范围" type="long" maxlen="5" pk="false" />
        <Field name="right_result" title="正确答案(判断题和选择题)" type="String" maxlen="300" pk="false" />
        <Field name="praxes_hint" title="解题思路" type="String" maxlen="10000" pk="false" />
        <Field name="paper_option_id" title="问卷试题选项ID" type="String" maxlen="70" pk="false" />
        <Field name="option_content" title="选项内容" type="String" maxlen="10000" pk="false" />
        <Field name="is_right" title="正确答案" type="long" maxlen="5" pk="false" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="删除试卷题目" colacc="" log="" webservice="" name="deletePaperPraxes">
      <Request>
        <Field name="paper_praxes_id" title="试题ID" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="Update" accredit="" webservice="" old="" desc="删除试题选项" log="" nologin="" oauth="true" name="deletePraxesOption">
      <Request>
        <Field name="valid" title="有效标识" type="String" maxlen="1" defaultval="N" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" gen="session.userid" />
        <Field name="modify_date" title="修改时间" type="Timestamp" gen="datetime" />
        <Field name="paper_option_id" title="选项ID" type="String" maxlen="70" />
      </Request>
      <Table name="learn_paper_options" />
      <Message>
        <Msg code="00105">删除选项成功!</Msg>
      </Message>
    </Action>
    <Action base="" old="" desc="上传试卷(课件)附件" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="" name="addPaperAttachment">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" />
        <Field name="paper_attachment" title="试卷附件" type="file" />
      </Request>
    </Action>
    <Action base="Delete" old="" desc="删除试卷(课件)附件" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="" name="deletePaperAttachment">
      <Request>
        <Field name="paper_attachment_id" title="试卷附件ID" type="String" maxlen="32" notnull="true" />
        <Field name="valid" title="有效" type="String" maxlen="2" defaultval="N" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" gen="datetime" />
      </Request>
      <Table name="learn_paper_attachment" />
      <Message>
        <Msg code="00105">删除成功</Msg>
      </Message>
    </Action>
    <Action accredit="" nologin="" base="List" colacc="" webservice="" old="" desc="获取附件信息" rowacc="" log="" oauth="" name="getPaperAttachment">
      <Query basesql="select t2.paper_attachment_id,t1.* from learn_attachment t1,learn_paper_attachment t2 where t1.attachment_id = t2.attachment_id and t2.valid='Y' " orderby="t2.create_date">
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" refname="t2.paper_id" op="=" />
      </Query>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="从题库选题" colacc="" log="" webservice="" name="choosePraxes">
      <Request>
        <Field name="paper_id" title="问卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="praxes_id" title="试题ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action log="" colacc="" old="" rowacc="" oauth="true" base="" desc="获取试卷结果" accredit="" nologin="" webservice="" name="getPaperResult">
      <Request>
        <Field name="qry_classid" title="班级ID" type="String" maxlen="32" notnull="false" />
        <Field name="qry_paper_id" title="试卷或课件编号" type="String" maxlen="32" notnull="false" />
        <Field name="qry_paper_name" title="试卷或课件名" type="String" maxlen="120" notnull="false" />
        <Field name="qry_userid" title="教师ID" type="String" maxlen="32" notnull="false" gen="session.userid" />
        <Field name="qry_begin_date" title="开始时间" type="Timestamp" notnull="false" />
        <Field name="qry_end_date" title="截止时间" type="Timestamp" notnull="false" />
        <Field name="qry_send_id" title="发送ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_status" title="状态" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="获取试卷(课件)信息含附件" colacc="" log="" webservice="" name="getPaperInfo">
      <Request>
        <Field name="paper_id" title="问卷ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="" base="List" desc="获取组卷规则" accredit="" log="" webservice="" name="getPaperChooseRule">
      <Query basesql="select * from learn_choose_rule t1 where t1.valid='Y'">
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" refname="t1.paper_id" op="=" />
      </Query>
    </Action>
    <Action base="List" old="" desc="获取浏览记录" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="" name="getReadJL">
      <Query basesql="SELECT t2.*, t1.username FROM sell_read_log t2,pcmc_user t1 WHERE t1.userid = t2.userid " orderby="create_date desc">
        <Field name="qry_paper_id" title="试卷ID" type="String" refname="paper_info_id" op="=" />
      </Query>
    </Action>
    <Action base="List" old="" desc="获取留言记录" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="" name="getCommentJL">
      <Query basesql="select (select classnm from base_class where classid = t1.classid)as classname,t1.* from learn_comment t1 where valid = 'Y' " orderby="create_date desc">
        <Field name="qry_paper_id" title="试卷ID" type="String" refname="paper_id" op="=" />
      </Query>
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="获取未浏览学生" rowacc="" log="" oauth="" name="getNoReadStu">
      <Request>
        <Field name="qry_paper_id" title="试卷ID" type="String" />
        <Field name="resend" title="是否发送" type="String" />
      </Request>
    </Action>
  </Operation>
  <Operation id="LearningGroup" bean="cn.com.bright.yuexue.teach.LearningGroup" desc="学习小组管理">
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="Insert" desc="增加小组" colacc="" log="" webservice="" name="addLearnGroup">
      <Table name="learn_group" />
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="Update" desc="修改小组" colacc="" log="" webservice="" name="updateLearnGroup">
      <Request>
        <Field name="group_id" title="group_id" type="String" maxlen="32" notnull="true" pk="false" />
        <Field name="classid" title="classid" type="String" maxlen="32" pk="false" />
        <Field name="group_subject" title="讨论主题" type="String" maxlen="60" pk="false" />
        <Field name="group_name" title="小组名称" type="String" maxlen="60" pk="false" />
        <Field name="grouping_type" title="分组方式" type="String" maxlen="32" pk="false" />
        <Field name="group_status" title="小组状态" type="String" maxlen="32" pk="false" />
        <Field name="group_result" title="小组结果" type="String" maxlen="1000" pk="false" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" pk="false" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" pk="false" gen="datetime" />
      </Request>
      <Table name="learn_group" />
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="Update" desc="删除小组" colacc="" log="" webservice="" name="deleteLearnGroup">
      <Request>
        <Field name="group_id" title="试卷附件ID" type="String" maxlen="32" notnull="true" />
        <Field name="valid" title="有效" type="String" maxlen="2" defaultval="N" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" gen="datetime" />
      </Request>
      <Table name="learn_group" />
      <Message>
        <Msg code="00105">删除成功</Msg>
      </Message>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="修改小组成员" colacc="" log="" webservice="" name="saveGroupMember">
      <Request>
        <Field name="member_id" title="member_id" type="String" maxlen="32" pk="false" />
        <Field name="group_id" title="group_id" type="String" maxlen="32" pk="false" />
        <Field name="userid" title="学生ID" type="String" maxlen="32" pk="false" />
        <Field name="group_manager" title="组长" type="String" maxlen="1" pk="false" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" pk="false" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" pk="false" gen="datetime" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="Update" desc="删除小组成员" colacc="" log="" webservice="" name="deleteGroupMember">
      <Request>
        <Field name="member_id" title="试卷附件ID" type="String" maxlen="32" notnull="true" />
        <Field name="valid" title="有效" type="String" maxlen="2" defaultval="N" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" gen="datetime" />
      </Request>
      <Table name="learn_group_member" />
      <Message>
        <Msg code="00105">删除成功</Msg>
      </Message>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="获取分组信息" log="" nologin="" oauth="true" name="getGroupMember">
      <Request>
        <Field name="userid" title="教师ID" type="String" maxlen="40" notnull="false" gen="session.userid" />
        <Field name="classid" title="班级ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="获取未分组学生" rowacc="" log="" oauth="true" name="getNoGroupStudent">
      <Request>
        <Field name="classid" title="班级ID" type="String" maxlen="40" notnull="true" />
        <Field name="userid" title="教师ID" type="String" maxlen="40" notnull="false" gen="session.userid" />
      </Request>
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="执行分组" rowacc="" log="" oauth="true" name="genGroupMemebr">
      <Request>
        <Field name="group_count" title="分组数量" type="long" maxlen="2" notnull="true" />
        <Field name="classid" title="班级ID" type="String" maxlen="40" notnull="true" />
        <Field name="grouping_type" title="分组方式" type="String" maxlen="40" notnull="true" />
        <Field name="group_subject" title="主题" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action accredit="" nologin="" base="List" colacc="" webservice="" old="" desc="获取学生信息" rowacc="" log="" oauth="true" name="getAllStudent">
      <Query basesql="select t2.userid,t1.studentno,t2.username,t2.portrait,t2.gender from base_studentinfo t1,pcmc_user t2 where t1.state='1' and t1.userid=t2.userid" orderby="t1.studentno">
        <Field name="classid" title="班级ID" type="String" maxlen="40" notnull="true" refname="t1.classid" op="=" />
      </Query>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="获取小组成员列表" accredit="" log="" webservice="" name="getGroupMemeberList">
      <Request>
        <Field name="qry_group_id" title="组ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="取班级所有学生" rowacc="" log="" oauth="true" name="getClassAllStudent">
      <Request>
        <Field name="classid" title="班级ID" type="String" maxlen="40" notnull="true" />
        <Field name="userid" title="教师ID" type="String" maxlen="40" notnull="false" gen="session.userid" />
        <Field name="qry_text" title="查询条件" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
  </Operation>
  <Operation id="PaperSender" bean="cn.com.bright.yuexue.teach.PaperSender" desc="试卷(课件)发送">
    <Action accredit="" log="" base="" colacc="" webservice="" old="" desc="新增发送" rowacc="" nologin="" oauth="true" name="addPaperSend">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="receiver_names" title="接收人" type="String" maxlen="400" notnull="true" />
        <Field name="receiver_ids" title="接收对象ID" type="String" maxlen="1000" notnull="true" />
        <Field name="send_content" title="作业要求" type="String" maxlen="400" notnull="false" />
        <Field name="is_delayed" title="定时发送" type="String" maxlen="1" notnull="false" defaultval="N" />
        <Field name="send_time" title="发送时间" type="Timestamp" notnull="false" />
        <Field name="complete_time" title="完成时间" type="Timestamp" notnull="false" />
        <Field name="show_result" title="答题后显示答案" type="String" maxlen="1" notnull="false" defaultval="N" />
      </Request>
    </Action>
    <Action base="" old="" desc="发送试卷" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="sendPaper">
      <Request>
        <Field name="send_id" title="发送ID" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action base="" old="" desc="重发试卷(课件)" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="resendPaper">
      <Request>
        <Field name="send_id" title="发送ID" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="取接收对象" rowacc="" log="" oauth="true" name="getReceiver">
      <Request>
        <Field name="pid" title="父对象ID" type="String" maxlen="40" defaultval="-1" />
        <Field name="searchText" title="检索内容" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="取接收对象" rowacc="" log="" oauth="true" name="getReceiverMOOC">
      <Request>
        <Field name="pid" title="父对象ID" type="String" maxlen="40" defaultval="-1" />
        <Field name="searchText" title="检索内容" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="List" desc="获取试卷发送信息" colacc="" nologin="" webservice="" name="getPaperSend">
      <Query basesql="select * from learn_paper_send t1 where t1.valid='Y'" orderby="t1.create_date desc">
        <Field name="qry_paper_id" title="发送ID" type="String" maxlen="40" notnull="true" refname="t1.paper_id" op="=" />
        <Field name="qry_userid" title="用户ID" type="String" maxlen="40" notnull="false" gen="session.userid" refname="t1.userid" op="=" />
      </Query>
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="撤销发送" rowacc="" log="" oauth="true" name="revokeSendPaper">
      <Request>
        <Field name="send_id" title="发送ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="Update" desc="设置是否显示答案" colacc="" nologin="" webservice="" name="setShowResult">
      <Request>
        <Field name="send_id" title="发送ID" type="String" maxlen="40" notnull="true" />
        <Field name="show_result" title="显示答案" type="String" maxlen="1" notnull="true" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" notnull="false" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" notnull="false" gen="datetime" />
      </Request>
      <Table name="learn_paper_send" />
      <Message>
        <Msg code="00105">发送成功</Msg>
      </Message>
    </Action>
    <Action base="" old="" desc="获取已发送的班级" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="getSendPaperLog">
      <Request>
        <Field name="qry_paperid" title="课件id" type="String" maxlen="40" />
      </Request>
    </Action>
  </Operation>
  <Operation id="Learning" bean="cn.com.bright.yuexue.student.Learning" desc="在线学习">
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="获取试卷题目" log="" nologin="" oauth="true" name="getPaperPraxes">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="my_examination_id" title="作业ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="获取试卷题目" log="" nologin="" oauth="true" name="getPaperPraxesWocr">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="my_examination_id" title="作业ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="我的试卷(课件)" colacc="" nologin="" webservice="" name="getMyExamPaper">
      <Request>
        <Field name="qry_userid" title="用户ID" type="String" maxlen="40" notnull="false" gen="session.userid" />
        <Field name="qry_courseid" title="课程ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_status" title="试卷状态" type="String" maxlen="40" notnull="false" />
        <Field name="qry_paper_name" title="试卷名称" type="String" maxlen="40" notnull="false" />
        <Field name="qry_begin_date" title="开始时间" type="Timestamp" notnull="false" />
        <Field name="qry_end_date" title="截止时间" type="Timestamp" notnull="false" />
        <Field name="qry_resource_type" title="资源类型" type="String" maxlen="40" notnull="false" />
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_grade_code" title="年级代码" type="String" maxlen="40" notnull="false" />
        <Field name="qry_condition" title="条件" type="String" maxlen="120" notnull="false" />
        <Field name="qry_paperid" title="试卷(课件)ID" type="String" maxlen="32" notnull="false" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="我的错题库(题目)" colacc="" nologin="" webservice="" name="getMyExamError">
      <Request>
        <Field name="qry_userid" title="用户ID" type="String" maxlen="40" notnull="false" gen="session.userid" />
        <Field name="qry_courseid" title="课程ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_status" title="试卷状态" type="String" maxlen="40" notnull="false" />
        <Field name="qry_paper_name" title="试卷名称" type="String" maxlen="40" notnull="false" />
        <Field name="qry_begin_date" title="开始时间" type="Timestamp" notnull="false" />
        <Field name="qry_end_date" title="截止时间" type="Timestamp" notnull="false" />
        <Field name="qry_resource_type" title="资源类型" type="String" maxlen="40" notnull="false" />
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_grade_code" title="年级代码" type="String" maxlen="40" notnull="false" />
        <Field name="qry_condition" title="条件" type="String" maxlen="120" notnull="false" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="我的试卷(课件)" colacc="" nologin="" webservice="" name="getMyExamPaperWocr">
      <Request>
        <Field name="qry_userid" title="用户ID" type="String" maxlen="40" notnull="false" gen="session.userid" />
        <Field name="qry_courseid" title="课程ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_status" title="试卷状态" type="String" maxlen="40" notnull="false" />
        <Field name="qry_paper_name" title="试卷名称" type="String" maxlen="40" notnull="false" />
        <Field name="qry_begin_date" title="开始时间" type="Timestamp" notnull="false" />
        <Field name="qry_end_date" title="截止时间" type="Timestamp" notnull="false" />
        <Field name="qry_resource_type" title="资源类型" type="String" maxlen="40" notnull="false" />
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_grade_code" title="年级代码" type="String" maxlen="40" notnull="false" />
        <Field name="qry_deptid" title="学校id" type="String" maxlen="40" />
        <Field name="qry_condition" title="条件" type="String" maxlen="120" notnull="false" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="新增我的试卷" colacc="" nologin="" webservice="" name="addMyExamPaper">
      <Request>
        <Field name="paper_id" title="试卷id" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="我的课件" colacc="" nologin="" webservice="" name="getMyPaperCourse">
      <Request>
        <Field name="qry_userid" title="用户ID" type="String" maxlen="40" notnull="false" gen="session.userid" />
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_resource_type" title="类型" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action log="" colacc="" old="" rowacc="" oauth="true" base="" desc="所有的课件" accredit="" nologin="true" webservice="" name="getAllExamPaper">
      <Request>
        <Field name="qry_courseid" title="课程ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_paper_name" title="课件名称" type="String" maxlen="40" notnull="false" />
        <Field name="qry_resource_type" title="资源类型" type="String" maxlen="40" notnull="false" />
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_subjectid" title="课程" type="String" maxlen="40" notnull="false" />
        <Field name="qry_grade_code" title="年级代码" type="String" maxlen="40" notnull="false" />
        <Field name="qry_begin_date" title="上传开始日期" type="Timestamp" notnull="false" />
        <Field name="qry_end_date" title="上传结束时间" type="Timestamp" notnull="false" />
        <Field name="qry_author" title="上传者" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action accredit="" log="" base="" colacc="" webservice="" old="" desc="我的课件" rowacc="" nologin="true" oauth="true" name="getPaperCourseWocr">
      <Request>
        <Field name="qry_userid" title="用户ID" type="String" maxlen="40" notnull="false" gen="session.userid" />
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_resource_type" title="类型" type="String" maxlen="40" notnull="false" />
        <Field name="qry_deptid" title="学校id" type="String" maxlen="40" notnull="false" />
        <Field name="qry_teacher_id" title="教师ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_resourceType" title="区分类型" type="String" maxlen="40" notnull="false" />
        <Field name="qry_condition" title="条件" type="String" maxlen="120" notnull="false" />
        <Field name="qry_conditionweixin" title="条件(微信端)" type="String" maxlen="120" notnull="false" />
        <Field name="qry_paperid" title="试卷(课件)ID" type="String" maxlen="32" notnull="false" />
      </Request>
    </Action>
    <Action accredit="" log="" base="" colacc="" webservice="" old="" desc="接收试卷" rowacc="" nologin="" oauth="true" name="receiveExamPaper">
      <Request>
        <Field name="my_examination_id" title="作业ID" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="开始答卷" accredit="" log="" webservice="" name="startExamPaper">
      <Request>
        <Field name="my_examination_id" title="作业ID" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action log="" colacc="" old="" rowacc="" oauth="true" base="" desc="保存答题结果" accredit="" nologin="" webservice="" name="saveExamResult">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" />
        <Field name="classid" title="班级ID" type="String" maxlen="40" />
        <Field name="my_examination_id" title="作业ID" type="String" maxlen="40" />
        <Field name="result_id" title="结果ID" type="String" maxlen="40" />
        <Field name="paper_praxes_id" title="试题ID" type="String" maxlen="40" />
        <Field name="praxes_result" title="答题结果" type="String" maxlen="1000" />
        <Field name="consuming_time" title="耗时" type="long" maxlen="1000" />
        <Field name="draft_attachment" title="草稿附件" type="file" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="提交答题结果" log="true" nologin="" oauth="true" name="submitExamResult">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" />
        <Field name="classid" title="班级ID" type="String" maxlen="40" />
        <Field name="my_examination_id" title="作业ID" type="String" maxlen="40" />
        <Field name="result_id" title="结果ID" type="String" maxlen="40" />
        <Field name="paper_praxes_id" title="试题ID" type="String" maxlen="40" />
        <Field name="praxes_result" title="答题结果" type="String" maxlen="1000" />
        <Field name="draft_attachment" title="草稿附件" type="file" />
      </Request>
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="取试卷信息(含附件)" rowacc="" log="" oauth="true" name="getPaperInfo">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="my_examination_id" title="作业ID" type="String" maxlen="40" notnull="true" />
        <Field name="attachment_type" title="附件类型" type="String" maxlen="10" />
      </Request>
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="取试卷信息(含附件)" rowacc="" log="" oauth="true" name="getPaperInfoWocr">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="my_examination_id" title="作业ID" type="String" maxlen="40" notnull="true" />
        <Field name="attachment_type" title="附件类型" type="String" maxlen="10" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="关闭作业页面" accredit="" log="" webservice="" name="leaveMyExamPaper">
      <Request>
        <Field name="my_examination_id" title="作业ID" type="String" maxlen="40" />
        <Field name="consuming_time" title="作答时间" type="String" maxlen="5" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="List" desc="取学科教材" colacc="" nologin="" webservice="" name="getSubjectBook">
      <Query basesql="select t3.classid,t1.subjectid,t1.coursenm,t1.courseid,t8.attachment_id,t8.file_type,t8.file_path,t8.access_path,(select sm.userid from base_teacher_subject sm where t3.classid = sm.classid and t3.deptid = sm.deptid and t1.subjectid = sm.subjectid and sm.state &gt;'0' limit 1) as teacher_id,(select st.group_id from learn_group st,learn_group_member sd,base_teacher_subject sn where sd.group_id = st.group_id and sd.userid = t3.userid and sd.valid = 'Y' and st.userid = sn.userid and st.classid = sn.classid and st.valid = 'Y' and t3.classid = sn.classid and t3.deptid = sn.deptid and t1.subjectid = sn.subjectid and sn.state &gt;'0' limit 1) as group_id,(select count(*) from learn_my_examination tt1,learn_examination_paper tt2 where tt1.paper_id = tt2.paper_id and tt1.userid = t4.userid and tt2.subject_id = t1.subjectid and tt2.grade_code = t1.gradecode and tt1.status='10' and tt1.valid = 'Y' and tt2.valid = 'Y') as init_count  from base_course t1 ,base_class t2,base_studentinfo t3,pcmc_user t4,pcmc_user_dept t5 ,base_subject t6,base_book_attachment t7 ,learn_attachment t8 where t1.gradecode = t2.gradecode and t2.classid = t3.classid and t3.userid = t4.userid and t4.userid = t5.userid and t1.deptid = t5.deptid and t1.state &gt; '0' and t1.subject_book_id=t7.subject_book_id and t7.attachment_id = t8.attachment_id and t1.subjectid = t6.subjectid and t3.state&gt;'0'" orderby="t6.subjcode">
        <Field name="qryuserid" title="用户ID" type="String" maxlen="40" gen="session.userid" refname="t3.userid" op="=" />
      </Query>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="重做试卷" colacc="" log="" webservice="" name="redoExamPaper">
      <Request>
        <Field name="my_examination_id" title="作业ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="true" oauth="" base="" desc="获取课件推荐列表" colacc="" log="" webservice="" name="getRecommendList">
      <Request>
        <Field name="qry_grade_code" title="年级" type="String" pk="false" />
        <Field name="qry_paper_name" title="作品名称" type="String" pk="false" />
        <Field name="qry_subjectid" title="学科" type="String" pk="false" />
        <Field name="create_by" title="建立人" type="String" maxlen="40" pk="false" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="保存课件推荐" log="" nologin="" oauth="" name="saveRecommended">
      <Request>
        <Field name="recommended_id" title="主键" type="String" maxlen="32" notnull="true" pk="true" gen="uuid" />
        <Field name="paper_id" title="课件编号" type="String" maxlen="32" notnull="true" pk="false" />
        <Field name="cover_path_file" title="封面图片路径" type="file" maxlen="100" pk="false" />
        <Field name="cover_color" title="背景颜色" type="String" maxlen="100" pk="false" />
        <Field name="orderidx" title="显示顺序" type="String" maxlen="5" pk="false" />
        <Field name="create_by" title="建立人" type="String" maxlen="40" pk="false" gen="session.userid" />
        <Field name="create_date" title="建立时间" type="Timestamp" pk="false" gen="sysdate" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="" base="Update" desc="删除推荐的课件" accredit="" log="" webservice="" name="delRecommended">
      <Request>
        <Field name="recommended_id" title="主键" type="String" maxlen="32" notnull="true" pk="true" gen="uuid" />
        <Field name="valid" title="是否推荐" type="String" maxlen="1" pk="false" />
      </Request>
      <Table name="learn_examination_recommend" />
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="" base="" desc="修改推荐的课件" colacc="" log="" webservice="" name="updateRecommended">
      <Request>
        <Field name="recommended_id" title="主键" type="String" maxlen="32" notnull="true" pk="true" />
        <Field name="paper_id" title="课件编号" type="String" maxlen="32" notnull="true" pk="false" />
        <Field name="cover_path_file" title="封面图片路径" type="file" maxlen="100" pk="false" />
        <Field name="cover_color" title="背景颜色" type="String" maxlen="100" pk="false" />
        <Field name="orderidx" title="显示顺序" type="String" maxlen="5" pk="false" />
        <Field name="valid" title="是否推荐" type="String" maxlen="1" pk="false" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" pk="false" gen="session.userid" />
        <Field name="modify_date" title="修改时间" type="Timestamp" pk="false" gen="sysdate" />
        <Field name="remark" title="备注" type="String" maxlen="400" pk="false" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="我的试卷(时间)" colacc="" log="" webservice="" name="getMyExamPaperInfo">
      <Request>
        <Field name="my_examination_id" title="我的试卷ID" type="String" maxlen="40" />
      </Request>
    </Action>
  </Operation>
  <Operation id="Comment" bean="cn.com.bright.yuexue.contact.Comment" desc="留言管理">
    <Action log="" colacc="" old="" rowacc="" oauth="true" base="" desc="检索留言" accredit="" nologin="true" webservice="" name="queryComment">
      <Request>
        <Field name="qry_userid" title="用户ID" type="String" maxlen="40" />
        <Field name="qry_classid" title="班级ID" type="String" maxlen="40" />
        <Field name="qry_group_id" title="组ID" type="String" maxlen="40" />
        <Field name="qry_paper_id" title="试卷ID" type="String" maxlen="40" />
        <Field name="qry_begin_date" title="开始时间" type="Timestamp" />
        <Field name="qry_end_date" title="截止时间" type="Timestamp" />
        <Field name="qry_comment" title="内容" type="String" />
        <Field name="qry_attachment_id" title="教材附件ID" type="String" maxlen="40" />
        <Field name="qry_send_id" title="发送ID" type="String" maxlen="40" />
        <Field name="qry_show_top" title="置顶" type="String" maxlen="1" />
        <Field name="qry_show_group" title="分组显示" type="String" maxlen="1" />
        <Field name="qry_paper_praxes_id" title="试题ID" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="增加留言" colacc="" nologin="" webservice="" name="addComment">
      <Request>
        <Field name="classid" title="班级ID" type="String" maxlen="40" notnull="false" />
        <Field name="group_id" title="组ID" type="String" maxlen="40" notnull="false" />
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="false" />
        <Field name="comment" title="留言内容" type="String" maxlen="1000" notnull="false" />
        <Field name="receive_id" title="接收人ID" type="String" maxlen="40" notnull="false" />
        <Field name="attachment" title="附件" type="file" notnull="false" />
        <Field name="attachment_id" title="附件ID" type="String" maxlen="40" notnull="false" />
        <Field name="send_id" title="发送ID" type="String" maxlen="40" notnull="false" />
        <Field name="p_comment_id" title="父消息ID" type="String" maxlen="40" notnull="false" />
        <Field name="paper_praxes_id" title="试题ID" type="String" maxlen="40" notnull="false" />
        <Field name="my_examination_id" title="任务ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action base="Update" old="" desc="删除留言" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="deleteComment">
      <Request>
        <Field name="comment_id" title="留言ID" type="String" notnull="true" />
        <Field name="valid" title="有效" type="String" defaultval="N" />
        <Field name="modify_by" title="修改人" type="String" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="String" gen="datetime" />
      </Request>
      <Table name="learn_comment" />
    </Action>
    <Action accredit="" log="" base="" colacc="" webservice="" old="" desc="获取任教群组列表" rowacc="" nologin="" oauth="true" name="getCommentMenuInfo">
      <Request>
        <Field name="flag" title="操作标识" type="String" notnull="true" />
      </Request>
    </Action>
    <Action base="" old="" desc="取我的消息组" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="getMyCommentGroup">
      <Request>
        <Field name="qry_begin_date" title="开始时间" type="Timestamp" notnull="false" />
        <Field name="qry_end_date" title="截止时间" type="Timestamp" notnull="false" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="Update" desc="设置留言置顶" colacc="" log="" webservice="" name="setCommentTop">
      <Request>
        <Field name="comment_id" title="主键" type="String" maxlen="40" />
        <Field name="show_top" title="置顶" type="String" maxlen="1" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" gen="datetime" />
      </Request>
      <Table name="learn_comment" />
    </Action>
    <Action base="" old="" desc="留言点赞" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="praiseComment">
      <Request>
        <Field name="comment_id" title="留言ID" type="String" maxlen="40" />
      </Request>
    </Action>
  </Operation>
  <Operation id="ExamResult" bean="cn.com.bright.yuexue.teach.ExamResult" desc="试卷结果">
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="List" desc="查询作业状态" colacc="" nologin="" webservice="" name="QueryExamStatus">
      <Query basesql="select t1.my_examination_id,t1.paper_id, t1.userid,t2.username,t2.portrait,t1.status,t1.arrived_time,t1.receive_time,round(t1.consuming_time/60,2) as consume_time,t1.begin_time,t1.end_time,t1.paper_score,t3.resource_type,t3.choose_type,t1.random_paper_id from learn_my_examination t1,pcmc_user t2,learn_examination_paper t3,base_studentinfo t4 where t1.valid='Y' and t1.userid=t2.userid and t1.paper_id=t3.paper_id and t2.userid=t4.userid" orderby="t4.studentno">
        <Field name="qry_send_id" title="发送ID" type="String" maxlen="40" refname="t1.send_id" op="=" />
        <Field name="qry_classid" title="班级ID" type="String" maxlen="40" refname="t4.classid" op="=" />
        <Field name="qry_status" title="作业状态" type="String" maxlen="40" refname="t1.status" op="&gt;=" />
        <Field name="qry_not_status" title="作业状态" type="String" maxlen="40" refname="t1.status" op="&lt;" />
      </Query>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="获取试题结果" colacc="" log="" webservice="" name="getPaperPraxesResult">
      <Request>
        <Field name="qry_paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="qry_send_id" title="发送ID" type="String" maxlen="40" notnull="true" />
        <Field name="qry_classid" title="班级ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_group_id" title="组ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_paper_praxes_id" title="试题ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="获取试题结果" colacc="" log="" webservice="" name="getPaperPraxesResultMOOC">
      <Request>
        <Field name="qry_paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="qry_send_id" title="发送ID" type="String" maxlen="40" notnull="true" />
        <Field name="qry_classid" title="班级ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_group_id" title="组ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_paper_praxes_id" title="试题ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="获取试题结果" colacc="" log="" webservice="" name="getPaperPraxesResultWocr">
      <Request>
        <Field name="qry_paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="qry_paper_praxes_id" title="试题ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="取待批改试题" accredit="" log="" webservice="" name="getPendingPraxes">
      <Request>
        <Field name="qry_send_id" title="发送ID" type="String" maxlen="40" notnull="true" />
        <Field name="qry_classid" title="班级ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_group_id" title="组ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_type" title="查询类型" type="String" maxlen="1" notnull="false" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="取待批改试题" accredit="" log="" webservice="" name="getPendingPraxesWocr">
      <Request>
        <Field name="qry_paper_id" title="课件ID" type="String" maxlen="40" notnull="true" />
        <Field name="qry_type" title="查询类型" type="String" maxlen="1" notnull="false" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="保存批改结果" accredit="" log="" webservice="" name="savaCorrectResult">
      <Request>
        <Field name="result_id" title="结果ID" type="String" maxlen="40" notnull="true" />
        <Field name="score" title="分数" type="double" maxlen="6" notnull="true" />
        <Field name="send_id" title="发送批次ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="保存批改结果" accredit="" log="" webservice="" name="savaCorrectResultWocr">
      <Request>
        <Field name="result_id" title="结果ID" type="String" maxlen="40" notnull="true" />
        <Field name="score" title="分数" type="double" maxlen="6" notnull="true" />
        <Field name="paper_id" title="发送批次ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="获取学生作业结果" log="" nologin="" oauth="true" name="getStuPraxesResult">
      <Request>
        <Field name="my_examination_id" title="任务ID" type="String" maxlen="40" notnull="true" />
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="paper_praxes_id" title="试题ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="获取学生作业结果" log="" nologin="" oauth="true" name="getStuPraxesResultWocr">
      <Request>
        <Field name="my_examination_id" title="任务ID" type="String" maxlen="40" notnull="true" />
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="paper_praxes_id" title="试题ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="List" desc="获取学生列表" colacc="" nologin="" webservice="" name="getStudentNameList">
      <Query basesql="select t4.username,t1.result_id,t1.paper_praxes_id,t1.my_examination_id,t2.send_id,t1.paper_id,t1.userid,t4.portrait,t1.is_right,t1.score from learn_examination_result t1,learn_my_examination t2,base_studentinfo t3,pcmc_user t4 where t1.my_examination_id=t2.my_examination_id and t1.userid=t3.userid and t1.userid=t4.userid" orderby="t1.userid">
        <Field name="qry_send_id" title="发送ID" type="String" maxlen="40" notnull="true" refname="t2.send_id" op="=" />
        <Field name="qry_class_id" title="班级ID" type="String" maxlen="40" notnull="true" refname="t3.classid" op="=" />
        <Field name="qry_result" title="结果" type="String" maxlen="2" notnull="false" refname="t1.is_right" op="=" />
        <Field name="qry_option_id" title="选项ID" type="String" maxlen="40" notnull="false" refname="t1.praxes_result" op="%%" />
        <Field name="qry_paper_praxes_id" title="试题ID" type="String" maxlen="40" notnull="true" refname="t1.paper_praxes_id" op="=" />
      </Query>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="取班级分组作业结果" accredit="" log="" webservice="" name="getClassPaperResult">
      <Request>
        <Field name="classid" title="班级ID" type="String" maxlen="40" notnull="false" />
        <Field name="sendid" title="发送ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="取班级作业结果" accredit="" log="" webservice="" name="getClassPaperResultMOOC">
      <Request>
        <Field name="classid" title="班级ID" type="String" maxlen="40" notnull="false" />
        <Field name="sendid" title="发送ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="取作业结果" accredit="" log="" webservice="" name="getPaperResultWocr">
      <Request>
        <Field name="paperid" title="课件ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action accredit="" log="" base="" colacc="" webservice="" old="" desc="取试题结果" rowacc="" nologin="" oauth="true" name="getExamResult">
      <Request>
        <Field name="qry_classid" title="班级ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_paper_id" title="试卷ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_send_id" title="发送ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_status" title="任务状态" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="保存批改信息" colacc="" nologin="" webservice="" name="saveCorrectDraf">
      <Request>
        <Field name="result_id" title="结果ID" type="String" maxlen="40" notnull="false" />
        <Field name="draft_attachment" title="批改留痕图片" type="file" notnull="false" />
        <Field name="my_examination_id" title="作业任务ID" type="String" maxlen="40" notnull="false" />
        <Field name="paper_praxes_id" title="试题ID" type="String" maxlen="40" notnull="false" />
        <Field name="show_top" title="标记" type="String" maxlen="10" notnull="false" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="List" desc="取批改留痕" colacc="" log="" webservice="" name="getCorrectDraf">
      <Query basesql="select * from learn_examination_result t1 where t1.valid='Y'" orderby="t1.create_date desc">
        <Field name="result_id" title="作业ID" type="String" maxlen="40" notnull="false" refname="t1.result_id" op="=" />
        <Field name="my_examination_id" title="作业任务ID" type="String" maxlen="40" notnull="false" refname="t1.my_examination_id" op="=" />
        <Field name="paper_praxes_id" title="试题ID" type="String" maxlen="40" notnull="false" refname="t1.paper_praxes_id" op="=" />
      </Query>
    </Action>
  </Operation>
  <Operation bean="cn.com.bright.yuexue.teach.Attachment" id="Attachment" desc="附件管理">
    <Action accredit="" nologin="true" base="" colacc="" webservice="" old="" desc="获取附件内容" rowacc="" log="" oauth="true" name="getContent">
      <Request>
        <Field name="attachment_id" title="附件ID" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="保存附件内容" log="" nologin="" oauth="true" name="saveContent">
      <Request>
        <Field name="attachment_id" title="附件ID" type="String" maxlen="40" />
        <Field name="attachment_content" title="附件内容" type="String" maxlen="300000" />
      </Request>
    </Action>
    <Action base="List" old="" desc="取附件信息" accredit="" colacc="" rowacc="" log="" nologin="true" webservice="" oauth="" name="getOneAttachInfo">
      <Query basesql="select * from learn_attachment t1 where 1=1">
        <Field name="qry_attachment_id" title="附件ID" type="String" maxlen="40" pk="true" refname="t1.attachment_id" op="=" />
      </Query>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="获取资源包" colacc="" log="" webservice="" name="getResource">
      <Request>
        <Field name="resource_id" title="资源包id" type="String" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="添加资源包" colacc="" nologin="" webservice="" name="saveResource">
      <Request>
        <Field name="resource_id" title="id" type="String" maxlen="32" />
        <Field name="subject_id" title="年级科目" type="String" maxlen="32" />
        <Field name="class_info" title="简介" type="String" maxlen="1000" />
        <Field name="class_pic" title="图片" type="String" maxlen="255" />
        <Field name="resource_name" title="名称" type="String" maxlen="600" />
        <Field name="class_counts" title="课节数" type="double" />
        <Field name="class_price" title="价格" type="double" />
        <Field name="cover_attachment" title="封面" type="file" />
      </Request>
    </Action>
    <Action accredit="" nologin="true" base="" colacc="" webservice="" old="" desc="根据用户id获取资源包列表" rowacc="" log="" oauth="" name="getResourceByUserid">
      <Request>
        <Field name="userid" title="用户编号" type="String" maxlen="32" />
        <Field name="PageNo" title="页码" type="String" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="根据用户获取资源包列表" log="" nologin="true" oauth="true" name="getResourceByUser">
      <Request>
        <Field name="userid" title="用户编号" type="String" maxlen="32" />
        <Field name="user_id" title="当前用户编号" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action base="" old="" desc="修改资源包信息" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="updateResource">
      <Request>
        <Field name="resource_id" title="资源包id" type="String" maxlen="32" />
        <Field name="resource_name" title="资源包名称" type="String" maxlen="100" />
        <Field name="subject_id" title="年级科目" type="String" maxlen="32" />
        <Field name="class_info" title="简介" type="String" maxlen="200" />
        <Field name="class_counts" title="课节数" type="double" />
        <Field name="class_price" title="价格" type="double" />
        <Field name="class_pic" title="图片" type="file" />
        <Field name="modify_by" title="修改人" type="String" maxlen="32" />
      </Request>
    </Action>
    <Action base="" old="" desc="获取资源包里的课件" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="getRsAttachInfo">
      <Request>
        <Field name="resource_id" title="资源包id" type="String" maxlen="32" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="学生购买资源包" accredit="" log="" webservice="" name="addMyResource">
      <Request>
        <Field name="resource_id" title="资源包ID" type="String" maxlen="40" />
        <Field name="class_price" title="资源包价格" type="String" maxlen="40" />
      </Request>
    </Action>
    &gt;&gt;&gt;&gt;&gt;&gt;&gt; .r50
    <Action accredit="" log="" base="List" colacc="" webservice="" old="" desc="取未入库的资源" rowacc="" nologin="true" oauth="true" name="getNoResourceAtta">
      <Query basesql="SELECT t1.grade_code,t1.subject_id,t1.folder_id,t1.paper_name,t1.paper_id,t2.attachment_id,t2.file_name,t2.file_size,t2.file_type,t2.file_path,t2.video_time,t2.access_path,t2.cover_path,t2.watch_scale,t2.watch_count, t2.watch_again_count,t2.avg_score,t2.upload_time FROM learn_paper_attachment t3,learn_attachment t2 ,learn_examination_paper t1  WHERE t3.paper_id = t1.paper_id AND t3.attachment_id = t2.attachment_id AND t1.resource_id = '' AND t1.valid='Y' AND t2.valid='Y' AND t3.valid='Y'">
        <Field name="user_id" title="名师ID" type="String" maxlen="40" refname="t1.user_id" op="=" />
        <Field name="resource_type" title="资源类型" type="String" maxlen="40" refname="t1.resource_type" op="=" />
      </Query>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="List" desc="取学生购买的资源包" colacc="" nologin="" webservice="" name="getStuResource">
      <Query basesql="select t2.class_price,t2.user_id,t1.class_pic,t1.resource_id,t1.resource_name,t1.subject_id,t1.class_info,t1.class_counts,t1.watch_count  from learn_resource t1,learn_my_resource t2 where t1.resource_id=t2.resource_id  and t1.valid='Y' and t2.valid='Y'">
        <Field name="user_id" title="用户ID" type="String" maxlen="40" gen="session.userid" refname="t2.user_id" op="=" />
        <Field name="resource_id" title="资源包ID" type="String" maxlen="40" refname="t2.resource_id" op="=" />
      </Query>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="删除资源包" colacc="" log="" webservice="" name="delResource">
      <Request>
        <Field name="resource_id" title="资源包id" type="String" />
        <Field name="status" title="状态" type="String" />
      </Request>
    </Action>
    <Action base="" old="" desc="获取购买资源包记录" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="getBuyRsLog">
      <Request>
        <Field name="resource_id" title="资源包id" type="String" maxlen="32" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="获取用户上传的附件" colacc="" log="" webservice="" name="getAttachmentByusierId">
      <Request>
        <Field name="open_id" type="String" maxlen="50" />
      </Request>
    </Action>
    <Action base="" old="" desc="添加附件" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="addAttachment" />
  </Operation>
  <Operation bean="cn.com.bright.yuexue.student.Book" id="Book" desc="书本阅读管理">
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="Insert" desc="增加书本" colacc="" log="" webservice="" name="addMyBook">
      <Table name="learn_my_book" />
    </Action>
    <Action accredit="" nologin="" base="Update" colacc="" webservice="" old="" desc="删除书本" rowacc="" log="" oauth="true" name="deleteMyBook">
      <Request>
        <Field name="my_book_id" title="主键" type="String" maxlen="40" />
        <Field name="valid" title="有效" type="String" maxlen="1" defaultval="N" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" gen="datetime" />
      </Request>
      <Table name="learn_my_book" />
      <Message>
        <Msg code="00105">删除成功!</Msg>
      </Message>
    </Action>
    <Action log="" colacc="" old="" rowacc="" oauth="true" base="" desc="保存书本阅读记录" accredit="" nologin="" webservice="" name="saveBookRead">
      <Request>
        <Field name="read_page" title="页码" type="long" maxlen="6" notnull="true" />
        <Field name="attachment_id" title="书本附件ID" type="String" maxlen="40" notnull="true" />
        <Field name="leave_book" title="离开书本" type="String" maxlen="6" notnull="false" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="List" desc="获取我读到的页码" accredit="" log="" webservice="" name="getMyBookRead">
      <Query basesql="select * from learn_book_read t1 where 1=1">
        <Field name="attachment_id" title="书本ID" type="String" maxlen="40" notnull="true" refname="t1.attachment_id" op="=" />
        <Field name="userid" title="用户ID" type="String" gen="session.userid" refname="t1.userid" op="=" />
      </Query>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="获取书本教师注释" colacc="" nologin="" webservice="" name="getBookComment">
      <Request>
        <Field name="attachment_id" title="书本附件ID" type="String" maxlen="40" notnull="true" />
        <Field name="page_num" title="页码" type="long" maxlen="6" notnull="true" />
        <Field name="subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="保存书本注释" accredit="" log="" webservice="" name="saveBookComment">
      <Request>
        <Field name="comment" title="注释内容" type="String" maxlen="4000" notnull="false" />
        <Field name="book_comment_id" title="主键" type="String" maxlen="40" notnull="false" />
        <Field name="attach_page_num" title="页码" type="long" maxlen="6" notnull="false" />
        <Field name="attachment_id" title="书本附件ID" type="String" maxlen="40" notnull="false" />
        <Field name="draft_attachment" title="手写批注附件" type="file" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="List" accredit="" webservice="" old="" desc="取我书架上的书本" log="" nologin="" oauth="true" name="getMyBookshelfBook">
      <Query basesql="select t1.my_book_id,t3.subject_book_id,t3.folder_id,t3.book_type,t7.read_page,ifnull(t7.modify_date,t7.create_date) as read_time,TIMESTAMPDIFF(day,ifnull(t7.modify_date,t7.create_date),now()) as read_interval_day,t5.subjectid,t5.subjname,t4.grade_code,getParamDesc ('c_grade', t4.grade_code) AS grade_name,t3.userid as teacher_id,t6.classid,(select count(sm.my_examination_id) from learn_my_examination sm,learn_examination_paper sn where sm.paper_id=sn.paper_id and sm.userid=t1.userid and sn.subject_id=t5.subjectid and sn.grade_code=t4.grade_code and sm.valid='Y' and sm.status&lt;'50') as paper_count,(select st.group_id from learn_group_member st,learn_group sd where st.userid=t1.userid and st.group_id=sd.group_id and sd.userid=t3.userid and st.valid='Y' and sd.valid='Y' limit 0,1) as group_id,t2.*  from learn_my_book t1 left join base_studentinfo t6 on t6.state&gt;'0' and t1.userid=t6.userid LEFT JOIN learn_book_read t7 on t7.attachment_id=t1.attachment_id and t7.userid=t1.userid,learn_attachment t2,base_book_attachment t3,base_subject_book t4,base_subject t5 WHERE t1.attachment_id = t2.attachment_id AND t1.book_attachment_id=t3.book_attachment_id AND t3.subject_book_id = t4.subject_book_id AND t4.subjectid = t5.subjectid AND t1.valid = 'Y'" orderby="read_time desc">
        <Field name="userid" title="用户ID" type="String" maxlen="40" gen="session.userid" refname="t1.userid" op="=" />
        <Field name="qry_book_type" title="书本类型" type="String" maxlen="40" refname="t3.book_type" op="=" />
        <Field name="qry_subjname" title="学科名称" type="String" maxlen="40" refname="t5.subjname" op="%%" />
        <Field name="qry_grade_code" title="年级" type="String" maxlen="40" refname="t4.grade_code" op="=" />
        <Field name="qry_file_name" title="书本名称" type="String" maxlen="40" refname="t2.file_name" op="%%" />
      </Query>
    </Action>
    <Action base="" old="" desc="推荐书本" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="recommendBook">
      <Request>
        <Field name="book_attachment_id" title="书本附件ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="上传书本" log="" nologin="" oauth="" name="uploadBook">
      <Request>
        <Field name="book_type" title="书本类型" type="String" maxlen="40" notnull="false" />
        <Field name="subject_book_id" title="学科教材ID" type="String" maxlen="40" notnull="false" />
        <Field name="book_attachment" title="教材附件" type="file" notnull="true" />
        <Field name="attachment_id" title="附件ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="List" desc="检索书本" colacc="" nologin="" webservice="" name="queryBook">
      <Query basesql="select t1.book_attachment_id,t5.username as teacher_name,t1.book_type,getParamDesc('c_book_type',t1.book_type) as book_type_desc,t1.subject_book_id,t4.subjectid,t4.subjname,t3.grade_code,getParamDesc('c_grade',t3.grade_code) as grade_name,(select count(st.book_attachment_id) from base_book_attachment st where st.userid=t6.userid and st.attachment_id=t2.attachment_id)as my_recommend_count,(select count(sd.my_book_id) from learn_my_book sd where sd.userid=t6.userid and sd.attachment_id=t1.attachment_id) as my_download_count,(select count(st.book_attachment_id) from base_book_attachment st where st.userid&lt;&gt;t5.userid and st.attachment_id=t2.attachment_id)as other_recommend_count,(select count(sd.my_book_id) from learn_my_book sd where sd.userid&lt;&gt;t5.userid and sd.attachment_id=t1.attachment_id) as other_download_count,t2.* from base_book_attachment t1,learn_attachment t2,base_subject_book t3,base_subject t4,pcmc_user t5,pcmc_user t6 where t1.attachment_id=t2.attachment_id and t1.userid=t2.userid and t1.subject_book_id=t3.subject_book_id and t3.subjectid=t4.subjectid and t1.userid=t5.userid and t1.valid='Y'" orderby="t1.create_date desc">
        <Field name="qry_subjname" title="学科" type="String" maxlen="40" notnull="false" refname="t4.subjname" op="%%" />
        <Field name="qry_grade" title="年级" type="String" maxlen="40" notnull="false" refname="t3.grade_code" op="=" />
        <Field name="qry_teacher_name" title="上传教师" type="String" maxlen="40" notnull="false" refname="t5.username" op="%%" />
        <Field name="qry_book_type" title="书本类型" type="String" maxlen="40" notnull="false" refname="t1.book_type" op="=" />
        <Field name="qry_book_name" title="书本名称" type="String" maxlen="40" notnull="false" refname="t2.file_name" op="%%" />
        <Field name="userid" title="用户ID" type="String" maxlen="40" notnull="false" gen="session.userid" refname="t6.userid" op="=" />
      </Query>
    </Action>
    <Action log="" colacc="" old="" rowacc="" oauth="true" base="List" desc="取教师推荐的书本" accredit="" nologin="" webservice="" name="getRecommendBook">
      <Query basesql="SELECT t1.book_attachment_id,t5.username as teacher_name,getParamDesc('c_book_type',t1.book_type) as book_type,t1.subject_book_id,t4.subjname,getParamDesc('c_grade',t3.grade_code) as grade_name,(select count(st.book_attachment_id) from base_book_attachment st where st.userid=t6.userid and st.attachment_id=t2.attachment_id)as my_recommend_count,(select count(sd.my_book_id) from learn_my_book sd where sd.userid=t6.userid and sd.attachment_id=t1.attachment_id) as my_download_count,(select count(st.book_attachment_id) from base_book_attachment st where st.userid&lt;&gt;t5.userid and st.attachment_id=t2.attachment_id)as other_recommend_count,(select count(sd.my_book_id) from learn_my_book sd where sd.userid&lt;&gt;t5.userid and sd.attachment_id=t1.attachment_id) as other_download_count,t2.* FROM base_book_attachment t1,learn_attachment t2,base_subject_book t3,base_subject t4,pcmc_user t5,base_studentinfo t6 WHERE t1.attachment_id=t2.attachment_id and t1.userid=t2.userid and t1.subject_book_id=t3.subject_book_id and t3.subjectid=t4.subjectid and t1.userid=t5.userid and t1.valid='Y'and exists (select null from base_teacher_subject t7,base_book_attachment t8 where t6.classid = t7.classid AND t7.state &gt; 0 AND t7.userid = t8.userid AND t8.attachment_id=t2.attachment_id and t7.subjectid=t3.subjectid and t7.classid=t6.classid)  and t6.state&gt;'0'" orderby="t1.create_date desc">
        <Field name="qry_subjname" title="学科" type="String" maxlen="40" notnull="false" refname="t4.subjname" op="%%" />
        <Field name="qry_grade" title="年级" type="String" maxlen="40" notnull="false" refname="t3.grade_code" op="=" />
        <Field name="qry_teacher_name" title="上传教师" type="String" maxlen="40" notnull="false" refname="t5.username" op="%%" />
        <Field name="qry_book_type" title="书本类型" type="String" maxlen="40" notnull="false" refname="t1.book_type" op="=" />
        <Field name="qry_book_name" title="书本名称" type="String" maxlen="40" notnull="false" refname="t2.file_name" op="%%" />
        <Field name="userid" title="用户ID" type="String" maxlen="40" notnull="false" gen="session.userid" refname="t6.userid" op="=" />
      </Query>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="Delete" desc="删除批注附件" colacc="" log="" webservice="" name="deleteCommAttach">
      <Table name="learn_book_comment_attachment" />
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="Delete" desc="删除批注试卷" colacc="" log="" webservice="" name="deleteCommPaper">
      <Table name="learn_book_paper" />
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="" base="" desc="增加批注试卷" accredit="" log="" webservice="" name="addCommPaper">
      <Request>
        <Field name="book_comment_id" title="书本批注ID" type="String" maxlen="40" notnull="true" />
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="true" />
        <Field name="receiver_names" title="接收者" type="String" maxlen="400" notnull="true" />
        <Field name="receiver_ids" title="接受者ID" type="String" maxlen="2000" notnull="true" />
      </Request>
    </Action>
    <Action log="" colacc="" old="" rowacc="" oauth="true" base="List" desc="取书本批注" accredit="" nologin="" webservice="" name="getBookAnnotate">
      <Query basesql="select t1.book_annotate_id,t1.attach_page_num,t2.* from learn_book_annotate t1,learn_attachment t2 where t1.valid='Y' and t1.annotate_attachment_id=t2.attachment_id" orderby="t2.create_date desc">
        <Field name="qry_attachment_id" title="书本附件ID" type="String" maxlen="40" notnull="true" refname="t1.attachment_id" op="=" />
        <Field name="qry_page_num" title="页码" type="long" maxlen="6" notnull="false" refname="t1.attach_page_num" op="=" />
        <Field name="qry_userid" title="用户ID" type="String" maxlen="40" notnull="false" gen="session.userid" refname="t1.userid" op="=" />
      </Query>
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="保存书本批注" rowacc="" log="" oauth="true" name="saveBookAnnotate">
      <Request>
        <Field name="attachment_id" title="书本附件ID" type="String" maxlen="40" notnull="true" />
        <Field name="attach_page_num" title="书本页码" type="long" maxlen="6" notnull="true" />
        <Field name="draft_attachment" title="批注附件" type="file" notnull="true" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="分享批注信息" colacc="" log="" webservice="" name="shareBookAnnotate">
      <Request>
        <Field name="book_annotate_id" title="批注ID" type="String" maxlen="40" notnull="true" />
        <Field name="share_type" title="分享类型" type="String" maxlen="40" notnull="true" />
        <Field name="share_object_id" title="分享对象ID" type="String" maxlen="40" notnull="true" />
        <Field name="share_comment" title="分享内容" type="String" maxlen="400" notnull="false" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="List" desc="根据页码取书本章节" colacc="" nologin="" webservice="" name="getBookFolder">
      <Query basesql="select t1.*,(select count(sm.folder_id) from base_book_folder sm where sm.valid='Y' and sm.parent_folder_id=t1.folder_id) as child_count from base_book_folder t1 where t1.valid='Y'" orderby="t1.begin_page_num,t1.end_page_num,t1.parent_folder_id,t1.display_order">
        <Field name="qry_subject_book_id" title="学科教材ID" type="String" maxlen="40" notnull="true" refname="t1.subject_book_id" op="=" />
        <Field name="qry_folder_id" title="根目录" type="String" maxlen="40" notnull="false" refname="t1.folder_code" op="*%" />
        <Field name="qry_page_num" title="页码" type="long" maxlen="11" notnull="false" refname="t1.begin_page_num" op="&lt;=" />
      </Query>
    </Action>
  </Operation>
  <Operation bean="cn.com.bright.yuexue.student.PadControl" id="PadControl" desc="平板电脑控制">
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="取学生pad状态" accredit="" log="" webservice="" name="getPadStatus">
      <Request>
        <Field name="classid" title="班级ID" type="String" maxlen="40" notnull="false" />
        <Field name="stu_user_id" title="学生用户ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action base="" old="" desc="Pad锁屏" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="" name="lockPad">
      <Request>
        <Field name="stu_user_id" title="学生用户ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
    <Action base="" old="" desc="Pad解锁" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="" name="unlockPad">
      <Request>
        <Field name="stu_user_id" title="学生用户ID" type="String" maxlen="40" notnull="true" />
      </Request>
    </Action>
  </Operation>
  <Operation id="Problem" bean="cn.com.bright.yuexue.teach.PraxesManager" desc="题库管理">
    <Action log="" colacc="" old="" rowacc="" oauth="true" base="" desc="新增试题(含选项)" accredit="" nologin="" webservice="" name="addPraxes">
      <Request>
        <Field name="subject_id" title="学科" type="String" maxlen="32" pk="false" />
        <Field name="grade_code" title="年级" type="long" maxlen="3" pk="false" />
        <Field name="k_point_id" title="知识点" type="String" maxlen="32" pk="false" />
        <Field name="praxes_type" title="类型" type="String" maxlen="32" pk="false" />
        <Field name="praxes_content" title="内容" type="String" maxlen="10000" pk="false" />
        <Field name="difficulty_level" title="难度系数" type="double" maxlen="5" pk="false" />
        <Field name="score" title="分数" type="long" maxlen="5" pk="false" />
        <Field name="share_level" title="共享范围" type="long" maxlen="5" pk="false" />
        <Field name="right_result" title="正确答案(判断题和选择题)" type="String" maxlen="300" pk="false" />
        <Field name="praxes_hint" title="解题思路" type="String" maxlen="10000" pk="false" />
        <Field name="display_order" title="显示顺序" type="long" maxlen="5" pk="false" />
        <Field name="option_content" title="选项内容" type="String" maxlen="10000" pk="false" />
        <Field name="is_right" title="正确答案" type="long" maxlen="5" pk="false" />
      </Request>
    </Action>
    <Action accredit="" log="" base="" colacc="" webservice="" old="" desc="获取试题蓝的试题" rowacc="" nologin="" oauth="true" name="getPaperPraxes">
      <Request>
        <Field name="subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="grade_code" title="年级代码" type="String" maxlen="40" notnull="false" />
        <Field name="folder_id" title="章节ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="生成试卷" log="true" nologin="" oauth="true" name="savePaper">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="false" />
        <Field name="subject_id" title="学科" type="String" maxlen="40" pk="false" />
        <Field name="grade_code" title="年级" type="String" maxlen="40" pk="false" />
        <Field name="folder_id" title="章节" type="long" maxlen="40" pk="false" />
        <Field name="resource_type" title="类型" type="String" maxlen="32" pk="false" />
        <Field name="paper_name" title="试卷(课件)名称" type="String" maxlen="100" pk="false" />
        <Field name="choose_type" title="组卷方式" type="String" maxlen="32" pk="false" />
        <Field name="promoted_quantity" title="晋际试题数量" type="String" maxlen="6" pk="false" defaultval="0" />
        <Field name="limit_times" title="答题时间(分钟)" type="long" maxlen="5" pk="false" defaultval="0" />
        <Field name="qualified_score" title="及格分数" type="long" maxlen="5" pk="false" />
        <Field name="share_level" title="共享范围" type="long" maxlen="5" pk="false" defaultval="90" />
        <Field name="remark" title="规则" type="String" maxlen="200" pk="false" />
        <Field name="praxes_id" title="试题ID" type="String" maxlen="40" notnull="true" />
        <Field name="praxes_score" title="试题分值" type="String" maxlen="40" notnull="true" />
        <Field name="display_order" title="显示顺序" type="String" maxlen="40" notnull="true" />
        <Field name="paper_praxes_id" title="试卷题目ID" type="String" maxlen="40" notnull="false" />
        <Field name="attachment_id" title="附件ID" type="String" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="清空试题" accredit="" log="" webservice="" name="clearSelectPraxes">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="false" />
        <Field name="praxes_type" title="试题类型" type="String" maxlen="2" notnull="false" />
      </Request>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="移出试题蓝" accredit="" log="" webservice="" name="delSelectPraxes">
      <Request>
        <Field name="praxes_id" title="试题ID" type="String" maxlen="40" notnull="true" />
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action base="" old="" desc="取试题数量" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="getSelectPraxesCount">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="false" />
        <Field name="subjectid" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="gradecode" title="年级代码" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="加入试题篮" log="" nologin="" oauth="true" name="addPraxes2Select">
      <Request>
        <Field name="praxes_id" title="试题ID" type="String" maxlen="40" notnull="true" />
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action base="" old="" desc="试题分布统计" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="getPraxesStat">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="false" />
        <Field name="subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="grade_code" title="年级代码" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
  </Operation>
  <Operation id="Video" bean="cn.com.bright.yuexue.video.Video" desc="视频信息管理">
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="增加视频观看日志" log="" nologin="true" oauth="true" name="addVideoLog">
      <Request>
        <Field name="attachment_id" title="附件ID" type="String" maxlen="100" />
      </Request>
    </Action>
    <Action accredit="" log="" base="Update" colacc="" webservice="" old="" desc="更新视频观看日志" rowacc="" nologin="true" oauth="true" name="updateVideoLog">
      <Request>
        <Field name="log_id" title="log_id" type="String" maxlen="100" notnull="true" />
        <Field name="end_time" title="结束时间" type="Timestamp" gen="datetime" />
        <Field name="modify_by" title="修改人" type="String" maxlen="100" notnull="true" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" notnull="true" gen="datetime" />
        <Field name="play_time" title="播放时长" type="String" maxlen="100" />
      </Request>
      <Table name="learn_attachment_log" />
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="Insert" desc="增加视频评分" accredit="" log="" webservice="" name="addScoreLog">
      <Table name="learn_attachment_score" />
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="Update" desc="更新视频评分" accredit="" log="" webservice="" name="updateScoreLog">
      <Request>
        <Field name="score_id" title="score_id" type="String" maxlen="100" notnull="true" />
        <Field name="score" title="评分" type="String" maxlen="100" notnull="true" />
        <Field name="modify_by" title="修改人" type="String" maxlen="100" notnull="true" gen="session.username" />
        <Field name="modify_time" title="修改时间" type="Timestamp" notnull="true" gen="datetime" />
      </Request>
      <Table name="learn_attachment_score" />
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="查询学生的视频课件" log="" nologin="true" oauth="true" name="queryStudVideo">
      <Request>
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_resource_type" title="资源类型" type="String" maxlen="40" notnull="false" />
        <Field name="qry_paper_id" title="paper_id" type="String" maxlen="100" notnull="false" />
      </Request>
    </Action>
    <Action nologin="true" colacc="" old="" rowacc="" oauth="true" base="" desc="不登录状态下查询视频课件" accredit="" log="" webservice="" name="queryNotLoginVideo">
      <Request>
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_resource_type" title="资源类型" type="String" maxlen="40" notnull="false" />
        <Field name="qry_paper_id" title="paper_id" type="String" maxlen="100" notnull="false" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="查询老师的视频课件" colacc="" nologin="true" webservice="" name="queryTechVideo">
      <Request>
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_resource_type" title="资源类型" type="String" maxlen="40" notnull="false" />
        <Field name="qry_subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_all" title="教师视频课件查询类型" type="String" maxlen="10" notnull="false" />
        <Field name="qry_paper_id" title="课件ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_paper_name" title="课件名称" type="String" maxlen="100" notnull="false" />
        <Field name="open_id" title="微信id" type="String" maxlen="100" />
        <Field name="remark" title="作业内容" type="String" maxlen="1000" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="" accredit="" webservice="" old="" desc="视频课件上传" log="true" nologin="" oauth="true" name="uploadVideoList">
      <Request>
        <Field name="folder_id" title="章节ID" type="String" maxlen="40" />
        <Field name="subject_id" title="学科ID" type="String" maxlen="40" />
        <Field name="grade_code" title="年级代码" type="long" maxlen="10" />
        <Field name="video_attachment" title="视频附件" type="file" />
        <Field name="paper_name" title="试卷(课件)名称" type="String" maxlen="600" />
        <Field name="share_level" title="共享范围" type="long" maxlen="10" />
        <Field name="cover_attachment" title="封面" type="file" />
        <Field name="resource_type" title="资源类型" type="String" />
        <Field name="resource_id" title="资源包" type="String" maxlen="32" />
        <Field name="cover_path" title="默认封面" type="String" />
        <Field name="attachment_id" title="附件id" type="String" maxlen="40" />
        <Field name="gsname" title="年级和学科" type="String" maxlen="40" />
        <Field name="remark" title="作业内容" type="String" maxlen="1000" />
      </Request>
    </Action>
    <Action colacc="" rowacc="" base="List" accredit="" webservice="" old="" desc="查询用户的视频评分" log="" nologin="" oauth="true" name="getUserVideoScore">
      <Query basesql="select * from learn_attachment_score las">
        <Field name="qry_userid" title="用户ID" type="String" notnull="false" gen="session.userid" refname="las.userid" op="=" />
        <Field name="qry_attachment_id" title="附件ID" type="String" refname="las.attachment_id" op="=" />
      </Query>
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="更改共享范围" rowacc="" log="" oauth="true" name="updaeShareVideo">
      <Request>
        <Field name="paper_id" title="ID" type="String" />
        <Field name="share_level" title="共享范围" type="String" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="删除课件的资源包" colacc="" log="" webservice="" name="delVideoRes">
      <Request>
        <Field name="paper_id" title="试卷id" type="String" />
      </Request>
    </Action>
    <Action log="" colacc="" old="" rowacc="" oauth="true" base="" desc="编辑课件" accredit="" nologin="" webservice="" name="updateVideoInfo">
      <Request>
        <Field name="paper_id" title="id" type="String" maxlen="32" />
        <Field name="resource_id" title="资源包" type="String" maxlen="32" />
        <Field name="paper_name" title="名称" type="String" maxlen="600" />
        <Field name="cover_attachment" title="封面" type="file" />
        <Field name="cover_path" title="路径" type="String" maxlen="225" />
        <Field name="remark" title="作业内容" type="String" maxlen="1000" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="Update" desc="视频点赞" colacc="" log="" webservice="" name="addVideodz">
      <Request>
        <Field name="read_log_id" title="read_log_id" type="String" maxlen="32" />
        <Field name="praise" title="是否点赞" type="String" />
      </Request>
      <Table name="sell_read_log" />
    </Action>
    <Action accredit="" nologin="" base="" colacc="" webservice="" old="" desc="查询是否点赞" rowacc="" log="" oauth="true" name="queryVideoByUser">
      <Request>
        <Field name="paper_id" title="附件" type="String" maxlen="32" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="List" desc="根据资源ID取附件" colacc="" nologin="true" webservice="" name="getPaperAttachment">
      <Query basesql="select t1.*,t2.create_by as createby,t3.paper_id,t3.paper_name,t3.subject_id,t3.cover_path as coverpath,t3.resource_type,t5.subjname,t4.gradename from learn_attachment t1,learn_paper_attachment t2,learn_examination_paper t3,base_grade t4,base_subject t5 where t2.valid='Y' and t1.valid='Y' and t3.valid='Y' and t1.attachment_id=t2.attachment_id and t3.paper_id= t2.paper_id and t5.subjectid= t3.subject_id and t4.gradecode = t3.grade_code" orderby="t1.create_date desc">
        <Field name="paper_id" type="String" maxlen="40" notnull="true" refname="t2.paper_id" />
      </Query>
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="" desc="取消点赞" accredit="" log="" webservice="" name="updateVideodz">
      <Request>
        <Field name="userid" type="String" maxlen="32" notnull="true" />
        <Field name="praise" type="String" maxlen="1" />
        <Field name="paper_id" type="String" maxlen="40" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="" desc="微信端老师查询课件" colacc="" log="" webservice="" name="queryTechWeixinVideo">
      <Request>
        <Field name="openId" title="微信id" type="String" maxlen="100" />
        <Field name="qry_folder_id" title="章节ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_resource_type" title="资源类型" type="String" maxlen="40" notnull="false" />
        <Field name="qry_subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_all" title="教师视频课件查询类型" type="String" maxlen="10" notnull="false" />
        <Field name="qry_paper_id" title="课件ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_paper_name" title="课件名称" type="String" maxlen="100" notnull="false" />
      </Request>
    </Action>
  </Operation>
  <Operation id="WisdomSource" bean="cn.com.bright.yuexue.student.WisdomSource" desc="智慧源">
    <Action nologin="" colacc="" old="" rowacc="" oauth="true" base="List" desc="取未完成的资源" accredit="" log="" webservice="" name="getUnfinishedPaper">
      <Query basesql="select substr(t1.resource_type,1,2) as resource_type,count(t2.my_examination_id) as paper_count from learn_examination_paper t1,learn_my_examination t2 where t2.valid='Y' and t1.valid='Y' and t1.paper_id=t2.paper_id" orderby="resource_type" groupby="substr(t1.resource_type, 1, 2)">
        <Field name="qry_userid" title="用户ID" type="String" maxlen="40" notnull="false" gen="session.userid" refname="t2.userid" op="=" />
        <Field name="qry_not_status" title="排除状态" type="String" maxlen="40" notnull="false" refname="t2.status" op="&lt;&gt;" />
        <Field name="qry_status" title="状态" type="String" maxlen="40" notnull="false" refname="t2.status" op="=" />
        <Field name="qry_resource_type" title="资源类型" type="String" maxlen="40" notnull="false" refname="t1.resource_type" op="*%" />
      </Query>
    </Action>
    <Action log="" colacc="" old="" rowacc="" oauth="true" base="" desc="增加任务单回答" accredit="" nologin="" webservice="" name="addTaskReply">
      <Request>
        <Field name="praxes_result" title="回答结果" type="String" maxlen="1000" notnull="false" />
        <Field name="classid" title="班级ID" type="String" maxlen="40" notnull="false" />
        <Field name="paper_id" title="试卷ID" type="String" maxlen="40" notnull="false" />
        <Field name="send_id" title="发送ID" type="String" maxlen="40" notnull="false" />
        <Field name="my_examination_id" title="任务ID" type="String" maxlen="40" notnull="false" />
        <Field name="paper_praxes_id" title="试题ID" type="String" maxlen="40" notnull="false" />
        <Field name="attachment" title="附件" type="file" notnull="false" />
        <Field name="submit_flag" title="提交标记" type="String" maxlen="1" notnull="false" />
        <Field name="commnet" title="回答结果" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action rowacc="" accredit="" old="" log="" oauth="true" base="" desc="保存对作业结果的批改附件" colacc="" nologin="" webservice="" name="saveResultCorrect">
      <Request>
        <Field name="result_id" title="作业结果" type="String" maxlen="40" notnull="true" />
        <Field name="draft_attachment" title="附件" type="file" notnull="true" />
        <Field name="correct_id" title="批改附件ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="List" desc="取作业结果批改附件" colacc="" log="" webservice="" name="getResultCorrect">
      <Query basesql="select t1.correct_id,t1.result_id,t2.attachment_id,t2.upload_time,t2.file_path from learn_exam_result_correct t1,learn_attachment t2 where t1.attachment_id=t2.attachment_id and t1.valid='Y'">
        <Field name="qry_result_id" title="作业结果ID" type="String" maxlen="40" notnull="true" refname="t1.result_id" op="=" />
      </Query>
    </Action>
    <Action base="" old="" desc="保存任务单" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="saveTaskPaper">
      <Request>
        <Field name="paper_id" title="任务单ID" type="String" maxlen="40" notnull="false" />
        <Field name="subject_id" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="grade_code" title="年级代码" type="String" maxlen="40" notnull="false" />
        <Field name="folder_id" title="教材章节ID" type="String" maxlen="40" notnull="false" />
        <Field name="share_level" title="共享范围" type="String" maxlen="40" notnull="false" />
        <Field name="paper_name" title="任务单名称" type="String" maxlen="200" notnull="false" />
        <Field name="cover_path" title="封面图片路径" type="String" maxlen="200" notnull="false" />
        <Field name="cover_attachment" title="封面图片附件" type="file" notnull="false" />
        <Field name="resource_type" title="任务单类型" type="String" maxlen="40" notnull="false" />
        <Field name="paper_praxes_id" title="题目ID" type="String" maxlen="40" notnull="false" />
        <Field name="praxes_type" title="题目类型" type="String" maxlen="40" notnull="false" />
        <Field name="praxes_content" title="题目内容" type="String" maxlen="4000" notnull="false" />
        <Field name="option_count" title="选项数量" type="String" maxlen="4" notnull="false" />
        <Field name="attachment_id" title="附件ID" type="String" notnull="false" />
      </Request>
    </Action>
  </Operation>
  <Operation id="HomeWork" bean="cn.com.bright.yuexue.teach.HomeWork" desc="作业单管理">
    <Action base="" old="" desc="取作业单列表" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="getHomeWork">
      <Request>
        <Field name="qry_classid" title="班级ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_subjectid" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="qry_begin_date" title="开始时间" type="Timestamp" notnull="false" />
        <Field name="qry_end_date" title="截止时间" type="Timestamp" notnull="false" />
      </Request>
    </Action>
    <Action base="" old="" desc="保存作业单" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="true" name="saveHomeWork">
      <Request>
        <Field name="classid" title="班级ID" type="String" maxlen="40" notnull="false" />
        <Field name="subjectid" title="学科ID" type="String" maxlen="40" notnull="false" />
        <Field name="homework_content" title="作业单内容" type="String" maxlen="400" notnull="false" />
        <Field name="homework_id" title="作业ID" type="String" maxlen="40" notnull="false" />
      </Request>
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="true" base="Update" desc="删除作业单" colacc="" log="" webservice="" name="deleteHomeWork">
      <Request>
        <Field name="homework_id" title="作业单ID" type="String" maxlen="40" notnull="true" />
        <Field name="valid" title="有效" type="String" maxlen="1" notnull="false" defaultval="N" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" notnull="false" gen="session.username" />
        <Field name="modify_date" title="修改时间" type="Timestamp" notnull="false" gen="datetime" />
      </Request>
      <Table name="learn_homework" />
    </Action>
    <Action old="" accredit="" rowacc="" nologin="" oauth="" base="" desc="" colacc="" log="" webservice="" name="addTaskPraxes">
      <Request>
        <Field name="paper_praxes_id" title="主键" type="String" maxlen="32" notnull="true" pk="true" gen="uuid" />
        <Field name="paper_id" title="试卷ID" type="String" maxlen="32" pk="false" />
        <Field name="display_order" title="顺序" type="long" maxlen="5" pk="false" />
        <Field name="praxes_id" title="praxes_id" type="String" maxlen="32" pk="false" />
        <Field name="subject_id" title="学科" type="String" maxlen="32" pk="false" />
        <Field name="grade_code" title="年级" type="String" maxlen="3" pk="false" />
        <Field name="k_point_id" title="知识点" type="String" maxlen="32" pk="false" />
        <Field name="praxes_type" title="类型" type="String" maxlen="32" pk="false" />
        <Field name="praxes_content" title="内容" type="String" maxlen="10000" pk="false" />
        <Field name="discrimination" title="区分度" type="double" maxlen="3" pk="false" />
        <Field name="difficulty_level" title="难度系数" type="double" maxlen="3" pk="false" />
        <Field name="score" title="分数" type="double" maxlen="6" pk="false" />
        <Field name="deptcode" title="所在学校" type="String" maxlen="32" pk="false" gen="session.deptcode" />
        <Field name="userid" title="教师ID" type="String" maxlen="32" pk="false" />
        <Field name="valid" title="有效" type="String" maxlen="1" pk="false" />
        <Field name="create_by" title="建立人" type="String" maxlen="40" pk="false" gen="session.username" />
        <Field name="create_date" title="建立时间" type="Timestamp" pk="false" gen="datetime" />
        <Field name="modify_by" title="修改人" type="String" maxlen="40" pk="false" />
        <Field name="modify_date" title="修改时间" type="Timestamp" pk="false" />
        <Field name="share_level" title="共享范围" type="String" maxlen="32" pk="false" />
      </Request>
    </Action>
  </Operation>
  <Operation id="Template" bean="cn.com.bright.yuexue.teach.Attachment" desc="微信模板管理">
    <Action nologin="" colacc="" old="" rowacc="" oauth="" base="Insert" desc="新增模板库" accredit="" log="" webservice="" name="add_message_template">
      <Request>
        <Field name="template_id" title="模板ID" type="String" maxlen="40" notnull="true" pk="true" gen="uuid" />
        <Field name="template_id_short" title="模板编号" type="String" maxlen="100" pk="false" />
        <Field name="template_name" title="模块库名称" type="String" maxlen="200" pk="false" />
        <Field name="template_sample" title="模板库样本" type="String" maxlen="2000" pk="false" />
        <Field name="template_code" title="模板类型编号" type="String" maxlen="10" pk="false" />
      </Request>
      <Table name="busi_winxin_message_template" />
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="" base="List" desc="查询模板库" accredit="" log="" webservice="" name="query_message_template">
      <Query basesql="select * from busi_winxin_message_template where 1=1">
        <Field name="queryName" title="模板名" type="String" refname="template_name" op="%%" />
      </Query>
      <Table name="busi_winxin_message_template" />
    </Action>
    <Action nologin="" colacc="" old="" rowacc="" oauth="" base="List" desc="查询发送消息" accredit="" log="" webservice="" name="query_message_record">
      <Query basesql="select * from (select (select tt2.deptname from pcmc_user_dept tt1,pcmc_dept tt2 where tt1.deptid = tt2.deptid and tt1.userid = t1.send_user_id) as deptname, (select tt1.username from pcmc_user tt1 where tt1.userid = t1.send_user_id) as username , (select classnm from base_winxin_user tt1,pcmc_user tt2 ,base_studentinfo tt3 ,base_class tt4 where tt1.usercode = tt2.usercode and tt2.userid = tt3.userid and tt4.classid = tt3.classid and tt1.valid = 'Y' and tt3.valid = 'Y' and tt1.winxincode = t1.touser) as rclassname, (select username from base_winxin_user tt1,pcmc_user tt2 where tt1.usercode = tt2.usercode and tt1.winxincode = t1.touser) as rusername, t1.*,t2.template_name  from busi_winxin_message_record t1,busi_winxin_message_template t2  where t1.template_id = t2.template_id ) tab where 1=1 ">
        <Field name="query_deptname" title="部门名称" type="String" refname="tab.deptname" op="%%" />
      </Query>
      <Table name="busi_winxin_message_record" />
    </Action>
    <Action colacc="" rowacc="" base="Update" accredit="" webservice="" old="" desc="修改模板库" log="" nologin="" oauth="" name="update_message_template">
      <Request>
        <Field name="template_id" title="模板ID" type="String" maxlen="40" notnull="true" pk="true" />
        <Field name="template_id_short" title="模板编号" type="String" maxlen="100" pk="false" />
        <Field name="template_name" title="模块库名称" type="String" maxlen="200" pk="false" />
        <Field name="template_sample" title="模板库样本" type="String" maxlen="2000" pk="false" />
        <Field name="template_code" title="模板类型编号" type="String" maxlen="10" pk="false" />
      </Request>
      <Table name="busi_winxin_message_template" />
    </Action>
    <Action base="Delete" old="" desc="删除模板库" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="" name="delete_message_template">
      <Request>
        <Field name="template_id" title="模板ID" type="String" maxlen="40" notnull="true" pk="true" />
      </Request>
      <Table name="busi_winxin_message_template" />
    </Action>
  </Operation>
  <Operation id="Forms" bean="cn.com.bright.yuexue.teach.Forms" desc="分析报表">
    <Action old="" accredit="" rowacc="" nologin="" oauth="" base="" desc="获取报表" colacc="" log="" webservice="" name="getFormsInfo">
      <Request>
        <Field name="paper_id" title="试卷ID" type="String" />
        <Field name="classid" title="班级ID" type="String" />
      </Request>
    </Action>
    <Action base="" old="" desc="获取班级" accredit="" colacc="" rowacc="" log="" nologin="" webservice="" oauth="" name="getTeachClass">
      <Request>
        <Field name="paperid" title="试卷ID" type="String" />
      </Request>
    </Action>
  </Operation>
</Config>

